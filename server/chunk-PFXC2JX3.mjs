import './polyfills.server.mjs';
import{A as zd,D as Gd,a as ra,b as Nd,c as zu,d as Md,e as Td,f as Sd,g as Ro,h as Pd,i as na,p as Dd,r as Ld,s as kd,t as Od,w as Ed}from"./chunk-PTYGUNTA.mjs";import{e as V,f as bd,g as Me,h as on,i as i0}from"./chunk-R3TAX4SW.mjs";var jo,qu,Wo,ya,$u,vg,ln,gn,Ig,tc,Ag,yg,ec,rc,nc,Cg,xg,Ca,ic,wg,xe=V(()=>{"use strict";jo="1.13.6",qu=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},Wo=Array.prototype,ya=Object.prototype,$u=typeof Symbol<"u"?Symbol.prototype:null,vg=Wo.push,ln=Wo.slice,gn=ya.toString,Ig=ya.hasOwnProperty,tc=typeof ArrayBuffer<"u",Ag=typeof DataView<"u",yg=Array.isArray,ec=Object.keys,rc=Object.create,nc=tc&&ArrayBuffer.isView,Cg=isNaN,xg=isFinite,Ca=!{toString:null}.propertyIsEnumerable("toString"),ic=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],wg=Math.pow(2,53)-1});function ce(t,e){return e=e==null?t.length-1:+e,function(){for(var r=Math.max(arguments.length-e,0),n=Array(r),i=0;i<r;i++)n[i]=arguments[i+e];switch(e){case 0:return t.call(this,n);case 1:return t.call(this,arguments[0],n);case 2:return t.call(this,arguments[0],arguments[1],n)}var o=Array(e+1);for(i=0;i<e;i++)o[i]=arguments[i];return o[e]=n,t.apply(this,o)}}var Ar=V(()=>{"use strict"});function Ke(t){var e=typeof t;return e==="function"||e==="object"&&!!t}var Mn=V(()=>{"use strict"});function xa(t){return t===null}var bg=V(()=>{"use strict"});function zi(t){return t===void 0}var oc=V(()=>{"use strict"});function Gi(t){return t===!0||t===!1||gn.call(t)==="[object Boolean]"}var sc=V(()=>{"use strict";xe()});function wa(t){return!!(t&&t.nodeType===1)}var Ng=V(()=>{"use strict"});function ne(t){var e="[object "+t+"]";return function(r){return gn.call(r)===e}}var _e=V(()=>{"use strict";xe()});var ei,ba=V(()=>{"use strict";_e();ei=ne("String")});var Yo,ac=V(()=>{"use strict";_e();Yo=ne("Number")});var lc,Mg=V(()=>{"use strict";_e();lc=ne("Date")});var uc,Tg=V(()=>{"use strict";_e();uc=ne("RegExp")});var cc,Sg=V(()=>{"use strict";_e();cc=ne("Error")});var Uo,fc=V(()=>{"use strict";_e();Uo=ne("Symbol")});var Fo,hc=V(()=>{"use strict";_e();Fo=ne("ArrayBuffer")});var Pg,M0,pe,Sr=V(()=>{"use strict";_e();xe();Pg=ne("Function"),M0=qu.document&&qu.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof M0!="function"&&(Pg=function(t){return typeof t=="function"||!1});pe=Pg});var dc,Dg=V(()=>{"use strict";_e();dc=ne("Object")});var Na,Bi,Ri=V(()=>{"use strict";xe();Dg();Na=Ag&&dc(new DataView(new ArrayBuffer(8))),Bi=typeof Map<"u"&&dc(new Map)});function S0(t){return t!=null&&pe(t.getInt8)&&Fo(t.buffer)}var T0,Tn,Ma=V(()=>{"use strict";_e();Sr();hc();Ri();T0=ne("DataView");Tn=Na?S0:T0});var sr,Sn=V(()=>{"use strict";xe();_e();sr=yg||ne("Array")});function Ve(t,e){return t!=null&&Ig.call(t,e)}var pn=V(()=>{"use strict";xe()});var gc,ri,Ta=V(()=>{"use strict";_e();pn();gc=ne("Arguments");(function(){gc(arguments)||(gc=function(t){return Ve(t,"callee")})})();ri=gc});function Sa(t){return!Uo(t)&&xg(t)&&!isNaN(parseFloat(t))}var Lg=V(()=>{"use strict";xe();fc()});function Zi(t){return Yo(t)&&Cg(t)}var pc=V(()=>{"use strict";xe();ac()});function ji(t){return function(){return t}}var mc=V(()=>{"use strict"});function _o(t){return function(e){var r=t(e);return typeof r=="number"&&r>=0&&r<=wg}}var vc=V(()=>{"use strict";xe()});function Vo(t){return function(e){return e?.[t]}}var Ic=V(()=>{"use strict"});var ni,Pa=V(()=>{"use strict";Ic();ni=Vo("byteLength")});var kg,Og=V(()=>{"use strict";vc();Pa();kg=_o(ni)});function D0(t){return nc?nc(t)&&!Tn(t):kg(t)&&P0.test(gn.call(t))}var P0,Xo,Ac=V(()=>{"use strict";xe();Ma();mc();Og();P0=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;Xo=tc?D0:ji(!1)});var Ie,Pr=V(()=>{"use strict";Ic();Ie=Vo("length")});function L0(t){for(var e={},r=t.length,n=0;n<r;++n)e[t[n]]=!0;return{contains:function(i){return e[i]===!0},push:function(i){return e[i]=!0,t.push(i)}}}function Ho(t,e){e=L0(e);var r=ic.length,n=t.constructor,i=pe(n)&&n.prototype||ya,o="constructor";for(Ve(t,o)&&!e.contains(o)&&e.push(o);r--;)o=ic[r],o in t&&t[o]!==i[o]&&!e.contains(o)&&e.push(o)}var yc=V(()=>{"use strict";xe();Sr();pn()});function Xt(t){if(!Ke(t))return[];if(ec)return ec(t);var e=[];for(var r in t)Ve(t,r)&&e.push(r);return Ca&&Ho(t,e),e}var Re=V(()=>{"use strict";Mn();xe();pn();yc()});function Da(t){if(t==null)return!0;var e=Ie(t);return typeof e=="number"&&(sr(t)||ei(t)||ri(t))?e===0:Ie(Xt(t))===0}var Eg=V(()=>{"use strict";Pr();Sn();ba();Ta();Re()});function Wi(t,e){var r=Xt(e),n=r.length;if(t==null)return!n;for(var i=Object(t),o=0;o<n;o++){var s=r[o];if(e[s]!==i[s]||!(s in i))return!1}return!0}var Cc=V(()=>{"use strict";Re()});function Rt(t){if(t instanceof Rt)return t;if(!(this instanceof Rt))return new Rt(t);this._wrapped=t}var yr=V(()=>{"use strict";xe();Rt.VERSION=jo;Rt.prototype.value=function(){return this._wrapped};Rt.prototype.valueOf=Rt.prototype.toJSON=Rt.prototype.value;Rt.prototype.toString=function(){return String(this._wrapped)}});function La(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,ni(t))}var zg=V(()=>{"use strict";Pa()});function xc(t,e,r,n){if(t===e)return t!==0||1/t===1/e;if(t==null||e==null)return!1;if(t!==t)return e!==e;var i=typeof t;return i!=="function"&&i!=="object"&&typeof e!="object"?!1:Bg(t,e,r,n)}function Bg(t,e,r,n){t instanceof Rt&&(t=t._wrapped),e instanceof Rt&&(e=e._wrapped);var i=gn.call(t);if(i!==gn.call(e))return!1;if(Na&&i=="[object Object]"&&Tn(t)){if(!Tn(e))return!1;i=Gg}switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:+t==0?1/+t===1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return $u.valueOf.call(t)===$u.valueOf.call(e);case"[object ArrayBuffer]":case Gg:return Bg(La(t),La(e),r,n)}var o=i==="[object Array]";if(!o&&Xo(t)){var s=ni(t);if(s!==ni(e))return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;o=!0}if(!o){if(typeof t!="object"||typeof e!="object")return!1;var l=t.constructor,u=e.constructor;if(l!==u&&!(pe(l)&&l instanceof l&&pe(u)&&u instanceof u)&&"constructor"in t&&"constructor"in e)return!1}r=r||[],n=n||[];for(var h=r.length;h--;)if(r[h]===t)return n[h]===e;if(r.push(t),n.push(e),o){if(h=t.length,h!==e.length)return!1;for(;h--;)if(!xc(t[h],e[h],r,n))return!1}else{var d=Xt(t),f;if(h=d.length,Xt(e).length!==h)return!1;for(;h--;)if(f=d[h],!(Ve(e,f)&&xc(t[f],e[f],r,n)))return!1}return r.pop(),n.pop(),!0}function ka(t,e){return xc(t,e)}var Gg,Rg=V(()=>{"use strict";yr();xe();Pa();Ac();Sr();Ri();Ma();Re();pn();zg();Gg="[object DataView]"});function Zr(t){if(!Ke(t))return[];var e=[];for(var r in t)e.push(r);return Ca&&Ho(t,e),e}var Yi=V(()=>{"use strict";Mn();xe();yc()});function Ui(t){var e=Ie(t);return function(r){if(r==null)return!1;var n=Zr(r);if(Ie(n))return!1;for(var i=0;i<e;i++)if(!pe(r[t[i]]))return!1;return t!==Nc||!pe(r[wc])}}var wc,Zg,bc,jg,Wg,Nc,Yg,Oa=V(()=>{"use strict";Pr();Sr();Yi();wc="forEach",Zg="has",bc=["clear","delete"],jg=["get",Zg,"set"],Wg=bc.concat(wc,jg),Nc=bc.concat(jg),Yg=["add"].concat(bc,wc,Zg)});var Mc,Ug=V(()=>{"use strict";_e();Ri();Oa();Mc=Bi?Ui(Wg):ne("Map")});var Tc,Fg=V(()=>{"use strict";_e();Ri();Oa();Tc=Bi?Ui(Nc):ne("WeakMap")});var Sc,_g=V(()=>{"use strict";_e();Ri();Oa();Sc=Bi?Ui(Yg):ne("Set")});var Pc,Vg=V(()=>{"use strict";_e();Pc=ne("WeakSet")});function Cr(t){for(var e=Xt(t),r=e.length,n=Array(r),i=0;i<r;i++)n[i]=t[e[i]];return n}var ii=V(()=>{"use strict";Re()});function Ea(t){for(var e=Xt(t),r=e.length,n=Array(r),i=0;i<r;i++)n[i]=[e[i],t[e[i]]];return n}var Xg=V(()=>{"use strict";Re()});function Fi(t){for(var e={},r=Xt(t),n=0,i=r.length;n<i;n++)e[t[r[n]]]=r[n];return e}var Dc=V(()=>{"use strict";Re()});function oi(t){var e=[];for(var r in t)pe(t[r])&&e.push(r);return e.sort()}var Lc=V(()=>{"use strict";Sr()});function si(t,e){return function(r){var n=arguments.length;if(e&&(r=Object(r)),n<2||r==null)return r;for(var i=1;i<n;i++)for(var o=arguments[i],s=t(o),l=s.length,u=0;u<l;u++){var h=s[u];(!e||r[h]===void 0)&&(r[h]=o[h])}return r}}var za=V(()=>{"use strict"});var Jo,kc=V(()=>{"use strict";za();Yi();Jo=si(Zr)});var Pn,Ga=V(()=>{"use strict";za();Re();Pn=si(Xt)});var Qo,Oc=V(()=>{"use strict";za();Yi();Qo=si(Zr,!0)});function k0(){return function(){}}function Ko(t){if(!Ke(t))return{};if(rc)return rc(t);var e=k0();e.prototype=t;var r=new e;return e.prototype=null,r}var Ec=V(()=>{"use strict";Mn();xe()});function Ba(t,e){var r=Ko(t);return e&&Pn(r,e),r}var Hg=V(()=>{"use strict";Ec();Ga()});function Ra(t){return Ke(t)?sr(t)?t.slice():Jo({},t):t}var Jg=V(()=>{"use strict";Mn();Sn();kc()});function Za(t,e){return e(t),t}var Qg=V(()=>{"use strict"});function qo(t){return sr(t)?t:[t]}var zc=V(()=>{"use strict";yr();Sn();Rt.toPath=qo});function Hr(t){return Rt.toPath(t)}var _i=V(()=>{"use strict";yr();zc()});function ai(t,e){for(var r=e.length,n=0;n<r;n++){if(t==null)return;t=t[e[n]]}return r?t:void 0}var ja=V(()=>{"use strict"});function Vi(t,e,r){var n=ai(t,Hr(e));return zi(n)?r:n}var Gc=V(()=>{"use strict";_i();ja();oc()});function Wa(t,e){e=Hr(e);for(var r=e.length,n=0;n<r;n++){var i=e[n];if(!Ve(t,i))return!1;t=t[i]}return!!r}var Kg=V(()=>{"use strict";pn();_i()});function Dn(t){return t}var Ya=V(()=>{"use strict"});function Jr(t){return t=Pn({},t),function(e){return Wi(e,t)}}var $o=V(()=>{"use strict";Ga();Cc()});function Ln(t){return t=Hr(t),function(e){return ai(e,t)}}var Ua=V(()=>{"use strict";ja();_i()});function Qr(t,e,r){if(e===void 0)return t;switch(r??3){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,o){return t.call(e,n,i,o)};case 4:return function(n,i,o,s){return t.call(e,n,i,o,s)}}return function(){return t.apply(e,arguments)}}var Xi=V(()=>{"use strict"});function ts(t,e,r){return t==null?Dn:pe(t)?Qr(t,e,r):Ke(t)&&!sr(t)?Jr(t):Ln(t)}var Bc=V(()=>{"use strict";Ya();Sr();Mn();Sn();$o();Ua();Xi()});function li(t,e){return ts(t,e,1/0)}var Rc=V(()=>{"use strict";yr();Bc();Rt.iteratee=li});function fe(t,e,r){return Rt.iteratee!==li?Rt.iteratee(t,e):ts(t,e,r)}var ar=V(()=>{"use strict";yr();Bc();Rc()});function Fa(t,e,r){e=fe(e,r);for(var n=Xt(t),i=n.length,o={},s=0;s<i;s++){var l=n[s];o[l]=e(t[l],l,t)}return o}var qg=V(()=>{"use strict";ar();Re()});function Hi(){}var Zc=V(()=>{"use strict"});function _a(t){return t==null?Hi:function(e){return Vi(t,e)}}var $g=V(()=>{"use strict";Zc();Gc()});function Va(t,e,r){var n=Array(Math.max(0,t));e=Qr(e,r,1);for(var i=0;i<t;i++)n[i]=e(i);return n}var tp=V(()=>{"use strict";Xi()});function ui(t,e){return e==null&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}var jc=V(()=>{"use strict"});var mn,Xa=V(()=>{"use strict";mn=Date.now||function(){return new Date().getTime()}});function es(t){var e=function(o){return t[o]},r="(?:"+Xt(t).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(o){return o=o==null?"":""+o,n.test(o)?o.replace(i,e):o}}var Wc=V(()=>{"use strict";Re()});var Ha,Yc=V(()=>{"use strict";Ha={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"}});var Uc,ep=V(()=>{"use strict";Wc();Yc();Uc=es(Ha)});var rp,np=V(()=>{"use strict";Dc();Yc();rp=Fi(Ha)});var Fc,ip=V(()=>{"use strict";Wc();np();Fc=es(rp)});var _c,Vc=V(()=>{"use strict";yr();_c=Rt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g}});function z0(t){return"\\"+O0[t]}function Ja(t,e,r){!e&&r&&(e=r),e=Qo({},e,Rt.templateSettings);var n=RegExp([(e.escape||Xc).source,(e.interpolate||Xc).source,(e.evaluate||Xc).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(n,function(h,d,f,C,w){return o+=t.slice(i,w).replace(E0,z0),i=w+h.length,d?o+=`'+
((__t=(`+d+`))==null?'':_.escape(__t))+
'`:f?o+=`'+
((__t=(`+f+`))==null?'':__t)+
'`:C&&(o+=`';
`+C+`
__p+='`),h}),o+=`';
`;var s=e.variable;if(s){if(!G0.test(s))throw new Error("variable is not a bare identifier: "+s)}else o=`with(obj||{}){
`+o+`}
`,s="obj";o=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+o+`return __p;
`;var l;try{l=new Function(s,"_",o)}catch(h){throw h.source=o,h}var u=function(h){return l.call(this,h,Rt)};return u.source="function("+s+`){
`+o+"}",u}var Xc,O0,E0,G0,op=V(()=>{"use strict";Oc();yr();Vc();Xc=/(.)^/,O0={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},E0=/\\|'|\r|\n|\u2028|\u2029/g;G0=/^\s*(\w|\$)+\s*$/});function Qa(t,e,r){e=Hr(e);var n=e.length;if(!n)return pe(r)?r.call(t):r;for(var i=0;i<n;i++){var o=t?.[e[i]];o===void 0&&(o=r,i=n),t=pe(o)?o.call(t):o}return t}var sp=V(()=>{"use strict";Sr();_i()});function Ka(t){var e=++B0+"";return t?t+e:e}var B0,ap=V(()=>{"use strict";B0=0});function qa(t){var e=Rt(t);return e._chain=!0,e}var lp=V(()=>{"use strict";yr()});function rs(t,e,r,n,i){if(!(n instanceof e))return t.apply(r,i);var o=Ko(t.prototype),s=t.apply(o,i);return Ke(s)?s:o}var Hc=V(()=>{"use strict";Ec();Mn()});var Jc,vn,ns=V(()=>{"use strict";Ar();Hc();yr();Jc=ce(function(t,e){var r=Jc.placeholder,n=function(){for(var i=0,o=e.length,s=Array(o),l=0;l<o;l++)s[l]=e[l]===r?arguments[i++]:e[l];for(;i<arguments.length;)s.push(arguments[i++]);return rs(t,n,this,this,s)};return n});Jc.placeholder=Rt;vn=Jc});var is,Qc=V(()=>{"use strict";Ar();Sr();Hc();is=ce(function(t,e,r){if(!pe(t))throw new TypeError("Bind must be called on a function");var n=ce(function(i){return rs(t,n,e,this,r.concat(i))});return n})});var Ae,xr=V(()=>{"use strict";vc();Pr();Ae=_o(Ie)});function wr(t,e,r,n){if(n=n||[],!e&&e!==0)e=1/0;else if(e<=0)return n.concat(t);for(var i=n.length,o=0,s=Ie(t);o<s;o++){var l=t[o];if(Ae(l)&&(sr(l)||ri(l)))if(e>1)wr(l,e-1,r,n),i=n.length;else for(var u=0,h=l.length;u<h;)n[i++]=l[u++];else r||(n[i++]=l)}return n}var ci=V(()=>{"use strict";Pr();xr();Sn();Ta()});var Kc,up=V(()=>{"use strict";Ar();ci();Qc();Kc=ce(function(t,e){e=wr(e,!1,!1);var r=e.length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var n=e[r];t[n]=is(t[n],t)}return t})});function $a(t,e){var r=function(n){var i=r.cache,o=""+(e?e.apply(this,arguments):n);return Ve(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return r.cache={},r}var cp=V(()=>{"use strict";pn()});var os,qc=V(()=>{"use strict";Ar();os=ce(function(t,e,r){return setTimeout(function(){return t.apply(null,r)},e)})});var $c,fp=V(()=>{"use strict";ns();qc();yr();$c=vn(os,Rt,1)});function tl(t,e,r){var n,i,o,s,l=0;r||(r={});var u=function(){l=r.leading===!1?0:mn(),n=null,s=t.apply(i,o),n||(i=o=null)},h=function(){var d=mn();!l&&r.leading===!1&&(l=d);var f=e-(d-l);return i=this,o=arguments,f<=0||f>e?(n&&(clearTimeout(n),n=null),l=d,s=t.apply(i,o),n||(i=o=null)):!n&&r.trailing!==!1&&(n=setTimeout(u,f)),s};return h.cancel=function(){clearTimeout(n),l=0,n=i=o=null},h}var hp=V(()=>{"use strict";Xa()});function el(t,e,r){var n,i,o,s,l,u=function(){var d=mn()-i;e>d?n=setTimeout(u,e-d):(n=null,r||(s=t.apply(l,o)),n||(o=l=null))},h=ce(function(d){return l=this,o=d,i=mn(),n||(n=setTimeout(u,e),r&&(s=t.apply(l,o))),s});return h.cancel=function(){clearTimeout(n),n=o=l=null},h}var dp=V(()=>{"use strict";Ar();Xa()});function rl(t,e){return vn(e,t)}var gp=V(()=>{"use strict";ns()});function kn(t){return function(){return!t.apply(this,arguments)}}var nl=V(()=>{"use strict"});function il(){var t=arguments,e=t.length-1;return function(){for(var r=e,n=t[e].apply(this,arguments);r--;)n=t[r].call(this,n);return n}}var pp=V(()=>{"use strict"});function ol(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}var mp=V(()=>{"use strict"});function Ji(t,e){var r;return function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=null),r}}var tf=V(()=>{"use strict"});var ef,vp=V(()=>{"use strict";ns();tf();ef=vn(Ji,2)});function Qi(t,e,r){e=fe(e,r);for(var n=Xt(t),i,o=0,s=n.length;o<s;o++)if(i=n[o],e(t[i],i,t))return i}var rf=V(()=>{"use strict";ar();Re()});function ss(t){return function(e,r,n){r=fe(r,n);for(var i=Ie(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(r(e[o],o,e))return o;return-1}}var nf=V(()=>{"use strict";ar();Pr()});var fi,sl=V(()=>{"use strict";nf();fi=ss(1)});var as,of=V(()=>{"use strict";nf();as=ss(-1)});function Ki(t,e,r,n){r=fe(r,n,1);for(var i=r(e),o=0,s=Ie(t);o<s;){var l=Math.floor((o+s)/2);r(t[l])<i?o=l+1:s=l}return o}var sf=V(()=>{"use strict";ar();Pr()});function ls(t,e,r){return function(n,i,o){var s=0,l=Ie(n);if(typeof o=="number")t>0?s=o>=0?o:Math.max(o+l,s):l=o>=0?Math.min(o+1,l):o+l+1;else if(r&&o&&l)return o=r(n,i),n[o]===i?o:-1;if(i!==i)return o=e(ln.call(n,s,l),Zi),o>=0?o+s:-1;for(o=t>0?s:l-1;o>=0&&o<l;o+=t)if(n[o]===i)return o;return-1}}var af=V(()=>{"use strict";Pr();xe();pc()});var us,lf=V(()=>{"use strict";sf();sl();af();us=ls(1,fi,Ki)});var uf,Ip=V(()=>{"use strict";of();af();uf=ls(-1,as)});function hi(t,e,r){var n=Ae(t)?fi:Qi,i=n(t,e,r);if(i!==void 0&&i!==-1)return t[i]}var cf=V(()=>{"use strict";xr();sl();rf()});function al(t,e){return hi(t,Jr(e))}var Ap=V(()=>{"use strict";cf();$o()});function Ze(t,e,r){e=Qr(e,r);var n,i;if(Ae(t))for(n=0,i=t.length;n<i;n++)e(t[n],n,t);else{var o=Xt(t);for(n=0,i=o.length;n<i;n++)e(t[o[n]],o[n],t)}return t}var On=V(()=>{"use strict";Xi();xr();Re()});function lr(t,e,r){e=fe(e,r);for(var n=!Ae(t)&&Xt(t),i=(n||t).length,o=Array(i),s=0;s<i;s++){var l=n?n[s]:s;o[s]=e(t[l],l,t)}return o}var di=V(()=>{"use strict";ar();xr();Re()});function cs(t){var e=function(r,n,i,o){var s=!Ae(r)&&Xt(r),l=(s||r).length,u=t>0?0:l-1;for(o||(i=r[s?s[u]:u],u+=t);u>=0&&u<l;u+=t){var h=s?s[u]:u;i=n(i,r[h],h,r)}return i};return function(r,n,i,o){var s=arguments.length>=3;return e(r,Qr(n,o,4),i,s)}}var ff=V(()=>{"use strict";xr();Re();Xi()});var fs,yp=V(()=>{"use strict";ff();fs=cs(1)});var ll,Cp=V(()=>{"use strict";ff();ll=cs(-1)});function Dr(t,e,r){var n=[];return e=fe(e,r),Ze(t,function(i,o,s){e(i,o,s)&&n.push(i)}),n}var qi=V(()=>{"use strict";ar();On()});function ul(t,e,r){return Dr(t,kn(fe(e)),r)}var xp=V(()=>{"use strict";qi();nl();ar()});function hs(t,e,r){e=fe(e,r);for(var n=!Ae(t)&&Xt(t),i=(n||t).length,o=0;o<i;o++){var s=n?n[o]:o;if(!e(t[s],s,t))return!1}return!0}var wp=V(()=>{"use strict";ar();xr();Re()});function ds(t,e,r){e=fe(e,r);for(var n=!Ae(t)&&Xt(t),i=(n||t).length,o=0;o<i;o++){var s=n?n[o]:o;if(e(t[s],s,t))return!0}return!1}var bp=V(()=>{"use strict";ar();xr();Re()});function qe(t,e,r,n){return Ae(t)||(t=Cr(t)),(typeof r!="number"||n)&&(r=0),us(t,e,r)>=0}var $i=V(()=>{"use strict";xr();ii();lf()});var hf,Np=V(()=>{"use strict";Ar();Sr();di();ja();_i();hf=ce(function(t,e,r){var n,i;return pe(e)?i=e:(e=Hr(e),n=e.slice(0,-1),e=e[e.length-1]),lr(t,function(o){var s=i;if(!s){if(n&&n.length&&(o=ai(o,n)),o==null)return;s=o[e]}return s==null?s:s.apply(o,r)})})});function En(t,e){return lr(t,Ln(e))}var cl=V(()=>{"use strict";di();Ua()});function fl(t,e){return Dr(t,Jr(e))}var Mp=V(()=>{"use strict";qi();$o()});function to(t,e,r){var n=-1/0,i=-1/0,o,s;if(e==null||typeof e=="number"&&typeof t[0]!="object"&&t!=null){t=Ae(t)?t:Cr(t);for(var l=0,u=t.length;l<u;l++)o=t[l],o!=null&&o>n&&(n=o)}else e=fe(e,r),Ze(t,function(h,d,f){s=e(h,d,f),(s>i||s===-1/0&&n===-1/0)&&(n=h,i=s)});return n}var df=V(()=>{"use strict";xr();ii();ar();On()});function hl(t,e,r){var n=1/0,i=1/0,o,s;if(e==null||typeof e=="number"&&typeof t[0]!="object"&&t!=null){t=Ae(t)?t:Cr(t);for(var l=0,u=t.length;l<u;l++)o=t[l],o!=null&&o<n&&(n=o)}else e=fe(e,r),Ze(t,function(h,d,f){s=e(h,d,f),(s<i||s===1/0&&n===1/0)&&(n=h,i=s)});return n}var Tp=V(()=>{"use strict";xr();ii();ar();On()});function eo(t){return t?sr(t)?ln.call(t):ei(t)?t.match(R0):Ae(t)?lr(t,Dn):Cr(t):[]}var R0,gf=V(()=>{"use strict";Sn();xe();ba();xr();di();Ya();ii();R0=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g});function ro(t,e,r){if(e==null||r)return Ae(t)||(t=Cr(t)),t[ui(t.length-1)];var n=eo(t),i=Ie(n);e=Math.max(Math.min(e,i),0);for(var o=i-1,s=0;s<e;s++){var l=ui(s,o),u=n[s];n[s]=n[l],n[l]=u}return n.slice(0,e)}var pf=V(()=>{"use strict";xr();ii();Pr();jc();gf()});function dl(t){return ro(t,1/0)}var Sp=V(()=>{"use strict";pf()});function gl(t,e,r){var n=0;return e=fe(e,r),En(lr(t,function(i,o,s){return{value:i,index:n++,criteria:e(i,o,s)}}).sort(function(i,o){var s=i.criteria,l=o.criteria;if(s!==l){if(s>l||s===void 0)return 1;if(s<l||l===void 0)return-1}return i.index-o.index}),"value")}var Pp=V(()=>{"use strict";ar();cl();di()});function In(t,e){return function(r,n,i){var o=e?[[],[]]:{};return n=fe(n,i),Ze(r,function(s,l){var u=n(s,l,r);t(o,s,u)}),o}}var gs=V(()=>{"use strict";ar();On()});var mf,Dp=V(()=>{"use strict";gs();pn();mf=In(function(t,e,r){Ve(t,r)?t[r].push(e):t[r]=[e]})});var vf,Lp=V(()=>{"use strict";gs();vf=In(function(t,e,r){t[r]=e})});var If,kp=V(()=>{"use strict";gs();pn();If=In(function(t,e,r){Ve(t,r)?t[r]++:t[r]=1})});var Af,Op=V(()=>{"use strict";gs();Af=In(function(t,e,r){t[r?0:1].push(e)},!0)});function pl(t){return t==null?0:Ae(t)?t.length:Xt(t).length}var Ep=V(()=>{"use strict";xr();Re()});function yf(t,e,r){return e in r}var zp=V(()=>{"use strict"});var ps,Cf=V(()=>{"use strict";Ar();Sr();Xi();Yi();zp();ci();ps=ce(function(t,e){var r={},n=e[0];if(t==null)return r;pe(n)?(e.length>1&&(n=Qr(n,e[1])),e=Zr(t)):(n=yf,e=wr(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var s=e[i],l=t[s];n(l,s,t)&&(r[s]=l)}return r})});var xf,Gp=V(()=>{"use strict";Ar();Sr();nl();di();ci();$i();Cf();xf=ce(function(t,e){var r=e[0],n;return pe(r)?(r=kn(r),e.length>1&&(n=e[1])):(e=lr(wr(e,!1,!1),String),r=function(i,o){return!qe(e,o)}),ps(t,r,n)})});function no(t,e,r){return ln.call(t,0,Math.max(0,t.length-(e==null||r?1:e)))}var wf=V(()=>{"use strict";xe()});function io(t,e,r){return t==null||t.length<1?e==null||r?void 0:[]:e==null||r?t[0]:no(t,t.length-e)}var Bp=V(()=>{"use strict";wf()});function zn(t,e,r){return ln.call(t,e==null||r?1:e)}var bf=V(()=>{"use strict";xe()});function ml(t,e,r){return t==null||t.length<1?e==null||r?void 0:[]:e==null||r?t[t.length-1]:zn(t,Math.max(0,t.length-e))}var Rp=V(()=>{"use strict";bf()});function vl(t){return Dr(t,Boolean)}var Zp=V(()=>{"use strict";qi()});function Il(t,e){return wr(t,e,!1)}var jp=V(()=>{"use strict";ci()});var ms,Nf=V(()=>{"use strict";Ar();ci();qi();$i();ms=ce(function(t,e){return e=wr(e,!0,!0),Dr(t,function(r){return!qe(e,r)})})});var Mf,Wp=V(()=>{"use strict";Ar();Nf();Mf=ce(function(t,e){return ms(t,e)})});function gi(t,e,r,n){Gi(e)||(n=r,r=e,e=!1),r!=null&&(r=fe(r,n));for(var i=[],o=[],s=0,l=Ie(t);s<l;s++){var u=t[s],h=r?r(u,s,t):u;e&&!r?((!s||o!==h)&&i.push(u),o=h):r?qe(o,h)||(o.push(h),i.push(u)):qe(i,u)||i.push(u)}return i}var Tf=V(()=>{"use strict";sc();ar();Pr();$i()});var Sf,Yp=V(()=>{"use strict";Ar();Tf();ci();Sf=ce(function(t){return gi(wr(t,!0,!0))})});function Al(t){for(var e=[],r=arguments.length,n=0,i=Ie(t);n<i;n++){var o=t[n];if(!qe(e,o)){var s;for(s=1;s<r&&qe(arguments[s],o);s++);s===r&&e.push(o)}}return e}var Up=V(()=>{"use strict";Pr();$i()});function pi(t){for(var e=t&&to(t,Ie).length||0,r=Array(e),n=0;n<e;n++)r[n]=En(t,n);return r}var Pf=V(()=>{"use strict";df();Pr();cl()});var Df,Fp=V(()=>{"use strict";Ar();Pf();Df=ce(pi)});function yl(t,e){for(var r={},n=0,i=Ie(t);n<i;n++)e?r[t[n]]=e[n]:r[t[n][0]]=t[n][1];return r}var _p=V(()=>{"use strict";Pr()});function Cl(t,e,r){e==null&&(e=t||0,t=0),r||(r=e<t?-1:1);for(var n=Math.max(Math.ceil((e-t)/r),0),i=Array(n),o=0;o<n;o++,t+=r)i[o]=t;return i}var Vp=V(()=>{"use strict"});function xl(t,e){if(e==null||e<1)return[];for(var r=[],n=0,i=t.length;n<i;)r.push(ln.call(t,n,n+=e));return r}var Xp=V(()=>{"use strict";xe()});function oo(t,e){return t._chain?Rt(e).chain():e}var Lf=V(()=>{"use strict";yr()});function so(t){return Ze(oi(t),function(e){var r=Rt[e]=t[e];Rt.prototype[e]=function(){var n=[this._wrapped];return vg.apply(n,arguments),oo(this,r.apply(Rt,n))}}),Rt}var Hp=V(()=>{"use strict";yr();On();Lc();xe();Lf()});var Jp,Qp=V(()=>{"use strict";yr();On();xe();Lf();Ze(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=Wo[t];Rt.prototype[t]=function(){var r=this._wrapped;return r!=null&&(e.apply(r,arguments),(t==="shift"||t==="splice")&&r.length===0&&delete r[0]),oo(this,r)}});Ze(["concat","join","slice"],function(t){var e=Wo[t];Rt.prototype[t]=function(){var r=this._wrapped;return r!=null&&(r=e.apply(r,arguments)),oo(this,r)}});Jp=Rt});var kf={};Me(kf,{VERSION:()=>jo,after:()=>ol,all:()=>hs,allKeys:()=>Zr,any:()=>ds,assign:()=>Pn,before:()=>Ji,bind:()=>is,bindAll:()=>Kc,chain:()=>qa,chunk:()=>xl,clone:()=>Ra,collect:()=>lr,compact:()=>vl,compose:()=>il,constant:()=>ji,contains:()=>qe,countBy:()=>If,create:()=>Ba,debounce:()=>el,default:()=>Jp,defaults:()=>Qo,defer:()=>$c,delay:()=>os,detect:()=>hi,difference:()=>ms,drop:()=>zn,each:()=>Ze,escape:()=>Uc,every:()=>hs,extend:()=>Jo,extendOwn:()=>Pn,filter:()=>Dr,find:()=>hi,findIndex:()=>fi,findKey:()=>Qi,findLastIndex:()=>as,findWhere:()=>al,first:()=>io,flatten:()=>Il,foldl:()=>fs,foldr:()=>ll,forEach:()=>Ze,functions:()=>oi,get:()=>Vi,groupBy:()=>mf,has:()=>Wa,head:()=>io,identity:()=>Dn,include:()=>qe,includes:()=>qe,indexBy:()=>vf,indexOf:()=>us,initial:()=>no,inject:()=>fs,intersection:()=>Al,invert:()=>Fi,invoke:()=>hf,isArguments:()=>ri,isArray:()=>sr,isArrayBuffer:()=>Fo,isBoolean:()=>Gi,isDataView:()=>Tn,isDate:()=>lc,isElement:()=>wa,isEmpty:()=>Da,isEqual:()=>ka,isError:()=>cc,isFinite:()=>Sa,isFunction:()=>pe,isMap:()=>Mc,isMatch:()=>Wi,isNaN:()=>Zi,isNull:()=>xa,isNumber:()=>Yo,isObject:()=>Ke,isRegExp:()=>uc,isSet:()=>Sc,isString:()=>ei,isSymbol:()=>Uo,isTypedArray:()=>Xo,isUndefined:()=>zi,isWeakMap:()=>Tc,isWeakSet:()=>Pc,iteratee:()=>li,keys:()=>Xt,last:()=>ml,lastIndexOf:()=>uf,map:()=>lr,mapObject:()=>Fa,matcher:()=>Jr,matches:()=>Jr,max:()=>to,memoize:()=>$a,methods:()=>oi,min:()=>hl,mixin:()=>so,negate:()=>kn,noop:()=>Hi,now:()=>mn,object:()=>yl,omit:()=>xf,once:()=>ef,pairs:()=>Ea,partial:()=>vn,partition:()=>Af,pick:()=>ps,pluck:()=>En,property:()=>Ln,propertyOf:()=>_a,random:()=>ui,range:()=>Cl,reduce:()=>fs,reduceRight:()=>ll,reject:()=>ul,rest:()=>zn,restArguments:()=>ce,result:()=>Qa,sample:()=>ro,select:()=>Dr,shuffle:()=>dl,size:()=>pl,some:()=>ds,sortBy:()=>gl,sortedIndex:()=>Ki,tail:()=>zn,take:()=>io,tap:()=>Za,template:()=>Ja,templateSettings:()=>_c,throttle:()=>tl,times:()=>Va,toArray:()=>eo,toPath:()=>qo,transpose:()=>pi,unescape:()=>Fc,union:()=>Sf,uniq:()=>gi,unique:()=>gi,uniqueId:()=>Ka,unzip:()=>pi,values:()=>Cr,where:()=>fl,without:()=>Mf,wrap:()=>rl,zip:()=>Df});var wl=V(()=>{"use strict";xe();Ar();Mn();bg();oc();sc();Ng();ba();ac();Mg();Tg();Sg();fc();hc();Ma();Sn();Sr();Ta();Lg();pc();Ac();Eg();Cc();Rg();Ug();Fg();_g();Vg();Re();Yi();ii();Xg();Dc();Lc();kc();Ga();Oc();Hg();Jg();Qg();Gc();Kg();qg();Ya();mc();Zc();zc();Ua();$g();$o();tp();jc();Xa();ep();ip();Vc();op();sp();ap();lp();Rc();ns();Qc();up();cp();qc();fp();hp();dp();gp();nl();pp();mp();tf();vp();rf();sl();of();sf();lf();Ip();cf();Ap();On();di();yp();Cp();qi();xp();wp();bp();$i();Np();cl();Mp();df();Tp();Sp();pf();Pp();Dp();Lp();kp();Op();gf();Ep();Cf();Gp();Bp();wf();Rp();bf();Zp();jp();Wp();Tf();Yp();Up();Nf();Pf();Fp();_p();Vp();Xp();Hp();Qp()});var Of,Kp,qp=V(()=>{"use strict";wl();wl();Of=so(kf);Of._=Of;Kp=Of});var $p={};Me($p,{VERSION:()=>jo,after:()=>ol,all:()=>hs,allKeys:()=>Zr,any:()=>ds,assign:()=>Pn,before:()=>Ji,bind:()=>is,bindAll:()=>Kc,chain:()=>qa,chunk:()=>xl,clone:()=>Ra,collect:()=>lr,compact:()=>vl,compose:()=>il,constant:()=>ji,contains:()=>qe,countBy:()=>If,create:()=>Ba,debounce:()=>el,default:()=>Kp,defaults:()=>Qo,defer:()=>$c,delay:()=>os,detect:()=>hi,difference:()=>ms,drop:()=>zn,each:()=>Ze,escape:()=>Uc,every:()=>hs,extend:()=>Jo,extendOwn:()=>Pn,filter:()=>Dr,find:()=>hi,findIndex:()=>fi,findKey:()=>Qi,findLastIndex:()=>as,findWhere:()=>al,first:()=>io,flatten:()=>Il,foldl:()=>fs,foldr:()=>ll,forEach:()=>Ze,functions:()=>oi,get:()=>Vi,groupBy:()=>mf,has:()=>Wa,head:()=>io,identity:()=>Dn,include:()=>qe,includes:()=>qe,indexBy:()=>vf,indexOf:()=>us,initial:()=>no,inject:()=>fs,intersection:()=>Al,invert:()=>Fi,invoke:()=>hf,isArguments:()=>ri,isArray:()=>sr,isArrayBuffer:()=>Fo,isBoolean:()=>Gi,isDataView:()=>Tn,isDate:()=>lc,isElement:()=>wa,isEmpty:()=>Da,isEqual:()=>ka,isError:()=>cc,isFinite:()=>Sa,isFunction:()=>pe,isMap:()=>Mc,isMatch:()=>Wi,isNaN:()=>Zi,isNull:()=>xa,isNumber:()=>Yo,isObject:()=>Ke,isRegExp:()=>uc,isSet:()=>Sc,isString:()=>ei,isSymbol:()=>Uo,isTypedArray:()=>Xo,isUndefined:()=>zi,isWeakMap:()=>Tc,isWeakSet:()=>Pc,iteratee:()=>li,keys:()=>Xt,last:()=>ml,lastIndexOf:()=>uf,map:()=>lr,mapObject:()=>Fa,matcher:()=>Jr,matches:()=>Jr,max:()=>to,memoize:()=>$a,methods:()=>oi,min:()=>hl,mixin:()=>so,negate:()=>kn,noop:()=>Hi,now:()=>mn,object:()=>yl,omit:()=>xf,once:()=>ef,pairs:()=>Ea,partial:()=>vn,partition:()=>Af,pick:()=>ps,pluck:()=>En,property:()=>Ln,propertyOf:()=>_a,random:()=>ui,range:()=>Cl,reduce:()=>fs,reduceRight:()=>ll,reject:()=>ul,rest:()=>zn,restArguments:()=>ce,result:()=>Qa,sample:()=>ro,select:()=>Dr,shuffle:()=>dl,size:()=>pl,some:()=>ds,sortBy:()=>gl,sortedIndex:()=>Ki,tail:()=>zn,take:()=>io,tap:()=>Za,template:()=>Ja,templateSettings:()=>_c,throttle:()=>tl,times:()=>Va,toArray:()=>eo,toPath:()=>qo,transpose:()=>pi,unescape:()=>Fc,union:()=>Sf,uniq:()=>gi,unique:()=>gi,uniqueId:()=>Ka,unzip:()=>pi,values:()=>Cr,where:()=>fl,without:()=>Mf,wrap:()=>rl,zip:()=>Df});var tm=V(()=>{"use strict";qp();wl()});var Gn=bd((em,bl)=>{"use strict";(function(t,e){"use strict";typeof bl=="object"&&typeof bl.exports=="object"?bl.exports=t.document?e(t,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return e(r)}:e(t)})(typeof window<"u"?window:em,function(t,e){"use strict";var r=[],n=Object.getPrototypeOf,i=r.slice,o=r.flat?function(a){return r.flat.call(a)}:function(a){return r.concat.apply([],a)},s=r.push,l=r.indexOf,u={},h=u.toString,d=u.hasOwnProperty,f=d.toString,C=f.call(Object),w={},b=function(c){return typeof c=="function"&&typeof c.nodeType!="number"&&typeof c.item!="function"},S=function(c){return c!=null&&c===c.window},P=t.document,O={type:!0,src:!0,nonce:!0,noModule:!0};function F(a,c,g){g=g||P;var m,I,y=g.createElement("script");if(y.text=a,c)for(m in O)I=c[m]||c.getAttribute&&c.getAttribute(m),I&&y.setAttribute(m,I);g.head.appendChild(y).parentNode.removeChild(y)}function J(a){return a==null?a+"":typeof a=="object"||typeof a=="function"?u[h.call(a)]||"object":typeof a}var $="3.7.1",st=/HTML$/i,p=function(a,c){return new p.fn.init(a,c)};p.fn=p.prototype={jquery:$,constructor:p,length:0,toArray:function(){return i.call(this)},get:function(a){return a==null?i.call(this):a<0?this[a+this.length]:this[a]},pushStack:function(a){var c=p.merge(this.constructor(),a);return c.prevObject=this,c},each:function(a){return p.each(this,a)},map:function(a){return this.pushStack(p.map(this,function(c,g){return a.call(c,g,c)}))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(p.grep(this,function(a,c){return(c+1)%2}))},odd:function(){return this.pushStack(p.grep(this,function(a,c){return c%2}))},eq:function(a){var c=this.length,g=+a+(a<0?c:0);return this.pushStack(g>=0&&g<c?[this[g]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:r.sort,splice:r.splice},p.extend=p.fn.extend=function(){var a,c,g,m,I,y,N=arguments[0]||{},G=1,E=arguments.length,U=!1;for(typeof N=="boolean"&&(U=N,N=arguments[G]||{},G++),typeof N!="object"&&!b(N)&&(N={}),G===E&&(N=this,G--);G<E;G++)if((a=arguments[G])!=null)for(c in a)m=a[c],!(c==="__proto__"||N===m)&&(U&&m&&(p.isPlainObject(m)||(I=Array.isArray(m)))?(g=N[c],I&&!Array.isArray(g)?y=[]:!I&&!p.isPlainObject(g)?y={}:y=g,I=!1,N[c]=p.extend(U,y,m)):m!==void 0&&(N[c]=m));return N},p.extend({expando:"jQuery"+($+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isPlainObject:function(a){var c,g;return!a||h.call(a)!=="[object Object]"?!1:(c=n(a),c?(g=d.call(c,"constructor")&&c.constructor,typeof g=="function"&&f.call(g)===C):!0)},isEmptyObject:function(a){var c;for(c in a)return!1;return!0},globalEval:function(a,c,g){F(a,{nonce:c&&c.nonce},g)},each:function(a,c){var g,m=0;if(v(a))for(g=a.length;m<g&&c.call(a[m],m,a[m])!==!1;m++);else for(m in a)if(c.call(a[m],m,a[m])===!1)break;return a},text:function(a){var c,g="",m=0,I=a.nodeType;if(!I)for(;c=a[m++];)g+=p.text(c);return I===1||I===11?a.textContent:I===9?a.documentElement.textContent:I===3||I===4?a.nodeValue:g},makeArray:function(a,c){var g=c||[];return a!=null&&(v(Object(a))?p.merge(g,typeof a=="string"?[a]:a):s.call(g,a)),g},inArray:function(a,c,g){return c==null?-1:l.call(c,a,g)},isXMLDoc:function(a){var c=a&&a.namespaceURI,g=a&&(a.ownerDocument||a).documentElement;return!st.test(c||g&&g.nodeName||"HTML")},merge:function(a,c){for(var g=+c.length,m=0,I=a.length;m<g;m++)a[I++]=c[m];return a.length=I,a},grep:function(a,c,g){for(var m,I=[],y=0,N=a.length,G=!g;y<N;y++)m=!c(a[y],y),m!==G&&I.push(a[y]);return I},map:function(a,c,g){var m,I,y=0,N=[];if(v(a))for(m=a.length;y<m;y++)I=c(a[y],y,g),I!=null&&N.push(I);else for(y in a)I=c(a[y],y,g),I!=null&&N.push(I);return o(N)},guid:1,support:w}),typeof Symbol=="function"&&(p.fn[Symbol.iterator]=r[Symbol.iterator]),p.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,c){u["[object "+c+"]"]=c.toLowerCase()});function v(a){var c=!!a&&"length"in a&&a.length,g=J(a);return b(a)||S(a)?!1:g==="array"||c===0||typeof c=="number"&&c>0&&c-1 in a}function x(a,c){return a.nodeName&&a.nodeName.toLowerCase()===c.toLowerCase()}var M=r.pop,D=r.sort,R=r.splice,Z="[\\x20\\t\\r\\n\\f]",_=new RegExp("^"+Z+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Z+"+$","g");p.contains=function(a,c){var g=c&&c.parentNode;return a===g||!!(g&&g.nodeType===1&&(a.contains?a.contains(g):a.compareDocumentPosition&&a.compareDocumentPosition(g)&16))};var ut=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function gt(a,c){return c?a==="\0"?"\uFFFD":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a}p.escapeSelector=function(a){return(a+"").replace(ut,gt)};var Y=P,K=s;(function(){var a,c,g,m,I,y=K,N,G,E,U,rt,lt=p.expando,q=0,ht=0,zt=qs(),ee=qs(),Yt=qs(),Ye=qs(),Ee=function(L,j){return L===j&&(I=!0),0},$r="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",tn="(?:\\\\[\\da-fA-F]{1,6}"+Z+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Jt="\\["+Z+"*("+tn+")(?:"+Z+"*([*^$|!~]?=)"+Z+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+tn+"))|)"+Z+"*\\]",Hn=":("+tn+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Jt+")*)|.*)\\)|)",re=new RegExp(Z+"+","g"),De=new RegExp("^"+Z+"*,"+Z+"*"),zo=new RegExp("^"+Z+"*([>+~]|"+Z+")"+Z+"*"),Su=new RegExp(Z+"|>"),en=new RegExp(Hn),Go=new RegExp("^"+tn+"$"),rn={ID:new RegExp("^#("+tn+")"),CLASS:new RegExp("^\\.("+tn+")"),TAG:new RegExp("^("+tn+"|[*])"),ATTR:new RegExp("^"+Jt),PSEUDO:new RegExp("^"+Hn),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Z+"*(even|odd|(([+-]|)(\\d*)n|)"+Z+"*(?:([+-]|)"+Z+"*(\\d+)|))"+Z+"*\\)|)","i"),bool:new RegExp("^(?:"+$r+")$","i"),needsContext:new RegExp("^"+Z+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Z+"*((?:-\\d)?\\d*)"+Z+"*\\)|)(?=[^-]|$)","i")},xn=/^(?:input|select|textarea|button)$/i,wn=/^h\d$/i,zr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Pu=/[+~]/,cn=new RegExp("\\\\[\\da-fA-F]{1,6}"+Z+"?|\\\\([^\\r\\n\\f])","g"),fn=function(L,j){var H="0x"+L.slice(1)-65536;return j||(H<0?String.fromCharCode(H+65536):String.fromCharCode(H>>10|55296,H&1023|56320))},KI=function(){bn()},qI=ta(function(L){return L.disabled===!0&&x(L,"fieldset")},{dir:"parentNode",next:"legend"});function $I(){try{return N.activeElement}catch{}}try{y.apply(r=i.call(Y.childNodes),Y.childNodes),r[Y.childNodes.length].nodeType}catch{y={apply:function(j,H){K.apply(j,i.call(H))},call:function(j){K.apply(j,i.call(arguments,1))}}}function ue(L,j,H,et){var at,vt,yt,bt,Ct,_t,Ot,Bt=j&&j.ownerDocument,Vt=j?j.nodeType:9;if(H=H||[],typeof L!="string"||!L||Vt!==1&&Vt!==9&&Vt!==11)return H;if(!et&&(bn(j),j=j||N,E)){if(Vt!==11&&(Ct=zr.exec(L)))if(at=Ct[1]){if(Vt===9)if(yt=j.getElementById(at)){if(yt.id===at)return y.call(H,yt),H}else return H;else if(Bt&&(yt=Bt.getElementById(at))&&ue.contains(j,yt)&&yt.id===at)return y.call(H,yt),H}else{if(Ct[2])return y.apply(H,j.getElementsByTagName(L)),H;if((at=Ct[3])&&j.getElementsByClassName)return y.apply(H,j.getElementsByClassName(at)),H}if(!Ye[L+" "]&&(!U||!U.test(L))){if(Ot=L,Bt=j,Vt===1&&(Su.test(L)||zo.test(L))){for(Bt=Pu.test(L)&&Du(j.parentNode)||j,(Bt!=j||!w.scope)&&((bt=j.getAttribute("id"))?bt=p.escapeSelector(bt):j.setAttribute("id",bt=lt)),_t=Bo(L),vt=_t.length;vt--;)_t[vt]=(bt?"#"+bt:":scope")+" "+$s(_t[vt]);Ot=_t.join(",")}try{return y.apply(H,Bt.querySelectorAll(Ot)),H}catch{Ye(L,!0)}finally{bt===lt&&j.removeAttribute("id")}}}return wd(L.replace(_,"$1"),j,H,et)}function qs(){var L=[];function j(H,et){return L.push(H+" ")>c.cacheLength&&delete j[L.shift()],j[H+" "]=et}return j}function Xr(L){return L[lt]=!0,L}function Di(L){var j=N.createElement("fieldset");try{return!!L(j)}catch{return!1}finally{j.parentNode&&j.parentNode.removeChild(j),j=null}}function t0(L){return function(j){return x(j,"input")&&j.type===L}}function e0(L){return function(j){return(x(j,"input")||x(j,"button"))&&j.type===L}}function Cd(L){return function(j){return"form"in j?j.parentNode&&j.disabled===!1?"label"in j?"label"in j.parentNode?j.parentNode.disabled===L:j.disabled===L:j.isDisabled===L||j.isDisabled!==!L&&qI(j)===L:j.disabled===L:"label"in j?j.disabled===L:!1}}function Jn(L){return Xr(function(j){return j=+j,Xr(function(H,et){for(var at,vt=L([],H.length,j),yt=vt.length;yt--;)H[at=vt[yt]]&&(H[at]=!(et[at]=H[at]))})})}function Du(L){return L&&typeof L.getElementsByTagName<"u"&&L}function bn(L){var j,H=L?L.ownerDocument||L:Y;return H==N||H.nodeType!==9||!H.documentElement||(N=H,G=N.documentElement,E=!p.isXMLDoc(N),rt=G.matches||G.webkitMatchesSelector||G.msMatchesSelector,G.msMatchesSelector&&Y!=N&&(j=N.defaultView)&&j.top!==j&&j.addEventListener("unload",KI),w.getById=Di(function(et){return G.appendChild(et).id=p.expando,!N.getElementsByName||!N.getElementsByName(p.expando).length}),w.disconnectedMatch=Di(function(et){return rt.call(et,"*")}),w.scope=Di(function(){return N.querySelectorAll(":scope")}),w.cssHas=Di(function(){try{return N.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),w.getById?(c.filter.ID=function(et){var at=et.replace(cn,fn);return function(vt){return vt.getAttribute("id")===at}},c.find.ID=function(et,at){if(typeof at.getElementById<"u"&&E){var vt=at.getElementById(et);return vt?[vt]:[]}}):(c.filter.ID=function(et){var at=et.replace(cn,fn);return function(vt){var yt=typeof vt.getAttributeNode<"u"&&vt.getAttributeNode("id");return yt&&yt.value===at}},c.find.ID=function(et,at){if(typeof at.getElementById<"u"&&E){var vt,yt,bt,Ct=at.getElementById(et);if(Ct){if(vt=Ct.getAttributeNode("id"),vt&&vt.value===et)return[Ct];for(bt=at.getElementsByName(et),yt=0;Ct=bt[yt++];)if(vt=Ct.getAttributeNode("id"),vt&&vt.value===et)return[Ct]}return[]}}),c.find.TAG=function(et,at){return typeof at.getElementsByTagName<"u"?at.getElementsByTagName(et):at.querySelectorAll(et)},c.find.CLASS=function(et,at){if(typeof at.getElementsByClassName<"u"&&E)return at.getElementsByClassName(et)},U=[],Di(function(et){var at;G.appendChild(et).innerHTML="<a id='"+lt+"' href='' disabled='disabled'></a><select id='"+lt+"-\r\\' disabled='disabled'><option selected=''></option></select>",et.querySelectorAll("[selected]").length||U.push("\\["+Z+"*(?:value|"+$r+")"),et.querySelectorAll("[id~="+lt+"-]").length||U.push("~="),et.querySelectorAll("a#"+lt+"+*").length||U.push(".#.+[+~]"),et.querySelectorAll(":checked").length||U.push(":checked"),at=N.createElement("input"),at.setAttribute("type","hidden"),et.appendChild(at).setAttribute("name","D"),G.appendChild(et).disabled=!0,et.querySelectorAll(":disabled").length!==2&&U.push(":enabled",":disabled"),at=N.createElement("input"),at.setAttribute("name",""),et.appendChild(at),et.querySelectorAll("[name='']").length||U.push("\\["+Z+"*name"+Z+"*="+Z+`*(?:''|"")`)}),w.cssHas||U.push(":has"),U=U.length&&new RegExp(U.join("|")),Ee=function(et,at){if(et===at)return I=!0,0;var vt=!et.compareDocumentPosition-!at.compareDocumentPosition;return vt||(vt=(et.ownerDocument||et)==(at.ownerDocument||at)?et.compareDocumentPosition(at):1,vt&1||!w.sortDetached&&at.compareDocumentPosition(et)===vt?et===N||et.ownerDocument==Y&&ue.contains(Y,et)?-1:at===N||at.ownerDocument==Y&&ue.contains(Y,at)?1:m?l.call(m,et)-l.call(m,at):0:vt&4?-1:1)}),N}ue.matches=function(L,j){return ue(L,null,null,j)},ue.matchesSelector=function(L,j){if(bn(L),E&&!Ye[j+" "]&&(!U||!U.test(j)))try{var H=rt.call(L,j);if(H||w.disconnectedMatch||L.document&&L.document.nodeType!==11)return H}catch{Ye(j,!0)}return ue(j,N,null,[L]).length>0},ue.contains=function(L,j){return(L.ownerDocument||L)!=N&&bn(L),p.contains(L,j)},ue.attr=function(L,j){(L.ownerDocument||L)!=N&&bn(L);var H=c.attrHandle[j.toLowerCase()],et=H&&d.call(c.attrHandle,j.toLowerCase())?H(L,j,!E):void 0;return et!==void 0?et:L.getAttribute(j)},ue.error=function(L){throw new Error("Syntax error, unrecognized expression: "+L)},p.uniqueSort=function(L){var j,H=[],et=0,at=0;if(I=!w.sortStable,m=!w.sortStable&&i.call(L,0),D.call(L,Ee),I){for(;j=L[at++];)j===L[at]&&(et=H.push(at));for(;et--;)R.call(L,H[et],1)}return m=null,L},p.fn.uniqueSort=function(){return this.pushStack(p.uniqueSort(i.apply(this)))},c=p.expr={cacheLength:50,createPseudo:Xr,match:rn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(L){return L[1]=L[1].replace(cn,fn),L[3]=(L[3]||L[4]||L[5]||"").replace(cn,fn),L[2]==="~="&&(L[3]=" "+L[3]+" "),L.slice(0,4)},CHILD:function(L){return L[1]=L[1].toLowerCase(),L[1].slice(0,3)==="nth"?(L[3]||ue.error(L[0]),L[4]=+(L[4]?L[5]+(L[6]||1):2*(L[3]==="even"||L[3]==="odd")),L[5]=+(L[7]+L[8]||L[3]==="odd")):L[3]&&ue.error(L[0]),L},PSEUDO:function(L){var j,H=!L[6]&&L[2];return rn.CHILD.test(L[0])?null:(L[3]?L[2]=L[4]||L[5]||"":H&&en.test(H)&&(j=Bo(H,!0))&&(j=H.indexOf(")",H.length-j)-H.length)&&(L[0]=L[0].slice(0,j),L[2]=H.slice(0,j)),L.slice(0,3))}},filter:{TAG:function(L){var j=L.replace(cn,fn).toLowerCase();return L==="*"?function(){return!0}:function(H){return x(H,j)}},CLASS:function(L){var j=zt[L+" "];return j||(j=new RegExp("(^|"+Z+")"+L+"("+Z+"|$)"))&&zt(L,function(H){return j.test(typeof H.className=="string"&&H.className||typeof H.getAttribute<"u"&&H.getAttribute("class")||"")})},ATTR:function(L,j,H){return function(et){var at=ue.attr(et,L);return at==null?j==="!=":j?(at+="",j==="="?at===H:j==="!="?at!==H:j==="^="?H&&at.indexOf(H)===0:j==="*="?H&&at.indexOf(H)>-1:j==="$="?H&&at.slice(-H.length)===H:j==="~="?(" "+at.replace(re," ")+" ").indexOf(H)>-1:j==="|="?at===H||at.slice(0,H.length+1)===H+"-":!1):!0}},CHILD:function(L,j,H,et,at){var vt=L.slice(0,3)!=="nth",yt=L.slice(-4)!=="last",bt=j==="of-type";return et===1&&at===0?function(Ct){return!!Ct.parentNode}:function(Ct,_t,Ot){var Bt,Vt,St,ve,Ir,Qe=vt!==yt?"nextSibling":"previousSibling",Gr=Ct.parentNode,nn=bt&&Ct.nodeName.toLowerCase(),Li=!Ot&&!bt,ir=!1;if(Gr){if(vt){for(;Qe;){for(St=Ct;St=St[Qe];)if(bt?x(St,nn):St.nodeType===1)return!1;Ir=Qe=L==="only"&&!Ir&&"nextSibling"}return!0}if(Ir=[yt?Gr.firstChild:Gr.lastChild],yt&&Li){for(Vt=Gr[lt]||(Gr[lt]={}),Bt=Vt[L]||[],ve=Bt[0]===q&&Bt[1],ir=ve&&Bt[2],St=ve&&Gr.childNodes[ve];St=++ve&&St&&St[Qe]||(ir=ve=0)||Ir.pop();)if(St.nodeType===1&&++ir&&St===Ct){Vt[L]=[q,ve,ir];break}}else if(Li&&(Vt=Ct[lt]||(Ct[lt]={}),Bt=Vt[L]||[],ve=Bt[0]===q&&Bt[1],ir=ve),ir===!1)for(;(St=++ve&&St&&St[Qe]||(ir=ve=0)||Ir.pop())&&!((bt?x(St,nn):St.nodeType===1)&&++ir&&(Li&&(Vt=St[lt]||(St[lt]={}),Vt[L]=[q,ir]),St===Ct)););return ir-=at,ir===et||ir%et===0&&ir/et>=0}}},PSEUDO:function(L,j){var H,et=c.pseudos[L]||c.setFilters[L.toLowerCase()]||ue.error("unsupported pseudo: "+L);return et[lt]?et(j):et.length>1?(H=[L,L,"",j],c.setFilters.hasOwnProperty(L.toLowerCase())?Xr(function(at,vt){for(var yt,bt=et(at,j),Ct=bt.length;Ct--;)yt=l.call(at,bt[Ct]),at[yt]=!(vt[yt]=bt[Ct])}):function(at){return et(at,0,H)}):et}},pseudos:{not:Xr(function(L){var j=[],H=[],et=Eu(L.replace(_,"$1"));return et[lt]?Xr(function(at,vt,yt,bt){for(var Ct,_t=et(at,null,bt,[]),Ot=at.length;Ot--;)(Ct=_t[Ot])&&(at[Ot]=!(vt[Ot]=Ct))}):function(at,vt,yt){return j[0]=at,et(j,null,yt,H),j[0]=null,!H.pop()}}),has:Xr(function(L){return function(j){return ue(L,j).length>0}}),contains:Xr(function(L){return L=L.replace(cn,fn),function(j){return(j.textContent||p.text(j)).indexOf(L)>-1}}),lang:Xr(function(L){return Go.test(L||"")||ue.error("unsupported lang: "+L),L=L.replace(cn,fn).toLowerCase(),function(j){var H;do if(H=E?j.lang:j.getAttribute("xml:lang")||j.getAttribute("lang"))return H=H.toLowerCase(),H===L||H.indexOf(L+"-")===0;while((j=j.parentNode)&&j.nodeType===1);return!1}}),target:function(L){var j=t.location&&t.location.hash;return j&&j.slice(1)===L.id},root:function(L){return L===G},focus:function(L){return L===$I()&&N.hasFocus()&&!!(L.type||L.href||~L.tabIndex)},enabled:Cd(!1),disabled:Cd(!0),checked:function(L){return x(L,"input")&&!!L.checked||x(L,"option")&&!!L.selected},selected:function(L){return L.parentNode&&L.parentNode.selectedIndex,L.selected===!0},empty:function(L){for(L=L.firstChild;L;L=L.nextSibling)if(L.nodeType<6)return!1;return!0},parent:function(L){return!c.pseudos.empty(L)},header:function(L){return wn.test(L.nodeName)},input:function(L){return xn.test(L.nodeName)},button:function(L){return x(L,"input")&&L.type==="button"||x(L,"button")},text:function(L){var j;return x(L,"input")&&L.type==="text"&&((j=L.getAttribute("type"))==null||j.toLowerCase()==="text")},first:Jn(function(){return[0]}),last:Jn(function(L,j){return[j-1]}),eq:Jn(function(L,j,H){return[H<0?H+j:H]}),even:Jn(function(L,j){for(var H=0;H<j;H+=2)L.push(H);return L}),odd:Jn(function(L,j){for(var H=1;H<j;H+=2)L.push(H);return L}),lt:Jn(function(L,j,H){var et;for(H<0?et=H+j:H>j?et=j:et=H;--et>=0;)L.push(et);return L}),gt:Jn(function(L,j,H){for(var et=H<0?H+j:H;++et<j;)L.push(et);return L})}},c.pseudos.nth=c.pseudos.eq;for(a in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})c.pseudos[a]=t0(a);for(a in{submit:!0,reset:!0})c.pseudos[a]=e0(a);function xd(){}xd.prototype=c.filters=c.pseudos,c.setFilters=new xd;function Bo(L,j){var H,et,at,vt,yt,bt,Ct,_t=ee[L+" "];if(_t)return j?0:_t.slice(0);for(yt=L,bt=[],Ct=c.preFilter;yt;){(!H||(et=De.exec(yt)))&&(et&&(yt=yt.slice(et[0].length)||yt),bt.push(at=[])),H=!1,(et=zo.exec(yt))&&(H=et.shift(),at.push({value:H,type:et[0].replace(_," ")}),yt=yt.slice(H.length));for(vt in c.filter)(et=rn[vt].exec(yt))&&(!Ct[vt]||(et=Ct[vt](et)))&&(H=et.shift(),at.push({value:H,type:vt,matches:et}),yt=yt.slice(H.length));if(!H)break}return j?yt.length:yt?ue.error(L):ee(L,bt).slice(0)}function $s(L){for(var j=0,H=L.length,et="";j<H;j++)et+=L[j].value;return et}function ta(L,j,H){var et=j.dir,at=j.next,vt=at||et,yt=H&&vt==="parentNode",bt=ht++;return j.first?function(Ct,_t,Ot){for(;Ct=Ct[et];)if(Ct.nodeType===1||yt)return L(Ct,_t,Ot);return!1}:function(Ct,_t,Ot){var Bt,Vt,St=[q,bt];if(Ot){for(;Ct=Ct[et];)if((Ct.nodeType===1||yt)&&L(Ct,_t,Ot))return!0}else for(;Ct=Ct[et];)if(Ct.nodeType===1||yt)if(Vt=Ct[lt]||(Ct[lt]={}),at&&x(Ct,at))Ct=Ct[et]||Ct;else{if((Bt=Vt[vt])&&Bt[0]===q&&Bt[1]===bt)return St[2]=Bt[2];if(Vt[vt]=St,St[2]=L(Ct,_t,Ot))return!0}return!1}}function Lu(L){return L.length>1?function(j,H,et){for(var at=L.length;at--;)if(!L[at](j,H,et))return!1;return!0}:L[0]}function r0(L,j,H){for(var et=0,at=j.length;et<at;et++)ue(L,j[et],H);return H}function ea(L,j,H,et,at){for(var vt,yt=[],bt=0,Ct=L.length,_t=j!=null;bt<Ct;bt++)(vt=L[bt])&&(!H||H(vt,et,at))&&(yt.push(vt),_t&&j.push(bt));return yt}function ku(L,j,H,et,at,vt){return et&&!et[lt]&&(et=ku(et)),at&&!at[lt]&&(at=ku(at,vt)),Xr(function(yt,bt,Ct,_t){var Ot,Bt,Vt,St,ve=[],Ir=[],Qe=bt.length,Gr=yt||r0(j||"*",Ct.nodeType?[Ct]:Ct,[]),nn=L&&(yt||!j)?ea(Gr,ve,L,Ct,_t):Gr;if(H?(St=at||(yt?L:Qe||et)?[]:bt,H(nn,St,Ct,_t)):St=nn,et)for(Ot=ea(St,Ir),et(Ot,[],Ct,_t),Bt=Ot.length;Bt--;)(Vt=Ot[Bt])&&(St[Ir[Bt]]=!(nn[Ir[Bt]]=Vt));if(yt){if(at||L){if(at){for(Ot=[],Bt=St.length;Bt--;)(Vt=St[Bt])&&Ot.push(nn[Bt]=Vt);at(null,St=[],Ot,_t)}for(Bt=St.length;Bt--;)(Vt=St[Bt])&&(Ot=at?l.call(yt,Vt):ve[Bt])>-1&&(yt[Ot]=!(bt[Ot]=Vt))}}else St=ea(St===bt?St.splice(Qe,St.length):St),at?at(null,bt,St,_t):y.apply(bt,St)})}function Ou(L){for(var j,H,et,at=L.length,vt=c.relative[L[0].type],yt=vt||c.relative[" "],bt=vt?1:0,Ct=ta(function(Bt){return Bt===j},yt,!0),_t=ta(function(Bt){return l.call(j,Bt)>-1},yt,!0),Ot=[function(Bt,Vt,St){var ve=!vt&&(St||Vt!=g)||((j=Vt).nodeType?Ct(Bt,Vt,St):_t(Bt,Vt,St));return j=null,ve}];bt<at;bt++)if(H=c.relative[L[bt].type])Ot=[ta(Lu(Ot),H)];else{if(H=c.filter[L[bt].type].apply(null,L[bt].matches),H[lt]){for(et=++bt;et<at&&!c.relative[L[et].type];et++);return ku(bt>1&&Lu(Ot),bt>1&&$s(L.slice(0,bt-1).concat({value:L[bt-2].type===" "?"*":""})).replace(_,"$1"),H,bt<et&&Ou(L.slice(bt,et)),et<at&&Ou(L=L.slice(et)),et<at&&$s(L))}Ot.push(H)}return Lu(Ot)}function n0(L,j){var H=j.length>0,et=L.length>0,at=function(vt,yt,bt,Ct,_t){var Ot,Bt,Vt,St=0,ve="0",Ir=vt&&[],Qe=[],Gr=g,nn=vt||et&&c.find.TAG("*",_t),Li=q+=Gr==null?1:Math.random()||.1,ir=nn.length;for(_t&&(g=yt==N||yt||_t);ve!==ir&&(Ot=nn[ve])!=null;ve++){if(et&&Ot){for(Bt=0,!yt&&Ot.ownerDocument!=N&&(bn(Ot),bt=!E);Vt=L[Bt++];)if(Vt(Ot,yt||N,bt)){y.call(Ct,Ot);break}_t&&(q=Li)}H&&((Ot=!Vt&&Ot)&&St--,vt&&Ir.push(Ot))}if(St+=ve,H&&ve!==St){for(Bt=0;Vt=j[Bt++];)Vt(Ir,Qe,yt,bt);if(vt){if(St>0)for(;ve--;)Ir[ve]||Qe[ve]||(Qe[ve]=M.call(Ct));Qe=ea(Qe)}y.apply(Ct,Qe),_t&&!vt&&Qe.length>0&&St+j.length>1&&p.uniqueSort(Ct)}return _t&&(q=Li,g=Gr),Ir};return H?Xr(at):at}function Eu(L,j){var H,et=[],at=[],vt=Yt[L+" "];if(!vt){for(j||(j=Bo(L)),H=j.length;H--;)vt=Ou(j[H]),vt[lt]?et.push(vt):at.push(vt);vt=Yt(L,n0(at,et)),vt.selector=L}return vt}function wd(L,j,H,et){var at,vt,yt,bt,Ct,_t=typeof L=="function"&&L,Ot=!et&&Bo(L=_t.selector||L);if(H=H||[],Ot.length===1){if(vt=Ot[0]=Ot[0].slice(0),vt.length>2&&(yt=vt[0]).type==="ID"&&j.nodeType===9&&E&&c.relative[vt[1].type]){if(j=(c.find.ID(yt.matches[0].replace(cn,fn),j)||[])[0],j)_t&&(j=j.parentNode);else return H;L=L.slice(vt.shift().value.length)}for(at=rn.needsContext.test(L)?0:vt.length;at--&&(yt=vt[at],!c.relative[bt=yt.type]);)if((Ct=c.find[bt])&&(et=Ct(yt.matches[0].replace(cn,fn),Pu.test(vt[0].type)&&Du(j.parentNode)||j))){if(vt.splice(at,1),L=et.length&&$s(vt),!L)return y.apply(H,et),H;break}}return(_t||Eu(L,Ot))(et,j,!E,H,!j||Pu.test(L)&&Du(j.parentNode)||j),H}w.sortStable=lt.split("").sort(Ee).join("")===lt,bn(),w.sortDetached=Di(function(L){return L.compareDocumentPosition(N.createElement("fieldset"))&1}),p.find=ue,p.expr[":"]=p.expr.pseudos,p.unique=p.uniqueSort,ue.compile=Eu,ue.select=wd,ue.setDocument=bn,ue.tokenize=Bo,ue.escape=p.escapeSelector,ue.getText=p.text,ue.isXML=p.isXMLDoc,ue.selectors=p.expr,ue.support=p.support,ue.uniqueSort=p.uniqueSort})();var X=function(a,c,g){for(var m=[],I=g!==void 0;(a=a[c])&&a.nodeType!==9;)if(a.nodeType===1){if(I&&p(a).is(g))break;m.push(a)}return m},Q=function(a,c){for(var g=[];a;a=a.nextSibling)a.nodeType===1&&a!==c&&g.push(a);return g},Pt=p.expr.match.needsContext,Nt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function oe(a,c,g){return b(c)?p.grep(a,function(m,I){return!!c.call(m,I,m)!==g}):c.nodeType?p.grep(a,function(m){return m===c!==g}):typeof c!="string"?p.grep(a,function(m){return l.call(c,m)>-1!==g}):p.filter(c,a,g)}p.filter=function(a,c,g){var m=c[0];return g&&(a=":not("+a+")"),c.length===1&&m.nodeType===1?p.find.matchesSelector(m,a)?[m]:[]:p.find.matches(a,p.grep(c,function(I){return I.nodeType===1}))},p.fn.extend({find:function(a){var c,g,m=this.length,I=this;if(typeof a!="string")return this.pushStack(p(a).filter(function(){for(c=0;c<m;c++)if(p.contains(I[c],this))return!0}));for(g=this.pushStack([]),c=0;c<m;c++)p.find(a,I[c],g);return m>1?p.uniqueSort(g):g},filter:function(a){return this.pushStack(oe(this,a||[],!1))},not:function(a){return this.pushStack(oe(this,a||[],!0))},is:function(a){return!!oe(this,typeof a=="string"&&Pt.test(a)?p(a):a||[],!1).length}});var de,wt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Mt=p.fn.init=function(a,c,g){var m,I;if(!a)return this;if(g=g||de,typeof a=="string")if(a[0]==="<"&&a[a.length-1]===">"&&a.length>=3?m=[null,a,null]:m=wt.exec(a),m&&(m[1]||!c))if(m[1]){if(c=c instanceof p?c[0]:c,p.merge(this,p.parseHTML(m[1],c&&c.nodeType?c.ownerDocument||c:P,!0)),Nt.test(m[1])&&p.isPlainObject(c))for(m in c)b(this[m])?this[m](c[m]):this.attr(m,c[m]);return this}else return I=P.getElementById(m[2]),I&&(this[0]=I,this.length=1),this;else return!c||c.jquery?(c||g).find(a):this.constructor(c).find(a);else{if(a.nodeType)return this[0]=a,this.length=1,this;if(b(a))return g.ready!==void 0?g.ready(a):a(p)}return p.makeArray(a,this)};Mt.prototype=p.fn,de=p(P);var it=/^(?:parents|prev(?:Until|All))/,nt={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({has:function(a){var c=p(a,this),g=c.length;return this.filter(function(){for(var m=0;m<g;m++)if(p.contains(this,c[m]))return!0})},closest:function(a,c){var g,m=0,I=this.length,y=[],N=typeof a!="string"&&p(a);if(!Pt.test(a)){for(;m<I;m++)for(g=this[m];g&&g!==c;g=g.parentNode)if(g.nodeType<11&&(N?N.index(g)>-1:g.nodeType===1&&p.find.matchesSelector(g,a))){y.push(g);break}}return this.pushStack(y.length>1?p.uniqueSort(y):y)},index:function(a){return a?typeof a=="string"?l.call(p(a),this[0]):l.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,c){return this.pushStack(p.uniqueSort(p.merge(this.get(),p(a,c))))},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}});function dt(a,c){for(;(a=a[c])&&a.nodeType!==1;);return a}p.each({parent:function(a){var c=a.parentNode;return c&&c.nodeType!==11?c:null},parents:function(a){return X(a,"parentNode")},parentsUntil:function(a,c,g){return X(a,"parentNode",g)},next:function(a){return dt(a,"nextSibling")},prev:function(a){return dt(a,"previousSibling")},nextAll:function(a){return X(a,"nextSibling")},prevAll:function(a){return X(a,"previousSibling")},nextUntil:function(a,c,g){return X(a,"nextSibling",g)},prevUntil:function(a,c,g){return X(a,"previousSibling",g)},siblings:function(a){return Q((a.parentNode||{}).firstChild,a)},children:function(a){return Q(a.firstChild)},contents:function(a){return a.contentDocument!=null&&n(a.contentDocument)?a.contentDocument:(x(a,"template")&&(a=a.content||a),p.merge([],a.childNodes))}},function(a,c){p.fn[a]=function(g,m){var I=p.map(this,c,g);return a.slice(-5)!=="Until"&&(m=g),m&&typeof m=="string"&&(I=p.filter(m,I)),this.length>1&&(nt[a]||p.uniqueSort(I),it.test(a)&&I.reverse()),this.pushStack(I)}});var Gt=/[^\x20\t\r\n\f]+/g;function Ht(a){var c={};return p.each(a.match(Gt)||[],function(g,m){c[m]=!0}),c}p.Callbacks=function(a){a=typeof a=="string"?Ht(a):p.extend({},a);var c,g,m,I,y=[],N=[],G=-1,E=function(){for(I=I||a.once,m=c=!0;N.length;G=-1)for(g=N.shift();++G<y.length;)y[G].apply(g[0],g[1])===!1&&a.stopOnFalse&&(G=y.length,g=!1);a.memory||(g=!1),c=!1,I&&(g?y=[]:y="")},U={add:function(){return y&&(g&&!c&&(G=y.length-1,N.push(g)),function rt(lt){p.each(lt,function(q,ht){b(ht)?(!a.unique||!U.has(ht))&&y.push(ht):ht&&ht.length&&J(ht)!=="string"&&rt(ht)})}(arguments),g&&!c&&E()),this},remove:function(){return p.each(arguments,function(rt,lt){for(var q;(q=p.inArray(lt,y,q))>-1;)y.splice(q,1),q<=G&&G--}),this},has:function(rt){return rt?p.inArray(rt,y)>-1:y.length>0},empty:function(){return y&&(y=[]),this},disable:function(){return I=N=[],y=g="",this},disabled:function(){return!y},lock:function(){return I=N=[],!g&&!c&&(y=g=""),this},locked:function(){return!!I},fireWith:function(rt,lt){return I||(lt=lt||[],lt=[rt,lt.slice?lt.slice():lt],N.push(lt),c||E()),this},fire:function(){return U.fireWith(this,arguments),this},fired:function(){return!!m}};return U};function Tt(a){return a}function te(a){throw a}function A(a,c,g,m){var I;try{a&&b(I=a.promise)?I.call(a).done(c).fail(g):a&&b(I=a.then)?I.call(a,c,g):c.apply(void 0,[a].slice(m))}catch(y){g.apply(void 0,[y])}}p.extend({Deferred:function(a){var c=[["notify","progress",p.Callbacks("memory"),p.Callbacks("memory"),2],["resolve","done",p.Callbacks("once memory"),p.Callbacks("once memory"),0,"resolved"],["reject","fail",p.Callbacks("once memory"),p.Callbacks("once memory"),1,"rejected"]],g="pending",m={state:function(){return g},always:function(){return I.done(arguments).fail(arguments),this},catch:function(y){return m.then(null,y)},pipe:function(){var y=arguments;return p.Deferred(function(N){p.each(c,function(G,E){var U=b(y[E[4]])&&y[E[4]];I[E[1]](function(){var rt=U&&U.apply(this,arguments);rt&&b(rt.promise)?rt.promise().progress(N.notify).done(N.resolve).fail(N.reject):N[E[0]+"With"](this,U?[rt]:arguments)})}),y=null}).promise()},then:function(y,N,G){var E=0;function U(rt,lt,q,ht){return function(){var zt=this,ee=arguments,Yt=function(){var Ee,$r;if(!(rt<E)){if(Ee=q.apply(zt,ee),Ee===lt.promise())throw new TypeError("Thenable self-resolution");$r=Ee&&(typeof Ee=="object"||typeof Ee=="function")&&Ee.then,b($r)?ht?$r.call(Ee,U(E,lt,Tt,ht),U(E,lt,te,ht)):(E++,$r.call(Ee,U(E,lt,Tt,ht),U(E,lt,te,ht),U(E,lt,Tt,lt.notifyWith))):(q!==Tt&&(zt=void 0,ee=[Ee]),(ht||lt.resolveWith)(zt,ee))}},Ye=ht?Yt:function(){try{Yt()}catch(Ee){p.Deferred.exceptionHook&&p.Deferred.exceptionHook(Ee,Ye.error),rt+1>=E&&(q!==te&&(zt=void 0,ee=[Ee]),lt.rejectWith(zt,ee))}};rt?Ye():(p.Deferred.getErrorHook?Ye.error=p.Deferred.getErrorHook():p.Deferred.getStackHook&&(Ye.error=p.Deferred.getStackHook()),t.setTimeout(Ye))}}return p.Deferred(function(rt){c[0][3].add(U(0,rt,b(G)?G:Tt,rt.notifyWith)),c[1][3].add(U(0,rt,b(y)?y:Tt)),c[2][3].add(U(0,rt,b(N)?N:te))}).promise()},promise:function(y){return y!=null?p.extend(y,m):m}},I={};return p.each(c,function(y,N){var G=N[2],E=N[5];m[N[1]]=G.add,E&&G.add(function(){g=E},c[3-y][2].disable,c[3-y][3].disable,c[0][2].lock,c[0][3].lock),G.add(N[3].fire),I[N[0]]=function(){return I[N[0]+"With"](this===I?void 0:this,arguments),this},I[N[0]+"With"]=G.fireWith}),m.promise(I),a&&a.call(I,I),I},when:function(a){var c=arguments.length,g=c,m=Array(g),I=i.call(arguments),y=p.Deferred(),N=function(G){return function(E){m[G]=this,I[G]=arguments.length>1?i.call(arguments):E,--c||y.resolveWith(m,I)}};if(c<=1&&(A(a,y.done(N(g)).resolve,y.reject,!c),y.state()==="pending"||b(I[g]&&I[g].then)))return y.then();for(;g--;)A(I[g],N(g),y.reject);return y.promise()}});var T=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;p.Deferred.exceptionHook=function(a,c){t.console&&t.console.warn&&a&&T.test(a.name)&&t.console.warn("jQuery.Deferred exception: "+a.message,a.stack,c)},p.readyException=function(a){t.setTimeout(function(){throw a})};var k=p.Deferred();p.fn.ready=function(a){return k.then(a).catch(function(c){p.readyException(c)}),this},p.extend({isReady:!1,readyWait:1,ready:function(a){(a===!0?--p.readyWait:p.isReady)||(p.isReady=!0,!(a!==!0&&--p.readyWait>0)&&k.resolveWith(P,[p]))}}),p.ready.then=k.then;function B(){P.removeEventListener("DOMContentLoaded",B),t.removeEventListener("load",B),p.ready()}P.readyState==="complete"||P.readyState!=="loading"&&!P.documentElement.doScroll?t.setTimeout(p.ready):(P.addEventListener("DOMContentLoaded",B),t.addEventListener("load",B));var W=function(a,c,g,m,I,y,N){var G=0,E=a.length,U=g==null;if(J(g)==="object"){I=!0;for(G in g)W(a,c,G,g[G],!0,y,N)}else if(m!==void 0&&(I=!0,b(m)||(N=!0),U&&(N?(c.call(a,m),c=null):(U=c,c=function(rt,lt,q){return U.call(p(rt),q)})),c))for(;G<E;G++)c(a[G],g,N?m:m.call(a[G],G,c(a[G],g)));return I?a:U?c.call(a):E?c(a[0],g):y},ot=/^-ms-/,It=/-([a-z])/g;function Dt(a,c){return c.toUpperCase()}function Ut(a){return a.replace(ot,"ms-").replace(It,Dt)}var be=function(a){return a.nodeType===1||a.nodeType===9||!+a.nodeType};function Ne(){this.expando=p.expando+Ne.uid++}Ne.uid=1,Ne.prototype={cache:function(a){var c=a[this.expando];return c||(c={},be(a)&&(a.nodeType?a[this.expando]=c:Object.defineProperty(a,this.expando,{value:c,configurable:!0}))),c},set:function(a,c,g){var m,I=this.cache(a);if(typeof c=="string")I[Ut(c)]=g;else for(m in c)I[Ut(m)]=c[m];return I},get:function(a,c){return c===void 0?this.cache(a):a[this.expando]&&a[this.expando][Ut(c)]},access:function(a,c,g){return c===void 0||c&&typeof c=="string"&&g===void 0?this.get(a,c):(this.set(a,c,g),g!==void 0?g:c)},remove:function(a,c){var g,m=a[this.expando];if(m!==void 0){if(c!==void 0)for(Array.isArray(c)?c=c.map(Ut):(c=Ut(c),c=c in m?[c]:c.match(Gt)||[]),g=c.length;g--;)delete m[c[g]];(c===void 0||p.isEmptyObject(m))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var c=a[this.expando];return c!==void 0&&!p.isEmptyObject(c)}};var mt=new Ne,ie=new Ne,ge=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ye=/[A-Z]/g;function Ce(a){return a==="true"?!0:a==="false"?!1:a==="null"?null:a===+a+""?+a:ge.test(a)?JSON.parse(a):a}function ke(a,c,g){var m;if(g===void 0&&a.nodeType===1)if(m="data-"+c.replace(ye,"-$&").toLowerCase(),g=a.getAttribute(m),typeof g=="string"){try{g=Ce(g)}catch{}ie.set(a,c,g)}else g=void 0;return g}p.extend({hasData:function(a){return ie.hasData(a)||mt.hasData(a)},data:function(a,c,g){return ie.access(a,c,g)},removeData:function(a,c){ie.remove(a,c)},_data:function(a,c,g){return mt.access(a,c,g)},_removeData:function(a,c){mt.remove(a,c)}}),p.fn.extend({data:function(a,c){var g,m,I,y=this[0],N=y&&y.attributes;if(a===void 0){if(this.length&&(I=ie.get(y),y.nodeType===1&&!mt.get(y,"hasDataAttrs"))){for(g=N.length;g--;)N[g]&&(m=N[g].name,m.indexOf("data-")===0&&(m=Ut(m.slice(5)),ke(y,m,I[m])));mt.set(y,"hasDataAttrs",!0)}return I}return typeof a=="object"?this.each(function(){ie.set(this,a)}):W(this,function(G){var E;if(y&&G===void 0)return E=ie.get(y,a),E!==void 0||(E=ke(y,a),E!==void 0)?E:void 0;this.each(function(){ie.set(this,a,G)})},null,c,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){ie.remove(this,a)})}}),p.extend({queue:function(a,c,g){var m;if(a)return c=(c||"fx")+"queue",m=mt.get(a,c),g&&(!m||Array.isArray(g)?m=mt.access(a,c,p.makeArray(g)):m.push(g)),m||[]},dequeue:function(a,c){c=c||"fx";var g=p.queue(a,c),m=g.length,I=g.shift(),y=p._queueHooks(a,c),N=function(){p.dequeue(a,c)};I==="inprogress"&&(I=g.shift(),m--),I&&(c==="fx"&&g.unshift("inprogress"),delete y.stop,I.call(a,N,y)),!m&&y&&y.empty.fire()},_queueHooks:function(a,c){var g=c+"queueHooks";return mt.get(a,g)||mt.access(a,g,{empty:p.Callbacks("once memory").add(function(){mt.remove(a,[c+"queue",g])})})}}),p.fn.extend({queue:function(a,c){var g=2;return typeof a!="string"&&(c=a,a="fx",g--),arguments.length<g?p.queue(this[0],a):c===void 0?this:this.each(function(){var m=p.queue(this,a,c);p._queueHooks(this,a),a==="fx"&&m[0]!=="inprogress"&&p.dequeue(this,a)})},dequeue:function(a){return this.each(function(){p.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var g,m=1,I=p.Deferred(),y=this,N=this.length,G=function(){--m||I.resolveWith(y,[y])};for(typeof a!="string"&&(c=a,a=void 0),a=a||"fx";N--;)g=mt.get(y[N],a+"queueHooks"),g&&g.empty&&(m++,g.empty.add(G));return G(),I.promise(c)}});var nr=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Fr=new RegExp("^(?:([+-])=|)("+nr+")([a-z%]*)$","i"),pr=["Top","Right","Bottom","Left"],_r=P.documentElement,qr=function(a){return p.contains(a.ownerDocument,a)},Mo={composed:!0};_r.getRootNode&&(qr=function(a){return p.contains(a.ownerDocument,a)||a.getRootNode(Mo)===a.ownerDocument});var _n=function(a,c){return a=c||a,a.style.display==="none"||a.style.display===""&&qr(a)&&p.css(a,"display")==="none"};function To(a,c,g,m){var I,y,N=20,G=m?function(){return m.cur()}:function(){return p.css(a,c,"")},E=G(),U=g&&g[3]||(p.cssNumber[c]?"":"px"),rt=a.nodeType&&(p.cssNumber[c]||U!=="px"&&+E)&&Fr.exec(p.css(a,c));if(rt&&rt[3]!==U){for(E=E/2,U=U||rt[3],rt=+E||1;N--;)p.style(a,c,rt+U),(1-y)*(1-(y=G()/E||.5))<=0&&(N=0),rt=rt/y;rt=rt*2,p.style(a,c,rt+U),g=g||[]}return g&&(rt=+rt||+E||0,I=g[1]?rt+(g[1]+1)*g[2]:+g[2],m&&(m.unit=U,m.start=rt,m.end=I)),I}var So={};function Xs(a){var c,g=a.ownerDocument,m=a.nodeName,I=So[m];return I||(c=g.body.appendChild(g.createElement(m)),I=p.css(c,"display"),c.parentNode.removeChild(c),I==="none"&&(I="block"),So[m]=I,I)}function Mr(a,c){for(var g,m,I=[],y=0,N=a.length;y<N;y++)m=a[y],m.style&&(g=m.style.display,c?(g==="none"&&(I[y]=mt.get(m,"display")||null,I[y]||(m.style.display="")),m.style.display===""&&_n(m)&&(I[y]=Xs(m))):g!=="none"&&(I[y]="none",mt.set(m,"display",g)));for(y=0;y<N;y++)I[y]!=null&&(a[y].style.display=I[y]);return a}p.fn.extend({show:function(){return Mr(this,!0)},hide:function(){return Mr(this)},toggle:function(a){return typeof a=="boolean"?a?this.show():this.hide():this.each(function(){_n(this)?p(this).show():p(this).hide()})}});var Cn=/^(?:checkbox|radio)$/i,Po=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Do=/^$|^module$|\/(?:java|ecma)script/i;(function(){var a=P.createDocumentFragment(),c=a.appendChild(P.createElement("div")),g=P.createElement("input");g.setAttribute("type","radio"),g.setAttribute("checked","checked"),g.setAttribute("name","t"),c.appendChild(g),w.checkClone=c.cloneNode(!0).cloneNode(!0).lastChild.checked,c.innerHTML="<textarea>x</textarea>",w.noCloneChecked=!!c.cloneNode(!0).lastChild.defaultValue,c.innerHTML="<option></option>",w.option=!!c.lastChild})();var mr={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};mr.tbody=mr.tfoot=mr.colgroup=mr.caption=mr.thead,mr.th=mr.td,w.option||(mr.optgroup=mr.option=[1,"<select multiple='multiple'>","</select>"]);function Se(a,c){var g;return typeof a.getElementsByTagName<"u"?g=a.getElementsByTagName(c||"*"):typeof a.querySelectorAll<"u"?g=a.querySelectorAll(c||"*"):g=[],c===void 0||c&&x(a,c)?p.merge([a],g):g}function gu(a,c){for(var g=0,m=a.length;g<m;g++)mt.set(a[g],"globalEval",!c||mt.get(c[g],"globalEval"))}var vI=/<|&#?\w+;/;function Qh(a,c,g,m,I){for(var y,N,G,E,U,rt,lt=c.createDocumentFragment(),q=[],ht=0,zt=a.length;ht<zt;ht++)if(y=a[ht],y||y===0)if(J(y)==="object")p.merge(q,y.nodeType?[y]:y);else if(!vI.test(y))q.push(c.createTextNode(y));else{for(N=N||lt.appendChild(c.createElement("div")),G=(Po.exec(y)||["",""])[1].toLowerCase(),E=mr[G]||mr._default,N.innerHTML=E[1]+p.htmlPrefilter(y)+E[2],rt=E[0];rt--;)N=N.lastChild;p.merge(q,N.childNodes),N=lt.firstChild,N.textContent=""}for(lt.textContent="",ht=0;y=q[ht++];){if(m&&p.inArray(y,m)>-1){I&&I.push(y);continue}if(U=qr(y),N=Se(lt.appendChild(y),"script"),U&&gu(N),g)for(rt=0;y=N[rt++];)Do.test(y.type||"")&&g.push(y)}return lt}var Kh=/^([^.]*)(?:\.(.+)|)/;function Mi(){return!0}function Ti(){return!1}function pu(a,c,g,m,I,y){var N,G;if(typeof c=="object"){typeof g!="string"&&(m=m||g,g=void 0);for(G in c)pu(a,G,g,m,c[G],y);return a}if(m==null&&I==null?(I=g,m=g=void 0):I==null&&(typeof g=="string"?(I=m,m=void 0):(I=m,m=g,g=void 0)),I===!1)I=Ti;else if(!I)return a;return y===1&&(N=I,I=function(E){return p().off(E),N.apply(this,arguments)},I.guid=N.guid||(N.guid=p.guid++)),a.each(function(){p.event.add(this,c,I,m,g)})}p.event={global:{},add:function(a,c,g,m,I){var y,N,G,E,U,rt,lt,q,ht,zt,ee,Yt=mt.get(a);if(be(a))for(g.handler&&(y=g,g=y.handler,I=y.selector),I&&p.find.matchesSelector(_r,I),g.guid||(g.guid=p.guid++),(E=Yt.events)||(E=Yt.events=Object.create(null)),(N=Yt.handle)||(N=Yt.handle=function(Ye){return typeof p<"u"&&p.event.triggered!==Ye.type?p.event.dispatch.apply(a,arguments):void 0}),c=(c||"").match(Gt)||[""],U=c.length;U--;)G=Kh.exec(c[U])||[],ht=ee=G[1],zt=(G[2]||"").split(".").sort(),ht&&(lt=p.event.special[ht]||{},ht=(I?lt.delegateType:lt.bindType)||ht,lt=p.event.special[ht]||{},rt=p.extend({type:ht,origType:ee,data:m,handler:g,guid:g.guid,selector:I,needsContext:I&&p.expr.match.needsContext.test(I),namespace:zt.join(".")},y),(q=E[ht])||(q=E[ht]=[],q.delegateCount=0,(!lt.setup||lt.setup.call(a,m,zt,N)===!1)&&a.addEventListener&&a.addEventListener(ht,N)),lt.add&&(lt.add.call(a,rt),rt.handler.guid||(rt.handler.guid=g.guid)),I?q.splice(q.delegateCount++,0,rt):q.push(rt),p.event.global[ht]=!0)},remove:function(a,c,g,m,I){var y,N,G,E,U,rt,lt,q,ht,zt,ee,Yt=mt.hasData(a)&&mt.get(a);if(!(!Yt||!(E=Yt.events))){for(c=(c||"").match(Gt)||[""],U=c.length;U--;){if(G=Kh.exec(c[U])||[],ht=ee=G[1],zt=(G[2]||"").split(".").sort(),!ht){for(ht in E)p.event.remove(a,ht+c[U],g,m,!0);continue}for(lt=p.event.special[ht]||{},ht=(m?lt.delegateType:lt.bindType)||ht,q=E[ht]||[],G=G[2]&&new RegExp("(^|\\.)"+zt.join("\\.(?:.*\\.|)")+"(\\.|$)"),N=y=q.length;y--;)rt=q[y],(I||ee===rt.origType)&&(!g||g.guid===rt.guid)&&(!G||G.test(rt.namespace))&&(!m||m===rt.selector||m==="**"&&rt.selector)&&(q.splice(y,1),rt.selector&&q.delegateCount--,lt.remove&&lt.remove.call(a,rt));N&&!q.length&&((!lt.teardown||lt.teardown.call(a,zt,Yt.handle)===!1)&&p.removeEvent(a,ht,Yt.handle),delete E[ht])}p.isEmptyObject(E)&&mt.remove(a,"handle events")}},dispatch:function(a){var c,g,m,I,y,N,G=new Array(arguments.length),E=p.event.fix(a),U=(mt.get(this,"events")||Object.create(null))[E.type]||[],rt=p.event.special[E.type]||{};for(G[0]=E,c=1;c<arguments.length;c++)G[c]=arguments[c];if(E.delegateTarget=this,!(rt.preDispatch&&rt.preDispatch.call(this,E)===!1)){for(N=p.event.handlers.call(this,E,U),c=0;(I=N[c++])&&!E.isPropagationStopped();)for(E.currentTarget=I.elem,g=0;(y=I.handlers[g++])&&!E.isImmediatePropagationStopped();)(!E.rnamespace||y.namespace===!1||E.rnamespace.test(y.namespace))&&(E.handleObj=y,E.data=y.data,m=((p.event.special[y.origType]||{}).handle||y.handler).apply(I.elem,G),m!==void 0&&(E.result=m)===!1&&(E.preventDefault(),E.stopPropagation()));return rt.postDispatch&&rt.postDispatch.call(this,E),E.result}},handlers:function(a,c){var g,m,I,y,N,G=[],E=c.delegateCount,U=a.target;if(E&&U.nodeType&&!(a.type==="click"&&a.button>=1)){for(;U!==this;U=U.parentNode||this)if(U.nodeType===1&&!(a.type==="click"&&U.disabled===!0)){for(y=[],N={},g=0;g<E;g++)m=c[g],I=m.selector+" ",N[I]===void 0&&(N[I]=m.needsContext?p(I,this).index(U)>-1:p.find(I,this,null,[U]).length),N[I]&&y.push(m);y.length&&G.push({elem:U,handlers:y})}}return U=this,E<c.length&&G.push({elem:U,handlers:c.slice(E)}),G},addProp:function(a,c){Object.defineProperty(p.Event.prototype,a,{enumerable:!0,configurable:!0,get:b(c)?function(){if(this.originalEvent)return c(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(g){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:g})}})},fix:function(a){return a[p.expando]?a:new p.Event(a)},special:{load:{noBubble:!0},click:{setup:function(a){var c=this||a;return Cn.test(c.type)&&c.click&&x(c,"input")&&Hs(c,"click",!0),!1},trigger:function(a){var c=this||a;return Cn.test(c.type)&&c.click&&x(c,"input")&&Hs(c,"click"),!0},_default:function(a){var c=a.target;return Cn.test(c.type)&&c.click&&x(c,"input")&&mt.get(c,"click")||x(c,"a")}},beforeunload:{postDispatch:function(a){a.result!==void 0&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}};function Hs(a,c,g){if(!g){mt.get(a,c)===void 0&&p.event.add(a,c,Mi);return}mt.set(a,c,!1),p.event.add(a,c,{namespace:!1,handler:function(m){var I,y=mt.get(this,c);if(m.isTrigger&1&&this[c]){if(y)(p.event.special[c]||{}).delegateType&&m.stopPropagation();else if(y=i.call(arguments),mt.set(this,c,y),this[c](),I=mt.get(this,c),mt.set(this,c,!1),y!==I)return m.stopImmediatePropagation(),m.preventDefault(),I}else y&&(mt.set(this,c,p.event.trigger(y[0],y.slice(1),this)),m.stopPropagation(),m.isImmediatePropagationStopped=Mi)}})}p.removeEvent=function(a,c,g){a.removeEventListener&&a.removeEventListener(c,g)},p.Event=function(a,c){if(!(this instanceof p.Event))return new p.Event(a,c);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.defaultPrevented===void 0&&a.returnValue===!1?Mi:Ti,this.target=a.target&&a.target.nodeType===3?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,c&&p.extend(this,c),this.timeStamp=a&&a.timeStamp||Date.now(),this[p.expando]=!0},p.Event.prototype={constructor:p.Event,isDefaultPrevented:Ti,isPropagationStopped:Ti,isImmediatePropagationStopped:Ti,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Mi,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Mi,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Mi,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},p.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},p.event.addProp),p.each({focus:"focusin",blur:"focusout"},function(a,c){function g(m){if(P.documentMode){var I=mt.get(this,"handle"),y=p.event.fix(m);y.type=m.type==="focusin"?"focus":"blur",y.isSimulated=!0,I(m),y.target===y.currentTarget&&I(y)}else p.event.simulate(c,m.target,p.event.fix(m))}p.event.special[a]={setup:function(){var m;if(Hs(this,a,!0),P.documentMode)m=mt.get(this,c),m||this.addEventListener(c,g),mt.set(this,c,(m||0)+1);else return!1},trigger:function(){return Hs(this,a),!0},teardown:function(){var m;if(P.documentMode)m=mt.get(this,c)-1,m?mt.set(this,c,m):(this.removeEventListener(c,g),mt.remove(this,c));else return!1},_default:function(m){return mt.get(m.target,a)},delegateType:c},p.event.special[c]={setup:function(){var m=this.ownerDocument||this.document||this,I=P.documentMode?this:m,y=mt.get(I,c);y||(P.documentMode?this.addEventListener(c,g):m.addEventListener(a,g,!0)),mt.set(I,c,(y||0)+1)},teardown:function(){var m=this.ownerDocument||this.document||this,I=P.documentMode?this:m,y=mt.get(I,c)-1;y?mt.set(I,c,y):(P.documentMode?this.removeEventListener(c,g):m.removeEventListener(a,g,!0),mt.remove(I,c))}}}),p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,c){p.event.special[a]={delegateType:c,bindType:c,handle:function(g){var m,I=this,y=g.relatedTarget,N=g.handleObj;return(!y||y!==I&&!p.contains(I,y))&&(g.type=N.origType,m=N.handler.apply(this,arguments),g.type=c),m}}}),p.fn.extend({on:function(a,c,g,m){return pu(this,a,c,g,m)},one:function(a,c,g,m){return pu(this,a,c,g,m,1)},off:function(a,c,g){var m,I;if(a&&a.preventDefault&&a.handleObj)return m=a.handleObj,p(a.delegateTarget).off(m.namespace?m.origType+"."+m.namespace:m.origType,m.selector,m.handler),this;if(typeof a=="object"){for(I in a)this.off(I,c,a[I]);return this}return(c===!1||typeof c=="function")&&(g=c,c=void 0),g===!1&&(g=Ti),this.each(function(){p.event.remove(this,a,g,c)})}});var II=/<script|<style|<link/i,AI=/checked\s*(?:[^=]|=\s*.checked.)/i,yI=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function qh(a,c){return x(a,"table")&&x(c.nodeType!==11?c:c.firstChild,"tr")&&p(a).children("tbody")[0]||a}function CI(a){return a.type=(a.getAttribute("type")!==null)+"/"+a.type,a}function xI(a){return(a.type||"").slice(0,5)==="true/"?a.type=a.type.slice(5):a.removeAttribute("type"),a}function $h(a,c){var g,m,I,y,N,G,E;if(c.nodeType===1){if(mt.hasData(a)&&(y=mt.get(a),E=y.events,E)){mt.remove(c,"handle events");for(I in E)for(g=0,m=E[I].length;g<m;g++)p.event.add(c,I,E[I][g])}ie.hasData(a)&&(N=ie.access(a),G=p.extend({},N),ie.set(c,G))}}function wI(a,c){var g=c.nodeName.toLowerCase();g==="input"&&Cn.test(a.type)?c.checked=a.checked:(g==="input"||g==="textarea")&&(c.defaultValue=a.defaultValue)}function Si(a,c,g,m){c=o(c);var I,y,N,G,E,U,rt=0,lt=a.length,q=lt-1,ht=c[0],zt=b(ht);if(zt||lt>1&&typeof ht=="string"&&!w.checkClone&&AI.test(ht))return a.each(function(ee){var Yt=a.eq(ee);zt&&(c[0]=ht.call(this,ee,Yt.html())),Si(Yt,c,g,m)});if(lt&&(I=Qh(c,a[0].ownerDocument,!1,a,m),y=I.firstChild,I.childNodes.length===1&&(I=y),y||m)){for(N=p.map(Se(I,"script"),CI),G=N.length;rt<lt;rt++)E=I,rt!==q&&(E=p.clone(E,!0,!0),G&&p.merge(N,Se(E,"script"))),g.call(a[rt],E,rt);if(G)for(U=N[N.length-1].ownerDocument,p.map(N,xI),rt=0;rt<G;rt++)E=N[rt],Do.test(E.type||"")&&!mt.access(E,"globalEval")&&p.contains(U,E)&&(E.src&&(E.type||"").toLowerCase()!=="module"?p._evalUrl&&!E.noModule&&p._evalUrl(E.src,{nonce:E.nonce||E.getAttribute("nonce")},U):F(E.textContent.replace(yI,""),E,U))}return a}function td(a,c,g){for(var m,I=c?p.filter(c,a):a,y=0;(m=I[y])!=null;y++)!g&&m.nodeType===1&&p.cleanData(Se(m)),m.parentNode&&(g&&qr(m)&&gu(Se(m,"script")),m.parentNode.removeChild(m));return a}p.extend({htmlPrefilter:function(a){return a},clone:function(a,c,g){var m,I,y,N,G=a.cloneNode(!0),E=qr(a);if(!w.noCloneChecked&&(a.nodeType===1||a.nodeType===11)&&!p.isXMLDoc(a))for(N=Se(G),y=Se(a),m=0,I=y.length;m<I;m++)wI(y[m],N[m]);if(c)if(g)for(y=y||Se(a),N=N||Se(G),m=0,I=y.length;m<I;m++)$h(y[m],N[m]);else $h(a,G);return N=Se(G,"script"),N.length>0&&gu(N,!E&&Se(a,"script")),G},cleanData:function(a){for(var c,g,m,I=p.event.special,y=0;(g=a[y])!==void 0;y++)if(be(g)){if(c=g[mt.expando]){if(c.events)for(m in c.events)I[m]?p.event.remove(g,m):p.removeEvent(g,m,c.handle);g[mt.expando]=void 0}g[ie.expando]&&(g[ie.expando]=void 0)}}}),p.fn.extend({detach:function(a){return td(this,a,!0)},remove:function(a){return td(this,a)},text:function(a){return W(this,function(c){return c===void 0?p.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=c)})},null,a,arguments.length)},append:function(){return Si(this,arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var c=qh(this,a);c.appendChild(a)}})},prepend:function(){return Si(this,arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var c=qh(this,a);c.insertBefore(a,c.firstChild)}})},before:function(){return Si(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return Si(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,c=0;(a=this[c])!=null;c++)a.nodeType===1&&(p.cleanData(Se(a,!1)),a.textContent="");return this},clone:function(a,c){return a=a??!1,c=c??a,this.map(function(){return p.clone(this,a,c)})},html:function(a){return W(this,function(c){var g=this[0]||{},m=0,I=this.length;if(c===void 0&&g.nodeType===1)return g.innerHTML;if(typeof c=="string"&&!II.test(c)&&!mr[(Po.exec(c)||["",""])[1].toLowerCase()]){c=p.htmlPrefilter(c);try{for(;m<I;m++)g=this[m]||{},g.nodeType===1&&(p.cleanData(Se(g,!1)),g.innerHTML=c);g=0}catch{}}g&&this.empty().append(c)},null,a,arguments.length)},replaceWith:function(){var a=[];return Si(this,arguments,function(c){var g=this.parentNode;p.inArray(this,a)<0&&(p.cleanData(Se(this)),g&&g.replaceChild(c,this))},a)}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,c){p.fn[a]=function(g){for(var m,I=[],y=p(g),N=y.length-1,G=0;G<=N;G++)m=G===N?this:this.clone(!0),p(y[G])[c](m),s.apply(I,m.get());return this.pushStack(I)}});var mu=new RegExp("^("+nr+")(?!px)[a-z%]+$","i"),vu=/^--/,Js=function(a){var c=a.ownerDocument.defaultView;return(!c||!c.opener)&&(c=t),c.getComputedStyle(a)},ed=function(a,c,g){var m,I,y={};for(I in c)y[I]=a.style[I],a.style[I]=c[I];m=g.call(a);for(I in c)a.style[I]=y[I];return m},bI=new RegExp(pr.join("|"),"i");(function(){function a(){if(U){E.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",U.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",_r.appendChild(E).appendChild(U);var rt=t.getComputedStyle(U);g=rt.top!=="1%",G=c(rt.marginLeft)===12,U.style.right="60%",y=c(rt.right)===36,m=c(rt.width)===36,U.style.position="absolute",I=c(U.offsetWidth/3)===12,_r.removeChild(E),U=null}}function c(rt){return Math.round(parseFloat(rt))}var g,m,I,y,N,G,E=P.createElement("div"),U=P.createElement("div");U.style&&(U.style.backgroundClip="content-box",U.cloneNode(!0).style.backgroundClip="",w.clearCloneStyle=U.style.backgroundClip==="content-box",p.extend(w,{boxSizingReliable:function(){return a(),m},pixelBoxStyles:function(){return a(),y},pixelPosition:function(){return a(),g},reliableMarginLeft:function(){return a(),G},scrollboxSize:function(){return a(),I},reliableTrDimensions:function(){var rt,lt,q,ht;return N==null&&(rt=P.createElement("table"),lt=P.createElement("tr"),q=P.createElement("div"),rt.style.cssText="position:absolute;left:-11111px;border-collapse:separate",lt.style.cssText="box-sizing:content-box;border:1px solid",lt.style.height="1px",q.style.height="9px",q.style.display="block",_r.appendChild(rt).appendChild(lt).appendChild(q),ht=t.getComputedStyle(lt),N=parseInt(ht.height,10)+parseInt(ht.borderTopWidth,10)+parseInt(ht.borderBottomWidth,10)===lt.offsetHeight,_r.removeChild(rt)),N}}))})();function Lo(a,c,g){var m,I,y,N,G=vu.test(c),E=a.style;return g=g||Js(a),g&&(N=g.getPropertyValue(c)||g[c],G&&N&&(N=N.replace(_,"$1")||void 0),N===""&&!qr(a)&&(N=p.style(a,c)),!w.pixelBoxStyles()&&mu.test(N)&&bI.test(c)&&(m=E.width,I=E.minWidth,y=E.maxWidth,E.minWidth=E.maxWidth=E.width=N,N=g.width,E.width=m,E.minWidth=I,E.maxWidth=y)),N!==void 0?N+"":N}function rd(a,c){return{get:function(){if(a()){delete this.get;return}return(this.get=c).apply(this,arguments)}}}var nd=["Webkit","Moz","ms"],id=P.createElement("div").style,od={};function NI(a){for(var c=a[0].toUpperCase()+a.slice(1),g=nd.length;g--;)if(a=nd[g]+c,a in id)return a}function Iu(a){var c=p.cssProps[a]||od[a];return c||(a in id?a:od[a]=NI(a)||a)}var MI=/^(none|table(?!-c[ea]).+)/,TI={position:"absolute",visibility:"hidden",display:"block"},sd={letterSpacing:"0",fontWeight:"400"};function ad(a,c,g){var m=Fr.exec(c);return m?Math.max(0,m[2]-(g||0))+(m[3]||"px"):c}function Au(a,c,g,m,I,y){var N=c==="width"?1:0,G=0,E=0,U=0;if(g===(m?"border":"content"))return 0;for(;N<4;N+=2)g==="margin"&&(U+=p.css(a,g+pr[N],!0,I)),m?(g==="content"&&(E-=p.css(a,"padding"+pr[N],!0,I)),g!=="margin"&&(E-=p.css(a,"border"+pr[N]+"Width",!0,I))):(E+=p.css(a,"padding"+pr[N],!0,I),g!=="padding"?E+=p.css(a,"border"+pr[N]+"Width",!0,I):G+=p.css(a,"border"+pr[N]+"Width",!0,I));return!m&&y>=0&&(E+=Math.max(0,Math.ceil(a["offset"+c[0].toUpperCase()+c.slice(1)]-y-E-G-.5))||0),E+U}function ld(a,c,g){var m=Js(a),I=!w.boxSizingReliable()||g,y=I&&p.css(a,"boxSizing",!1,m)==="border-box",N=y,G=Lo(a,c,m),E="offset"+c[0].toUpperCase()+c.slice(1);if(mu.test(G)){if(!g)return G;G="auto"}return(!w.boxSizingReliable()&&y||!w.reliableTrDimensions()&&x(a,"tr")||G==="auto"||!parseFloat(G)&&p.css(a,"display",!1,m)==="inline")&&a.getClientRects().length&&(y=p.css(a,"boxSizing",!1,m)==="border-box",N=E in a,N&&(G=a[E])),G=parseFloat(G)||0,G+Au(a,c,g||(y?"border":"content"),N,m,G)+"px"}p.extend({cssHooks:{opacity:{get:function(a,c){if(c){var g=Lo(a,"opacity");return g===""?"1":g}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(a,c,g,m){if(!(!a||a.nodeType===3||a.nodeType===8||!a.style)){var I,y,N,G=Ut(c),E=vu.test(c),U=a.style;if(E||(c=Iu(G)),N=p.cssHooks[c]||p.cssHooks[G],g!==void 0){if(y=typeof g,y==="string"&&(I=Fr.exec(g))&&I[1]&&(g=To(a,c,I),y="number"),g==null||g!==g)return;y==="number"&&!E&&(g+=I&&I[3]||(p.cssNumber[G]?"":"px")),!w.clearCloneStyle&&g===""&&c.indexOf("background")===0&&(U[c]="inherit"),(!N||!("set"in N)||(g=N.set(a,g,m))!==void 0)&&(E?U.setProperty(c,g):U[c]=g)}else return N&&"get"in N&&(I=N.get(a,!1,m))!==void 0?I:U[c]}},css:function(a,c,g,m){var I,y,N,G=Ut(c),E=vu.test(c);return E||(c=Iu(G)),N=p.cssHooks[c]||p.cssHooks[G],N&&"get"in N&&(I=N.get(a,!0,g)),I===void 0&&(I=Lo(a,c,m)),I==="normal"&&c in sd&&(I=sd[c]),g===""||g?(y=parseFloat(I),g===!0||isFinite(y)?y||0:I):I}}),p.each(["height","width"],function(a,c){p.cssHooks[c]={get:function(g,m,I){if(m)return MI.test(p.css(g,"display"))&&(!g.getClientRects().length||!g.getBoundingClientRect().width)?ed(g,TI,function(){return ld(g,c,I)}):ld(g,c,I)},set:function(g,m,I){var y,N=Js(g),G=!w.scrollboxSize()&&N.position==="absolute",E=G||I,U=E&&p.css(g,"boxSizing",!1,N)==="border-box",rt=I?Au(g,c,I,U,N):0;return U&&G&&(rt-=Math.ceil(g["offset"+c[0].toUpperCase()+c.slice(1)]-parseFloat(N[c])-Au(g,c,"border",!1,N)-.5)),rt&&(y=Fr.exec(m))&&(y[3]||"px")!=="px"&&(g.style[c]=m,m=p.css(g,c)),ad(g,m,rt)}}}),p.cssHooks.marginLeft=rd(w.reliableMarginLeft,function(a,c){if(c)return(parseFloat(Lo(a,"marginLeft"))||a.getBoundingClientRect().left-ed(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),p.each({margin:"",padding:"",border:"Width"},function(a,c){p.cssHooks[a+c]={expand:function(g){for(var m=0,I={},y=typeof g=="string"?g.split(" "):[g];m<4;m++)I[a+pr[m]+c]=y[m]||y[m-2]||y[0];return I}},a!=="margin"&&(p.cssHooks[a+c].set=ad)}),p.fn.extend({css:function(a,c){return W(this,function(g,m,I){var y,N,G={},E=0;if(Array.isArray(m)){for(y=Js(g),N=m.length;E<N;E++)G[m[E]]=p.css(g,m[E],!1,y);return G}return I!==void 0?p.style(g,m,I):p.css(g,m)},a,c,arguments.length>1)}});function vr(a,c,g,m,I){return new vr.prototype.init(a,c,g,m,I)}p.Tween=vr,vr.prototype={constructor:vr,init:function(a,c,g,m,I,y){this.elem=a,this.prop=g,this.easing=I||p.easing._default,this.options=c,this.start=this.now=this.cur(),this.end=m,this.unit=y||(p.cssNumber[g]?"":"px")},cur:function(){var a=vr.propHooks[this.prop];return a&&a.get?a.get(this):vr.propHooks._default.get(this)},run:function(a){var c,g=vr.propHooks[this.prop];return this.options.duration?this.pos=c=p.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=c=a,this.now=(this.end-this.start)*c+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),g&&g.set?g.set(this):vr.propHooks._default.set(this),this}},vr.prototype.init.prototype=vr.prototype,vr.propHooks={_default:{get:function(a){var c;return a.elem.nodeType!==1||a.elem[a.prop]!=null&&a.elem.style[a.prop]==null?a.elem[a.prop]:(c=p.css(a.elem,a.prop,""),!c||c==="auto"?0:c)},set:function(a){p.fx.step[a.prop]?p.fx.step[a.prop](a):a.elem.nodeType===1&&(p.cssHooks[a.prop]||a.elem.style[Iu(a.prop)]!=null)?p.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},vr.propHooks.scrollTop=vr.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},p.easing={linear:function(a){return a},swing:function(a){return .5-Math.cos(a*Math.PI)/2},_default:"swing"},p.fx=vr.prototype.init,p.fx.step={};var Pi,Qs,SI=/^(?:toggle|show|hide)$/,PI=/queueHooks$/;function yu(){Qs&&(P.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(yu):t.setTimeout(yu,p.fx.interval),p.fx.tick())}function ud(){return t.setTimeout(function(){Pi=void 0}),Pi=Date.now()}function Ks(a,c){var g,m=0,I={height:a};for(c=c?1:0;m<4;m+=2-c)g=pr[m],I["margin"+g]=I["padding"+g]=a;return c&&(I.opacity=I.width=a),I}function cd(a,c,g){for(var m,I=(Vr.tweeners[c]||[]).concat(Vr.tweeners["*"]),y=0,N=I.length;y<N;y++)if(m=I[y].call(g,c,a))return m}function DI(a,c,g){var m,I,y,N,G,E,U,rt,lt="width"in c||"height"in c,q=this,ht={},zt=a.style,ee=a.nodeType&&_n(a),Yt=mt.get(a,"fxshow");g.queue||(N=p._queueHooks(a,"fx"),N.unqueued==null&&(N.unqueued=0,G=N.empty.fire,N.empty.fire=function(){N.unqueued||G()}),N.unqueued++,q.always(function(){q.always(function(){N.unqueued--,p.queue(a,"fx").length||N.empty.fire()})}));for(m in c)if(I=c[m],SI.test(I)){if(delete c[m],y=y||I==="toggle",I===(ee?"hide":"show"))if(I==="show"&&Yt&&Yt[m]!==void 0)ee=!0;else continue;ht[m]=Yt&&Yt[m]||p.style(a,m)}if(E=!p.isEmptyObject(c),!(!E&&p.isEmptyObject(ht))){lt&&a.nodeType===1&&(g.overflow=[zt.overflow,zt.overflowX,zt.overflowY],U=Yt&&Yt.display,U==null&&(U=mt.get(a,"display")),rt=p.css(a,"display"),rt==="none"&&(U?rt=U:(Mr([a],!0),U=a.style.display||U,rt=p.css(a,"display"),Mr([a]))),(rt==="inline"||rt==="inline-block"&&U!=null)&&p.css(a,"float")==="none"&&(E||(q.done(function(){zt.display=U}),U==null&&(rt=zt.display,U=rt==="none"?"":rt)),zt.display="inline-block")),g.overflow&&(zt.overflow="hidden",q.always(function(){zt.overflow=g.overflow[0],zt.overflowX=g.overflow[1],zt.overflowY=g.overflow[2]})),E=!1;for(m in ht)E||(Yt?"hidden"in Yt&&(ee=Yt.hidden):Yt=mt.access(a,"fxshow",{display:U}),y&&(Yt.hidden=!ee),ee&&Mr([a],!0),q.done(function(){ee||Mr([a]),mt.remove(a,"fxshow");for(m in ht)p.style(a,m,ht[m])})),E=cd(ee?Yt[m]:0,m,q),m in Yt||(Yt[m]=E.start,ee&&(E.end=E.start,E.start=0))}}function LI(a,c){var g,m,I,y,N;for(g in a)if(m=Ut(g),I=c[m],y=a[g],Array.isArray(y)&&(I=y[1],y=a[g]=y[0]),g!==m&&(a[m]=y,delete a[g]),N=p.cssHooks[m],N&&"expand"in N){y=N.expand(y),delete a[m];for(g in y)g in a||(a[g]=y[g],c[g]=I)}else c[m]=I}function Vr(a,c,g){var m,I,y=0,N=Vr.prefilters.length,G=p.Deferred().always(function(){delete E.elem}),E=function(){if(I)return!1;for(var lt=Pi||ud(),q=Math.max(0,U.startTime+U.duration-lt),ht=q/U.duration||0,zt=1-ht,ee=0,Yt=U.tweens.length;ee<Yt;ee++)U.tweens[ee].run(zt);return G.notifyWith(a,[U,zt,q]),zt<1&&Yt?q:(Yt||G.notifyWith(a,[U,1,0]),G.resolveWith(a,[U]),!1)},U=G.promise({elem:a,props:p.extend({},c),opts:p.extend(!0,{specialEasing:{},easing:p.easing._default},g),originalProperties:c,originalOptions:g,startTime:Pi||ud(),duration:g.duration,tweens:[],createTween:function(lt,q){var ht=p.Tween(a,U.opts,lt,q,U.opts.specialEasing[lt]||U.opts.easing);return U.tweens.push(ht),ht},stop:function(lt){var q=0,ht=lt?U.tweens.length:0;if(I)return this;for(I=!0;q<ht;q++)U.tweens[q].run(1);return lt?(G.notifyWith(a,[U,1,0]),G.resolveWith(a,[U,lt])):G.rejectWith(a,[U,lt]),this}}),rt=U.props;for(LI(rt,U.opts.specialEasing);y<N;y++)if(m=Vr.prefilters[y].call(U,a,rt,U.opts),m)return b(m.stop)&&(p._queueHooks(U.elem,U.opts.queue).stop=m.stop.bind(m)),m;return p.map(rt,cd,U),b(U.opts.start)&&U.opts.start.call(a,U),U.progress(U.opts.progress).done(U.opts.done,U.opts.complete).fail(U.opts.fail).always(U.opts.always),p.fx.timer(p.extend(E,{elem:a,anim:U,queue:U.opts.queue})),U}p.Animation=p.extend(Vr,{tweeners:{"*":[function(a,c){var g=this.createTween(a,c);return To(g.elem,a,Fr.exec(c),g),g}]},tweener:function(a,c){b(a)?(c=a,a=["*"]):a=a.match(Gt);for(var g,m=0,I=a.length;m<I;m++)g=a[m],Vr.tweeners[g]=Vr.tweeners[g]||[],Vr.tweeners[g].unshift(c)},prefilters:[DI],prefilter:function(a,c){c?Vr.prefilters.unshift(a):Vr.prefilters.push(a)}}),p.speed=function(a,c,g){var m=a&&typeof a=="object"?p.extend({},a):{complete:g||!g&&c||b(a)&&a,duration:a,easing:g&&c||c&&!b(c)&&c};return p.fx.off?m.duration=0:typeof m.duration!="number"&&(m.duration in p.fx.speeds?m.duration=p.fx.speeds[m.duration]:m.duration=p.fx.speeds._default),(m.queue==null||m.queue===!0)&&(m.queue="fx"),m.old=m.complete,m.complete=function(){b(m.old)&&m.old.call(this),m.queue&&p.dequeue(this,m.queue)},m},p.fn.extend({fadeTo:function(a,c,g,m){return this.filter(_n).css("opacity",0).show().end().animate({opacity:c},a,g,m)},animate:function(a,c,g,m){var I=p.isEmptyObject(a),y=p.speed(c,g,m),N=function(){var G=Vr(this,p.extend({},a),y);(I||mt.get(this,"finish"))&&G.stop(!0)};return N.finish=N,I||y.queue===!1?this.each(N):this.queue(y.queue,N)},stop:function(a,c,g){var m=function(I){var y=I.stop;delete I.stop,y(g)};return typeof a!="string"&&(g=c,c=a,a=void 0),c&&this.queue(a||"fx",[]),this.each(function(){var I=!0,y=a!=null&&a+"queueHooks",N=p.timers,G=mt.get(this);if(y)G[y]&&G[y].stop&&m(G[y]);else for(y in G)G[y]&&G[y].stop&&PI.test(y)&&m(G[y]);for(y=N.length;y--;)N[y].elem===this&&(a==null||N[y].queue===a)&&(N[y].anim.stop(g),I=!1,N.splice(y,1));(I||!g)&&p.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var c,g=mt.get(this),m=g[a+"queue"],I=g[a+"queueHooks"],y=p.timers,N=m?m.length:0;for(g.finish=!0,p.queue(this,a,[]),I&&I.stop&&I.stop.call(this,!0),c=y.length;c--;)y[c].elem===this&&y[c].queue===a&&(y[c].anim.stop(!0),y.splice(c,1));for(c=0;c<N;c++)m[c]&&m[c].finish&&m[c].finish.call(this);delete g.finish})}}),p.each(["toggle","show","hide"],function(a,c){var g=p.fn[c];p.fn[c]=function(m,I,y){return m==null||typeof m=="boolean"?g.apply(this,arguments):this.animate(Ks(c,!0),m,I,y)}}),p.each({slideDown:Ks("show"),slideUp:Ks("hide"),slideToggle:Ks("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,c){p.fn[a]=function(g,m,I){return this.animate(c,g,m,I)}}),p.timers=[],p.fx.tick=function(){var a,c=0,g=p.timers;for(Pi=Date.now();c<g.length;c++)a=g[c],!a()&&g[c]===a&&g.splice(c--,1);g.length||p.fx.stop(),Pi=void 0},p.fx.timer=function(a){p.timers.push(a),p.fx.start()},p.fx.interval=13,p.fx.start=function(){Qs||(Qs=!0,yu())},p.fx.stop=function(){Qs=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(a,c){return a=p.fx&&p.fx.speeds[a]||a,c=c||"fx",this.queue(c,function(g,m){var I=t.setTimeout(g,a);m.stop=function(){t.clearTimeout(I)}})},function(){var a=P.createElement("input"),c=P.createElement("select"),g=c.appendChild(P.createElement("option"));a.type="checkbox",w.checkOn=a.value!=="",w.optSelected=g.selected,a=P.createElement("input"),a.value="t",a.type="radio",w.radioValue=a.value==="t"}();var fd,ko=p.expr.attrHandle;p.fn.extend({attr:function(a,c){return W(this,p.attr,a,c,arguments.length>1)},removeAttr:function(a){return this.each(function(){p.removeAttr(this,a)})}}),p.extend({attr:function(a,c,g){var m,I,y=a.nodeType;if(!(y===3||y===8||y===2)){if(typeof a.getAttribute>"u")return p.prop(a,c,g);if((y!==1||!p.isXMLDoc(a))&&(I=p.attrHooks[c.toLowerCase()]||(p.expr.match.bool.test(c)?fd:void 0)),g!==void 0){if(g===null){p.removeAttr(a,c);return}return I&&"set"in I&&(m=I.set(a,g,c))!==void 0?m:(a.setAttribute(c,g+""),g)}return I&&"get"in I&&(m=I.get(a,c))!==null?m:(m=p.find.attr(a,c),m??void 0)}},attrHooks:{type:{set:function(a,c){if(!w.radioValue&&c==="radio"&&x(a,"input")){var g=a.value;return a.setAttribute("type",c),g&&(a.value=g),c}}}},removeAttr:function(a,c){var g,m=0,I=c&&c.match(Gt);if(I&&a.nodeType===1)for(;g=I[m++];)a.removeAttribute(g)}}),fd={set:function(a,c,g){return c===!1?p.removeAttr(a,g):a.setAttribute(g,g),g}},p.each(p.expr.match.bool.source.match(/\w+/g),function(a,c){var g=ko[c]||p.find.attr;ko[c]=function(m,I,y){var N,G,E=I.toLowerCase();return y||(G=ko[E],ko[E]=N,N=g(m,I,y)!=null?E:null,ko[E]=G),N}});var kI=/^(?:input|select|textarea|button)$/i,OI=/^(?:a|area)$/i;p.fn.extend({prop:function(a,c){return W(this,p.prop,a,c,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[p.propFix[a]||a]})}}),p.extend({prop:function(a,c,g){var m,I,y=a.nodeType;if(!(y===3||y===8||y===2))return(y!==1||!p.isXMLDoc(a))&&(c=p.propFix[c]||c,I=p.propHooks[c]),g!==void 0?I&&"set"in I&&(m=I.set(a,g,c))!==void 0?m:a[c]=g:I&&"get"in I&&(m=I.get(a,c))!==null?m:a[c]},propHooks:{tabIndex:{get:function(a){var c=p.find.attr(a,"tabindex");return c?parseInt(c,10):kI.test(a.nodeName)||OI.test(a.nodeName)&&a.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),w.optSelected||(p.propHooks.selected={get:function(a){var c=a.parentNode;return c&&c.parentNode&&c.parentNode.selectedIndex,null},set:function(a){var c=a.parentNode;c&&(c.selectedIndex,c.parentNode&&c.parentNode.selectedIndex)}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){p.propFix[this.toLowerCase()]=this});function Vn(a){var c=a.match(Gt)||[];return c.join(" ")}function Xn(a){return a.getAttribute&&a.getAttribute("class")||""}function Cu(a){return Array.isArray(a)?a:typeof a=="string"?a.match(Gt)||[]:[]}p.fn.extend({addClass:function(a){var c,g,m,I,y,N;return b(a)?this.each(function(G){p(this).addClass(a.call(this,G,Xn(this)))}):(c=Cu(a),c.length?this.each(function(){if(m=Xn(this),g=this.nodeType===1&&" "+Vn(m)+" ",g){for(y=0;y<c.length;y++)I=c[y],g.indexOf(" "+I+" ")<0&&(g+=I+" ");N=Vn(g),m!==N&&this.setAttribute("class",N)}}):this)},removeClass:function(a){var c,g,m,I,y,N;return b(a)?this.each(function(G){p(this).removeClass(a.call(this,G,Xn(this)))}):arguments.length?(c=Cu(a),c.length?this.each(function(){if(m=Xn(this),g=this.nodeType===1&&" "+Vn(m)+" ",g){for(y=0;y<c.length;y++)for(I=c[y];g.indexOf(" "+I+" ")>-1;)g=g.replace(" "+I+" "," ");N=Vn(g),m!==N&&this.setAttribute("class",N)}}):this):this.attr("class","")},toggleClass:function(a,c){var g,m,I,y,N=typeof a,G=N==="string"||Array.isArray(a);return b(a)?this.each(function(E){p(this).toggleClass(a.call(this,E,Xn(this),c),c)}):typeof c=="boolean"&&G?c?this.addClass(a):this.removeClass(a):(g=Cu(a),this.each(function(){if(G)for(y=p(this),I=0;I<g.length;I++)m=g[I],y.hasClass(m)?y.removeClass(m):y.addClass(m);else(a===void 0||N==="boolean")&&(m=Xn(this),m&&mt.set(this,"__className__",m),this.setAttribute&&this.setAttribute("class",m||a===!1?"":mt.get(this,"__className__")||""))}))},hasClass:function(a){var c,g,m=0;for(c=" "+a+" ";g=this[m++];)if(g.nodeType===1&&(" "+Vn(Xn(g))+" ").indexOf(c)>-1)return!0;return!1}});var EI=/\r/g;p.fn.extend({val:function(a){var c,g,m,I=this[0];return arguments.length?(m=b(a),this.each(function(y){var N;this.nodeType===1&&(m?N=a.call(this,y,p(this).val()):N=a,N==null?N="":typeof N=="number"?N+="":Array.isArray(N)&&(N=p.map(N,function(G){return G==null?"":G+""})),c=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],(!c||!("set"in c)||c.set(this,N,"value")===void 0)&&(this.value=N))})):I?(c=p.valHooks[I.type]||p.valHooks[I.nodeName.toLowerCase()],c&&"get"in c&&(g=c.get(I,"value"))!==void 0?g:(g=I.value,typeof g=="string"?g.replace(EI,""):g??"")):void 0}}),p.extend({valHooks:{option:{get:function(a){var c=p.find.attr(a,"value");return c??Vn(p.text(a))}},select:{get:function(a){var c,g,m,I=a.options,y=a.selectedIndex,N=a.type==="select-one",G=N?null:[],E=N?y+1:I.length;for(y<0?m=E:m=N?y:0;m<E;m++)if(g=I[m],(g.selected||m===y)&&!g.disabled&&(!g.parentNode.disabled||!x(g.parentNode,"optgroup"))){if(c=p(g).val(),N)return c;G.push(c)}return G},set:function(a,c){for(var g,m,I=a.options,y=p.makeArray(c),N=I.length;N--;)m=I[N],(m.selected=p.inArray(p.valHooks.option.get(m),y)>-1)&&(g=!0);return g||(a.selectedIndex=-1),y}}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(a,c){if(Array.isArray(c))return a.checked=p.inArray(p(a).val(),c)>-1}},w.checkOn||(p.valHooks[this].get=function(a){return a.getAttribute("value")===null?"on":a.value})});var Oo=t.location,hd={guid:Date.now()},xu=/\?/;p.parseXML=function(a){var c,g;if(!a||typeof a!="string")return null;try{c=new t.DOMParser().parseFromString(a,"text/xml")}catch{}return g=c&&c.getElementsByTagName("parsererror")[0],(!c||g)&&p.error("Invalid XML: "+(g?p.map(g.childNodes,function(m){return m.textContent}).join(`
`):a)),c};var dd=/^(?:focusinfocus|focusoutblur)$/,gd=function(a){a.stopPropagation()};p.extend(p.event,{trigger:function(a,c,g,m){var I,y,N,G,E,U,rt,lt,q=[g||P],ht=d.call(a,"type")?a.type:a,zt=d.call(a,"namespace")?a.namespace.split("."):[];if(y=lt=N=g=g||P,!(g.nodeType===3||g.nodeType===8)&&!dd.test(ht+p.event.triggered)&&(ht.indexOf(".")>-1&&(zt=ht.split("."),ht=zt.shift(),zt.sort()),E=ht.indexOf(":")<0&&"on"+ht,a=a[p.expando]?a:new p.Event(ht,typeof a=="object"&&a),a.isTrigger=m?2:3,a.namespace=zt.join("."),a.rnamespace=a.namespace?new RegExp("(^|\\.)"+zt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=void 0,a.target||(a.target=g),c=c==null?[a]:p.makeArray(c,[a]),rt=p.event.special[ht]||{},!(!m&&rt.trigger&&rt.trigger.apply(g,c)===!1))){if(!m&&!rt.noBubble&&!S(g)){for(G=rt.delegateType||ht,dd.test(G+ht)||(y=y.parentNode);y;y=y.parentNode)q.push(y),N=y;N===(g.ownerDocument||P)&&q.push(N.defaultView||N.parentWindow||t)}for(I=0;(y=q[I++])&&!a.isPropagationStopped();)lt=y,a.type=I>1?G:rt.bindType||ht,U=(mt.get(y,"events")||Object.create(null))[a.type]&&mt.get(y,"handle"),U&&U.apply(y,c),U=E&&y[E],U&&U.apply&&be(y)&&(a.result=U.apply(y,c),a.result===!1&&a.preventDefault());return a.type=ht,!m&&!a.isDefaultPrevented()&&(!rt._default||rt._default.apply(q.pop(),c)===!1)&&be(g)&&E&&b(g[ht])&&!S(g)&&(N=g[E],N&&(g[E]=null),p.event.triggered=ht,a.isPropagationStopped()&&lt.addEventListener(ht,gd),g[ht](),a.isPropagationStopped()&&lt.removeEventListener(ht,gd),p.event.triggered=void 0,N&&(g[E]=N)),a.result}},simulate:function(a,c,g){var m=p.extend(new p.Event,g,{type:a,isSimulated:!0});p.event.trigger(m,null,c)}}),p.fn.extend({trigger:function(a,c){return this.each(function(){p.event.trigger(a,c,this)})},triggerHandler:function(a,c){var g=this[0];if(g)return p.event.trigger(a,c,g,!0)}});var zI=/\[\]$/,pd=/\r?\n/g,GI=/^(?:submit|button|image|reset|file)$/i,BI=/^(?:input|select|textarea|keygen)/i;function wu(a,c,g,m){var I;if(Array.isArray(c))p.each(c,function(y,N){g||zI.test(a)?m(a,N):wu(a+"["+(typeof N=="object"&&N!=null?y:"")+"]",N,g,m)});else if(!g&&J(c)==="object")for(I in c)wu(a+"["+I+"]",c[I],g,m);else m(a,c)}p.param=function(a,c){var g,m=[],I=function(y,N){var G=b(N)?N():N;m[m.length]=encodeURIComponent(y)+"="+encodeURIComponent(G??"")};if(a==null)return"";if(Array.isArray(a)||a.jquery&&!p.isPlainObject(a))p.each(a,function(){I(this.name,this.value)});else for(g in a)wu(g,a[g],c,I);return m.join("&")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=p.prop(this,"elements");return a?p.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!p(this).is(":disabled")&&BI.test(this.nodeName)&&!GI.test(a)&&(this.checked||!Cn.test(a))}).map(function(a,c){var g=p(this).val();return g==null?null:Array.isArray(g)?p.map(g,function(m){return{name:c.name,value:m.replace(pd,`\r
`)}}):{name:c.name,value:g.replace(pd,`\r
`)}}).get()}});var RI=/%20/g,ZI=/#.*$/,jI=/([?&])_=[^&]*/,WI=/^(.*?):[ \t]*([^\r\n]*)$/mg,YI=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,UI=/^(?:GET|HEAD)$/,FI=/^\/\//,md={},bu={},vd="*/".concat("*"),Nu=P.createElement("a");Nu.href=Oo.href;function Id(a){return function(c,g){typeof c!="string"&&(g=c,c="*");var m,I=0,y=c.toLowerCase().match(Gt)||[];if(b(g))for(;m=y[I++];)m[0]==="+"?(m=m.slice(1)||"*",(a[m]=a[m]||[]).unshift(g)):(a[m]=a[m]||[]).push(g)}}function Ad(a,c,g,m){var I={},y=a===bu;function N(G){var E;return I[G]=!0,p.each(a[G]||[],function(U,rt){var lt=rt(c,g,m);if(typeof lt=="string"&&!y&&!I[lt])return c.dataTypes.unshift(lt),N(lt),!1;if(y)return!(E=lt)}),E}return N(c.dataTypes[0])||!I["*"]&&N("*")}function Mu(a,c){var g,m,I=p.ajaxSettings.flatOptions||{};for(g in c)c[g]!==void 0&&((I[g]?a:m||(m={}))[g]=c[g]);return m&&p.extend(!0,a,m),a}function _I(a,c,g){for(var m,I,y,N,G=a.contents,E=a.dataTypes;E[0]==="*";)E.shift(),m===void 0&&(m=a.mimeType||c.getResponseHeader("Content-Type"));if(m){for(I in G)if(G[I]&&G[I].test(m)){E.unshift(I);break}}if(E[0]in g)y=E[0];else{for(I in g){if(!E[0]||a.converters[I+" "+E[0]]){y=I;break}N||(N=I)}y=y||N}if(y)return y!==E[0]&&E.unshift(y),g[y]}function VI(a,c,g,m){var I,y,N,G,E,U={},rt=a.dataTypes.slice();if(rt[1])for(N in a.converters)U[N.toLowerCase()]=a.converters[N];for(y=rt.shift();y;)if(a.responseFields[y]&&(g[a.responseFields[y]]=c),!E&&m&&a.dataFilter&&(c=a.dataFilter(c,a.dataType)),E=y,y=rt.shift(),y){if(y==="*")y=E;else if(E!=="*"&&E!==y){if(N=U[E+" "+y]||U["* "+y],!N){for(I in U)if(G=I.split(" "),G[1]===y&&(N=U[E+" "+G[0]]||U["* "+G[0]],N)){N===!0?N=U[I]:U[I]!==!0&&(y=G[0],rt.unshift(G[1]));break}}if(N!==!0)if(N&&a.throws)c=N(c);else try{c=N(c)}catch(lt){return{state:"parsererror",error:N?lt:"No conversion from "+E+" to "+y}}}}return{state:"success",data:c}}p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Oo.href,type:"GET",isLocal:YI.test(Oo.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":vd,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,c){return c?Mu(Mu(a,p.ajaxSettings),c):Mu(p.ajaxSettings,a)},ajaxPrefilter:Id(md),ajaxTransport:Id(bu),ajax:function(a,c){typeof a=="object"&&(c=a,a=void 0),c=c||{};var g,m,I,y,N,G,E,U,rt,lt,q=p.ajaxSetup({},c),ht=q.context||q,zt=q.context&&(ht.nodeType||ht.jquery)?p(ht):p.event,ee=p.Deferred(),Yt=p.Callbacks("once memory"),Ye=q.statusCode||{},Ee={},$r={},tn="canceled",Jt={readyState:0,getResponseHeader:function(re){var De;if(E){if(!y)for(y={};De=WI.exec(I);)y[De[1].toLowerCase()+" "]=(y[De[1].toLowerCase()+" "]||[]).concat(De[2]);De=y[re.toLowerCase()+" "]}return De==null?null:De.join(", ")},getAllResponseHeaders:function(){return E?I:null},setRequestHeader:function(re,De){return E==null&&(re=$r[re.toLowerCase()]=$r[re.toLowerCase()]||re,Ee[re]=De),this},overrideMimeType:function(re){return E==null&&(q.mimeType=re),this},statusCode:function(re){var De;if(re)if(E)Jt.always(re[Jt.status]);else for(De in re)Ye[De]=[Ye[De],re[De]];return this},abort:function(re){var De=re||tn;return g&&g.abort(De),Hn(0,De),this}};if(ee.promise(Jt),q.url=((a||q.url||Oo.href)+"").replace(FI,Oo.protocol+"//"),q.type=c.method||c.type||q.method||q.type,q.dataTypes=(q.dataType||"*").toLowerCase().match(Gt)||[""],q.crossDomain==null){G=P.createElement("a");try{G.href=q.url,G.href=G.href,q.crossDomain=Nu.protocol+"//"+Nu.host!=G.protocol+"//"+G.host}catch{q.crossDomain=!0}}if(q.data&&q.processData&&typeof q.data!="string"&&(q.data=p.param(q.data,q.traditional)),Ad(md,q,c,Jt),E)return Jt;U=p.event&&q.global,U&&p.active++===0&&p.event.trigger("ajaxStart"),q.type=q.type.toUpperCase(),q.hasContent=!UI.test(q.type),m=q.url.replace(ZI,""),q.hasContent?q.data&&q.processData&&(q.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(q.data=q.data.replace(RI,"+")):(lt=q.url.slice(m.length),q.data&&(q.processData||typeof q.data=="string")&&(m+=(xu.test(m)?"&":"?")+q.data,delete q.data),q.cache===!1&&(m=m.replace(jI,"$1"),lt=(xu.test(m)?"&":"?")+"_="+hd.guid+++lt),q.url=m+lt),q.ifModified&&(p.lastModified[m]&&Jt.setRequestHeader("If-Modified-Since",p.lastModified[m]),p.etag[m]&&Jt.setRequestHeader("If-None-Match",p.etag[m])),(q.data&&q.hasContent&&q.contentType!==!1||c.contentType)&&Jt.setRequestHeader("Content-Type",q.contentType),Jt.setRequestHeader("Accept",q.dataTypes[0]&&q.accepts[q.dataTypes[0]]?q.accepts[q.dataTypes[0]]+(q.dataTypes[0]!=="*"?", "+vd+"; q=0.01":""):q.accepts["*"]);for(rt in q.headers)Jt.setRequestHeader(rt,q.headers[rt]);if(q.beforeSend&&(q.beforeSend.call(ht,Jt,q)===!1||E))return Jt.abort();if(tn="abort",Yt.add(q.complete),Jt.done(q.success),Jt.fail(q.error),g=Ad(bu,q,c,Jt),!g)Hn(-1,"No Transport");else{if(Jt.readyState=1,U&&zt.trigger("ajaxSend",[Jt,q]),E)return Jt;q.async&&q.timeout>0&&(N=t.setTimeout(function(){Jt.abort("timeout")},q.timeout));try{E=!1,g.send(Ee,Hn)}catch(re){if(E)throw re;Hn(-1,re)}}function Hn(re,De,zo,Su){var en,Go,rn,xn,wn,zr=De;E||(E=!0,N&&t.clearTimeout(N),g=void 0,I=Su||"",Jt.readyState=re>0?4:0,en=re>=200&&re<300||re===304,zo&&(xn=_I(q,Jt,zo)),!en&&p.inArray("script",q.dataTypes)>-1&&p.inArray("json",q.dataTypes)<0&&(q.converters["text script"]=function(){}),xn=VI(q,xn,Jt,en),en?(q.ifModified&&(wn=Jt.getResponseHeader("Last-Modified"),wn&&(p.lastModified[m]=wn),wn=Jt.getResponseHeader("etag"),wn&&(p.etag[m]=wn)),re===204||q.type==="HEAD"?zr="nocontent":re===304?zr="notmodified":(zr=xn.state,Go=xn.data,rn=xn.error,en=!rn)):(rn=zr,(re||!zr)&&(zr="error",re<0&&(re=0))),Jt.status=re,Jt.statusText=(De||zr)+"",en?ee.resolveWith(ht,[Go,zr,Jt]):ee.rejectWith(ht,[Jt,zr,rn]),Jt.statusCode(Ye),Ye=void 0,U&&zt.trigger(en?"ajaxSuccess":"ajaxError",[Jt,q,en?Go:rn]),Yt.fireWith(ht,[Jt,zr]),U&&(zt.trigger("ajaxComplete",[Jt,q]),--p.active||p.event.trigger("ajaxStop")))}return Jt},getJSON:function(a,c,g){return p.get(a,c,g,"json")},getScript:function(a,c){return p.get(a,void 0,c,"script")}}),p.each(["get","post"],function(a,c){p[c]=function(g,m,I,y){return b(m)&&(y=y||I,I=m,m=void 0),p.ajax(p.extend({url:g,type:c,dataType:y,data:m,success:I},p.isPlainObject(g)&&g))}}),p.ajaxPrefilter(function(a){var c;for(c in a.headers)c.toLowerCase()==="content-type"&&(a.contentType=a.headers[c]||"")}),p._evalUrl=function(a,c,g){return p.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(m){p.globalEval(m,c,g)}})},p.fn.extend({wrapAll:function(a){var c;return this[0]&&(b(a)&&(a=a.call(this[0])),c=p(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&c.insertBefore(this[0]),c.map(function(){for(var g=this;g.firstElementChild;)g=g.firstElementChild;return g}).append(this)),this},wrapInner:function(a){return b(a)?this.each(function(c){p(this).wrapInner(a.call(this,c))}):this.each(function(){var c=p(this),g=c.contents();g.length?g.wrapAll(a):c.append(a)})},wrap:function(a){var c=b(a);return this.each(function(g){p(this).wrapAll(c?a.call(this,g):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){p(this).replaceWith(this.childNodes)}),this}}),p.expr.pseudos.hidden=function(a){return!p.expr.pseudos.visible(a)},p.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},p.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var XI={0:200,1223:204},Eo=p.ajaxSettings.xhr();w.cors=!!Eo&&"withCredentials"in Eo,w.ajax=Eo=!!Eo,p.ajaxTransport(function(a){var c,g;if(w.cors||Eo&&!a.crossDomain)return{send:function(m,I){var y,N=a.xhr();if(N.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(y in a.xhrFields)N[y]=a.xhrFields[y];a.mimeType&&N.overrideMimeType&&N.overrideMimeType(a.mimeType),!a.crossDomain&&!m["X-Requested-With"]&&(m["X-Requested-With"]="XMLHttpRequest");for(y in m)N.setRequestHeader(y,m[y]);c=function(G){return function(){c&&(c=g=N.onload=N.onerror=N.onabort=N.ontimeout=N.onreadystatechange=null,G==="abort"?N.abort():G==="error"?typeof N.status!="number"?I(0,"error"):I(N.status,N.statusText):I(XI[N.status]||N.status,N.statusText,(N.responseType||"text")!=="text"||typeof N.responseText!="string"?{binary:N.response}:{text:N.responseText},N.getAllResponseHeaders()))}},N.onload=c(),g=N.onerror=N.ontimeout=c("error"),N.onabort!==void 0?N.onabort=g:N.onreadystatechange=function(){N.readyState===4&&t.setTimeout(function(){c&&g()})},c=c("abort");try{N.send(a.hasContent&&a.data||null)}catch(G){if(c)throw G}},abort:function(){c&&c()}}}),p.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return p.globalEval(a),a}}}),p.ajaxPrefilter("script",function(a){a.cache===void 0&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),p.ajaxTransport("script",function(a){if(a.crossDomain||a.scriptAttrs){var c,g;return{send:function(m,I){c=p("<script>").attr(a.scriptAttrs||{}).prop({charset:a.scriptCharset,src:a.url}).on("load error",g=function(y){c.remove(),g=null,y&&I(y.type==="error"?404:200,y.type)}),P.head.appendChild(c[0])},abort:function(){g&&g()}}}});var yd=[],Tu=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=yd.pop()||p.expando+"_"+hd.guid++;return this[a]=!0,a}}),p.ajaxPrefilter("json jsonp",function(a,c,g){var m,I,y,N=a.jsonp!==!1&&(Tu.test(a.url)?"url":typeof a.data=="string"&&(a.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Tu.test(a.data)&&"data");if(N||a.dataTypes[0]==="jsonp")return m=a.jsonpCallback=b(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,N?a[N]=a[N].replace(Tu,"$1"+m):a.jsonp!==!1&&(a.url+=(xu.test(a.url)?"&":"?")+a.jsonp+"="+m),a.converters["script json"]=function(){return y||p.error(m+" was not called"),y[0]},a.dataTypes[0]="json",I=t[m],t[m]=function(){y=arguments},g.always(function(){I===void 0?p(t).removeProp(m):t[m]=I,a[m]&&(a.jsonpCallback=c.jsonpCallback,yd.push(m)),y&&b(I)&&I(y[0]),y=I=void 0}),"script"}),w.createHTMLDocument=function(){var a=P.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",a.childNodes.length===2}(),p.parseHTML=function(a,c,g){if(typeof a!="string")return[];typeof c=="boolean"&&(g=c,c=!1);var m,I,y;return c||(w.createHTMLDocument?(c=P.implementation.createHTMLDocument(""),m=c.createElement("base"),m.href=P.location.href,c.head.appendChild(m)):c=P),I=Nt.exec(a),y=!g&&[],I?[c.createElement(I[1])]:(I=Qh([a],c,y),y&&y.length&&p(y).remove(),p.merge([],I.childNodes))},p.fn.load=function(a,c,g){var m,I,y,N=this,G=a.indexOf(" ");return G>-1&&(m=Vn(a.slice(G)),a=a.slice(0,G)),b(c)?(g=c,c=void 0):c&&typeof c=="object"&&(I="POST"),N.length>0&&p.ajax({url:a,type:I||"GET",dataType:"html",data:c}).done(function(E){y=arguments,N.html(m?p("<div>").append(p.parseHTML(E)).find(m):E)}).always(g&&function(E,U){N.each(function(){g.apply(this,y||[E.responseText,U,E])})}),this},p.expr.pseudos.animated=function(a){return p.grep(p.timers,function(c){return a===c.elem}).length},p.offset={setOffset:function(a,c,g){var m,I,y,N,G,E,U,rt=p.css(a,"position"),lt=p(a),q={};rt==="static"&&(a.style.position="relative"),G=lt.offset(),y=p.css(a,"top"),E=p.css(a,"left"),U=(rt==="absolute"||rt==="fixed")&&(y+E).indexOf("auto")>-1,U?(m=lt.position(),N=m.top,I=m.left):(N=parseFloat(y)||0,I=parseFloat(E)||0),b(c)&&(c=c.call(a,g,p.extend({},G))),c.top!=null&&(q.top=c.top-G.top+N),c.left!=null&&(q.left=c.left-G.left+I),"using"in c?c.using.call(a,q):lt.css(q)}},p.fn.extend({offset:function(a){if(arguments.length)return a===void 0?this:this.each(function(I){p.offset.setOffset(this,a,I)});var c,g,m=this[0];if(m)return m.getClientRects().length?(c=m.getBoundingClientRect(),g=m.ownerDocument.defaultView,{top:c.top+g.pageYOffset,left:c.left+g.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var a,c,g,m=this[0],I={top:0,left:0};if(p.css(m,"position")==="fixed")c=m.getBoundingClientRect();else{for(c=this.offset(),g=m.ownerDocument,a=m.offsetParent||g.documentElement;a&&(a===g.body||a===g.documentElement)&&p.css(a,"position")==="static";)a=a.parentNode;a&&a!==m&&a.nodeType===1&&(I=p(a).offset(),I.top+=p.css(a,"borderTopWidth",!0),I.left+=p.css(a,"borderLeftWidth",!0))}return{top:c.top-I.top-p.css(m,"marginTop",!0),left:c.left-I.left-p.css(m,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&p.css(a,"position")==="static";)a=a.offsetParent;return a||_r})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var g=c==="pageYOffset";p.fn[a]=function(m){return W(this,function(I,y,N){var G;if(S(I)?G=I:I.nodeType===9&&(G=I.defaultView),N===void 0)return G?G[c]:I[y];G?G.scrollTo(g?G.pageXOffset:N,g?N:G.pageYOffset):I[y]=N},a,m,arguments.length)}}),p.each(["top","left"],function(a,c){p.cssHooks[c]=rd(w.pixelPosition,function(g,m){if(m)return m=Lo(g,c),mu.test(m)?p(g).position()[c]+"px":m})}),p.each({Height:"height",Width:"width"},function(a,c){p.each({padding:"inner"+a,content:c,"":"outer"+a},function(g,m){p.fn[m]=function(I,y){var N=arguments.length&&(g||typeof I!="boolean"),G=g||(I===!0||y===!0?"margin":"border");return W(this,function(E,U,rt){var lt;return S(E)?m.indexOf("outer")===0?E["inner"+a]:E.document.documentElement["client"+a]:E.nodeType===9?(lt=E.documentElement,Math.max(E.body["scroll"+a],lt["scroll"+a],E.body["offset"+a],lt["offset"+a],lt["client"+a])):rt===void 0?p.css(E,U,G):p.style(E,U,rt,G)},c,N?I:void 0,N)}})}),p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,c){p.fn[c]=function(g){return this.on(c,g)}}),p.fn.extend({bind:function(a,c,g){return this.on(a,null,c,g)},unbind:function(a,c){return this.off(a,null,c)},delegate:function(a,c,g,m){return this.on(c,a,g,m)},undelegate:function(a,c,g){return arguments.length===1?this.off(a,"**"):this.off(c,a||"**",g)},hover:function(a,c){return this.on("mouseenter",a).on("mouseleave",c||a)}}),p.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,c){p.fn[c]=function(g,m){return arguments.length>0?this.on(c,null,g,m):this.trigger(c)}});var HI=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;p.proxy=function(a,c){var g,m,I;if(typeof c=="string"&&(g=a[c],c=a,a=g),!!b(a))return m=i.call(arguments,2),I=function(){return a.apply(c||this,m.concat(i.call(arguments)))},I.guid=a.guid=a.guid||p.guid++,I},p.holdReady=function(a){a?p.readyWait++:p.ready(!0)},p.isArray=Array.isArray,p.parseJSON=JSON.parse,p.nodeName=x,p.isFunction=b,p.isWindow=S,p.camelCase=Ut,p.type=J,p.now=Date.now,p.isNumeric=function(a){var c=p.type(a);return(c==="number"||c==="string")&&!isNaN(a-parseFloat(a))},p.trim=function(a){return a==null?"":(a+"").replace(HI,"$1")},typeof define=="function"&&define.amd&&define("jquery",[],function(){return p});var JI=t.jQuery,QI=t.$;return p.noConflict=function(a){return t.$===p&&(t.$=QI),a&&t.jQuery===p&&(t.jQuery=JI),p},typeof e>"u"&&(t.jQuery=t.$=p),p})});var vs=bd(Ef=>{"use strict";(function(t){var e=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global;if(typeof define=="function"&&define.amd)define(["underscore","jquery","exports"],function(i,o,s){e.Backbone=t(e,s,i,o)});else if(typeof Ef<"u"){var r=(tm(),i0($p)),n;try{n=Gn()}catch{}t(e,Ef,r,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)})(function(t,e,r,n){var i=t.Backbone,o=Array.prototype.slice;e.VERSION="1.4.1",e.$=n,e.noConflict=function(){return t.Backbone=i,this},e.emulateHTTP=!1,e.emulateJSON=!1;var s=e.Events={},l=/\s+/,u,h=function(A,T,k,B,W){var ot=0,It;if(k&&typeof k=="object")for(B!==void 0&&("context"in W)&&W.context===void 0&&(W.context=B),It=r.keys(k);ot<It.length;ot++)T=h(A,T,It[ot],k[It[ot]],W);else if(k&&l.test(k))for(It=k.split(l);ot<It.length;ot++)T=A(T,It[ot],B,W);else T=A(T,k,B,W);return T};s.on=function(A,T,k){if(this._events=h(d,this._events||{},A,T,{context:k,ctx:this,listening:u}),u){var B=this._listeners||(this._listeners={});B[u.id]=u,u.interop=!1}return this},s.listenTo=function(A,T,k){if(!A)return this;var B=A._listenId||(A._listenId=r.uniqueId("l")),W=this._listeningTo||(this._listeningTo={}),ot=u=W[B];ot||(this._listenId||(this._listenId=r.uniqueId("l")),ot=u=W[B]=new P(this,A));var It=f(A,T,k,this);if(u=void 0,It)throw It;return ot.interop&&ot.on(T,k),this};var d=function(A,T,k,B){if(k){var W=A[T]||(A[T]=[]),ot=B.context,It=B.ctx,Dt=B.listening;Dt&&Dt.count++,W.push({callback:k,context:ot,ctx:ot||It,listening:Dt})}return A},f=function(A,T,k,B){try{A.on(T,k,B)}catch(W){return W}};s.off=function(A,T,k){return this._events?(this._events=h(C,this._events,A,T,{context:k,listeners:this._listeners}),this):this},s.stopListening=function(A,T,k){var B=this._listeningTo;if(!B)return this;for(var W=A?[A._listenId]:r.keys(B),ot=0;ot<W.length;ot++){var It=B[W[ot]];if(!It)break;It.obj.off(T,k,this),It.interop&&It.off(T,k)}return r.isEmpty(B)&&(this._listeningTo=void 0),this};var C=function(A,T,k,B){if(A){var W=B.context,ot=B.listeners,It=0,Dt;if(!T&&!W&&!k){for(Dt=r.keys(ot);It<Dt.length;It++)ot[Dt[It]].cleanup();return}for(Dt=T?[T]:r.keys(A);It<Dt.length;It++){T=Dt[It];var Ut=A[T];if(!Ut)break;for(var be=[],Ne=0;Ne<Ut.length;Ne++){var mt=Ut[Ne];if(k&&k!==mt.callback&&k!==mt.callback._callback||W&&W!==mt.context)be.push(mt);else{var ie=mt.listening;ie&&ie.off(T,k)}}be.length?A[T]=be:delete A[T]}return A}};s.once=function(A,T,k){var B=h(w,{},A,T,this.off.bind(this));return typeof A=="string"&&k==null&&(T=void 0),this.on(B,T,k)},s.listenToOnce=function(A,T,k){var B=h(w,{},T,k,this.stopListening.bind(this,A));return this.listenTo(A,B)};var w=function(A,T,k,B){if(k){var W=A[T]=r.once(function(){B(T,W),k.apply(this,arguments)});W._callback=k}return A};s.trigger=function(A){if(!this._events)return this;for(var T=Math.max(0,arguments.length-1),k=Array(T),B=0;B<T;B++)k[B]=arguments[B+1];return h(b,this._events,A,void 0,k),this};var b=function(A,T,k,B){if(A){var W=A[T],ot=A.all;W&&ot&&(ot=ot.slice()),W&&S(W,B),ot&&S(ot,[T].concat(B))}return A},S=function(A,T){var k,B=-1,W=A.length,ot=T[0],It=T[1],Dt=T[2];switch(T.length){case 0:for(;++B<W;)(k=A[B]).callback.call(k.ctx);return;case 1:for(;++B<W;)(k=A[B]).callback.call(k.ctx,ot);return;case 2:for(;++B<W;)(k=A[B]).callback.call(k.ctx,ot,It);return;case 3:for(;++B<W;)(k=A[B]).callback.call(k.ctx,ot,It,Dt);return;default:for(;++B<W;)(k=A[B]).callback.apply(k.ctx,T);return}},P=function(A,T){this.id=A._listenId,this.listener=A,this.obj=T,this.interop=!0,this.count=0,this._events=void 0};P.prototype.on=s.on,P.prototype.off=function(A,T){var k;this.interop?(this._events=h(C,this._events,A,T,{context:void 0,listeners:void 0}),k=!this._events):(this.count--,k=this.count===0),k&&this.cleanup()},P.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},s.bind=s.on,s.unbind=s.off,r.extend(e,s);var O=e.Model=function(A,T){var k=A||{};T||(T={}),this.preinitialize.apply(this,arguments),this.cid=r.uniqueId(this.cidPrefix),this.attributes={},T.collection&&(this.collection=T.collection),T.parse&&(k=this.parse(k,T)||{});var B=r.result(this,"defaults");k=r.defaults(r.extend({},B,k),B),this.set(k,T),this.changed={},this.initialize.apply(this,arguments)};r.extend(O.prototype,s,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(A){return r.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(A){return this.attributes[A]},escape:function(A){return r.escape(this.get(A))},has:function(A){return this.get(A)!=null},matches:function(A){return!!r.iteratee(A,this)(this.attributes)},set:function(A,T,k){if(A==null)return this;var B;if(typeof A=="object"?(B=A,k=T):(B={})[A]=T,k||(k={}),!this._validate(B,k))return!1;var W=k.unset,ot=k.silent,It=[],Dt=this._changing;this._changing=!0,Dt||(this._previousAttributes=r.clone(this.attributes),this.changed={});var Ut=this.attributes,be=this.changed,Ne=this._previousAttributes;for(var mt in B)T=B[mt],r.isEqual(Ut[mt],T)||It.push(mt),r.isEqual(Ne[mt],T)?delete be[mt]:be[mt]=T,W?delete Ut[mt]:Ut[mt]=T;if(this.idAttribute in B){var ie=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,ie,k)}if(!ot){It.length&&(this._pending=k);for(var ge=0;ge<It.length;ge++)this.trigger("change:"+It[ge],this,Ut[It[ge]],k)}if(Dt)return this;if(!ot)for(;this._pending;)k=this._pending,this._pending=!1,this.trigger("change",this,k);return this._pending=!1,this._changing=!1,this},unset:function(A,T){return this.set(A,void 0,r.extend({},T,{unset:!0}))},clear:function(A){var T={};for(var k in this.attributes)T[k]=void 0;return this.set(T,r.extend({},A,{unset:!0}))},hasChanged:function(A){return A==null?!r.isEmpty(this.changed):r.has(this.changed,A)},changedAttributes:function(A){if(!A)return this.hasChanged()?r.clone(this.changed):!1;var T=this._changing?this._previousAttributes:this.attributes,k={},B;for(var W in A){var ot=A[W];r.isEqual(T[W],ot)||(k[W]=ot,B=!0)}return B?k:!1},previous:function(A){return A==null||!this._previousAttributes?null:this._previousAttributes[A]},previousAttributes:function(){return r.clone(this._previousAttributes)},fetch:function(A){A=r.extend({parse:!0},A);var T=this,k=A.success;return A.success=function(B){var W=A.parse?T.parse(B,A):B;if(!T.set(W,A))return!1;k&&k.call(A.context,T,B,A),T.trigger("sync",T,B,A)},te(this,A),this.sync("read",this,A)},save:function(A,T,k){var B;A==null||typeof A=="object"?(B=A,k=T):(B={})[A]=T,k=r.extend({validate:!0,parse:!0},k);var W=k.wait;if(B&&!W){if(!this.set(B,k))return!1}else if(!this._validate(B,k))return!1;var ot=this,It=k.success,Dt=this.attributes;k.success=function(Ne){ot.attributes=Dt;var mt=k.parse?ot.parse(Ne,k):Ne;if(W&&(mt=r.extend({},B,mt)),mt&&!ot.set(mt,k))return!1;It&&It.call(k.context,ot,Ne,k),ot.trigger("sync",ot,Ne,k)},te(this,k),B&&W&&(this.attributes=r.extend({},Dt,B));var Ut=this.isNew()?"create":k.patch?"patch":"update";Ut==="patch"&&!k.attrs&&(k.attrs=B);var be=this.sync(Ut,this,k);return this.attributes=Dt,be},destroy:function(A){A=A?r.clone(A):{};var T=this,k=A.success,B=A.wait,W=function(){T.stopListening(),T.trigger("destroy",T,T.collection,A)};A.success=function(It){B&&W(),k&&k.call(A.context,T,It,A),T.isNew()||T.trigger("sync",T,It,A)};var ot=!1;return this.isNew()?r.defer(A.success):(te(this,A),ot=this.sync("delete",this,A)),B||W(),ot},url:function(){var A=r.result(this,"urlRoot")||r.result(this.collection,"url")||Tt();if(this.isNew())return A;var T=this.get(this.idAttribute);return A.replace(/[^\/]$/,"$&/")+encodeURIComponent(T)},parse:function(A,T){return A},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(A){return this._validate({},r.extend({},A,{validate:!0}))},_validate:function(A,T){if(!T.validate||!this.validate)return!0;A=r.extend({},this.attributes,A);var k=this.validationError=this.validate(A,T)||null;return k?(this.trigger("invalid",this,k,r.extend(T,{validationError:k})),!1):!0}});var F=e.Collection=function(A,T){T||(T={}),this.preinitialize.apply(this,arguments),T.model&&(this.model=T.model),T.comparator!==void 0&&(this.comparator=T.comparator),this._reset(),this.initialize.apply(this,arguments),A&&this.reset(A,r.extend({silent:!0},T))},J={add:!0,remove:!0,merge:!0},$={add:!0,remove:!1},st=function(A,T,k){k=Math.min(Math.max(k,0),A.length);var B=Array(A.length-k),W=T.length,ot;for(ot=0;ot<B.length;ot++)B[ot]=A[ot+k];for(ot=0;ot<W;ot++)A[ot+k]=T[ot];for(ot=0;ot<B.length;ot++)A[ot+W+k]=B[ot]};r.extend(F.prototype,s,{model:O,preinitialize:function(){},initialize:function(){},toJSON:function(A){return this.map(function(T){return T.toJSON(A)})},sync:function(){return e.sync.apply(this,arguments)},add:function(A,T){return this.set(A,r.extend({merge:!1},T,$))},remove:function(A,T){T=r.extend({},T);var k=!r.isArray(A);A=k?[A]:A.slice();var B=this._removeModels(A,T);return!T.silent&&B.length&&(T.changes={added:[],merged:[],removed:B},this.trigger("update",this,T)),k?B[0]:B},set:function(A,T){if(A!=null){T=r.extend({},J,T),T.parse&&!this._isModel(A)&&(A=this.parse(A,T)||[]);var k=!r.isArray(A);A=k?[A]:A.slice();var B=T.at;B!=null&&(B=+B),B>this.length&&(B=this.length),B<0&&(B+=this.length+1);var W=[],ot=[],It=[],Dt=[],Ut={},be=T.add,Ne=T.merge,mt=T.remove,ie=!1,ge=this.comparator&&B==null&&T.sort!==!1,ye=r.isString(this.comparator)?this.comparator:null,Ce,ke;for(ke=0;ke<A.length;ke++){Ce=A[ke];var nr=this.get(Ce);if(nr){if(Ne&&Ce!==nr){var Fr=this._isModel(Ce)?Ce.attributes:Ce;T.parse&&(Fr=nr.parse(Fr,T)),nr.set(Fr,T),It.push(nr),ge&&!ie&&(ie=nr.hasChanged(ye))}Ut[nr.cid]||(Ut[nr.cid]=!0,W.push(nr)),A[ke]=nr}else be&&(Ce=A[ke]=this._prepareModel(Ce,T),Ce&&(ot.push(Ce),this._addReference(Ce,T),Ut[Ce.cid]=!0,W.push(Ce)))}if(mt){for(ke=0;ke<this.length;ke++)Ce=this.models[ke],Ut[Ce.cid]||Dt.push(Ce);Dt.length&&this._removeModels(Dt,T)}var pr=!1,_r=!ge&&be&&mt;if(W.length&&_r?(pr=this.length!==W.length||r.some(this.models,function(qr,Mo){return qr!==W[Mo]}),this.models.length=0,st(this.models,W,0),this.length=this.models.length):ot.length&&(ge&&(ie=!0),st(this.models,ot,B??this.length),this.length=this.models.length),ie&&this.sort({silent:!0}),!T.silent){for(ke=0;ke<ot.length;ke++)B!=null&&(T.index=B+ke),Ce=ot[ke],Ce.trigger("add",Ce,this,T);(ie||pr)&&this.trigger("sort",this,T),(ot.length||Dt.length||It.length)&&(T.changes={added:ot,removed:Dt,merged:It},this.trigger("update",this,T))}return k?A[0]:A}},reset:function(A,T){T=T?r.clone(T):{};for(var k=0;k<this.models.length;k++)this._removeReference(this.models[k],T);return T.previousModels=this.models,this._reset(),A=this.add(A,r.extend({silent:!0},T)),T.silent||this.trigger("reset",this,T),A},push:function(A,T){return this.add(A,r.extend({at:this.length},T))},pop:function(A){var T=this.at(this.length-1);return this.remove(T,A)},unshift:function(A,T){return this.add(A,r.extend({at:0},T))},shift:function(A){var T=this.at(0);return this.remove(T,A)},slice:function(){return o.apply(this.models,arguments)},get:function(A){if(A!=null)return this._byId[A]||this._byId[this.modelId(this._isModel(A)?A.attributes:A,A.idAttribute)]||A.cid&&this._byId[A.cid]},has:function(A){return this.get(A)!=null},at:function(A){return A<0&&(A+=this.length),this.models[A]},where:function(A,T){return this[T?"find":"filter"](A)},findWhere:function(A){return this.where(A,!0)},sort:function(A){var T=this.comparator;if(!T)throw new Error("Cannot sort a set without a comparator");A||(A={});var k=T.length;return r.isFunction(T)&&(T=T.bind(this)),k===1||r.isString(T)?this.models=this.sortBy(T):this.models.sort(T),A.silent||this.trigger("sort",this,A),this},pluck:function(A){return this.map(A+"")},fetch:function(A){A=r.extend({parse:!0},A);var T=A.success,k=this;return A.success=function(B){var W=A.reset?"reset":"set";k[W](B,A),T&&T.call(A.context,k,B,A),k.trigger("sync",k,B,A)},te(this,A),this.sync("read",this,A)},create:function(A,T){T=T?r.clone(T):{};var k=T.wait;if(A=this._prepareModel(A,T),!A)return!1;k||this.add(A,T);var B=this,W=T.success;return T.success=function(ot,It,Dt){k&&B.add(ot,Dt),W&&W.call(Dt.context,ot,It,Dt)},A.save(null,T),A},parse:function(A,T){return A},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(A,T){return A[T||this.model.prototype.idAttribute||"id"]},values:function(){return new v(this,x)},keys:function(){return new v(this,M)},entries:function(){return new v(this,D)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(A,T){if(this._isModel(A))return A.collection||(A.collection=this),A;T=T?r.clone(T):{},T.collection=this;var k;return this.model.prototype?k=new this.model(A,T):k=this.model(A,T),k.validationError?(this.trigger("invalid",this,k.validationError,T),!1):k},_removeModels:function(A,T){for(var k=[],B=0;B<A.length;B++){var W=this.get(A[B]);if(W){var ot=this.indexOf(W);this.models.splice(ot,1),this.length--,delete this._byId[W.cid];var It=this.modelId(W.attributes,W.idAttribute);It!=null&&delete this._byId[It],T.silent||(T.index=ot,W.trigger("remove",W,this,T)),k.push(W),this._removeReference(W,T)}}return k},_isModel:function(A){return A instanceof O},_addReference:function(A,T){this._byId[A.cid]=A;var k=this.modelId(A.attributes,A.idAttribute);k!=null&&(this._byId[k]=A),A.on("all",this._onModelEvent,this)},_removeReference:function(A,T){delete this._byId[A.cid];var k=this.modelId(A.attributes,A.idAttribute);k!=null&&delete this._byId[k],this===A.collection&&delete A.collection,A.off("all",this._onModelEvent,this)},_onModelEvent:function(A,T,k,B){if(T){if((A==="add"||A==="remove")&&k!==this)return;if(A==="destroy"&&this.remove(T,B),A==="changeId"){var W=this.modelId(T.previousAttributes(),T.idAttribute),ot=this.modelId(T.attributes,T.idAttribute);W!=null&&delete this._byId[W],ot!=null&&(this._byId[ot]=T)}}this.trigger.apply(this,arguments)}});var p=typeof Symbol=="function"&&Symbol.iterator;p&&(F.prototype[p]=F.prototype.values);var v=function(A,T){this._collection=A,this._kind=T,this._index=0},x=1,M=2,D=3;p&&(v.prototype[p]=function(){return this}),v.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var A=this._collection.at(this._index);this._index++;var T;if(this._kind===x)T=A;else{var k=this._collection.modelId(A.attributes,A.idAttribute);this._kind===M?T=k:T=[k,A]}return{value:T,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var R=e.View=function(A){this.cid=r.uniqueId("view"),this.preinitialize.apply(this,arguments),r.extend(this,r.pick(A,_)),this._ensureElement(),this.initialize.apply(this,arguments)},Z=/^(\S+)\s*(.*)$/,_=["model","collection","el","id","attributes","className","tagName","events"];r.extend(R.prototype,s,{tagName:"div",$:function(A){return this.$el.find(A)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(A){return this.undelegateEvents(),this._setElement(A),this.delegateEvents(),this},_setElement:function(A){this.$el=A instanceof e.$?A:e.$(A),this.el=this.$el[0]},delegateEvents:function(A){if(A||(A=r.result(this,"events")),!A)return this;this.undelegateEvents();for(var T in A){var k=A[T];if(r.isFunction(k)||(k=this[k]),!!k){var B=T.match(Z);this.delegate(B[1],B[2],k.bind(this))}}return this},delegate:function(A,T,k){return this.$el.on(A+".delegateEvents"+this.cid,T,k),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(A,T,k){return this.$el.off(A+".delegateEvents"+this.cid,T,k),this},_createElement:function(A){return document.createElement(A)},_ensureElement:function(){if(this.el)this.setElement(r.result(this,"el"));else{var A=r.extend({},r.result(this,"attributes"));this.id&&(A.id=r.result(this,"id")),this.className&&(A.class=r.result(this,"className")),this.setElement(this._createElement(r.result(this,"tagName"))),this._setAttributes(A)}},_setAttributes:function(A){this.$el.attr(A)}});var ut=function(A,T,k,B){switch(T){case 1:return function(){return A[k](this[B])};case 2:return function(W){return A[k](this[B],W)};case 3:return function(W,ot){return A[k](this[B],Y(W,this),ot)};case 4:return function(W,ot,It){return A[k](this[B],Y(W,this),ot,It)};default:return function(){var W=o.call(arguments);return W.unshift(this[B]),A[k].apply(A,W)}}},gt=function(A,T,k,B){r.each(k,function(W,ot){T[ot]&&(A.prototype[ot]=ut(T,W,ot,B))})},Y=function(A,T){return r.isFunction(A)?A:r.isObject(A)&&!T._isModel(A)?K(A):r.isString(A)?function(k){return k.get(A)}:A},K=function(A){var T=r.matches(A);return function(k){return T(k.attributes)}},X={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},Q={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};r.each([[F,X,"models"],[O,Q,"attributes"]],function(A){var T=A[0],k=A[1],B=A[2];T.mixin=function(W){var ot=r.reduce(r.functions(W),function(It,Dt){return It[Dt]=0,It},{});gt(T,W,ot,B)},gt(T,r,k,B)}),e.sync=function(A,T,k){var B=Pt[A];r.defaults(k||(k={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var W={type:B,dataType:"json"};if(k.url||(W.url=r.result(T,"url")||Tt()),k.data==null&&T&&(A==="create"||A==="update"||A==="patch")&&(W.contentType="application/json",W.data=JSON.stringify(k.attrs||T.toJSON(k))),k.emulateJSON&&(W.contentType="application/x-www-form-urlencoded",W.data=W.data?{model:W.data}:{}),k.emulateHTTP&&(B==="PUT"||B==="DELETE"||B==="PATCH")){W.type="POST",k.emulateJSON&&(W.data._method=B);var ot=k.beforeSend;k.beforeSend=function(Ut){if(Ut.setRequestHeader("X-HTTP-Method-Override",B),ot)return ot.apply(this,arguments)}}W.type!=="GET"&&!k.emulateJSON&&(W.processData=!1);var It=k.error;k.error=function(Ut,be,Ne){k.textStatus=be,k.errorThrown=Ne,It&&It.call(k.context,Ut,be,Ne)};var Dt=k.xhr=e.ajax(r.extend(W,k));return T.trigger("request",T,Dt,k),Dt};var Pt={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var Nt=e.Router=function(A){A||(A={}),this.preinitialize.apply(this,arguments),A.routes&&(this.routes=A.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},oe=/\((.*?)\)/g,de=/(\(\?)?:\w+/g,wt=/\*\w+/g,Mt=/[\-{}\[\]+?.,\\\^$|#\s]/g;r.extend(Nt.prototype,s,{preinitialize:function(){},initialize:function(){},route:function(A,T,k){r.isRegExp(A)||(A=this._routeToRegExp(A)),r.isFunction(T)&&(k=T,T=""),k||(k=this[T]);var B=this;return e.history.route(A,function(W){var ot=B._extractParameters(A,W);B.execute(k,ot,T)!==!1&&(B.trigger.apply(B,["route:"+T].concat(ot)),B.trigger("route",T,ot),e.history.trigger("route",B,T,ot))}),this},execute:function(A,T,k){A&&A.apply(this,T)},navigate:function(A,T){return e.history.navigate(A,T),this},_bindRoutes:function(){if(this.routes){this.routes=r.result(this,"routes");for(var A,T=r.keys(this.routes);(A=T.pop())!=null;)this.route(A,this.routes[A])}},_routeToRegExp:function(A){return A=A.replace(Mt,"\\$&").replace(oe,"(?:$1)?").replace(de,function(T,k){return k?T:"([^/?]+)"}).replace(wt,"([^?]*?)"),new RegExp("^"+A+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(A,T){var k=A.exec(T).slice(1);return r.map(k,function(B,W){return W===k.length-1?B||null:B?decodeURIComponent(B):null})}});var it=e.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},nt=/^[#\/]|\s+$/g,dt=/^\/+|\/+$/g,Gt=/#.*$/;it.started=!1,r.extend(it.prototype,s,{interval:50,atRoot:function(){var A=this.location.pathname.replace(/[^\/]$/,"$&/");return A===this.root&&!this.getSearch()},matchRoot:function(){var A=this.decodeFragment(this.location.pathname),T=A.slice(0,this.root.length-1)+"/";return T===this.root},decodeFragment:function(A){return decodeURI(A.replace(/%25/g,"%2525"))},getSearch:function(){var A=this.location.href.replace(/#.*/,"").match(/\?.+/);return A?A[0]:""},getHash:function(A){var T=(A||this).location.href.match(/#(.*)$/);return T?T[1]:""},getPath:function(){var A=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return A.charAt(0)==="/"?A.slice(1):A},getFragment:function(A){return A==null&&(this._usePushState||!this._wantsHashChange?A=this.getPath():A=this.getHash()),A.replace(nt,"")},start:function(A){if(it.started)throw new Error("Backbone.history has already been started");if(it.started=!0,this.options=r.extend({root:"/"},this.options,A),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(dt,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var T=this.root.slice(0,-1)||"/";return this.location.replace(T+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var k=document.body,B=k.insertBefore(this.iframe,k.firstChild).contentWindow;B.document.open(),B.document.close(),B.location.hash="#"+this.fragment}var W=window.addEventListener||function(ot,It){return attachEvent("on"+ot,It)};if(this._usePushState?W("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?W("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var A=window.removeEventListener||function(T,k){return detachEvent("on"+T,k)};this._usePushState?A("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&A("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),it.started=!1},route:function(A,T){this.handlers.unshift({route:A,callback:T})},checkUrl:function(A){var T=this.getFragment();if(T===this.fragment&&this.iframe&&(T=this.getHash(this.iframe.contentWindow)),T===this.fragment)return!1;this.iframe&&this.navigate(T),this.loadUrl()},loadUrl:function(A){return this.matchRoot()?(A=this.fragment=this.getFragment(A),r.some(this.handlers,function(T){if(T.route.test(A))return T.callback(A),!0})):!1},navigate:function(A,T){if(!it.started)return!1;(!T||T===!0)&&(T={trigger:!!T}),A=this.getFragment(A||"");var k=this.root;(A===""||A.charAt(0)==="?")&&(k=k.slice(0,-1)||"/");var B=k+A;A=A.replace(Gt,"");var W=this.decodeFragment(A);if(this.fragment!==W){if(this.fragment=W,this._usePushState)this.history[T.replace?"replaceState":"pushState"]({},document.title,B);else if(this._wantsHashChange){if(this._updateHash(this.location,A,T.replace),this.iframe&&A!==this.getHash(this.iframe.contentWindow)){var ot=this.iframe.contentWindow;T.replace||(ot.document.open(),ot.document.close()),this._updateHash(ot.location,A,T.replace)}}else return this.location.assign(B);if(T.trigger)return this.loadUrl(A)}},_updateHash:function(A,T,k){if(k){var B=A.href.replace(/(javascript:|#).*$/,"");A.replace(B+"#"+T)}else A.hash="#"+T}}),e.history=new it;var Ht=function(A,T){var k=this,B;return A&&r.has(A,"constructor")?B=A.constructor:B=function(){return k.apply(this,arguments)},r.extend(B,k,T),B.prototype=r.create(k.prototype,A),B.prototype.constructor=B,B.__super__=k.prototype,B};O.extend=F.extend=Nt.extend=R.extend=it.extend=Ht;var Tt=function(){throw new Error('A "url" property or function must be specified')},te=function(A,T){var k=T.error;T.error=function(B){k&&k.call(T.context,A,B,T),A.trigger("error",A,B,T)}};return e})});var dh={};Me(dh,{absolute:()=>Sy,bottom:()=>Ey,ellipse:()=>Gy,ellipseSpread:()=>zy,fn:()=>Py,left:()=>Ly,line:()=>Dy,right:()=>ky,top:()=>Oy});var hn={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},o0=Object.keys(hn).map(t=>hn[t]).join(""),Gu="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",s0=/\s/g,Bd=new RegExp(`^(${Gu}\\*)?([${o0}])(/${Gu})?([-+]{1,2}${Gu})?$`,"g");function Zd(t){throw new Error(`Invalid calc() expression: ${t}`)}function a0(t,e){let r=Bd.exec(t.replace(s0,""));r||Zd(t),Bd.lastIndex=0;let[,n,i,o,s]=r,{x:l,y:u,width:h,height:d}=e,f=0;switch(i){case hn.width:{f=h;break}case hn.height:{f=d;break}case hn.x:{f=l;break}case hn.y:{f=u;break}case hn.minimum:{f=Math.min(d,h);break}case hn.maximum:{f=Math.max(d,h);break}case hn.diagonal:{f=Math.sqrt(d*d+h*h);break}}return n&&(f*=parseFloat(n)),o&&(f/=parseFloat(o.slice(1))),s&&(f+=l0(s)),f}function l0(t){if(!t)return 0;let[e]=t;switch(e){case"+":return parseFloat(t.substr(1));case"-":return-parseFloat(t.substr(1))}return parseFloat(t)}function Br(t){return typeof t=="string"&&t.includes("calc")}var jd="calc(",Rd=jd.length;function Rr(t,e){let r=t,n=0;do{let i=r.indexOf(jd,n);if(i===-1)return r;let o=i+Rd,s=1;t:do{switch(r[o]){case"(":{s++;break}case")":{if(s--,s===0)break t;break}case void 0:Zd(r)}o++}while(!0);let l=r.slice(i+Rd,o);Br(l)&&(l=Rr(l,e));let u=String(a0(l,e));r=r.slice(0,i)+u+r.slice(o+1),n=i+u.length}while(!0)}var Fe={};Me(Fe,{Curve:()=>Kt,Ellipse:()=>ze,Line:()=>pt,Path:()=>xt,Point:()=>z,Polygon:()=>or,Polyline:()=>Qt,Rect:()=>ft,bezier:()=>w0,ellipse:()=>m0,intersection:()=>N0,line:()=>dn,normalizeAngle:()=>Be,point:()=>Oi,random:()=>ia,rect:()=>y0,scale:()=>f0,snapToGrid:()=>sn,toDeg:()=>Qn,toRad:()=>Le,types:()=>Lt});var{round:u0,floor:c0,PI:Wd}=Math,f0={linear:function(t,e,r){var n=t[1]-t[0],i=e[1]-e[0];return(r-t[0])/n*i+e[0]||0}},Be=function(t){return t%360+(t<0?360:0)},sn=function(t,e){return e*u0(t/e)},Qn=function(t){return 180*t/Wd%360},Le=function(t,e){return e=e||!1,t=e?t:t%360,t*Wd/180},ia=function(t,e){if(e===void 0)e=t===void 0?1:t,t=0;else if(e<t){let r=t;t=e,e=r}return c0(Math.random()*(e-t+1)+t)};var{cos:oa,sin:Bu,atan2:h0}=Math,sa=function(t,e){var r=Le(t.y),n=Le(e.y),i=t.x,o=e.x,s=Le(o-i),l=Bu(s)*oa(n),u=oa(r)*Bu(n)-Bu(r)*oa(n)*oa(s),h=Qn(h0(l,u)),d=["NE","E","SE","S","SW","W","NW","N"],f=h-22.5;return f<0&&(f+=360),f=parseInt(f/45),d[f]};var ki=function(t,e){var r=t.x,n=t.y,i=e.x,o=e.y;return(r-=i)*r+(n-=o)*n};var aa=function(t,e){return Math.sqrt(ki(t,e))};var Lt={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8};var{abs:la,cos:Ru,sin:Zu,sqrt:Yd,min:Ud,max:Fd,atan2:d0,round:_d,pow:g0,PI:Vd}=Math,z=function(t,e){if(!(this instanceof z))return new z(t,e);if(typeof t=="string"){var r=t.split(t.indexOf("@")===-1?" ":"@");t=parseFloat(r[0]),e=parseFloat(r[1])}else Object(t)===t&&(e=t.y,t=t.x);this.x=t===void 0?0:t,this.y=e===void 0?0:e};z.fromPolar=function(t,e,r){r=new z(r);var n=la(t*Ru(e)),i=la(t*Zu(e)),o=Be(Qn(e));return o<90?i=-i:o<180?(n=-n,i=-i):o<270&&(n=-n),new z(r.x+n,r.y+i)};z.random=function(t,e,r,n){return new z(ia(t,e),ia(r,n))};z.prototype={type:Lt.Point,chooseClosest:function(t){var e=t.length;if(e===1)return new z(t[0]);for(var r=null,n=1/0,i=0;i<e;i++){var o=new z(t[i]),s=this.squaredDistance(o);s<n&&(r=o,n=s)}return r},adhereToRect:function(t){return t.containsPoint(this)?this:(this.x=Ud(Fd(this.x,t.x),t.x+t.width),this.y=Ud(Fd(this.y,t.y),t.y+t.height),this)},angleBetween:function(t,e){var r=this.equals(t)||this.equals(e)?NaN:this.theta(e)-this.theta(t);return r<0&&(r+=360),r},bearing:function(t){return sa(this,t)},changeInAngle:function(t,e,r){return this.clone().offset(-t,-e).theta(r)-this.theta(r)},clone:function(){return new z(this)},cross:function(t,e){return t&&e?(e.x-this.x)*(t.y-this.y)-(e.y-this.y)*(t.x-this.x):NaN},difference:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),new z(this.x-(t||0),this.y-(e||0))},distance:function(t){return aa(this,t)},dot:function(t){return t?this.x*t.x+this.y*t.y:NaN},equals:function(t){return!!t&&this.x===t.x&&this.y===t.y},lerp:function(t,e){var r=this.x,n=this.y;return new z((1-e)*r+e*t.x,(1-e)*n+e*t.y)},magnitude:function(){return Yd(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(t){return la(t.x-this.x)+la(t.y-this.y)},move:function(t,e){var r=Le(new z(t).theta(this)),n=this.offset(Ru(r)*e,-Zu(r)*e);return n},normalize:function(t){var e=(t||1)/this.magnitude();return this.scale(e,e)},offset:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x+=t||0,this.y+=e||0,this},reflection:function(t){return new z(t).move(this,this.distance(t))},rotate:function(t,e){if(e===0)return this;t=t||new z(0,0),e=Le(Be(-e));var r=Ru(e),n=Zu(e),i=r*(this.x-t.x)-n*(this.y-t.y)+t.x,o=n*(this.x-t.x)+r*(this.y-t.y)+t.y;return this.x=i,this.y=o,this},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=g0(10,t);break}return this.x=_d(this.x*e)/e,this.y=_d(this.y*e)/e,this},scale:function(t,e,r){return r=r&&new z(r)||new z(0,0),this.x=r.x+t*(this.x-r.x),this.y=r.y+e*(this.y-r.y),this},snapToGrid:function(t,e){return this.x=sn(this.x,t),this.y=sn(this.y,e||t),this},squaredDistance:function(t){return ki(this,t)},theta:function(t){t=new z(t);var e=-(t.y-this.y),r=t.x-this.x,n=d0(e,r);return n<0&&(n=2*Vd+n),180*n/Vd},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(t){t=t&&new z(t)||new z(0,0);var e=this.x,r=this.y;return this.x=Yd((e-t.x)*(e-t.x)+(r-t.y)*(r-t.y)),this.y=Le(t.theta(new z(e,r))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x=t||0,this.y=e||0,this},vectorAngle:function(t){var e=new z(0,0);return e.angleBetween(this,t)}};z.prototype.translate=z.prototype.offset;var Oi=z;var{max:ju,min:Wu}=Math,pt=function(t,e){if(!(this instanceof pt))return new pt(t,e);if(t instanceof pt)return new pt(t.start,t.end);this.start=new z(t),this.end=new z(e)};pt.prototype={type:Lt.Line,angle:function(){var t=new z(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)},bbox:function(){var t=Wu(this.start.x,this.end.x),e=Wu(this.start.y,this.end.y),r=ju(this.start.x,this.end.x),n=ju(this.start.y,this.end.y);return new ft(t,e,r-t,n-e)},bearing:function(){return sa(this.start,this.end)},clone:function(){return new pt(this.start,this.end)},closestPoint:function(t){return this.pointAt(this.closestPointNormalizedLength(t))},closestPointLength:function(t){return this.closestPointNormalizedLength(t)*this.length()},closestPointNormalizedLength:function(t){var e=this.vector().dot(new pt(this.start,t).vector()),r=Wu(1,ju(0,e/this.squaredLength()));return r!==r?0:r},closestPointTangent:function(t){return this.tangentAt(this.closestPointNormalizedLength(t))},containsPoint:function(t){var e=this.start,r=this.end;if(e.cross(t,r)!==0)return!1;var n=this.length();return!(new pt(e,t).length()>n||new pt(t,r).length()>n)},divideAt:function(t){var e=this.pointAt(t);return[new pt(this.start,e),new pt(e,this.end)]},divideAtLength:function(t){var e=this.pointAtLength(t);return[new pt(this.start,e),new pt(e,this.end)]},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y},intersect:function(t,e){if(t&&t.intersectionWithLine){var r=t.intersectionWithLine(this,e);return r&&t instanceof pt&&(r=r[0]),r}return null},intersectionWithLine:function(t){var e=new z(this.end.x-this.start.x,this.end.y-this.start.y),r=new z(t.end.x-t.start.x,t.end.y-t.start.y),n=e.x*r.y-e.y*r.x,i=new z(t.start.x-this.start.x,t.start.y-this.start.y),o=i.x*r.y-i.y*r.x,s=i.x*e.y-i.y*e.x;if(n===0||o*n<0||s*n<0)return null;if(n>0){if(o>n||s>n)return null}else if(o<n||s<n)return null;return[new z(this.start.x+o*e.x/n,this.start.y+o*e.y/n)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return aa(this.start,this.end)},midpoint:function(){return new z((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(t){let e=this.clone();if(!this.isDifferentiable())return e;let{start:r,end:n}=e,i=r.clone().rotate(n,270),o=n.clone().rotate(r,90);return r.move(o,t),n.move(i,t),e},pointAt:function(t){var e=this.start,r=this.end;return t<=0?e.clone():t>=1?r.clone():e.lerp(r,t)},pointAtLength:function(t){var e=this.start,r=this.end,n=!0;t<0&&(n=!1,t=-t);var i=this.length();return t>=i?n?r.clone():e.clone():this.pointAt((n?t:i-t)/i)},pointOffset:function(t){t=new z(t);var e=this.start,r=this.end,n=(r.x-e.x)*(t.y-e.y)-(r.y-e.y)*(t.x-e.x);return n/this.length()},rotate:function(t,e){return this.start.rotate(t,e),this.end.rotate(t,e),this},round:function(t){return this.start.round(t),this.end.round(t),this},scale:function(t,e,r){return this.start.scale(t,e,r),this.end.scale(t,e,r),this},setLength:function(t){var e=this.length();if(!e)return this;var r=t/e;return this.scale(r,r,this.start)},squaredLength:function(){return ki(this.start,this.end)},tangentAt:function(t){if(!this.isDifferentiable())return null;var e=this.start,r=this.end,n=this.pointAt(t),i=new pt(e,r);return i.translate(n.x-e.x,n.y-e.y),i},tangentAtLength:function(t){if(!this.isDifferentiable())return null;var e=this.start,r=this.end,n=this.pointAtLength(t),i=new pt(e,r);return i.translate(n.x-e.x,n.y-e.y),i},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(t,e){return this.start.translate(t,e),this.end.translate(t,e),this},vector:function(){return new z(this.end.x-this.start.x,this.end.y-this.start.y)}};pt.prototype.intersection=pt.prototype.intersect;var dn=pt;var{sqrt:Xd,round:ua,pow:p0}=Math,ze=function(t,e,r){if(!(this instanceof ze))return new ze(t,e,r);if(t instanceof ze)return new ze(new z(t.x,t.y),t.a,t.b);t=new z(t),this.x=t.x,this.y=t.y,this.a=e,this.b=r};ze.fromRect=function(t){return t=new ft(t),new ze(t.center(),t.width/2,t.height/2)};ze.prototype={type:Lt.Ellipse,bbox:function(){return new ft(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new z(this.x,this.y)},clone:function(){return new ze(this)},containsPoint:function(t){return this.normalizedDistance(t)<=1},equals:function(t){return!!t&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b},inflate:function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.a+=2*t,this.b+=2*e,this},intersectionWithLine:function(t){var e=[],r=t.start,n=t.end,i=this.a,o=this.b,s=t.vector(),l=r.difference(new z(this)),u=new z(s.x/(i*i),s.y/(o*o)),h=new z(l.x/(i*i),l.y/(o*o)),d=s.dot(u),f=s.dot(h),C=l.dot(h)-1,w=f*f-d*C;if(w<0)return null;if(w>0){var b=Xd(w),S=(-f-b)/d,P=(-f+b)/d;if((S<0||1<S)&&(P<0||1<P))return null;0<=S&&S<=1&&e.push(r.lerp(n,S)),0<=P&&P<=1&&e.push(r.lerp(n,P))}else{var O=-f/d;if(0<=O&&O<=1)e.push(r.lerp(n,O));else return null}return e},intersectionWithLineFromCenterToPoint:function(t,e){t=new z(t),e&&t.rotate(new z(this.x,this.y),e);var r=t.x-this.x,n=t.y-this.y,i;if(r===0)return i=this.bbox().pointNearestToPoint(t),e?i.rotate(new z(this.x,this.y),-e):i;var o=n/r,s=o*o,l=this.a*this.a,u=this.b*this.b,h=Xd(1/(1/l+s/u));h=r<0?-h:h;var d=o*h;return i=new z(this.x+h,this.y+d),e?i.rotate(new z(this.x,this.y),-e):i},normalizedDistance:function(t){var e=t.x,r=t.y,n=this.a,i=this.b,o=this.x,s=this.y;return(e-o)*(e-o)/(n*n)+(r-s)*(r-s)/(i*i)},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=p0(10,t);break}return this.x=ua(this.x*e)/e,this.y=ua(this.y*e)/e,this.a=ua(this.a*e)/e,this.b=ua(this.b*e)/e,this},tangentTheta:function(t){var e=30,r=t.x,n=t.y,i=this.a,o=this.b,s=this.bbox().center(),l=s.x,u=s.y,h=r>s.x+i/2,d=r<s.x-i/2,f,C;return h||d?(f=r>s.x?n-e:n+e,C=i*i/(r-l)-i*i*(n-u)*(f-u)/(o*o*(r-l))+l):(C=n>s.y?r+e:r-e,f=o*o/(n-u)-o*o*(r-l)*(C-l)/(i*i*(n-u))+u),new z(C,f).theta(t)},toString:function(){return new z(this.x,this.y).toString()+" "+this.a+" "+this.b}};var m0=ze;var{abs:Hd,cos:v0,sin:I0,min:Zo,max:Jd,round:ca,pow:A0}=Math,ft=function(t,e,r,n){if(!(this instanceof ft))return new ft(t,e,r,n);Object(t)===t&&(e=t.y,r=t.width,n=t.height,t=t.x),this.x=t===void 0?0:t,this.y=e===void 0?0:e,this.width=r===void 0?0:r,this.height=n===void 0?0:n};ft.fromEllipse=function(t){return t=new ze(t),new ft(t.x-t.a,t.y-t.b,2*t.a,2*t.b)};ft.fromPointUnion=function(...t){if(t.length===0)return null;let e=new z,r,n,i,o;r=n=1/0,i=o=-1/0;for(let s=0;s<t.length;s++){e.update(t[s]);let l=e.x,u=e.y;l<r&&(r=l),l>i&&(i=l),u<n&&(n=u),u>o&&(o=u)}return new ft(r,n,i-r,o-n)};ft.fromRectUnion=function(...t){if(t.length===0)return null;let e=new ft,r,n,i,o;r=n=1/0,i=o=-1/0;for(let s=0;s<t.length;s++){e.update(t[s]);let l=e.x,u=e.y,h=l+e.width,d=u+e.height;l<r&&(r=l),h>i&&(i=h),u<n&&(n=u),d>o&&(o=d)}return new ft(r,n,i-r,o-n)};ft.prototype={type:Lt.Rect,bbox:function(t){return this.clone().rotateAroundCenter(t)},rotateAroundCenter:function(t){if(!t)return this;let{width:e,height:r}=this,n=Le(t),i=Hd(I0(n)),o=Hd(v0(n)),s=e*o+r*i,l=e*i+r*o;return this.x+=(e-s)/2,this.y+=(r-l)/2,this.width=s,this.height=l,this},bottomLeft:function(){return new z(this.x,this.y+this.height)},bottomLine:function(){return new pt(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new z(this.x+this.width/2,this.y+this.height)},center:function(){return new z(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new ft(this)},containsPoint:function(t){return t instanceof z||(t=new z(t)),t.x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height},containsRect:function(t){var e=new ft(this).normalize(),r=new ft(t).normalize(),n=e.width,i=e.height,o=r.width,s=r.height;if(!n||!i||!o||!s)return!1;var l=e.x,u=e.y,h=r.x,d=r.y;return o+=h,n+=l,s+=d,i+=u,l<=h&&o<=n&&u<=d&&s<=i},corner:function(){return new z(this.x+this.width,this.y+this.height)},equals:function(t){var e=new ft(this).normalize(),r=new ft(t).normalize();return e.x===r.x&&e.y===r.y&&e.width===r.width&&e.height===r.height},inflate:function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},intersect:function(t){var e=this.origin(),r=this.corner(),n=t.origin(),i=t.corner();if(i.x<=e.x||i.y<=e.y||n.x>=r.x||n.y>=r.y)return null;var o=Jd(e.x,n.x),s=Jd(e.y,n.y);return new ft(o,s,Zo(r.x,i.x)-o,Zo(r.y,i.y)-s)},intersectionWithLine:function(t){var e=this,r=[e.topLine(),e.rightLine(),e.bottomLine(),e.leftLine()],n=[],i=[],o,s,l=r.length;for(s=0;s<l;s++)o=t.intersect(r[s]),o!==null&&i.indexOf(o.toString())<0&&(n.push(o),i.push(o.toString()));return n.length>0?n:null},intersectionWithLineFromCenterToPoint:function(t,e){t=new z(t);var r=new z(this.x+this.width/2,this.y+this.height/2),n;e&&t.rotate(r,e);for(var i=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],o=new pt(r,t),s=i.length-1;s>=0;--s){var l=i[s].intersection(o);if(l!==null){n=l;break}}return n&&e&&n.rotate(r,-e),n},leftLine:function(){return new pt(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new z(this.x,this.y+this.height/2)},maxRectScaleToFit:function(t,e){t=new ft(t),e||(e=t.center());var r,n,i,o,s,l,u,h,d=e.x,f=e.y;r=n=i=o=s=l=u=h=1/0;var C=t.topLeft();C.x<d&&(r=(this.x-d)/(C.x-d)),C.y<f&&(s=(this.y-f)/(C.y-f));var w=t.bottomRight();w.x>d&&(n=(this.x+this.width-d)/(w.x-d)),w.y>f&&(l=(this.y+this.height-f)/(w.y-f));var b=t.topRight();b.x>d&&(i=(this.x+this.width-d)/(b.x-d)),b.y<f&&(u=(this.y-f)/(b.y-f));var S=t.bottomLeft();return S.x<d&&(o=(this.x-d)/(S.x-d)),S.y>f&&(h=(this.y+this.height-f)/(S.y-f)),{sx:Zo(r,n,i,o),sy:Zo(s,l,u,h)}},maxRectUniformScaleToFit:function(t,e){var r=this.maxRectScaleToFit(t,e);return Zo(r.sx,r.sy)},moveAndExpand:function(t){return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this},normalize:function(){var t=this.x,e=this.y,r=this.width,n=this.height;return this.width<0&&(t=this.x+this.width,r=-this.width),this.height<0&&(e=this.y+this.height,n=-this.height),this.x=t,this.y=e,this.width=r,this.height=n,this},offset:function(t,e){return z.prototype.offset.call(this,t,e)},origin:function(){return new z(this.x,this.y)},pointNearestToPoint:function(t){if(t=new z(t),this.containsPoint(t)){var e=this.sideNearestToPoint(t);switch(e){case"right":return new z(this.x+this.width,t.y);case"left":return new z(this.x,t.y);case"bottom":return new z(t.x,this.y+this.height);case"top":return new z(t.x,this.y)}}return t.adhereToRect(this)},rightLine:function(){return new pt(this.topRight(),this.bottomRight())},rightMiddle:function(){return new z(this.x+this.width,this.y+this.height/2)},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=A0(10,t);break}return this.x=ca(this.x*e)/e,this.y=ca(this.y*e)/e,this.width=ca(this.width*e)/e,this.height=ca(this.height*e)/e,this},scale:function(t,e,r){return r=this.origin().scale(t,e,r),this.x=r.x,this.y=r.y,this.width*=t,this.height*=e,this},sideNearestToPoint:function(t){t=new z(t);var e=t.x-this.x,r=this.x+this.width-t.x,n=t.y-this.y,i=this.y+this.height-t.y,o=e,s="left";return r<o&&(o=r,s="right"),n<o&&(o=n,s="top"),i<o&&(s="bottom"),s},snapToGrid:function(t,e){var r=this.origin().snapToGrid(t,e),n=this.corner().snapToGrid(t,e);return this.x=r.x,this.y=r.y,this.width=n.x-r.x,this.height=n.y-r.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new pt(this.topLeft(),this.topRight())},topMiddle:function(){return new z(this.x+this.width/2,this.y)},topRight:function(){return new z(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(t){return ft.fromRectUnion(this,t)},update:function(t,e,r,n){return Object(t)===t&&(e=t.y,r=t.width,n=t.height,t=t.x),this.x=t||0,this.y=e||0,this.width=r||0,this.height=n||0,this}};ft.prototype.bottomRight=ft.prototype.corner;ft.prototype.topLeft=ft.prototype.origin;ft.prototype.translate=ft.prototype.offset;var y0=ft;function fa(t){let e=t.trim();if(e==="")return[];let r=[],n=e.split(/\b\s*,\s*|,\s*|\s+/),i=n.length;for(let o=0;o<i;o+=2)r.push({x:+n[o],y:+n[o+1]});return r}function ha(t){let e=t.length;if(e===0)return[];let r=[];for(let n=0;n<e;n++){let i=t[n].clone();r.push(i)}return r}function da(t){let{abs:e}=Math;var r,n,i=t.length;if(i===0)return[];var o;for(r=0;r<i;r++)(o===void 0||t[r].y<o.y||t[r].y===o.y&&t[r].x>o.x)&&(o=t[r]);var s=[];for(r=0;r<i;r++){var l=o.theta(t[r]);l===0&&(l=360);var u=[t[r],r,l];s.push(u)}if(s.sort(function(_,ut){var gt=_[2]-ut[2];return gt===0&&(gt=ut[1]-_[1]),gt}),s.length>2){var h=s[s.length-1];s.unshift(h)}for(var d={},f=[],C,w,b,S,P,O;s.length!==0;)if(C=s.pop(),w=C[0],!d.hasOwnProperty(C[0]+"@@"+C[1]))for(var F=!1;!F;)if(f.length<2)f.push(C),F=!0;else{b=f.pop(),S=b[0],P=f.pop(),O=P[0];var J=O.cross(S,w);if(J<0)f.push(P),f.push(b),f.push(C),F=!0;else if(J===0){var $=1e-10,st=S.angleBetween(O,w);e(st-180)<$||S.equals(w)||O.equals(S)?(d[b[0]+"@@"+b[1]]=S,f.push(P)):e((st+1)%360-1)<$&&(f.push(P),s.push(b))}else d[b[0]+"@@"+b[1]]=S,f.push(P)}f.length>2&&f.pop();var p,v=-1;for(n=f.length,r=0;r<n;r++){var x=f[r][1];(p===void 0||x<p)&&(p=x,v=r)}var M=[];if(v>0){var D=f.slice(v),R=f.slice(0,v);M=D.concat(R)}else M=f;var Z=[];for(n=M.length,r=0;r<n;r++)Z.push(M[r][0]);return Z}var Qt=function(t){if(!(this instanceof Qt))return new Qt(t);if(typeof t=="string")return new Qt.parse(t);this.points=Array.isArray(t)?t.map(z):[]};Qt.parse=function(t){return new Qt(fa(t))};Qt.fromRect=function(t){return new Qt([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft(),t.topLeft()])};Qt.prototype={type:Lt.Polyline,bbox:function(){var t=1/0,e=-1/0,r=1/0,n=-1/0,i=this.points,o=i.length;if(o===0)return null;for(var s=0;s<o;s++){var l=i[s],u=l.x,h=l.y;u<t&&(t=u),u>e&&(e=u),h<r&&(r=h),h>n&&(n=h)}return new ft(t,r,e-t,n-r)},clone:function(){return new Qt(ha(this.points))},closestPoint:function(t){var e=this.closestPointLength(t);return this.pointAtLength(e)},closestPointLength:function(t){var e=this.lengthPoints(),r=e.length;if(r===0||r===1)return 0;for(var n,i=1/0,o=0,s=r-1,l=0;l<s;l++){var u=new pt(e[l],e[l+1]),h=u.length(),d=u.closestPointNormalizedLength(t),f=u.pointAt(d),C=f.squaredDistance(t);C<i&&(i=C,n=o+d*h),o+=h}return n},closestPointNormalizedLength:function(t){var e=this.closestPointLength(t);if(e===0)return 0;var r=this.length();return r===0?0:e/r},closestPointTangent:function(t){var e=this.closestPointLength(t);return this.tangentAtLength(e)},containsPoint:function(t){var e=this.points,r=e.length;if(r===0)return!1;for(var n=t.x,i=t.y,o=r-1,s=0,l=0,u=new pt,h=new pt,d=new z;s<r;s++){var f=e[o],C=e[s];if(t.equals(f)||(u.start=f,u.end=C,u.containsPoint(t)))return!0;if(i<=f.y&&i>C.y||i>f.y&&i<=C.y){var w=f.x-n>C.x-n?f.x-n:C.x-n;w>=0&&(d.x=n+w,d.y=i,h.start=t,h.end=d,u.intersect(h)&&l++)}o=s}return l%2===1},close:function(){let{start:t,end:e,points:r}=this;return t&&e&&!t.equals(e)&&r.push(t.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new Qt(da(this.points))},equals:function(t){if(!t)return!1;var e=this.points,r=t.points,n=e.length;if(r.length!==n)return!1;for(var i=0;i<n;i++){var o=e[i],s=t.points[i];if(!o.equals(s))return!1}return!0},intersectionWithLine:function(t){for(var e=new pt(t),r=[],n=this.lengthPoints(),i=new pt,o=0,s=n.length-1;o<s;o++){i.start=n[o],i.end=n[o+1];var l=e.intersectionWithLine(i);l&&r.push(l[0])}return r.length>0?r:null},isDifferentiable:function(){var t=this.points,e=t.length;if(e===0)return!1;for(var r=new pt,n=e-1,i=0;i<n;i++)if(r.start=t[i],r.end=t[i+1],r.isDifferentiable())return!0;return!1},length:function(){var t=this.lengthPoints(),e=t.length;if(e===0)return 0;for(var r=0,n=e-1,i=0;i<n;i++)r+=t[i].distance(t[i+1]);return r},pointAt:function(t){var e=this.lengthPoints(),r=e.length;if(r===0)return null;if(r===1||t<=0)return e[0].clone();if(t>=1)return e[r-1].clone();var n=this.length(),i=n*t;return this.pointAtLength(i)},pointAtLength:function(t){var e=this.lengthPoints(),r=e.length;if(r===0)return null;if(r===1)return e[0].clone();var n=!0;t<0&&(n=!1,t=-t);for(var i=0,o=r-1,s=0;s<o;s++){var l=n?s:o-1-s,u=e[l],h=e[l+1],d=new pt(u,h),f=u.distance(h);if(t<=i+f)return d.pointAtLength((n?1:-1)*(t-i));i+=f}var C=n?e[r-1]:e[0];return C.clone()},round:function(t){for(var e=this.points,r=e.length,n=0;n<r;n++)e[n].round(t);return this},scale:function(t,e,r){for(var n=this.points,i=n.length,o=0;o<i;o++)n[o].scale(t,e,r);return this},simplify:function(t={}){let e=this.points;if(e.length<3)return this;let r=t.threshold||1e-10,n=0;for(;e[n+2];){let i=n,o=n+1,s=n+2,l=e[i],u=e[o],h=e[s];new pt(l,h).closestPoint(u).distance(u)<=r?e.splice(o,1):n+=1}return this},tangentAt:function(t){var e=this.lengthPoints(),r=e.length;if(r===0||r===1)return null;t<0&&(t=0),t>1&&(t=1);var n=this.length(),i=n*t;return this.tangentAtLength(i)},tangentAtLength:function(t){var e=this.lengthPoints(),r=e.length;if(r===0||r===1)return null;var n=!0;t<0&&(n=!1,t=-t);for(var i,o=0,s=r-1,l=0;l<s;l++){var u=n?l:s-1-l,h=e[u],d=e[u+1],f=new pt(h,d),C=h.distance(d);if(f.isDifferentiable()){if(t<=o+C)return f.tangentAtLength((n?1:-1)*(t-o));i=f}o+=C}if(i){var w=n?1:0;return i.tangentAt(w)}return null},toString:function(){return this.points+""},translate:function(t,e){for(var r=this.points,n=r.length,i=0;i<n;i++)r[i].translate(t,e);return this},serialize:function(){var t=this.points,e=t.length;if(e===0)return"";for(var r="",n=0;n<e;n++){var i=t[n];r+=i.x+","+i.y+" "}return r.trim()}};Object.defineProperty(Qt.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var t=this.points,e=t.length;return e===0?null:this.points[0]}});Object.defineProperty(Qt.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.points,e=t.length;return e===0?null:this.points[e-1]}});var{abs:ga,sqrt:C0,min:Qd,max:Kd,pow:Yu}=Math,Kt=function(t,e,r,n){if(!(this instanceof Kt))return new Kt(t,e,r,n);if(t instanceof Kt)return new Kt(t.start,t.controlPoint1,t.controlPoint2,t.end);this.start=new z(t),this.controlPoint1=new z(e),this.controlPoint2=new z(r),this.end=new z(n)};Kt.throughPoints=function(){function t(r){var n=[],i=[],o=r.length-1,s;if(o==1)return n[0]=new z((2*r[0].x+r[1].x)/3,(2*r[0].y+r[1].y)/3),i[0]=new z(2*n[0].x-r[0].x,2*n[0].y-r[0].y),[n,i];var l=[];for(s=1;s<o-1;s++)l[s]=4*r[s].x+2*r[s+1].x;l[0]=r[0].x+2*r[1].x,l[o-1]=(8*r[o-1].x+r[o].x)/2;var u=e(l);for(s=1;s<o-1;++s)l[s]=4*r[s].y+2*r[s+1].y;l[0]=r[0].y+2*r[1].y,l[o-1]=(8*r[o-1].y+r[o].y)/2;var h=e(l);for(s=0;s<o;s++)n.push(new z(u[s],h[s])),s<o-1?i.push(new z(2*r[s+1].x-u[s+1],2*r[s+1].y-h[s+1])):i.push(new z((r[o].x+u[o-1])/2,(r[o].y+h[o-1])/2));return[n,i]}function e(r){var n=r.length,i=[],o=[],s=2;i[0]=r[0]/s;for(var l=1;l<n;l++)o[l]=1/s,s=(l<n-1?4:3.5)-o[l],i[l]=(r[l]-i[l-1])/s;for(l=1;l<n;l++)i[n-l-1]-=o[n-l]*i[n-l];return i}return function(r){if(!r||Array.isArray(r)&&r.length<2)throw new Error("At least 2 points are required");for(var n=t(r),i=[],o=n[0].length,s=0;s<o;s++){var l=new z(n[0][s].x,n[0][s].y),u=new z(n[1][s].x,n[1][s].y);i.push(new Kt(r[s],l,u,r[s+1]))}return i}}();Kt.prototype={type:Lt.Curve,bbox:function(){for(var t=this.start,e=this.controlPoint1,r=this.controlPoint2,n=this.end,i=t.x,o=t.y,s=e.x,l=e.y,u=r.x,h=r.y,d=n.x,f=n.y,C=new Array,w=new Array,b=[new Array,new Array],S,P,O,F,J,$,st,p,v=0;v<2;++v){if(v===0?(P=6*i-12*s+6*u,S=-3*i+9*s-9*u+3*d,O=3*s-3*i):(P=6*o-12*l+6*h,S=-3*o+9*l-9*h+3*f,O=3*l-3*o),ga(S)<1e-12){if(ga(P)<1e-12)continue;F=-O/P,0<F&&F<1&&w.push(F);continue}st=P*P-4*O*S,p=C0(st),!(st<0)&&(J=(-P+p)/(2*S),0<J&&J<1&&w.push(J),$=(-P-p)/(2*S),0<$&&$<1&&w.push($))}for(var x=w.length,M=x,D,R,Z;x--;)F=w[x],D=1-F,R=D*D*D*i+3*D*D*F*s+3*D*F*F*u+F*F*F*d,b[0][x]=R,Z=D*D*D*o+3*D*D*F*l+3*D*F*F*h+F*F*F*f,b[1][x]=Z,C[x]={X:R,Y:Z};w[M]=0,w[M+1]=1,C[M]={X:i,Y:o},C[M+1]={X:d,Y:f},b[0][M]=i,b[1][M]=o,b[0][M+1]=d,b[1][M+1]=f,w.length=M+2,b[0].length=M+2,b[1].length=M+2,C.length=M+2;var _=Qd.apply(null,b[0]),ut=Qd.apply(null,b[1]),gt=Kd.apply(null,b[0]),Y=Kd.apply(null,b[1]);return new ft(_,ut,gt-_,Y-ut)},clone:function(){return new Kt(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(t,e){return this.pointAtT(this.closestPointT(t,e))},closestPointLength:function(t,e){e=e||{};var r=e.precision===void 0?this.PRECISION:e.precision,n=e.subdivisions===void 0?this.getSubdivisions({precision:r}):e.subdivisions,i={precision:r,subdivisions:n};return this.lengthAtT(this.closestPointT(t,i),i)},closestPointNormalizedLength:function(t,e){e=e||{};var r=e.precision===void 0?this.PRECISION:e.precision,n=e.subdivisions===void 0?this.getSubdivisions({precision:r}):e.subdivisions,i={precision:r,subdivisions:n},o=this.closestPointLength(t,i);if(!o)return 0;var s=this.length(i);return s===0?0:o/s},closestPointT:function(t,e){e=e||{};for(var r=e.precision===void 0?this.PRECISION:e.precision,n=e.subdivisions===void 0?this.getSubdivisions({precision:r}):e.subdivisions,i,o,s,l,u,h,d,f=n.length,C=f?1/f:0,w=0;w<f;w++){var b=n[w],S=b.start.distance(t),P=b.end.distance(t),O=S+P;(!d||O<d)&&(i=b,o=w*C,s=(w+1)*C,l=S,u=P,h=b.start.distance(b.end),d=O)}for(var F=Yu(10,-r);;){var J=l?ga(l-u)/l:0,$=u?ga(l-u)/u:0,st=J<F||$<F,p=l?l<h*F:!0,v=u?u<h*F:!0,x=p||v;if(st||x)return l<=u?o:s;var M=i.divide(.5);C/=2;var D=M[0].start.distance(t),R=M[0].end.distance(t),Z=D+R,_=M[1].start.distance(t),ut=M[1].end.distance(t),gt=_+ut;Z<=gt?(i=M[0],s-=C,l=D,u=R):(i=M[1],o+=C,l=_,u=ut)}},closestPointTangent:function(t,e){return this.tangentAtT(this.closestPointT(t,e))},containsPoint:function(t,e){var r=this.toPolyline(e);return r.containsPoint(t)},divideAt:function(t,e){if(t<=0)return this.divideAtT(0);if(t>=1)return this.divideAtT(1);var r=this.tAt(t,e);return this.divideAtT(r)},divideAtLength:function(t,e){var r=this.tAtLength(t,e);return this.divideAtT(r)},divideAtT:function(t){var e=this.start,r=this.controlPoint1,n=this.controlPoint2,i=this.end;if(t<=0)return[new Kt(e,e,e,e),new Kt(e,r,n,i)];if(t>=1)return[new Kt(e,r,n,i),new Kt(i,i,i,i)];var o=this.getSkeletonPoints(t),s=o.startControlPoint1,l=o.startControlPoint2,u=o.divider,h=o.dividerControlPoint1,d=o.dividerControlPoint2;return[new Kt(e,s,l,u),new Kt(u,h,d,i)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.controlPoint1.x===t.controlPoint1.x&&this.controlPoint1.y===t.controlPoint1.y&&this.controlPoint2.x===t.controlPoint2.x&&this.controlPoint2.y===t.controlPoint2.y&&this.end.x===t.end.x&&this.end.y===t.end.y},getSkeletonPoints:function(t){var e=this.start,r=this.controlPoint1,n=this.controlPoint2,i=this.end;if(t<=0)return{startControlPoint1:e.clone(),startControlPoint2:e.clone(),divider:e.clone(),dividerControlPoint1:r.clone(),dividerControlPoint2:n.clone()};if(t>=1)return{startControlPoint1:r.clone(),startControlPoint2:n.clone(),divider:i.clone(),dividerControlPoint1:i.clone(),dividerControlPoint2:i.clone()};var o=new pt(e,r).pointAt(t),s=new pt(r,n).pointAt(t),l=new pt(n,i).pointAt(t),u=new pt(o,s).pointAt(t),h=new pt(s,l).pointAt(t),d=new pt(u,h).pointAt(t),f={startControlPoint1:o,startControlPoint2:u,divider:d,dividerControlPoint1:h,dividerControlPoint2:l};return f},getSubdivisions:function(t){t=t||{};var e=t.precision===void 0?this.PRECISION:t.precision,r=this.start,n=this.controlPoint1,i=this.controlPoint2,o=this.end,s=[new Kt(r,n,i,o)];if(e===0)return s;var l=!this.isDifferentiable();if(l)return s;var u=this.endpointDistance(),h=Yu(10,-e),d=2,f=n.cross(r,o)===0&&i.cross(r,o)===0;f&&(d=2*e);for(var C=0;;){C+=1;for(var w=[],b=s.length,S=0;S<b;S++){var P=s[S],O=P.divide(.5);w.push(O[0],O[1])}for(var F=0,J=w.length,$=0;$<J;$++){var st=w[$];F+=st.endpointDistance()}if(C>=d){var p=F!==0?(F-u)/F:0;if(p<h)return w}s=w,u=F}},isDifferentiable:function(){var t=this.start,e=this.controlPoint1,r=this.controlPoint2,n=this.end;return!(t.equals(e)&&e.equals(r)&&r.equals(n))},length:function(t){t=t||{};for(var e=t.precision===void 0?this.PRECISION:t.precision,r=t.subdivisions===void 0?this.getSubdivisions({precision:e}):t.subdivisions,n=0,i=r.length,o=0;o<i;o++){var s=r[o];n+=s.endpointDistance()}return n},lengthAtT:function(t,e){if(t<=0)return 0;e=e||{};var r=e.precision===void 0?this.PRECISION:e.precision,n=this.divide(t)[0],i=n.length({precision:r});return i},pointAt:function(t,e){if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var r=this.tAt(t,e);return this.pointAtT(r)},pointAtLength:function(t,e){var r=this.tAtLength(t,e);return this.pointAtT(r)},pointAtT:function(t){return t<=0?this.start.clone():t>=1?this.end.clone():this.getSkeletonPoints(t).divider},PRECISION:3,round:function(t){return this.start.round(t),this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,r){return this.start.scale(t,e,r),this.controlPoint1.scale(t,e,r),this.controlPoint2.scale(t,e,r),this.end.scale(t,e,r),this},tangentAt:function(t,e){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var r=this.tAt(t,e);return this.tangentAtT(r)},tangentAtLength:function(t,e){if(!this.isDifferentiable())return null;var r=this.tAtLength(t,e);return this.tangentAtT(r)},tangentAtT:function(t){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var e=this.getSkeletonPoints(t),r=e.startControlPoint2,n=e.dividerControlPoint1,i=e.divider,o=new pt(r,n);return o.translate(i.x-r.x,i.y-r.y),o},tAt:function(t,e){if(t<=0)return 0;if(t>=1)return 1;e=e||{};var r=e.precision===void 0?this.PRECISION:e.precision,n=e.subdivisions===void 0?this.getSubdivisions({precision:r}):e.subdivisions,i={precision:r,subdivisions:n},o=this.length(i),s=o*t;return this.tAtLength(s,i)},tAtLength:function(t,e){var r=!0;t<0&&(r=!1,t=-t),e=e||{};for(var n=e.precision===void 0?this.PRECISION:e.precision,i=e.subdivisions===void 0?this.getSubdivisions({precision:n}):e.subdivisions,o={precision:n,subdivisions:i},s,l,u,h,d,f=0,C=i.length,w=1/C,b=0;b<C;b++){var S=r?b:C-1-b,P=i[b],O=P.endpointDistance();if(t<=f+O){s=P,l=S*w,u=(S+1)*w,h=r?t-f:O+f-t,d=r?O+f-t:t-f;break}f+=O}if(!s)return r?1:0;for(var F=this.length(o),J=Yu(10,-n);;){var $;if($=F!==0?h/F:0,$<J)return l;if($=F!==0?d/F:0,$<J)return u;var st,p,v=s.divide(.5);w/=2;var x=v[0].endpointDistance(),M=v[1].endpointDistance();h<=x?(s=v[0],u-=w,st=h,p=x-st):(s=v[1],l+=w,st=h-x,p=M-st),h=st,d=p}},toPoints:function(t){t=t||{};for(var e=t.precision===void 0?this.PRECISION:t.precision,r=t.subdivisions===void 0?this.getSubdivisions({precision:e}):t.subdivisions,n=[r[0].start.clone()],i=r.length,o=0;o<i;o++){var s=r[o];n.push(s.end.clone())}return n},toPolyline:function(t){return new Qt(this.toPoints(t))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.start.translate(t,e),this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}};Kt.prototype.divide=Kt.prototype.divideAtT;function Kn(t){var e,r,n=[];for(r=arguments.length,e=1;e<r;e++)n.push(arguments[e]);if(!t)throw new Error("Missing a parent object.");var i=Object.create(t);for(r=n.length,e=0;e<r;e++){var o=n[e],s,l;for(l in o)o.hasOwnProperty(l)&&(delete i[l],s=Object.getOwnPropertyDescriptor(o,l),Object.defineProperty(i,l,s))}return i}var xt=function(t){if(!(this instanceof xt))return new xt(t);if(typeof t=="string")return new xt.parse(t);this.segments=[];var e,r;if(t)if(Array.isArray(t)&&t.length!==0)if(t=t.reduce(function(l,u){return l.concat(u)},[]),r=t.length,t[0].isSegment)for(e=0;e<r;e++){var n=t[e];this.appendSegment(n)}else{var i=null;for(e=0;e<r;e++){var o=t[e];if(!(o instanceof pt||o instanceof Kt))throw new Error("Cannot construct a path segment from the provided object.");e===0&&this.appendSegment(xt.createSegment("M",o.start)),i&&!i.end.equals(o.start)&&this.appendSegment(xt.createSegment("M",o.start)),o instanceof pt?this.appendSegment(xt.createSegment("L",o.end)):o instanceof Kt&&this.appendSegment(xt.createSegment("C",o.controlPoint1,o.controlPoint2,o.end)),i=o}}else if(t.isSegment)this.appendSegment(t);else if(t instanceof pt)this.appendSegment(xt.createSegment("M",t.start)),this.appendSegment(xt.createSegment("L",t.end));else if(t instanceof Kt)this.appendSegment(xt.createSegment("M",t.start)),this.appendSegment(xt.createSegment("C",t.controlPoint1,t.controlPoint2,t.end));else if(t instanceof Qt){if(!(t.points&&t.points.length!==0))return;for(r=t.points.length,e=0;e<r;e++){var s=t.points[e];e===0?this.appendSegment(xt.createSegment("M",s)):this.appendSegment(xt.createSegment("L",s))}}else throw new Error("Cannot construct a path from the provided object.")};xt.parse=function(t){if(!t)return new xt;for(var e=new xt,r=/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g,n=t.match(r),i=n.length,o=0;o<i;o++){var s=n[o],l=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,u=s.match(l),h=xt.createSegment.apply(this,u);e.appendSegment(h)}return e};xt.createSegment=function(t){if(!t)throw new Error("Type must be provided.");var e=xt.segmentTypes[t];if(!e)throw new Error(t+" is not a recognized path segment type.");for(var r=[],n=arguments.length,i=1;i<n;i++)r.push(arguments[i]);return an(e,r)};xt.prototype={type:Lt.Path,appendSegment:function(t){var e=this.segments,r=e.length,n,i=r!==0?e[r-1]:null,o=null;if(Array.isArray(t)){if(t=t.reduce(function(h,d){return h.concat(d)},[]),!t[0].isSegment)throw new Error("Segments required.");for(var s=t.length,l=0;l<s;l++){var u=t[l];n=this.prepareSegment(u,i,o),e.push(n),i=n}}else{if(!t||!t.isSegment)throw new Error("Segment required.");n=this.prepareSegment(t,i,o),e.push(n)}},bbox:function(){var t=this.segments,e=t.length;if(e===0)return null;for(var r,n=0;n<e;n++){var i=t[n];if(i.isVisible){var o=i.bbox();r=r?r.union(o):o}}if(r)return r;var s=t[e-1];return new ft(s.end.x,s.end.y,0,0)},clone:function(){for(var t=this.segments,e=t.length,r=new xt,n=0;n<e;n++){var i=t[n].clone();r.appendSegment(i)}return r},closestPoint:function(t,e){var r=this.closestPointT(t,e);return r?this.pointAtT(r):null},closestPointLength:function(t,e){e=e||{};var r=e.precision===void 0?this.PRECISION:e.precision,n=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):e.segmentSubdivisions,i={precision:r,segmentSubdivisions:n},o=this.closestPointT(t,i);return o?this.lengthAtT(o,i):0},closestPointNormalizedLength:function(t,e){e=e||{};var r=e.precision===void 0?this.PRECISION:e.precision,n=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):e.segmentSubdivisions,i={precision:r,segmentSubdivisions:n},o=this.closestPointLength(t,i);if(o===0)return 0;var s=this.length(i);return s===0?0:o/s},closestPointT:function(t,e){var r=this.segments,n=r.length;if(n===0)return null;e=e||{};for(var i=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,s,l=1/0,u=0;u<n;u++){var h=r[u],d=o[u];if(h.isVisible){var f=h.closestPointT(t,{precision:i,subdivisions:d}),C=h.pointAtT(f),w=new pt(C,t).squaredLength();w<l&&(s={segmentIndex:u,value:f},l=w)}}return s||{segmentIndex:n-1,value:1}},closestPointTangent:function(t,e){var r=this.segments,n=r.length;if(n===0)return null;e=e||{};for(var i=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,s,l=1/0,u=0;u<n;u++){var h=r[u],d=o[u];if(h.isDifferentiable()){var f=h.closestPointT(t,{precision:i,subdivisions:d}),C=h.pointAtT(f),w=new pt(C,t).squaredLength();w<l&&(s=h.tangentAtT(f),l=w)}}return s||null},containsPoint:function(t,e){var r=this.toPolylines(e);if(!r)return!1;for(var n=r.length,i=0,o=0;o<n;o++){var s=r[o];s.containsPoint(t)&&i++}return i%2===1},divideAt:function(t,e){var r=this.segments,n=r.length;if(n===0)return null;t<0&&(t=0),t>1&&(t=1),e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,s={precision:i,segmentSubdivisions:o},l=this.length(s),u=l*t;return this.divideAtLength(u,s)},divideAtLength:function(t,e){var r=this.segments.length;if(r===0)return null;var n=!0;t<0&&(n=!1,t=-t),e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,s,l,u=0,h,d,f,C,w;for(s=0;s<r;s++){var b=n?s:r-1-s;l=this.getSegment(b);var S=o[b],P=l.length({precision:i,subdivisions:S});if(l.isDifferentiable()&&(f=l,C=b,t<=u+P)){d=b,h=l.divideAtLength((n?1:-1)*(t-u),{precision:i,subdivisions:S});break}u+=P}if(!f)return null;h||(d=C,w=n?1:0,h=f.divideAtT(w));var O=this.clone();O.replaceSegment(d,h);var F=d,J=d+1,$=d+2;h[0].isDifferentiable()||(O.removeSegment(F),J-=1,$-=1);var st=O.getSegment(J).start;O.insertSegment(J,xt.createSegment("M",st)),$+=1,h[1].isDifferentiable()||(O.removeSegment($-1),$-=1);var p=$-F-1;for(s=$;s<O.segments.length;s++){var v=this.getSegment(s-p);if(l=O.getSegment(s),l.type==="Z"&&!v.subpathStartSegment.end.equals(l.subpathStartSegment.end)){var x=xt.createSegment("L",v.end);O.replaceSegment(s,x)}}var M=new xt(O.segments.slice(0,J)),D=new xt(O.segments.slice(J));return[M,D]},equals:function(t){if(!t)return!1;var e=this.segments,r=t.segments,n=e.length;if(r.length!==n)return!1;for(var i=0;i<n;i++){var o=e[i],s=r[i];if(o.type!==s.type||!o.equals(s))return!1}return!0},getSegment:function(t){var e=this.segments,r=e.length;if(r===0)throw new Error("Path has no segments.");if(t<0&&(t=r+t),t>=r||t<0)throw new Error("Index out of range.");return e[t]},getSegmentSubdivisions:function(t){var e=this.segments,r=e.length;t=t||{};for(var n=t.precision===void 0?this.PRECISION:t.precision,i=[],o=0;o<r;o++){var s=e[o],l=s.getSubdivisions({precision:n});i.push(l)}return i},getSubpaths:function(){let e=this.clone().validate().segments,r=e.length,n=[];for(let i=0;i<r;i++){let o=e[i];o.isSubpathStart?n.push(new xt(o)):n[n.length-1].appendSegment(o)}return n},insertSegment:function(t,e){var r=this.segments,n=r.length;if(t<0&&(t=n+t+1),t>n||t<0)throw new Error("Index out of range.");var i,o=null,s=null;if(n!==0&&(t>=1?(o=r[t-1],s=o.nextSegment):s=r[0]),Array.isArray(e)){if(e=e.reduce(function(d,f){return d.concat(f)},[]),!e[0].isSegment)throw new Error("Segments required.");for(var l=e.length,u=0;u<l;u++){var h=e[u];i=this.prepareSegment(h,o,s),r.splice(t+u,0,i),o=i}}else{if(!e||!e.isSegment)throw new Error("Segment required.");i=this.prepareSegment(e,o,s),r.splice(t,0,i)}},intersectionWithLine:function(t,e){var r=null,n=this.toPolylines(e);if(!n)return null;for(var i=0,o=n.length;i<o;i++){var s=n[i],l=t.intersect(s);l&&(r||(r=[]),Array.isArray(l)?Array.prototype.push.apply(r,l):r.push(l))}return r},isDifferentiable:function(){for(var t=this.segments,e=t.length,r=0;r<e;r++){var n=t[r];if(n.isDifferentiable())return!0}return!1},isValid:function(){var t=this.segments,e=t.length===0||t[0].type==="M";return e},length:function(t){var e=this.segments,r=e.length;if(r===0)return 0;t=t||{};for(var n=t.precision===void 0?this.PRECISION:t.precision,i=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:n}):t.segmentSubdivisions,o=0,s=0;s<r;s++){var l=e[s],u=i[s];o+=l.length({subdivisions:u})}return o},lengthAtT:function(t,e){var r=this.segments,n=r.length;if(n===0)return 0;var i=t.segmentIndex;if(i<0)return 0;var o=t.value;i>=n?(i=n-1,o=1):o<0?o=0:o>1&&(o=1),e=e||{};for(var s=e.precision===void 0?this.PRECISION:e.precision,l=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,u,h=0,d=0;d<i;d++){var f=r[d];u=l[d],h+=f.length({precisison:s,subdivisions:u})}return f=r[i],u=l[i],h+=f.lengthAtT(o,{precisison:s,subdivisions:u}),h},pointAt:function(t,e){var r=this.segments,n=r.length;if(n===0)return null;if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,s={precision:i,segmentSubdivisions:o},l=this.length(s),u=l*t;return this.pointAtLength(u,s)},pointAtLength:function(t,e){var r=this.segments,n=r.length;if(n===0)return null;if(t===0)return this.start.clone();var i=!0;t<0&&(i=!1,t=-t),e=e||{};for(var o=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,l,u=0,h=0;h<n;h++){var d=i?h:n-1-h,f=r[d],C=s[d],w=f.length({precision:o,subdivisions:C});if(f.isVisible){if(t<=u+w)return f.pointAtLength((i?1:-1)*(t-u),{precision:o,subdivisions:C});l=f}u+=w}if(l)return i?l.end:l.start;var b=r[n-1];return b.end.clone()},pointAtT:function(t){var e=this.segments,r=e.length;if(r===0)return null;var n=t.segmentIndex;if(n<0)return e[0].pointAtT(0);if(n>=r)return e[r-1].pointAtT(1);var i=t.value;return i<0?i=0:i>1&&(i=1),e[n].pointAtT(i)},PRECISION:3,prepareSegment:function(t,e,r){t.previousSegment=e,t.nextSegment=r,e&&(e.nextSegment=t),r&&(r.previousSegment=t);var n=t;return t.isSubpathStart&&(t.subpathStartSegment=t,n=r),n&&this.updateSubpathStartSegment(n),t},removeSegment:function(t){var e=this.segments,r=e.length;if(r===0)throw new Error("Path has no segments.");if(t<0&&(t=r+t),t>=r||t<0)throw new Error("Index out of range.");var n=e.splice(t,1)[0],i=n.previousSegment,o=n.nextSegment;i&&(i.nextSegment=o),o&&(o.previousSegment=i),n.isSubpathStart&&o&&this.updateSubpathStartSegment(o)},replaceSegment:function(t,e){var r=this.segments,n=r.length;if(n===0)throw new Error("Path has no segments.");if(t<0&&(t=n+t),t>=n||t<0)throw new Error("Index out of range.");var i,o=r[t],s=o.previousSegment,l=o.nextSegment,u=o.isSubpathStart;if(Array.isArray(e)){if(e=e.reduce(function(C,w){return C.concat(w)},[]),!e[0].isSegment)throw new Error("Segments required.");r.splice(t,1);for(var h=e.length,d=0;d<h;d++){var f=e[d];i=this.prepareSegment(f,s,l),r.splice(t+d,0,i),s=i,u&&i.isSubpathStart&&(u=!1)}}else{if(!e||!e.isSegment)throw new Error("Segment required.");i=this.prepareSegment(e,s,l),r.splice(t,1,i),u&&i.isSubpathStart&&(u=!1)}u&&l&&this.updateSubpathStartSegment(l)},round:function(t){for(var e=this.segments,r=e.length,n=0;n<r;n++){var i=e[n];i.round(t)}return this},scale:function(t,e,r){for(var n=this.segments,i=n.length,o=0;o<i;o++){var s=n[o];s.scale(t,e,r)}return this},segmentAt:function(t,e){var r=this.segmentIndexAt(t,e);return r?this.getSegment(r):null},segmentAtLength:function(t,e){var r=this.segmentIndexAtLength(t,e);return r?this.getSegment(r):null},segmentIndexAt:function(t,e){var r=this.segments,n=r.length;if(n===0)return null;t<0&&(t=0),t>1&&(t=1),e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,s={precision:i,segmentSubdivisions:o},l=this.length(s),u=l*t;return this.segmentIndexAtLength(u,s)},segmentIndexAtLength:function(t,e){var r=this.segments,n=r.length;if(n===0)return null;var i=!0;t<0&&(i=!1,t=-t),e=e||{};for(var o=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,l=null,u=0,h=0;h<n;h++){var d=i?h:n-1-h,f=r[d],C=s[d],w=f.length({precision:o,subdivisions:C});if(f.isVisible){if(t<=u+w)return d;l=d}u+=w}return l},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(t,e){var r=this.segments,n=r.length;if(n===0)return null;t<0&&(t=0),t>1&&(t=1),e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,s={precision:i,segmentSubdivisions:o},l=this.length(s),u=l*t;return this.tangentAtLength(u,s)},tangentAtLength:function(t,e){var r=this.segments,n=r.length;if(n===0)return null;var i=!0;t<0&&(i=!1,t=-t),e=e||{};for(var o=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,l,u=0,h=0;h<n;h++){var d=i?h:n-1-h,f=r[d],C=s[d],w=f.length({precision:o,subdivisions:C});if(f.isDifferentiable()){if(t<=u+w)return f.tangentAtLength((i?1:-1)*(t-u),{precision:o,subdivisions:C});l=f}u+=w}if(l){var b=i?1:0;return l.tangentAtT(b)}return null},tangentAtT:function(t){var e=this.segments,r=e.length;if(r===0)return null;var n=t.segmentIndex;if(n<0)return e[0].tangentAtT(0);if(n>=r)return e[r-1].tangentAtT(1);var i=t.value;return i<0?i=0:i>1&&(i=1),e[n].tangentAtT(i)},toPoints:function(t){var e=this.segments,r=e.length;if(r===0)return null;t=t||{};for(var n=t.precision===void 0?this.PRECISION:t.precision,i=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:n}):t.segmentSubdivisions,o=[],s=[],l=0;l<r;l++){var u=e[l];if(u.isVisible){var h=i[l];if(h.length>0){var d=h.map(function(f){return f.start});Array.prototype.push.apply(s,d)}else s.push(u.start)}else s.length>0&&(s.push(e[l-1].end),o.push(s),s=[])}return s.length>0&&(s.push(this.end),o.push(s)),o},toPolylines:function(t){var e=[],r=this.toPoints(t);if(!r)return null;for(var n=0,i=r.length;n<i;n++)e.push(new Qt(r[n]));return e},toString:function(){for(var t=this.segments,e=t.length,r="",n=0;n<e;n++){var i=t[n];r+=i.serialize()+" "}return r.trim()},translate:function(t,e){for(var r=this.segments,n=r.length,i=0;i<n;i++){var o=r[i];o.translate(t,e)}return this},updateSubpathStartSegment:function(t){for(var e=t.previousSegment;t&&!t.isSubpathStart;)e?t.subpathStartSegment=e.subpathStartSegment:t.subpathStartSegment=null,e=t,t=t.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,xt.createSegment("M",0,0)),this}};Object.defineProperty(xt.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(e===0)return null;for(var r=0;r<e;r++){var n=t[r];if(n.isVisible)return n.start}return t[e-1].end}});Object.defineProperty(xt.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(e===0)return null;for(var r=e-1;r>=0;r--){var n=t[r];if(n.isVisible)return n.end}return t[e-1].end}});function an(t,e){return e.unshift(null),new(Function.prototype.bind.apply(t,e))}var $n={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(t){if(t<=0)return 0;var e=this.length();return t>=1?e:e*t},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty($n,"end",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty($n,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}});Object.defineProperty($n,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var Ue=function(){for(var t=[],e=arguments.length,r=0;r<e;r++)t.push(arguments[r]);if(!(this instanceof Ue))return an(Ue,t);if(e===0)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");var n;if(t[0]instanceof pt){if(e===1)return this.end=t[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+e+" lines provided).")}else if(typeof t[0]=="string"||typeof t[0]=="number"){if(e===2)return this.end=new z(+t[0],+t[1]),this;if(e<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+e+" coordinates provided).");var i;for(n=[],r=0;r<e;r+=2)i=t.slice(r,r+2),n.push(an(Ue,i));return n}else{if(e===1)return this.end=new z(t[0]),this;var o;for(n=[],r=0;r<e;r+=1)o=t[r],n.push(new Ue(o));return n}},qd={clone:function(){return new Ue(this.end)},divideAt:function(t){var e=new pt(this.start,this.end),r=e.divideAt(t);return[new Ue(r[0]),new Ue(r[1])]},divideAtLength:function(t){var e=new pt(this.start,this.end),r=e.divideAtLength(t);return[new Ue(r[0]),new Ue(r[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return this.previousSegment?!this.start.equals(this.end):!1},round:function(t){return this.end.round(t),this},scale:function(t,e,r){return this.end.scale(t,e,r),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(qd,"type",{configurable:!0,enumerable:!0,value:"L"});Ue.prototype=Kn($n,pt.prototype,qd);var Tr=function(){for(var t=[],e=arguments.length,r=0;r<e;r++)t.push(arguments[r]);if(!(this instanceof Tr))return an(Tr,t);if(e===0)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");var n;if(t[0]instanceof Kt){if(e===1)return this.controlPoint1=t[0].controlPoint1.clone(),this.controlPoint2=t[0].controlPoint2.clone(),this.end=t[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+e+" curves provided).")}else if(typeof t[0]=="string"||typeof t[0]=="number"){if(e===6)return this.controlPoint1=new z(+t[0],+t[1]),this.controlPoint2=new z(+t[2],+t[3]),this.end=new z(+t[4],+t[5]),this;if(e<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+e+" coordinates provided).");var i;for(n=[],r=0;r<e;r+=6)i=t.slice(r,r+6),n.push(an(Tr,i));return n}else{if(e===3)return this.controlPoint1=new z(t[0]),this.controlPoint2=new z(t[1]),this.end=new z(t[2]),this;if(e<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+e+" points provided).");var o;for(n=[],r=0;r<e;r+=3)o=t.slice(r,r+3),n.push(an(Tr,o));return n}},$d={clone:function(){return new Tr(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(t,e){var r=new Kt(this.start,this.controlPoint1,this.controlPoint2,this.end),n=r.divideAt(t,e);return[new Tr(n[0]),new Tr(n[1])]},divideAtLength:function(t,e){var r=new Kt(this.start,this.controlPoint1,this.controlPoint2,this.end),n=r.divideAtLength(t,e);return[new Tr(n[0]),new Tr(n[1])]},divideAtT:function(t){var e=new Kt(this.start,this.controlPoint1,this.controlPoint2,this.end),r=e.divideAtT(t);return[new Tr(r[0]),new Tr(r[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var t=this.start,e=this.controlPoint1,r=this.controlPoint2,n=this.end;return!(t.equals(e)&&e.equals(r)&&r.equals(n))},round:function(t){return this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,r){return this.controlPoint1.scale(t,e,r),this.controlPoint2.scale(t,e,r),this.end.scale(t,e,r),this},serialize:function(){var t=this.controlPoint1,e=this.controlPoint2,r=this.end;return this.type+" "+t.x+" "+t.y+" "+e.x+" "+e.y+" "+r.x+" "+r.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}};Object.defineProperty($d,"type",{configurable:!0,enumerable:!0,value:"C"});Tr.prototype=Kn($n,Kt.prototype,$d);var qn=function(){for(var t=[],e=arguments.length,r=0;r<e;r++)t.push(arguments[r]);if(!(this instanceof qn))return an(qn,t);if(e===0)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");var n;if(t[0]instanceof pt){if(e===1)return this.end=t[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+e+" lines provided).")}else if(t[0]instanceof Kt){if(e===1)return this.end=t[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+e+" curves provided).")}else if(typeof t[0]=="string"||typeof t[0]=="number"){if(e===2)return this.end=new z(+t[0],+t[1]),this;if(e<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+e+" coordinates provided).");var i;for(n=[],r=0;r<e;r+=2)i=t.slice(r,r+2),r===0?n.push(an(qn,i)):n.push(an(Ue,i));return n}else{if(e===1)return this.end=new z(t[0]),this;var o;for(n=[],r=0;r<e;r+=1)o=t[r],r===0?n.push(new qn(o)):n.push(new Ue(o));return n}},Uu={bbox:function(){return null},clone:function(){return new qn(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(t){return this.end.equals(t.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(t){return this.end.round(t),this},scale:function(t,e,r){return this.end.scale(t,e,r),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(Uu,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}});Object.defineProperty(Uu,"type",{configurable:!0,enumerable:!0,value:"M"});qn.prototype=Kn($n,Uu);var Ei=function(){for(var t=[],e=arguments.length,r=0;r<e;r++)t.push(arguments[r]);if(!(this instanceof Ei))return an(Ei,t);if(e>0)throw new Error("Closepath constructor expects no arguments.");return this},Fu={clone:function(){return new Ei},divideAt:function(t){var e=new pt(this.start,this.end),r=e.divideAt(t);return[r[1].isDifferentiable()?new Ue(r[0]):this.clone(),new Ue(r[1])]},divideAtLength:function(t){var e=new pt(this.start,this.end),r=e.divideAtLength(t);return[r[1].isDifferentiable()?new Ue(r[0]):this.clone(),new Ue(r[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!this.previousSegment||!this.subpathStartSegment?!1:!this.start.equals(this.end)},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(Fu,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}});Object.defineProperty(Fu,"type",{configurable:!0,enumerable:!0,value:"Z"});Ei.prototype=Kn($n,pt.prototype,Fu);var x0=xt.segmentTypes={L:Ue,C:Tr,M:qn,Z:Ei,z:Ei};xt.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(x0).join("")+",.]*$");xt.isDataSupported=function(t){return typeof t!="string"?!1:this.regexSupportedData.test(t)};var w0={curveThroughPoints:function(t){return console.warn("deprecated"),new xt(Kt.throughPoints(t)).serialize()},getCurveControlPoints:function(t){console.warn("deprecated");var e=[],r=[],n=t.length-1,i;if(n==1)return e[0]=new z((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),r[0]=new z(2*e[0].x-t[0].x,2*e[0].y-t[0].y),[e,r];var o=[];for(i=1;i<n-1;i++)o[i]=4*t[i].x+2*t[i+1].x;o[0]=t[0].x+2*t[1].x,o[n-1]=(8*t[n-1].x+t[n].x)/2;var s=this.getFirstControlPoints(o);for(i=1;i<n-1;++i)o[i]=4*t[i].y+2*t[i+1].y;o[0]=t[0].y+2*t[1].y,o[n-1]=(8*t[n-1].y+t[n].y)/2;var l=this.getFirstControlPoints(o);for(i=0;i<n;i++)e.push(new z(s[i],l[i])),i<n-1?r.push(new z(2*t[i+1].x-s[i+1],2*t[i+1].y-l[i+1])):r.push(new z((t[n].x+s[n-1])/2,(t[n].y+l[n-1])/2));return[e,r]},getCurveDivider:function(t,e,r,n){console.warn("deprecated");var i=new Kt(t,e,r,n);return function(s){var l=i.divide(s);return[{p0:l[0].start,p1:l[0].controlPoint1,p2:l[0].controlPoint2,p3:l[0].end},{p0:l[1].start,p1:l[1].controlPoint1,p2:l[1].controlPoint2,p3:l[1].end}]}},getFirstControlPoints:function(t){console.warn("deprecated");var e=t.length,r=[],n=[],i=2;r[0]=t[0]/i;for(var o=1;o<e;o++)n[o]=1/i,i=(o<e-1?4:3.5)-n[o],r[o]=(t[o]-r[o-1])/i;for(o=1;o<e;o++)r[e-o-1]-=n[e-o]*r[e-o];return r},getInversionSolver:function(t,e,r,n){console.warn("deprecated");var i=new Kt(t,e,r,n);return function(s){return i.closestPointT(s)}}};var or=function(t){if(!(this instanceof or))return new or(t);if(typeof t=="string")return new or.parse(t);this.points=Array.isArray(t)?t.map(z):[]};or.parse=function(t){return new or(fa(t))};or.fromRect=function(t){return new or([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft()])};or.prototype=Kn(Qt.prototype,{type:Lt.Polygon,clone:function(){return new or(ha(this.points))},convexHull:function(){return new or(da(this.points))},lengthPoints:function(){let{start:t,end:e,points:r}=this;return r.length<=1||t.equals(e)?r:[...r,t.clone()]}});var Ku={};Me(Ku,{ellipseWithEllipse:()=>eg,ellipseWithLine:()=>_u,exists:()=>tg,lineWithLine:()=>ti,pathWithEllipse:()=>cg,pathWithLine:()=>ug,pathWithPath:()=>hg,pathWithPolygon:()=>Ia,pathWithPolyline:()=>Ju,pathWithRect:()=>fg,polygonWithEllipse:()=>va,polygonWithLine:()=>Hu,polygonWithPolygon:()=>lg,polygonWithPolyline:()=>ag,polygonWithRect:()=>sg,polylineWithEllipse:()=>Xu,polylineWithLine:()=>ma,polylineWithPolyline:()=>og,polylineWithRect:()=>ig,rectWithEllipse:()=>ng,rectWithLine:()=>rg,rectWithRect:()=>Vu});function tg(t,e,r,n){switch(t.type){case Lt.Line:{switch(e.type){case Lt.Line:return ti(t,e)}break}case Lt.Ellipse:{switch(e.type){case Lt.Line:return _u(t,e);case Lt.Ellipse:return eg(t,e)}break}case Lt.Rect:{switch(e.type){case Lt.Line:return rg(t,e);case Lt.Ellipse:return ng(t,e);case Lt.Rect:return Vu(t,e)}break}case Lt.Polyline:{switch(e.type){case Lt.Line:return ma(t,e);case Lt.Ellipse:return Xu(t,e);case Lt.Rect:return ig(t,e);case Lt.Polyline:return og(t,e)}break}case Lt.Polygon:{switch(e.type){case Lt.Line:return Hu(t,e);case Lt.Ellipse:return va(t,e);case Lt.Rect:return sg(t,e);case Lt.Polyline:return ag(t,e);case Lt.Polygon:return lg(t,e)}break}case Lt.Path:{switch(e.type){case Lt.Line:return ug(t,e,r);case Lt.Ellipse:return cg(t,e,r);case Lt.Rect:return fg(t,e,r);case Lt.Polyline:return Ju(t,e,r);case Lt.Polygon:return Ia(t,e,r);case Lt.Path:return hg(t,e,r,n)}break}}switch(e.type){case Lt.Ellipse:case Lt.Rect:case Lt.Polyline:case Lt.Polygon:case Lt.Path:return tg(e,t,n,r);default:throw Error(`The intersection for ${t} and ${e} could not be found.`)}}function ti(t,e){let r=t.start.x,n=t.start.y,i=t.end.x,o=t.end.y,s=e.start.x,l=e.start.y,u=e.end.x,h=e.end.y,d=i-r,f=o-n,C=u-s,w=h-l,b=r-s,S=n-l,P=d*w-C*f,O=(d*S-f*b)/P,F=(C*S-w*b)/P;return O>=0&&O<=1&&F>=0&&F<=1}function _u(t,e){let r=t.a,n=t.b,i=t.x,o=t.y,s=e.start.x-i,l=e.end.x-i,u=e.start.y-o,h=e.end.y-o,d=r*r,f=n*n,C=l-s,w=h-u,b=C*C/d+w*w/f,S=2*s*C/d+2*u*w/f,P=s*s/d+u*u/f-1,O=S*S-4*b*P;if(O===0){let F=-S/2/b;return F>=0&&F<=1}else if(O>0){let F=Math.sqrt(O),J=(-S+F)/2/b,$=(-S-F)/2/b;return J>=0&&J<=1||$>=0&&$<=1}return!1}function eg(t,e){return b0(t,0,e,0)}function rg(t,e){let{start:r,end:n}=e,{x:i,y:o,width:s,height:l}=t;return r.x>i+s&&n.x>i+s||r.x<i&&n.x<i||r.y>o+l&&n.y>o+l||r.y<o&&n.y<o?!1:t.containsPoint(e.start)||t.containsPoint(e.end)?!0:ti(t.topLine(),e)||ti(t.rightLine(),e)||ti(t.bottomLine(),e)||ti(t.leftLine(),e)}function ng(t,e){return Vu(t,ft.fromEllipse(e))?va(or.fromRect(t),e):!1}function Vu(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function ma(t,e){return dg(t,e,{interior:!1})}function Xu(t,e){return gg(t,e,{interior:!1})}function ig(t,e){return pg(t,e,{interior:!1})}function og(t,e){return Aa(t,e,{interior:!1})}function Hu(t,e){return dg(t,e,{interior:!0})}function va(t,e){return gg(t,e,{interior:!0})}function sg(t,e){return pg(t,e,{interior:!0})}function ag(t,e){return Aa(t,e,{interior:!0})}function lg(t,e){return Qu(t,e,{interior:!0})}function ug(t,e,r){return t.getSubpaths().some(n=>{let[i]=n.toPolylines(r),{type:o}=n.getSegment(-1);return o==="Z"?Hu(i,e):ma(i,e)})}function cg(t,e,r){return t.getSubpaths().some(n=>{let[i]=n.toPolylines(r),{type:o}=n.getSegment(-1);return o==="Z"?va(i,e):Xu(i,e)})}function fg(t,e,r){return Ia(t,or.fromRect(e),r)}function Ju(t,e,r){return mg(t,e,r,{interior:!1})}function Ia(t,e,r){return mg(t,e,r,{interior:!0})}function hg(t,e,r,n){return t.getSubpaths().some(i=>{let[o]=i.toPolylines(r),{type:s}=i.getSegment(-1);return s==="Z"?Ia(e,o,n):Ju(e,o,n)})}function dg(t,e,r={}){let{interior:n=!1}=r,i;if(n){if(t.containsPoint(e.start))return!0;let{start:l,end:u,points:h}=t;i=u.equals(l)?h:[...h,l]}else i=t.points;let{length:o}=i,s=new pt;for(let l=0;l<o-1;l++)if(s.start=i[l],s.end=i[l+1],ti(e,s))return!0;return!1}function gg(t,e,r={}){let{start:n,end:i,points:o}=t;if(e.containsPoint(n))return!0;let s,{interior:l=!1}=r;if(l){if(t.containsPoint(e.center()))return!0;s=i.equals(n)?o:[...o,n]}else s=o;let{length:u}=s,h=new pt;for(let d=0;d<u-1;d++)if(h.start=s[d],h.end=s[d+1],_u(e,h))return!0;return!1}function pg(t,e,r){let n=or.fromRect(e);return Qu(t,n,r)}function mg(t,e,r,n){return t.getSubpaths().some(i=>{let[o]=i.toPolylines(r),{type:s}=i.getSegment(-1);return s==="Z"?Qu(e,o,n):Aa(e,o,n)})}function Aa(t,e,r={}){let{interior:n=!1}=r,i;if(n){let{start:u}=e;if(t.containsPoint(u))return!0;i=t.clone().close()}else i=t;let o=e.points,{length:s}=o,l=new pt;for(let u=0;u<s-1;u++)if(l.start=o[u],l.end=o[u+1],ma(i,l))return!0;return!1}function Qu(t,e,r){return e.containsPoint(t.start)||Aa(t,e.clone().close(),r)}function b0(t,e,r,n){let{cos:i,sin:o}=Math,s=o(e),l=i(e),u=o(n),h=i(n),d=s*s,f=l*l,C=s*l,w=u*u,b=h*h,S=u*h,P=t.a*t.a,O=t.b*t.b,F=r.a*r.a,J=r.b*r.b,$=P*d+O*f,st=F*w+J*b,p=P*f+O*d,v=F*b+J*w,x=2*(O-P)*C,M=2*(J-F)*S,D=-2*$*t.x-x*t.y,R=-2*st*r.x-M*r.y,Z=-x*t.x-2*p*t.y,_=-M*r.x-2*v*r.y,ut=$*t.x*t.x+p*t.y*t.y+x*t.x*t.y-P*O,gt=st*r.x*r.x+v*r.y*r.y+M*r.x*r.y-F*J;x=x/2,M=M/2,D=D/2,R=R/2,Z=Z/2,_=_/2;let Y=Nn([[$,x,D],[x,p,Z],[D,Z,ut]]),K=Nn([[st,M,R],[M,v,_],[R,_,gt]]),X=.33333333*(Nn([[st,x,D],[M,p,Z],[R,Z,ut]])+Nn([[$,M,D],[x,v,Z],[D,_,ut]])+Nn([[$,x,R],[x,p,_],[D,Z,gt]])),Q=.33333333*(Nn([[$,M,R],[x,v,_],[D,_,gt]])+Nn([[st,x,R],[M,p,_],[R,Z,gt]])+Nn([[st,M,D],[M,v,Z],[R,_,ut]])),Pt=pa([[Y,X],[X,Q]]),Nt=pa([[Y,Q],[X,K]]),oe=pa([[X,Q],[Q,K]]);return!(pa([[2*Pt,Nt],[Nt,2*oe]])>0&&(Q>0||X>0))}function pa(t){return t[0][0]*t[1][1]-t[0][1]*t[1][0]}function Nn(t){return t[0][0]*t[1][1]*t[2][2]-t[0][0]*t[1][2]*t[2][1]-t[0][1]*t[1][0]*t[2][2]+t[0][1]*t[1][2]*t[2][0]+t[0][2]*t[1][0]*t[2][1]-t[0][2]*t[1][1]*t[2][0]}var N0=Ku;var ch=on(vs(),1);var Rn=on(Gn(),1);var Z0=function(){var t=typeof window=="object"&&!!window.SVGAngle;if(!t)return function(){throw new Error("SVG is required to use Vectorizer.")};var e={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},r="1.1",n=Math,i=n.PI,o=n.atan2,s=n.sqrt,l=n.min,u=n.max,h=n.cos,d=n.sin,f=function(v,x,M){if(!(this instanceof f))return f.apply(Object.create(f.prototype),arguments);if(v){if(f.isV(v)&&(v=v.node),x=x||{},f.isString(v)){if(v=v.trim(),v.toLowerCase()==="svg")v=f.createSvgDocument();else if(v[0]==="<"){var D=f.createSvgDocument(v);if(D.childNodes.length>1){var R=[],Z,_;for(Z=0,_=D.childNodes.length;Z<_;Z++){var ut=D.childNodes[Z];R.push(new f(document.importNode(ut,!0)))}return R}v=document.importNode(D.firstChild,!0)}else v=document.createElementNS(e.svg,v);f.ensureId(v)}return this.node=v,this.setAttributes(x),M&&this.append(M),this}},C=f.prototype;Object.defineProperty(C,"id",{enumerable:!0,get:function(){return this.node.id},set:function(v){this.node.id=v}}),C.getTransformToElement=function(v){var x=this.node;if(f.isSVGGraphicsElement(v)&&f.isSVGGraphicsElement(x)){var M=f.toNode(v).getScreenCTM(),D=x.getScreenCTM();if(M&&D)return M.inverse().multiply(D)}return f.createSVGMatrix()},C.transform=function(v,x){var M=this.node;if(f.isUndefined(v))return f.transformStringToMatrix(this.attr("transform"));if(x&&x.absolute)return this.attr("transform",f.matrixToTransformString(v));var D=f.createSVGTransform(v);return M.transform.baseVal.appendItem(D),this},C.translate=function(v,x,M){M=M||{},x=x||0;var D=this.attr("transform")||"",R=f.parseTransformString(D);if(D=R.value,f.isUndefined(v))return R.translate;D=D.replace(/translate\([^)]*\)/g,"").trim();var Z=M.absolute?v:R.translate.tx+v,_=M.absolute?x:R.translate.ty+x,ut="translate("+Z+","+_+")";return this.attr("transform",(ut+" "+D).trim()),this},C.rotate=function(v,x,M,D){D=D||{};var R=this.attr("transform")||"",Z=f.parseTransformString(R);if(R=Z.value,f.isUndefined(v))return Z.rotate;R=R.replace(/rotate\([^)]*\)/g,"").trim(),v%=360;var _=D.absolute?v:Z.rotate.angle+v,ut=x!==void 0&&M!==void 0?","+x+","+M:"",gt="rotate("+_+ut+")";return this.attr("transform",(R+" "+gt).trim()),this},C.scale=function(v,x){x=f.isUndefined(x)?v:x;var M=this.attr("transform")||"",D=f.parseTransformString(M);if(M=D.value,f.isUndefined(v))return D.scale;M=M.replace(/scale\([^)]*\)/g,"").trim();var R="scale("+v+","+x+")";return this.attr("transform",(M+" "+R).trim()),this},C.bbox=function(v,x){var M,D=this.node,R=D.ownerSVGElement;if(!R)return new ft(0,0,0,0);try{M=D.getBBox()}catch{M={x:D.clientLeft,y:D.clientTop,width:D.clientWidth,height:D.clientHeight}}if(v)return new ft(M);var Z=this.getTransformToElement(x||R);return f.transformRect(M,Z)},C.getBBox=function(v){var x={},M,D=this.node,R=D.ownerSVGElement;if(!R||!f.isSVGGraphicsElement(D))return new ft(0,0,0,0);if(v&&(v.target&&(x.target=f.toNode(v.target)),v.recursive&&(x.recursive=v.recursive)),x.recursive){var _=this.children(),ut=_.length;if(ut===0)return this.getBBox({target:x.target,recursive:!1});x.target||(x.target=this);for(var gt=0;gt<ut;gt++){var Y=_[gt],K;Y.children().length===0?K=Y.getBBox({target:x.target,recursive:!1}):K=Y.getBBox({target:x.target,recursive:!0}),M?M=M.union(K):M=K}return M}else{try{M=D.getBBox()}catch{M={x:D.clientLeft,y:D.clientTop,width:D.clientWidth,height:D.clientHeight}}if(x.target){var Z=this.getTransformToElement(x.target);return f.transformRect(M,Z)}else return new ft(M)}};function w(v,x){v||(v={});var M=f("textPath"),D=v.d;if(D&&v["xlink:href"]===void 0){var R=f("path").attr("d",D).appendTo(x.defs());M.attr("xlink:href","#"+R.id)}return f.isObject(v)&&M.attr(v),M.node}function b(v,x,M){M||(M={});for(var D=M.includeAnnotationIndices,R=M.eol,Z=M.lineHeight,_=M.baseSize,ut=0,gt={},Y=x.length-1,K=0;K<=Y;K++){var X=x[K],Q=null;if(f.isObject(X)){var Pt=X.attrs,Nt=f("tspan",Pt),oe=Nt.node,de=X.t;R&&K===Y&&(de+=R),oe.textContent=de;var wt=Pt.class;wt&&Nt.addClass(wt),D&&Nt.attr("annotations",X.annotations),Q=parseFloat(Pt["font-size"]),isFinite(Q)||(Q=_),Q&&Q>ut&&(ut=Q)}else R&&K===Y&&(X+=R),oe=document.createTextNode(X||" "),_&&_>ut&&(ut=_);v.appendChild(oe)}return ut&&(gt.maxFontSize=ut),Z?gt.lineHeight=Z:ut&&(gt.lineHeight=ut*1.2),gt}var S=/em$/;function P(v,x){var M=parseFloat(v);return S.test(v)?M*x:M}function O(v,x,M,D){if(!Array.isArray(x))return 0;var R=x.length;if(!R)return 0;for(var Z=x[0],_=P(Z.maxFontSize,M)||M,ut=0,gt=P(D,M),Y=1;Y<R;Y++){Z=x[Y];var K=P(Z.lineHeight,M)||gt;ut+=K}var X=P(Z.maxFontSize,M)||M,Q;switch(v){case"middle":Q=_/2-.15*X-ut/2;break;case"bottom":Q=-(.25*X)-ut;break;default:case"top":Q=.8*_;break}return Q}C.text=function(v,x){if(v&&typeof v!="string")throw new Error("Vectorizer: text() expects the first argument to be a string.");v=f.sanitizeText(v),x||(x={});var M=x.displayEmpty,D=x.eol,R=x.textPath,Z=x.textVerticalAnchor,_=Z==="middle"||Z==="bottom"||Z==="top",ut=x.x;ut===void 0&&(ut=this.attr("x")||0);var gt=x.includeAnnotationIndices,Y=x.annotations;Y&&!f.isArray(Y)&&(Y=[Y]);var K=x.lineHeight,X=K==="auto",Q=X?"1.5em":K||"1em";this.empty(),this.attr({"xml:space":"preserve",display:v||M?null:"none"});var Pt=parseFloat(this.attr("font-size"));Pt||(Pt=16,(_||Y)&&this.attr("font-size",Pt));var Nt=document,oe;R?(typeof R=="string"&&(R={d:R}),oe=w(R,this)):oe=Nt.createDocumentFragment();for(var de=0,wt=v.split(`
`),Mt=[],it,nt=0,dt=wt.length-1;nt<=dt;nt++){var Gt=Q,Ht="v-line",Tt=Nt.createElementNS(e.svg,"tspan"),te=wt[nt],A;if(te)if(Y){var T=f.annotateString(te,Y,{offset:-de,includeAnnotationIndices:gt});A=b(Tt,T,{includeAnnotationIndices:gt,eol:nt!==dt&&D,lineHeight:X?null:Q,baseSize:Pt});var k=A.lineHeight;k&&X&&nt!==0&&(Gt=k),nt===0&&(it=A.maxFontSize*.8)}else D&&nt!==dt&&(te+=D),Tt.textContent=te;else{Tt.textContent="-",Ht+=" v-empty-line";var B=Tt.style;if(B.fillOpacity=0,B.strokeOpacity=0,Y){A={},T=f.findAnnotationsAtIndex(Y,de);let ot=Pt;for(let It=T.length;It>0;It--){let Dt=T[It-1].attrs;if(!Dt||!("font-size"in Dt))continue;let Ut=parseFloat(Dt["font-size"]);if(isFinite(Ut)){ot=Ut;break}}X&&(nt>0?Gt=ot*1.2:it=ot*.8),Tt.setAttribute("font-size",ot),A.maxFontSize=ot}}A&&Mt.push(A),nt>0&&Tt.setAttribute("dy",Gt),(nt>0||R)&&Tt.setAttribute("x",ut),Tt.className.baseVal=Ht,oe.appendChild(Tt),de+=te.length+1}if(_)if(Y)Gt=O(Z,Mt,Pt,Q);else if(Z==="top")Gt="0.8em";else{var W;switch(dt>0?(W=parseFloat(Q)||1,W*=dt,S.test(Q)||(W/=Pt)):W=0,Z){case"middle":Gt=.3-W/2+"em";break;case"bottom":Gt=-W-.3+"em";break}}else Z===0?Gt="0em":Z?Gt=Z:(Gt=0,this.attr("y")===null&&this.attr("y",it||"0.8em"));return oe.firstChild.setAttribute("dy",Gt),this.append(oe),this},C.removeAttr=function(v){let x=st[v],{ns:M,local:D}=f.qualifyAttr(x),R=this.node;return M?R.hasAttributeNS(M,D)&&R.removeAttributeNS(M,D):R.hasAttribute(x)&&R.removeAttribute(x),this},C.attr=function(v,x){if(f.isUndefined(v)){for(var M=this.node.attributes,D={},R=0;R<M.length;R++)D[M[R].name]=M[R].value;return D}if(f.isString(v)&&f.isUndefined(x))return this.node.getAttribute(st[v]);if(typeof v=="object")for(var Z in v)v.hasOwnProperty(Z)&&this.setAttribute(Z,v[Z]);else this.setAttribute(v,x);return this},C.normalizePath=function(){var v=this.tagName();return v==="PATH"&&this.attr("d",f.normalizePathData(this.attr("d"))),this},C.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},C.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},C.setAttributes=function(v){for(var x in v)v.hasOwnProperty(x)&&this.setAttribute(x,v[x]);return this},C.append=function(v){f.isArray(v)||(v=[v]);for(var x=0,M=v.length;x<M;x++)this.node.appendChild(f.toNode(v[x]));return this},C.prepend=function(v){var x=this.node.firstChild;return x?f(x).before(v):this.append(v)},C.before=function(v){var x=this.node,M=x.parentNode;if(M){f.isArray(v)||(v=[v]);for(var D=0,R=v.length;D<R;D++)M.insertBefore(f.toNode(v[D]),x)}return this},C.appendTo=function(v){return f.toNode(v).appendChild(this.node),this},C.svg=function(){return this.node instanceof window.SVGSVGElement?this:f(this.node.ownerSVGElement)},C.tagName=function(){return this.node.tagName.toUpperCase()},C.defs=function(){var v=this.svg()||this,x=v.node.getElementsByTagName("defs")[0];return x?f(x):f("defs").appendTo(v)},C.clone=function(){var v=f(this.node.cloneNode(!0));return v.node.id=f.uniqueId(),v},C.findOne=function(v){var x=this.node.querySelector(v);return x?f(x):void 0},C.find=function(v){var x=[],M=this.node.querySelectorAll(v);if(M)for(var D=0;D<M.length;D++)x.push(f(M[D]));return x},C.children=function(){for(var v=this.node.childNodes,x=[],M=0;M<v.length;M++){var D=v[M];D.nodeType===1&&x.push(f(v[M]))}return x},C.parent=function(){return f(this.node.parentNode)||null},C.index=function(){for(var v=0,x=this.node.previousSibling;x;)x.nodeType===1&&v++,x=x.previousSibling;return v},C.findParentByClass=function(v,x){for(var M=this.node.ownerSVGElement,D=this.node.parentNode;D&&D!==x&&D!==M;){var R=f(D);if(R.hasClass(v))return R;D=D.parentNode}return null},C.contains=function(v){var x=this.node,M=f.toNode(v),D=M&&M.parentNode;return x===D||!!(D&&D.nodeType===1&&x.compareDocumentPosition(D)&16)},C.toLocalPoint=function(v,x){var M=this.svg().node,D=M.createSVGPoint();D.x=v,D.y=x;try{var R=D.matrixTransform(M.getScreenCTM().inverse()),Z=this.getTransformToElement(M).inverse()}catch{return D}return R.matrixTransform(Z)},C.translateCenterToPoint=function(v){var x=this.getBBox({target:this.svg()}),M=x.center();return this.translate(v.x-M.x,v.y-M.y),this},C.translateAndAutoOrient=function(v,x,M){v=new z(v),x=new z(x),M||(M=this.svg());var D=this.scale();this.attr("transform","");var R=this.getBBox({target:M}).scale(D.sx,D.sy),Z=f.createSVGTransform();Z.setTranslate(-R.x-R.width/2,-R.y-R.height/2);var _=f.createSVGTransform(),ut=v.angleBetween(x,v.clone().offset(1,0));ut&&_.setRotate(ut,0,0);var gt=f.createSVGTransform(),Y=v.clone().move(x,R.width/2);gt.setTranslate(2*v.x-Y.x,2*v.y-Y.y);var K=this.getTransformToElement(M),X=f.createSVGTransform();return X.setMatrix(gt.matrix.multiply(_.matrix.multiply(Z.matrix.multiply(K.scale(D.sx,D.sy))))),this.attr("transform",f.matrixToTransformString(X.matrix)),this},C.animateAlongPath=function(v,x){x=f.toNode(x);var M=f.ensureId(x),D=f("animateMotion",v),R=f("mpath",{"xlink:href":"#"+M});D.append(R),this.append(D);try{D.node.beginElement()}catch{if(document.documentElement.getAttribute("smiling")==="fake"){var Z=D.node;Z.animators=[];var _=Z.getAttribute("id");_&&(id2anim[_]=Z);for(var ut=getTargets(Z),gt=0,Y=ut.length;gt<Y;gt++){var K=ut[gt],X=new Animator(Z,K,gt);animators.push(X),Z.animators[gt]=X,X.register()}}}return this};let F=/[^\x20\t\r\n\f]+/g;function J(v){return f.isString(v)?v.trim().match(F)||[]:[]}C.hasClass=function(v){return f.isString(v)?this.node.classList.contains(v.trim()):!1},C.addClass=function(v){return this.node.classList.add(...J(v)),this},C.removeClass=function(v){return this.node.classList.remove(...J(v)),this},C.toggleClass=function(v,x){let M=J(v);for(let D=0;D<M.length;D++)this.node.classList.toggle(M[D],x);return this},C.sample=function(v){v=v||1;for(var x=this.node,M=x.getTotalLength(),D=[],R=0,Z;R<M;)Z=x.getPointAtLength(R),D.push({x:Z.x,y:Z.y,distance:R}),R+=v;return D},C.convertToPath=function(){var v=f("path");v.attr(this.attr());var x=this.convertToPathData();return x&&v.attr("d",x),v},C.convertToPathData=function(){var v=this.tagName();switch(v){case"PATH":return this.attr("d");case"LINE":return f.convertLineToPathData(this.node);case"POLYGON":return f.convertPolygonToPathData(this.node);case"POLYLINE":return f.convertPolylineToPathData(this.node);case"ELLIPSE":return f.convertEllipseToPathData(this.node);case"CIRCLE":return f.convertCircleToPathData(this.node);case"RECT":return f.convertRectToPathData(this.node)}throw new Error(v+" cannot be converted to PATH.")},f.prototype.toGeometryShape=function(){var v,x,M,D,R,Z,_,ut,gt,Y,K,X,Q,Pt,Nt;switch(this.tagName()){case"RECT":return v=parseFloat(this.attr("x"))||0,x=parseFloat(this.attr("y"))||0,M=parseFloat(this.attr("width"))||0,D=parseFloat(this.attr("height"))||0,new ft(v,x,M,D);case"CIRCLE":return R=parseFloat(this.attr("cx"))||0,Z=parseFloat(this.attr("cy"))||0,_=parseFloat(this.attr("r"))||0,new ze({x:R,y:Z},_,_);case"ELLIPSE":return R=parseFloat(this.attr("cx"))||0,Z=parseFloat(this.attr("cy"))||0,ut=parseFloat(this.attr("rx"))||0,gt=parseFloat(this.attr("ry"))||0,new ze({x:R,y:Z},ut,gt);case"POLYLINE":return Y=f.getPointsFromSvgNode(this),new Qt(Y);case"POLYGON":return Y=f.getPointsFromSvgNode(this),Y.length>1&&Y.push(Y[0]),new Qt(Y);case"PATH":return K=this.attr("d"),xt.isDataSupported(K)||(K=f.normalizePathData(K)),new xt(K);case"LINE":return X=parseFloat(this.attr("x1"))||0,Pt=parseFloat(this.attr("y1"))||0,Q=parseFloat(this.attr("x2"))||0,Nt=parseFloat(this.attr("y2"))||0,new pt({x:X,y:Pt},{x:Q,y:Nt})}return this.getBBox()},C.findIntersection=function(v,x){var M=this.svg().node;x=x||M;var D=this.getBBox({target:x}),R=D.center();if(D.intersectionWithLineFromCenterToPoint(v)){var Z,_=this.tagName();if(_==="RECT"){var ut=new ft(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),gt=this.getTransformToElement(x),Y=f.decomposeMatrix(gt),K=M.createSVGTransform();K.setRotate(-Y.rotation,R.x,R.y);var X=f.transformRect(ut,K.matrix.multiply(gt));Z=new ft(X).intersectionWithLineFromCenterToPoint(v,Y.rotation)}else if(_==="PATH"||_==="POLYGON"||_==="POLYLINE"||_==="CIRCLE"||_==="ELLIPSE"){var Q=_==="PATH"?this:this.convertToPath(),Pt=Q.sample(),Nt=1/0,oe=[],de,wt,Mt,it,nt,dt;for(de=0;de<Pt.length;de++)wt=Pt[de],Mt=f.createSVGPoint(wt.x,wt.y),Mt=Mt.matrixTransform(this.getTransformToElement(x)),wt=new z(Mt),it=wt.distance(R),nt=wt.distance(v)*1.1,dt=it+nt,dt<Nt?(Nt=dt,oe=[{sample:wt,refDistance:nt}]):dt<Nt+1&&oe.push({sample:wt,refDistance:nt});oe.sort(function(Gt,Ht){return Gt.refDistance-Ht.refDistance}),oe[0]&&(Z=oe[0].sample)}return Z}},C.setAttribute=function(v,x){let M=this.node;if(x===null)return this.removeAttr(v),this;let D=st[v],{ns:R}=f.qualifyAttr(D);return R?M.setAttributeNS(R,D,x):D==="id"?M.id=x:M.setAttribute(D,x),this},f.createSvgDocument=function(v){if(v){let M=`<svg xmlns="${e.svg}" xmlns:xlink="${e.xlink}" version="${r}">${v}</svg>`,{documentElement:D}=f.parseXML(M,{async:!1});return D}let x=document.createElementNS(e.svg,"svg");return x.setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),x.setAttribute("version",r),x},f.createSVGStyle=function(v){let{node:x}=f("style",{type:"text/css"},[f.createCDATASection(v)]);return x},f.createCDATASection=function(v=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(v)},f.idCounter=0,f.uniqueId=function(){return"v-"+ ++f.idCounter},f.toNode=function(v){return f.isV(v)?v.node:v.nodeName&&v||v[0]},f.ensureId=function(v){return v=f.toNode(v),v.id||(v.id=f.uniqueId())},f.sanitizeText=function(v){return(v||"").replace(/ /g,"\xA0")},f.isUndefined=function(v){return typeof v>"u"},f.isString=function(v){return typeof v=="string"},f.isObject=function(v){return v&&typeof v=="object"},f.isArray=Array.isArray,f.parseXML=function(v,x){x=x||{};var M;try{var D=new DOMParser;f.isUndefined(x.async)||(D.async=x.async),M=D.parseFromString(v,"text/xml")}catch{M=void 0}if(!M||M.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+v);return M};let $=Object.create(null);["baseFrequency","baseProfile","clipPathUnits","contentScriptType","contentStyleType","diffuseConstant","edgeMode","externalResourcesRequired","filterRes","filterUnits","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].forEach(v=>$[v]=v);let st=new Proxy($,{get(v,x){return f.supportCamelCaseAttributes?x in v?v[x]:v[x]=x.replace(/[A-Z]/g,"-$&").toLowerCase():x}});Object.defineProperty(f,"attributeNames",{value:st,writable:!1}),Object.defineProperty(f,"supportCamelCaseAttributes",{value:!1,writable:!0}),f.qualifyAttr=function(v){if(v.indexOf(":")!==-1){var x=v.split(":");return{ns:e[x[0]],local:x[1]}}return{ns:null,local:v}},f.transformSeparatorRegex=/[ ,]+/,f.transformRegex=/\b\w+\([^()]+\)/g,f.transformFunctionRegex=/\b(\w+)\(([^()]+)\)/,f.transformTranslateRegex=/\btranslate\(([^()]+)\)/,f.transformRotateRegex=/\brotate\(([^()]+)\)/,f.transformScaleRegex=/\bscale\(([^()]+)\)/,f.transformStringToMatrix=function(v){let x=f.createSVGMatrix(),M=v&&v.match(f.transformRegex);if(!M)return x;let D=M.length;for(let R=0;R<D;R++){let _=M[R].match(f.transformFunctionRegex);if(_){let ut,gt,Y,K,X,Q=f.createSVGMatrix(),Pt=_[1].toLowerCase(),Nt=_[2].split(f.transformSeparatorRegex);switch(Pt){case"scale":ut=parseFloat(Nt[0]),gt=Nt[1]===void 0?ut:parseFloat(Nt[1]),Q=Q.scaleNonUniform(ut,gt);break;case"translate":Y=parseFloat(Nt[0]),K=parseFloat(Nt[1]),Q=Q.translate(Y,K);break;case"rotate":X=parseFloat(Nt[0]),Y=parseFloat(Nt[1])||0,K=parseFloat(Nt[2])||0,Y!==0||K!==0?Q=Q.translate(Y,K).rotate(X).translate(-Y,-K):Q=Q.rotate(X);break;case"skewx":X=parseFloat(Nt[0]),Q=Q.skewX(X);break;case"skewy":X=parseFloat(Nt[0]),Q=Q.skewY(X);break;case"matrix":Q.a=parseFloat(Nt[0]),Q.b=parseFloat(Nt[1]),Q.c=parseFloat(Nt[2]),Q.d=parseFloat(Nt[3]),Q.e=parseFloat(Nt[4]),Q.f=parseFloat(Nt[5]);break;default:continue}x=x.multiply(Q)}}return x},f.matrixToTransformString=function(v){return v||(v=!0),"matrix("+(v.a!==void 0?v.a:1)+","+(v.b!==void 0?v.b:0)+","+(v.c!==void 0?v.c:0)+","+(v.d!==void 0?v.d:1)+","+(v.e!==void 0?v.e:0)+","+(v.f!==void 0?v.f:0)+")"},f.parseTransformString=function(v){var x,M,D;if(v){var R=f.transformSeparatorRegex;if(v.trim().indexOf("matrix")>=0){var Z=f.transformStringToMatrix(v),_=f.decomposeMatrix(Z);x=[_.translateX,_.translateY],D=[_.scaleX,_.scaleY],M=[_.rotation];var ut=[];(x[0]!==0||x[1]!==0)&&ut.push("translate("+x+")"),(D[0]!==1||D[1]!==1)&&ut.push("scale("+D+")"),M[0]!==0&&ut.push("rotate("+M+")"),v=ut.join(" ")}else{let Y=v.match(f.transformTranslateRegex);Y&&(x=Y[1].split(R));let K=v.match(f.transformRotateRegex);K&&(M=K[1].split(R));let X=v.match(f.transformScaleRegex);X&&(D=X[1].split(R))}}var gt=D&&D[0]?parseFloat(D[0]):1;return{value:v,translate:{tx:x&&x[0]?parseInt(x[0],10):0,ty:x&&x[1]?parseInt(x[1],10):0},rotate:{angle:M&&M[0]?parseInt(M[0],10):0,cx:M&&M[1]?parseInt(M[1],10):void 0,cy:M&&M[2]?parseInt(M[2],10):void 0},scale:{sx:gt,sy:D&&D[1]?parseFloat(D[1]):gt}}},f.deltaTransformPoint=function(v,x){var M=x.x*v.a+x.y*v.c+0,D=x.x*v.b+x.y*v.d+0;return{x:M,y:D}},f.decomposeMatrix=function(v){var x=f.deltaTransformPoint(v,{x:0,y:1}),M=f.deltaTransformPoint(v,{x:1,y:0}),D=180/i*o(x.y,x.x)-90,R=180/i*o(M.y,M.x);return{translateX:v.e,translateY:v.f,scaleX:s(v.a*v.a+v.b*v.b),scaleY:s(v.c*v.c+v.d*v.d),skewX:D,skewY:R,rotation:D}},f.matrixToScale=function(v){var x,M,D,R;return v?(x=f.isUndefined(v.a)?1:v.a,R=f.isUndefined(v.d)?1:v.d,M=v.b,D=v.c):x=R=1,{sx:M?s(x*x+M*M):x,sy:D?s(D*D+R*R):R}},f.matrixToRotate=function(v){var x={x:0,y:1};return v&&(x=f.deltaTransformPoint(v,x)),{angle:Be(Qn(o(x.y,x.x))-90)}},f.matrixToTranslate=function(v){return{tx:v&&v.e||0,ty:v&&v.f||0}},f.isV=function(v){return v instanceof f},f.isVElement=f.isV,f.isSVGGraphicsElement=function(v){return v?(v=f.toNode(v),v instanceof SVGElement&&typeof v.getScreenCTM=="function"):!1};var p=f("svg").node;return f.createSVGMatrix=function(v){var x=p.createSVGMatrix();for(var M in v)x[M]=v[M];return x},f.createSVGTransform=function(v){return f.isUndefined(v)?p.createSVGTransform():(v instanceof SVGMatrix||(v=f.createSVGMatrix(v)),p.createSVGTransformFromMatrix(v))},f.createSVGPoint=function(v,x){var M=p.createSVGPoint();return M.x=v,M.y=x,M},f.transformRect=function(v,x){var M=p.createSVGPoint();M.x=v.x,M.y=v.y;var D=M.matrixTransform(x);M.x=v.x+v.width,M.y=v.y;var R=M.matrixTransform(x);M.x=v.x+v.width,M.y=v.y+v.height;var Z=M.matrixTransform(x);M.x=v.x,M.y=v.y+v.height;var _=M.matrixTransform(x),ut=l(D.x,R.x,Z.x,_.x),gt=u(D.x,R.x,Z.x,_.x),Y=l(D.y,R.y,Z.y,_.y),K=u(D.y,R.y,Z.y,_.y);return new ft(ut,Y,gt-ut,K-Y)},f.transformPoint=function(v,x){return new z(f.createSVGPoint(v.x,v.y).matrixTransform(x))},f.transformLine=function(v,x){return new pt(f.transformPoint(v.start,x),f.transformPoint(v.end,x))},f.transformPolyline=function(v,x){var M=v instanceof Qt?v.points:v;f.isArray(M)||(M=[]);for(var D=[],R=0,Z=M.length;R<Z;R++)D[R]=f.transformPoint(M[R],x);return new Qt(D)},f.styleToObject=function(v){for(var x={},M=v.split(";"),D=0;D<M.length;D++){var R=M[D],Z=R.split("=");x[Z[0].trim()]=Z[1].trim()}return x},f.createSlicePathData=function(v,x,M,D){var R=2*i-1e-6,Z=v,_=x,ut=M,gt=D,Y=(gt<ut&&(Y=ut,ut=gt,gt=Y),gt-ut),K=Y<i?"0":"1",X=h(ut),Q=d(ut),Pt=h(gt),Nt=d(gt);return Y>=R?Z?"M0,"+_+"A"+_+","+_+" 0 1,1 0,"+-_+"A"+_+","+_+" 0 1,1 0,"+_+"M0,"+Z+"A"+Z+","+Z+" 0 1,0 0,"+-Z+"A"+Z+","+Z+" 0 1,0 0,"+Z+"Z":"M0,"+_+"A"+_+","+_+" 0 1,1 0,"+-_+"A"+_+","+_+" 0 1,1 0,"+_+"Z":Z?"M"+_*X+","+_*Q+"A"+_+","+_+" 0 "+K+",1 "+_*Pt+","+_*Nt+"L"+Z*Pt+","+Z*Nt+"A"+Z+","+Z+" 0 "+K+",0 "+Z*X+","+Z*Q+"Z":"M"+_*X+","+_*Q+"A"+_+","+_+" 0 "+K+",1 "+_*Pt+","+_*Nt+"L0,0Z"},f.mergeAttrs=function(v,x){for(var M in x)M==="class"?v[M]=v[M]?v[M]+" "+x[M]:x[M]:M==="style"?f.isObject(v[M])&&f.isObject(x[M])?v[M]=f.mergeAttrs(v[M],x[M]):f.isObject(v[M])?v[M]=f.mergeAttrs(v[M],f.styleToObject(x[M])):f.isObject(x[M])?v[M]=f.mergeAttrs(f.styleToObject(v[M]),x[M]):v[M]=f.mergeAttrs(f.styleToObject(v[M]),f.styleToObject(x[M])):v[M]=x[M];return v},f.annotateString=function(v,x,M){x=x||[],M=M||{};for(var D=M.offset||0,R=[],Z,_=[],ut,gt,Y=0;Y<v.length;Y++){ut=_[Y]=v[Y];for(var K=0;K<x.length;K++){var X=x[K],Q=X.start+D,Pt=X.end+D;Y>=Q&&Y<Pt&&(f.isObject(ut)?ut.attrs=f.mergeAttrs(f.mergeAttrs({},ut.attrs),X.attrs):ut=_[Y]={t:v[Y],attrs:X.attrs},M.includeAnnotationIndices&&(ut.annotations||(ut.annotations=[])).push(K))}gt=_[Y-1],gt?f.isObject(ut)&&f.isObject(gt)?JSON.stringify(ut.attrs)===JSON.stringify(gt.attrs)?Z.t+=ut.t:(R.push(Z),Z=ut):f.isObject(ut)||f.isObject(gt)?(R.push(Z),Z=ut):Z=(Z||"")+ut:Z=ut}return Z&&R.push(Z),R},f.findAnnotationsAtIndex=function(v,x){var M=[];return v&&v.forEach(function(D){D.start<x&&x<=D.end&&M.push(D)}),M},f.findAnnotationsBetweenIndexes=function(v,x,M){var D=[];return v&&v.forEach(function(R){(x>=R.start&&x<R.end||M>R.start&&M<=R.end||R.start>=x&&R.end<M)&&D.push(R)}),D},f.shiftAnnotations=function(v,x,M){return v&&v.forEach(function(D){D.start<x&&D.end>=x?D.end+=M:D.start>=x&&(D.start+=M,D.end+=M)}),v},f.convertLineToPathData=function(v){v=f(v);var x=["M",v.attr("x1"),v.attr("y1"),"L",v.attr("x2"),v.attr("y2")].join(" ");return x},f.convertPolygonToPathData=function(v){var x=f.getPointsFromSvgNode(v);return x.length===0?null:f.svgPointsToPath(x)+" Z"},f.convertPolylineToPathData=function(v){var x=f.getPointsFromSvgNode(v);return x.length===0?null:f.svgPointsToPath(x)},f.svgPointsToPath=function(v){for(var x=0,M=v.length;x<M;x++)v[x]=v[x].x+" "+v[x].y;return"M "+v.join(" L")},f.getPointsFromSvgNode=function(v){v=f.toNode(v);var x=[],M=v.points;if(M)for(var D=0,R=M.numberOfItems;D<R;D++)x.push(M.getItem(D));return x},f.KAPPA=.551784,f.convertCircleToPathData=function(v){v=f(v);var x=parseFloat(v.attr("cx"))||0,M=parseFloat(v.attr("cy"))||0,D=parseFloat(v.attr("r")),R=D*f.KAPPA,Z=["M",x,M-D,"C",x+R,M-D,x+D,M-R,x+D,M,"C",x+D,M+R,x+R,M+D,x,M+D,"C",x-R,M+D,x-D,M+R,x-D,M,"C",x-D,M-R,x-R,M-D,x,M-D,"Z"].join(" ");return Z},f.convertEllipseToPathData=function(v){v=f(v);var x=parseFloat(v.attr("cx"))||0,M=parseFloat(v.attr("cy"))||0,D=parseFloat(v.attr("rx")),R=parseFloat(v.attr("ry"))||D,Z=D*f.KAPPA,_=R*f.KAPPA,ut=["M",x,M-R,"C",x+Z,M-R,x+D,M-_,x+D,M,"C",x+D,M+_,x+Z,M+R,x,M+R,"C",x-Z,M+R,x-D,M+_,x-D,M,"C",x-D,M-_,x-Z,M-R,x,M-R,"Z"].join(" ");return ut},f.convertRectToPathData=function(v){return v=f(v),f.rectToPath({x:parseFloat(v.attr("x"))||0,y:parseFloat(v.attr("y"))||0,width:parseFloat(v.attr("width"))||0,height:parseFloat(v.attr("height"))||0,rx:parseFloat(v.attr("rx"))||0,ry:parseFloat(v.attr("ry"))||0})},f.rectToPath=function(v){var x,M=v.x,D=v.y,R=v.width,Z=v.height,_=l(v.rx||v["top-rx"]||0,R/2),ut=l(v.rx||v["bottom-rx"]||0,R/2),gt=l(v.ry||v["top-ry"]||0,Z/2),Y=l(v.ry||v["bottom-ry"]||0,Z/2);return _||ut||gt||Y?x=["M",M,D+gt,"v",Z-gt-Y,"a",ut,Y,0,0,0,ut,Y,"h",R-2*ut,"a",ut,Y,0,0,0,ut,-Y,"v",-(Z-Y-gt),"a",_,gt,0,0,0,-_,-gt,"h",-(R-2*_),"a",_,gt,0,0,0,-_,gt,"Z"]:x=["M",M,D,"H",M+R,"V",D+Z,"H",M,"V",D,"Z"],x.join(" ")},f.normalizePathData=function(){var v=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,x=new RegExp("([a-z])["+v+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+v+"]*,?["+v+"]*)+)","ig"),M=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+v+"]*,?["+v+"]*","ig"),D=Math,R=D.PI,Z=D.sin,_=D.cos,ut=D.tan,gt=D.asin,Y=D.sqrt,K=D.abs;function X(wt,Mt,it,nt,dt,Gt){var Ht=.3333333333333333,Tt=2/3;return[Ht*wt+Tt*it,Ht*Mt+Tt*nt,Ht*dt+Tt*it,Ht*Gt+Tt*nt,dt,Gt]}function Q(wt,Mt,it){var nt=wt*_(it)-Mt*Z(it),dt=wt*Z(it)+Mt*_(it);return{x:nt,y:dt}}function Pt(wt,Mt,it,nt,dt,Gt,Ht,Tt,te,A){var T=R*120/180,k=R/180*(+dt||0),B=[],W;if(A)ge=A[0],ye=A[1],mt=A[2],ie=A[3];else{W=Q(wt,Mt,-k),wt=W.x,Mt=W.y,W=Q(Tt,te,-k),Tt=W.x,te=W.y;var ot=(wt-Tt)/2,It=(Mt-te)/2,Dt=ot*ot/(it*it)+It*It/(nt*nt);Dt>1&&(Dt=Y(Dt),it=Dt*it,nt=Dt*nt);var Ut=it*it,be=nt*nt,Ne=(Gt==Ht?-1:1)*Y(K((Ut*be-Ut*It*It-be*ot*ot)/(Ut*It*It+be*ot*ot))),mt=Ne*it*It/nt+(wt+Tt)/2,ie=Ne*-nt*ot/it+(Mt+te)/2,ge=gt(((Mt-ie)/nt).toFixed(9)),ye=gt(((te-ie)/nt).toFixed(9));ge=wt<mt?R-ge:ge,ye=Tt<mt?R-ye:ye,ge<0&&(ge=R*2+ge),ye<0&&(ye=R*2+ye),Ht&&ge>ye&&(ge=ge-R*2),!Ht&&ye>ge&&(ye=ye-R*2)}var Ce=ye-ge;if(K(Ce)>T){var ke=ye,nr=Tt,Fr=te;ye=ge+T*(Ht&&ye>ge?1:-1),Tt=mt+it*_(ye),te=ie+nt*Z(ye),B=Pt(Tt,te,it,nt,dt,0,Ht,nr,Fr,[ye,ke,mt,ie])}Ce=ye-ge;var pr=_(ge),_r=Z(ge),qr=_(ye),Mo=Z(ye),_n=ut(Ce/4),To=4/3*(it*_n),So=4/3*(nt*_n),Xs=[wt,Mt],Mr=[wt+To*_r,Mt-So*pr],Cn=[Tt+To*Mo,te-So*qr],Po=[Tt,te];if(Mr[0]=2*Xs[0]-Mr[0],Mr[1]=2*Xs[1]-Mr[1],A)return[Mr,Cn,Po].concat(B);B=[Mr,Cn,Po].concat(B).join().split(",");for(var Do=[],mr=B.length,Se=0;Se<mr;Se++)Do[Se]=Se%2?Q(B[Se-1],B[Se],k).y:Q(B[Se],B[Se+1],k).x;return Do}function Nt(wt){if(!wt)return null;var Mt={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},it=[];return String(wt).replace(x,function(nt,dt,Gt){var Ht=[],Tt=dt.toLowerCase();for(Gt.replace(M,function(te,A){A&&Ht.push(+A)}),Tt==="m"&&Ht.length>2&&(it.push([dt].concat(Ht.splice(0,2))),Tt="l",dt=dt==="m"?"l":"L");Ht.length>=Mt[Tt]&&(it.push([dt].concat(Ht.splice(0,Mt[Tt]))),!!Mt[Tt]););}),it}function oe(wt){if((!Array.isArray(wt)||!Array.isArray(wt&&wt[0]))&&(wt=Nt(wt)),!wt||!wt.length)return[["M",0,0]];for(var Mt=[],it=0,nt=0,dt=0,Gt=0,Ht=0,Tt,te=wt.length,A=Ht;A<te;A++){var T=[];Mt.push(T);var k=wt[A];if(Tt=k[0],Tt!=Tt.toUpperCase()){T[0]=Tt.toUpperCase();var B,W;switch(T[0]){case"A":T[1]=k[1],T[2]=k[2],T[3]=k[3],T[4]=k[4],T[5]=k[5],T[6]=+k[6]+it,T[7]=+k[7]+nt;break;case"V":T[1]=+k[1]+nt;break;case"H":T[1]=+k[1]+it;break;case"M":for(dt=+k[1]+it,Gt=+k[2]+nt,B=k.length,W=1;W<B;W++)T[W]=+k[W]+(W%2?it:nt);break;default:for(B=k.length,W=1;W<B;W++)T[W]=+k[W]+(W%2?it:nt);break}}else for(var ot=k.length,It=0;It<ot;It++)T[It]=k[It];switch(T[0]){case"Z":it=+dt,nt=+Gt;break;case"H":it=T[1];break;case"V":nt=T[1];break;case"M":dt=T[T.length-2],Gt=T[T.length-1],it=T[T.length-2],nt=T[T.length-1];break;default:it=T[T.length-2],nt=T[T.length-1];break}}return Mt}function de(wt){var Mt=oe(wt),it={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function nt(B,W,ot){var It,Dt;if(!B)return["C",W.x,W.y,W.x,W.y,W.x,W.y];switch(B[0]in{T:1,Q:1}||(W.qx=null,W.qy=null),B[0]){case"M":W.X=B[1],W.Y=B[2];break;case"A":parseFloat(B[1])===0||parseFloat(B[2])===0?B=["L",B[6],B[7]]:B=["C"].concat(Pt.apply(0,[W.x,W.y].concat(B.slice(1))));break;case"S":ot==="C"||ot==="S"?(It=W.x*2-W.bx,Dt=W.y*2-W.by):(It=W.x,Dt=W.y),B=["C",It,Dt].concat(B.slice(1));break;case"T":ot==="Q"||ot==="T"?(W.qx=W.x*2-W.qx,W.qy=W.y*2-W.qy):(W.qx=W.x,W.qy=W.y),B=["C"].concat(X(W.x,W.y,W.qx,W.qy,B[1],B[2]));break;case"Q":W.qx=B[1],W.qy=B[2],B=["C"].concat(X(W.x,W.y,B[1],B[2],B[3],B[4]));break;case"H":B=["L"].concat(B[1],W.y);break;case"V":B=["L"].concat(W.x,B[1]);break;case"L":break;case"Z":break}return B}function dt(B,W){if(B[W].length>7){B[W].shift();for(var ot=B[W];ot.length;)Gt[W]="A",B.splice(W++,0,["C"].concat(ot.splice(0,6)));B.splice(W,1),te=Mt.length}}for(var Gt=[],Ht="",Tt="",te=Mt.length,A=0;A<te;A++){Mt[A]&&(Ht=Mt[A][0]),Ht!=="C"&&(Gt[A]=Ht,A>0&&(Tt=Gt[A-1])),Mt[A]=nt(Mt[A],it,Tt),Gt[A]!=="A"&&Ht==="C"&&(Gt[A]="C"),dt(Mt,A);var T=Mt[A],k=T.length;it.x=T[k-2],it.y=T[k-1],it.bx=parseFloat(T[k-4])||it.x,it.by=parseFloat(T[k-3])||it.y}return(!Mt[0][0]||Mt[0][0]!=="M")&&Mt.unshift(["M",0,0]),Mt}return function(wt){return de(wt).join(",").split(",").join(" ")}}(),f.namespace=e,f.g=Fe,f}(),tt=Z0;var Xe={useCSSSelectors:!0,classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300};var As="[object Arguments]",zf="[object Array]",Dl="[object Boolean]",jf="[object Date]",lm="[object Error]",j0="[object Function]",Cs="[object Map]",Ll="[object Number]",W0="[object Null]",lo="[object Object]",Wf="[object RegExp]",xs="[object Set]",kl="[object String]",Ol="[object Symbol]",Y0="[object Undefined]",U0="[object WeakMap]",Yf="[object ArrayBuffer]",Uf="[object DataView]",um="[object Float32Array]",cm="[object Float64Array]",fm="[object Int8Array]",hm="[object Int16Array]",dm="[object Int32Array]",gm="[object Uint8Array]",pm="[object Uint8ClampedArray]",mm="[object Uint16Array]",vm="[object Uint32Array]",F0={[As]:!0,[zf]:!0,[Yf]:!0,[Uf]:!0,[Dl]:!0,[jf]:!0,[um]:!0,[cm]:!0,[fm]:!0,[hm]:!0,[dm]:!0,[Cs]:!0,[Ll]:!0,[lo]:!0,[Wf]:!0,[xs]:!0,[kl]:!0,[Ol]:!0,[gm]:!0,[pm]:!0,[mm]:!0,[vm]:!0,[lm]:!1,[j0]:!1,[U0]:!1},Ff="\\ud800-\\udfff",_0="\\u0300-\\u036f",V0="\\ufe20-\\ufe2f",X0="\\u20d0-\\u20ff",H0="\\u1ab0-\\u1aff",J0="\\u1dc0-\\u1dff",Q0=_0+V0+X0+H0+J0,Im="\\u2700-\\u27bf",Am="a-z\\xdf-\\xf6\\xf8-\\xff",K0="\\xac\\xb1\\xd7\\xf7",q0="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",$0="\\u2000-\\u206f",tA=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ym="A-Z\\xc0-\\xd6\\xd8-\\xde",eA="\\ufe0e\\ufe0f",Cm=K0+q0+$0+tA,xm="['\u2019]",rm=`[${Cm}]`,_f=`[${Q0}]`,wm="\\d",rA=`[${Im}]`,bm=`[${Am}]`,Nm=`[^${Ff}${Cm+wm+Im+Am+ym}]`,Gf="\\ud83c[\\udffb-\\udfff]",nA=`(?:${_f}|${Gf})`,Mm=`[^${Ff}]`,Vf="(?:\\ud83c[\\udde6-\\uddff]){2}",Xf="[\\ud800-\\udbff][\\udc00-\\udfff]",ao=`[${ym}]`,iA="\\u200d",nm=`(?:${bm}|${Nm})`,oA=`(?:${ao}|${Nm})`,im=`(?:${xm}(?:d|ll|m|re|s|t|ve))?`,om=`(?:${xm}(?:D|LL|M|RE|S|T|VE))?`,Tm=`${nA}?`,Sm=`[${eA}]?`,sA=`(?:${iA}(?:${[Mm,Vf,Xf].join("|")})${Sm+Tm})*`,aA="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",lA="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Pm=Sm+Tm+sA,uA=`(?:${[rA,Vf,Xf].join("|")})${Pm}`,cA=RegExp([`${ao}?${bm}+${im}(?=${[rm,ao,"$"].join("|")})`,`${oA}+${om}(?=${[rm,ao+nm,"$"].join("|")})`,`${ao}?${nm}+${im}`,`${ao}+${om}`,lA,aA,`${wm}+`,uA].join("|"),"g"),Hf=200,Bf="__hash_undefined__",fA=/^\[object (?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)Array\]$/,hA=`[${Ff}]`,dA=`${Mm}${_f}?`,gA=`(?:${[dA,_f,Vf,Xf,hA].join("|")})`,Dm=RegExp(`${Gf}(?=${Gf})|${gA+Pm}`,"g"),pA=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mA=/^\w*$/,vA=46,IA=/\\(\\)?/g,AA=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),yA=/^(?:0|[1-9]\d*)$/,CA=RegExp.prototype.test.bind(/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/),xA=4294967294,wA=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Lm=t=>Dm.test(t),bA=t=>t.match(Dm)||[],NA=t=>t.split(""),km=t=>Lm(t)?bA(t):NA(t),MA=t=>t==null?[]:ws(t).map(e=>t[e]),ws=t=>Wr(t)?Om(t):Object.keys(Object(t)),TA=t=>{if(!El(t))return Object.keys(t);var e=[];for(var r in Object(t))hasOwnProperty.call(t,r)&&r!="constructor"&&e.push(r);return e},Om=(t,e)=>{let r=Array.isArray(t),n=!r&&Kr(t)&&jr(t)===As,i=!r&&!n&&Ms(t),o=r||n||i,s=t.length,l=new Array(o?s:0),u=o?-1:s;for(;++u<s;)l[u]=`${u}`;for(let h in t)(e||hasOwnProperty.call(t,h))&&!(o&&(h==="length"||Ym(h,s)))&&l.push(h);return l},Nl=(t,e)=>{let{length:r}=t;for(;r--;)if(fo(t[r][0],e))return r;return-1},fo=(t,e)=>t===e||t!==t&&e!==e,Kr=t=>t!=null&&typeof t=="object",Tl=(t,e,r)=>{if(!Wt(r))return!1;let n=typeof e;return(n=="number"?Wr(r)&&e>-1&&e<r.length:n=="string"&&e in r)?fo(r[e],t):!1},SA=t=>Kr(t)&&jr(t)==xs,PA=t=>Kr(t)&&jr(t)==Cs,El=t=>{let e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Object.prototype;return t===r},bs=(t,e,r)=>{let n=t[e];(!(hasOwnProperty.call(t,e)&&fo(n,r))||r===void 0&&!(e in t))&&(t[e]=r)},Ns=(t,e,r)=>{let n=-1,i=e.length;for(;++n<i;){let o=e[n];bs(r,o,t[o])}return r},Wr=t=>t!=null&&typeof t!="function"&&typeof t.length=="number"&&t.length>-1&&t.length%1===0,co=t=>typeof t=="symbol"||Kr(t)&&jr(t)===Ol,DA=t=>{let e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&hasOwnProperty.call(t,"index")&&(r.index=t.index,r.input=t.input),r},Jf=(t,e)=>{let r=-1,n=t.length;for(e||(e=new Array(n));++r<n;)e[r]=t[r];return e},jr=t=>t==null?t===void 0?Y0:W0:Object.prototype.toString.call(t),Qf=t=>{let e=new t.constructor(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e},Em=(t,e)=>{let r=e?Qf(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)},LA=t=>{let e=new t.constructor(t.source,/\w*$/.exec(t));return e.lastIndex=t.lastIndex,e},zm=t=>typeof t.constructor=="function"&&!El(t)?Object.create(Object.getPrototypeOf(t)):{},Kf=t=>t==null?[]:(t=Object(t),Object.getOwnPropertySymbols(t).filter(r=>propertyIsEnumerable.call(t,r))),kA=(t,e)=>Ns(t,Kf(t),e);function OA(t,e){let r=e?Qf(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var EA=(t,e,r)=>{let n=t.constructor;switch(e){case Yf:return Qf(t,r);case Dl:case jf:return new n(+t);case Uf:return OA(t,r);case um:case cm:case fm:case hm:case dm:case gm:case pm:case mm:case vm:return Em(t,r);case Cs:return new n(t);case Ll:case kl:return new n(t);case Wf:return LA(t);case xs:return new n;case Ol:return Symbol.prototype.valueOf?Object(Symbol.prototype.valueOf.call(t)):{}}},Ms=t=>Kr(t)&&fA.test(jr(t)),Rf=t=>{let e=Object.keys(t);return!Array.isArray(t)&&t!=null&&e.push(...Kf(Object(t))),e},Gm=t=>{let e=[];for(;t;)e.push(...Kf(t)),t=Object.getPrototypeOf(Object(t));return e},Bm=t=>{let e=[];for(let r in t)e.push(r);return Array.isArray(t)||e.push(...Gm(t)),e},Ml=({__data__:t},e)=>{let r=t;return _A(e)?r[typeof e=="string"?"string":"hash"]:r.map},zA=(t,e,r,n)=>{let i=Rf(t),o=i.length,l=Rf(e).length;if(o!=l)return!1;let u,h=o;for(;h--;)if(u=i[h],!hasOwnProperty.call(e,u))return!1;let d=n.get(t),f=n.get(e);if(d&&f)return d==e&&f==t;let C=!0;n.set(t,e),n.set(e,t);let w,b;for(;++h<o;){u=i[h];let S=t[u],P=e[u];if(!(w===void 0?S===P||r(S,P,n):w)){C=!1;break}b||(b=u=="constructor")}if(C&&!b){let S=t.constructor,P=e.constructor;S!=P&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof P=="function"&&P instanceof P)&&(C=!1)}return n.delete(t),n.delete(e),C},zl=(t,e,r)=>t===e?!0:t==null||e==null||!Kr(t)&&!Kr(e)?t!==t&&e!==e:GA(t,e,zl,r),GA=(t,e,r,n)=>{let i=Array.isArray(t),o=Array.isArray(e),s=i?zf:jr(t),l=o?zf:jr(e);s=s==As?lo:s,l=l==As?lo:l;let u=s==lo,h=l==lo,d=s==l;if(d&&!u)return n||(n=new Bn),i||Ms(t)?Rm(t,e,!1,r,n):ZA(t,e,s,r,n);let f=u&&hasOwnProperty.call(t,"__wrapped__"),C=h&&hasOwnProperty.call(e,"__wrapped__");if(f||C){let w=f?t.value():t,b=C?e.value():e;return n||(n=new Bn),r(w,b,n)}return d?(n||(n=new Bn),zA(t,e,r,n)):!1},Rm=(t,e,r,n,i)=>{let s=t.length,l=e.length;if(s!=l)return!1;let u=i.get(t),h=i.get(e);if(u&&h)return u==e&&h==t;let d=-1,f=!0,C=r?new mi:void 0;for(i.set(t,e),i.set(e,t);++d<s;){let w,b=t[d],S=e[d];if(w!==void 0){if(w)continue;f=!1;break}if(C){if(!BA(e,(P,O)=>{if(!RA(C,O)&&(b===P||n(b,P,i)))return C.push(O)})){f=!1;break}}else if(!(b===S||n(b,S,i))){f=!1;break}}return i.delete(t),i.delete(e),f},BA=(t,e)=>{let r=-1,n=t==null?0:t.length;for(;++r<n;)if(e(t[r],r,t))return!0;return!1},RA=(t,e)=>t.has(e),sm=(t,e,r,n)=>!(t.byteLength!=e.byteLength||!r(new Uint8Array(t),new Uint8Array(e),n)),ZA=(t,e,r,n,i)=>{switch(r){case Uf:return t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset?!1:(t=t.buffer,e=e.buffer,sm(t,e,n,i));case Yf:return sm(t,e,n,i);case Dl:case jf:case Ll:return fo(+t,+e);case lm:return t.name==e.name&&t.message==e.message;case Wf:case kl:return t==`${e}`;case Cs:let o=Zm;case xs:if(o||(o=Gl),t.size!=e.size)return!1;let s=i.get(t);if(s)return s==e;i.set(t,e);let l=Rm(o(t),o(e),!0,n,i);return i.delete(t),l;case Ol:return Symbol.prototype.valueOf.call(t)==Symbol.prototype.valueOf.call(e)}return!1},Zm=t=>{let e=-1,r=Array(t.size);return t.forEach((n,i)=>{r[++e]=[i,n]}),r},Gl=t=>{let e=-1,r=new Array(t.size);return t.forEach(n=>{r[++e]=n}),r},qf=(t,e)=>{if(Array.isArray(t))return!1;let r=typeof t;return r==="number"||r==="boolean"||t==null||co(t)?!0:mA.test(t)||!pA.test(t)||e!=null&&t in Object(e)},jA=t=>{let e=[];return t.charCodeAt(0)===vA&&e.push(""),t.replace(AA,(r,n,i,o)=>{let s=r;i?s=o.replace(IA,"$1"):n&&(s=n.trim()),e.push(s)}),e},ho=(t,e)=>Array.isArray(t)?t:qf(t,e)?[t]:jA(`${t}`),Bl=(t,e)=>{e=ho(e,t);let r=0,n=e.length;for(;t!=null&&r<n;)t=t[vi(e[r])],r++;return r&&r==n?t:void 0};function WA(t,e){if(t!==e){let r=t!==void 0,n=t===null,i=t===t,o=co(t),s=e!==void 0,l=e===null,u=e===e,h=co(e);if(!l&&!h&&!o&&t>e||o&&s&&u&&!l&&!h||n&&s&&u||!r&&u||!i)return 1;if(!n&&!o&&!h&&t<e||h&&r&&i&&!n&&!o||l&&r&&i||!s&&i||!u)return-1}return 0}function YA(t,e,r){let n=-1,i=t.criteria,o=e.criteria,s=i.length,l=r.length;for(;++n<s;){let u=n<l?r[n]:null,d=(u&&typeof u=="function"?u:WA)(i[n],o[n]);if(d)return u&&typeof u!="function"?d*(u=="desc"?-1:1):d}return t.index-e.index}var jm=(t,e)=>{let r=(s,l)=>!!(s==null?0:s.length)&&s.indexOf(l)>-1,n=!0,i=[],o=e.length;if(!t.length)return i;e.length>=Hf&&(r=(s,l)=>s.has(l),n=!1,e=new mi(e));t:for(let s in t){let l=t[s],u=l;if(l=l!==0?l:0,n&&u===u){let h=o;for(;h--;)if(e[h]===u)continue t;i.push(l)}else r(e,u)||i.push(l)}return i};var vi=t=>{if(typeof t=="string"||co(t))return t;let e=`${t}`;return e=="0"&&1/t==-1/0?"-0":e},uo=(t,e=!1,r=!1,n=!0,i,o,s,l)=>{let u;if(i&&(u=s?i(t,o,s,l):i(t)),u!==void 0)return u;if(!Wt(t))return t;let h=Array.isArray(t),d=jr(t);if(h){if(u=DA(t),!e)return Jf(t,u)}else{let b=typeof t=="function";if(d===lo||d===As||b&&!s){if(u=r||b?{}:zm(t),!e)return r?UA(t,Ns(t,Object.keys(t),u)):kA(t,Object.assign(u,t))}else{if(b||!F0[d])return s?t:{};u=EA(t,d,e)}}l||(l=new Bn);let f=l.get(t);if(f)return f;if(l.set(t,u),PA(t))return t.forEach((b,S)=>{u.set(S,uo(b,e,r,n,i,S,t,l))}),u;if(SA(t))return t.forEach(b=>{u.add(uo(b,e,r,n,i,b,t,l))}),u;if(Ms(t))return u;let w=h?void 0:(n?r?Bm:Rf:r?$f:ws)(t);return(w||t).forEach((b,S)=>{w&&(S=b,b=t[S]),bs(u,S,uo(b,e,r,n,i,S,t,l))}),u},UA=(t,e)=>Ns(t,Gm(t),e),Wm=(t,e)=>e.length<2?t:Bl(t,e.slice(0,-1));var Ym=(t,e)=>{let r=typeof t;return e=e??Number.MAX_SAFE_INTEGER,!!e&&(r==="number"||r!=="symbol"&&yA.test(t))&&t>-1&&t%1==0&&t<e},FA=(t,e)=>{e=ho(e,t),t=Wm(t,e);let r=e[e.length-1];return t==null||delete t[vi(r)]},_A=t=>{let e=typeof t;return e==="string"||e==="number"||e==="symbol"||e==="boolean"?t!=="__proto__":t===null},$f=t=>{let e=[];for(let r in t)e.push(r);return e},VA=t=>{t=Object(t);let e={};for(let r in t)e[r]=t[r];return e},am=(t,e)=>{if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]};function Um(t,e=!1){return(r,...n)=>{let i=-1,o=n.length,s=o>1?n[o-1]:void 0,l=o>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(o--,s):e?(u,h)=>{if(Array.isArray(u)&&!Array.isArray(h))return h}:void 0,l&&Tl(n[0],n[1],l)&&(s=o<3?void 0:s,o=1),r=Object(r);++i<o;){let u=n[i];u&&t(r,u,i,s)}return r}}var th=(t,e,r,n,i)=>{t!==e&&fr(e,(o,s)=>{if(Wt(o))i||(i=new Bn),XA(t,e,s,r,th,n,i);else{let l=n?n(t[s],o,`${s}`,t,e,i):void 0;l===void 0&&(l=o),Zf(t,s,l)}},$f)},XA=(t,e,r,n,i,o,s)=>{let l=am(t,r),u=am(e,r),h=s.get(u);if(h){Zf(t,r,h);return}let d=o?o(l,u,`${r}`,t,e,s):void 0,f=d===void 0;if(f){let C=Array.isArray(u),w=!C&&Ms(u);d=u,C||w?Array.isArray(l)?d=l:Kr(l)&&Wr(l)?d=Jf(l):w?(f=!1,d=Em(u,!0)):d=[]:se(u)||ys(u)?(d=l,ys(l)?d=VA(l):(typeof l=="function"||!Wt(l))&&(d=zm(u))):f=!1}f&&(s.set(u,d),i(d,u,n,o,s),s.delete(u)),Zf(t,r,d)},Zf=(t,e,r)=>{(r!==void 0&&!fo(t[e],r)||r===void 0&&!(e in t))&&bs(t,e,r)};function HA(t,e,r){let n=Object(t),i=r(t),{length:o}=i,s=-1;for(;o--;){let l=i[++s];if(e(n[l],l,n)===!1)break}return t}var JA=(t,e)=>t&&HA(t,e,ws),eh=(t,e)=>{if(t==null)return t;if(!Wr(t))return JA(t,e);let r=t.length,n=Object(t),i=-1;for(;++i<r&&e(n[i],i,n)!==!1;);return t};function QA(t){let e=t==null?0:t.length;return e?t[e-1]:void 0}var KA=Set&&1/Gl(new Set([void 0,-0]))[1]==1/0?t=>new Set(t):()=>{};function Fm(t,e,r,n,i,o){return Wt(t)&&Wt(e)&&(o.set(e,t),th(t,e,void 0,Fm,o),o.delete(e)),t}function qA(t,e,r){e.length?e=e.map(s=>Array.isArray(s)?l=>Bl(l,s.length===1?s[0]:s):s):e=[s=>s];let n=-1,i=-1,o=Wr(t)?new Array(t.length):[];return eh(t,s=>{let l=e.map(u=>u(s));o[++i]={criteria:l,index:++n,value:s}}),$A(o,(s,l)=>YA(s,l,r))}function $A(t,e){let{length:r}=t;for(t.sort(e);r--;)t[r]=t[r].value;return t}function _m(t){return t===t&&!Wt(t)}function Vm(t,e){return r=>r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}function ty(t,e){return t!=null&&py(t,e,gy)}function ey(t,e){return qf(t)&&_m(e)?Vm(vi(t),e):r=>{let n=Bl(r,t);return n===void 0&&n===e?ty(r,t):zl(e,n)}}function ry(t){let e=ny(t);return e.length===1&&e[0][2]?Vm(e[0][0],e[0][1]):r=>r===t||iy(r,t,e)}function ny(t){let e=ws(t),r=e.length;for(;r--;){let n=e[r],i=t[n];e[r]=[n,i,_m(i)]}return e}function iy(t,e,r,n){let i=r.length,o=i,s=!n;if(t==null)return!o;let l,u;for(t=Object(t);i--;)if(l=r[i],s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1;for(;++i<o;){l=r[i];let h=l[0],d=t[h],f=l[1];if(s&&l[2]){if(d===void 0&&!(h in t))return!1}else{let C=new Bn;if(n&&(u=n(d,f,h,t,e,C)),!(u===void 0?zl(f,d,C):u))return!1}}return!0}function oy(t){return qf(t)?sy(vi(t)):ay(t)}function sy(t){return e=>e?.[t]}function ay(t){return e=>Bl(e,t)}function ly(t){return typeof t=="function"?t:t==null?e=>e:typeof t=="object"?Array.isArray(t)?ey(t[0],t[1]):ry(t):oy(t)}function Rl(){let t=ly;return arguments.length?t(arguments[0],arguments[1]):t}var uy=(t,e,r,n)=>{let i=-1,o=t==null?0:t.length;for(n&&o&&(r=t[++i]);++i<o;)r=e(r,t[i],i,t);return r},cy=(t,e,r,n,i)=>(i(t,(o,s,l)=>{r=n?(n=!1,o):e(r,o,s,l)}),r);function fy(t,e,r){let n=Array.isArray(t)?uy:cy,i=arguments.length<3;return n(t,e,r,i,eh)}var hy=t=>Array.isArray(t)||ys(t)||!!(t&&t[Symbol.isConcatSpreadable]);function Xm(t,e,r,n,i){let o=-1,s=t.length;for(r||(r=hy),i||(i=[]);++o<s;){var l=t[o];e>0&&r(l)?e>1?Xm(l,e-1,r,n,i):i.push(...l):n||(i[i.length]=l)}return i}var ys=t=>Kr(t)&&jr(t)=="[object Arguments]";var dy=t=>typeof t=="number"&&t>-1&&t%1==0&&t<=Number.MAX_SAFE_INTEGER,gy=(t,e)=>t!=null&&e in Object(t),py=(t,e,r)=>{e=ho(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var s=vi(e[n]);if(!(o=t!=null&&r(t,s)))break;t=t[s]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&dy(i)&&Ym(s,i)&&(Array.isArray(t)||ys(t)))},my=t=>t.match(wA),vy=t=>t.match(cA),Iy=(t,e)=>e===void 0?(CA(t)?vy(t):my(t))||[]:t.match(e)||[],Ay=(t,e,r)=>{let{length:n}=t;return r=r===void 0?n:r,!e&&r>=n?t:t.slice(e,r)},yy=Cy("toUpperCase");function Cy(t){return e=>{if(!e)return"";let r=Lm(e)?km(e):void 0,n=r?r[0]:e[0],i=r?Ay(r,1).join(""):e.slice(1);return n[t]()+i}}var Bn=class{constructor(e){let r=this.__data__=new Is(e);this.size=r.size}clear(){this.__data__=new Is,this.size=0}delete(e){let r=this.__data__,n=r.delete(e);return this.size=r.size,n}get(e){return this.__data__.get(e)}has(e){return this.__data__.has(e)}set(e,r){let n=this.__data__;if(n instanceof Is){let i=n.__data__;if(i.length<Hf-1)return i.push([e,r]),this.size=++n.size,this;n=this.__data__=new Sl(i)}return n.set(e,r),this.size=n.size,this}},Is=class{constructor(e){let r=-1,n=e==null?0:e.length;for(this.clear();++r<n;){let i=e[r];this.set(i[0],i[1])}}clear(){this.__data__=[],this.size=0}delete(e){let r=this.__data__,n=Nl(r,e);if(n<0)return!1;let i=r.length-1;return n==i?r.pop():r.splice(n,1),--this.size,!0}get(e){let r=this.__data__,n=Nl(r,e);return n<0?void 0:r[n][1]}has(e){return Nl(this.__data__,e)>-1}set(e,r){let n=this.__data__,i=Nl(n,e);return i<0?(++this.size,n.push([e,r])):n[i][1]=r,this}},Sl=class{constructor(e){let r=-1,n=e==null?0:e.length;for(this.clear();++r<n;){let i=e[r];this.set(i[0],i[1])}}clear(){this.size=0,this.__data__={hash:new Pl,map:new Map,string:new Pl}}delete(e){let r=Ml(this,e).delete(e);return this.size-=r?1:0,r}get(e){return Ml(this,e).get(e)}has(e){return Ml(this,e).has(e)}set(e,r){let n=Ml(this,e),i=n.size;return n.set(e,r),this.size+=n.size==i?0:1,this}},Pl=class{constructor(e){let r=-1,n=e==null?0:e.length;for(this.clear();++r<n;){let i=e[r];this.set(i[0],i[1])}}clear(){this.__data__=Object.create(null),this.size=0}delete(e){let r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}get(e){let n=this.__data__[e];return n===Bf?void 0:n}has(e){return this.__data__[e]!==void 0}set(e,r){let n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r===void 0?Bf:r,this}},mi=class{constructor(e){let r=-1,n=e==null?0:e.length;for(this.__data__=new Sl;++r<n;)this.add(e[r])}add(e){return this.__data__.set(e,Bf),this}has(e){return this.__data__.has(e)}};mi.prototype.push=mi.prototype.add;var rh=function(t){var e=Object.prototype.toString;return t===!0||t===!1||!!t&&typeof t=="object"&&e.call(t)===Dl},Wt=function(t){return!!t&&(typeof t=="object"||typeof t=="function")},Ge=function(t){var e=Object.prototype.toString;return typeof t=="number"||!!t&&typeof t=="object"&&e.call(t)===Ll},Te=function(t){var e=Object.prototype.toString;return typeof t=="string"||!!t&&typeof t=="object"&&e.call(t)===kl},At=Um((t,e)=>{if(El(e)||Wr(e)){Ns(e,ws(e),t);return}for(var r in e)hasOwnProperty.call(e,r)&&bs(t,r,e[r])});var Hm=(t,...e)=>{let r=-1,n=e.length,i=n>2?e[2]:void 0;for(i&&Tl(e[0],e[1],i)&&(n=1);++r<n;){let o=e[r];if(o==null)continue;let s=Object.keys(o),l=s.length,u=-1;for(;++u<l;){let h=s[u],d=t[h];(d===void 0||fo(d,Object.prototype[h])&&!hasOwnProperty.call(t,h))&&(t[h]=o[h])}}return t},He=Hm,Jm=function(...e){return e.push(void 0,Fm),me.apply(void 0,e)},Ii=Jm,ur=(t,e,...r)=>{let n=-1,i=typeof e=="function",o=Wr(t)?new Array(t.length):[];return eh(t,s=>{o[++n]=i?e.apply(s,r):Qm(s,e,...r)}),o},Qm=(t,e,...r)=>{e=ho(e,t),t=Wm(t,e);let n=t==null?t:t[vi(QA(e))];return n?.apply(t,r)},Ts=(t,e,r)=>{let n=0,i=t==null?0:t.length;if(i==0)return 0;r=Rl(r,2),e=r(e);let o=e!==e,s=e===null,l=co(e),u=e===void 0;for(;n<i;){let h,d=Math.floor((n+i)/2),f=r(t[d]),C=f!==void 0,w=f===null,b=f===f,S=co(f);o?h=b:u?h=b&&C:s?h=b&&C&&!w:l?h=b&&C&&!w&&!S:w||S?h=!1:h=f<e,h?n=d+1:i=d}return Math.min(i,xA)},Lr=(t,e)=>{let r=-1,n=(u,h)=>!!(u==null?0:u.length)&&u.indexOf(h)>-1;e=Rl(e,2);let i=!0,{length:o}=t,s=[],l=s;if(o>=Hf){let u=e?null:KA(t);if(u)return Gl(u);i=!1,n=(h,d)=>h.has(d),l=new mi}else l=e?[]:s;t:for(;++r<o;){let u=t[r],h=e?e(u):u;if(u=u!==0?u:0,i&&h===h){let d=l.length;for(;d--;)if(l[d]===h)continue t;e&&l.push(h),s.push(u)}else n(l,h)||(l!==s&&l.push(h),s.push(u))}return s},kr=t=>uo(t),$e=t=>uo(t,!0),cr=t=>{if(t==null)return!0;if(Wr(t)&&(Array.isArray(t)||typeof t=="string"||typeof t.splice=="function"||Ms(t)||ys(t)))return!t.length;let e=jr(t);if(e=="[object Map]"||e=="[object Set]")return!t.size;if(El(t))return!TA(t).length;for(let r in t)if(hasOwnProperty.call(t,r))return!1;return!0},un=(t,e)=>zl(t,e),qt=t=>typeof t=="function",se=t=>{if(!Kr(t)||jr(t)!="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},kt=t=>{if(!t)return[];if(Wr(t))return Te(t)?km(t):Jf(t);if(Symbol.iterator&&Symbol.iterator in Object(t)){let n=t[Symbol.iterator](),i,o=[];for(;!(i=n.next()).done;)o.push(i.value);return o}let e=jr(t);return(e==Cs?Zm:e==xs?Gl:MA)(t)};function nh(t,e,r){if(typeof t!="function")throw new TypeError("Expected a function");let n,i,o,s,l,u,h=0,d=!1,f=!1,C=!0,w=!e&&e!==0&&window&&typeof window.requestAnimationFrame=="function";e=+e||0,Wt(r)&&(d=!!r.leading,f="maxWait"in r,o=f?Math.max(+r.maxWait||0,e):o,C="trailing"in r?!!r.trailing:C);function b(v){let x=n,M=i;return n=i=void 0,h=v,s=t.apply(M,x),s}function S(v,x){return w?(window.cancelAnimationFrame(l),window.requestAnimationFrame(v)):setTimeout(v,x)}function P(v){if(w)return window.cancelAnimationFrame(v);clearTimeout(v)}function O(v){return h=v,l=S($,e),d?b(v):s}function F(v){let x=v-u,M=v-h,D=e-x;return f?Math.min(D,o-M):D}function J(v){let x=v-u,M=v-h;return u===void 0||x>=e||x<0||f&&M>=o}function $(){let v=Date.now();if(J(v))return st(v);l=S($,F(v))}function st(v){return l=void 0,C&&n?b(v):(n=i=void 0,s)}function p(...v){let x=Date.now(),M=J(x);if(n=v,i=this,u=x,M){if(l===void 0)return O(u);if(f)return l=S($,e),b(u)}return l===void 0&&(l=S($,e)),s}return p.cancel=()=>{l!==void 0&&P(l),h=0,n=u=i=l=void 0},p.flush=()=>l===void 0?s:st(Date.now()),p.pending=()=>l!==void 0,p}var ih=(t,e)=>(e=Rl(e,2),fy(t,(r,n,i)=>(i=e(n),hasOwnProperty.call(r,i)?r[i].push(n):bs(r,i,[n]),r),{})),Ss=(t,e=[])=>{if(t==null)return[];let r=e.length;return r>1&&Tl(t,e[0],e[1])?e=[]:r>2&&Tl(e[0],e[1],e[2])&&(e=[e[0]]),Array.isArray(e)||(e=[Rl(e,2)]),qA(t,e.flat(1),[])},oh=t=>(t==null?0:t.length)?Xm(t,1/0):[],go=(t,...e)=>Wr(t)?jm(t,e):[],Ps=(t,...e)=>Kr(t)&&Wr(t)?jm(t,e.flat(1)):[];var po=(...t)=>{let e=t.flat(1);return Lr(e)},br=(t,e)=>{if(t==null)return!1;typeof e=="string"&&(e=e.split("."));let r=-1,n=t;for(;++r<e.length;){if(!n||!hasOwnProperty.call(n,e[r]))return!1;n=n[e[r]]}return!0},he=(t,e,r)=>{e=ho(e,t);let n=-1,i=e.length;for(i||(i=1,t=void 0);++n<i;){let o=t?.[vi(e[n])];o===void 0&&(n=i,o=r),t=typeof o=="function"?o.call(t):o}return t},Or=(t,...e)=>{let r={};if(t==null)return r;let n=!1;e=e.flat(1).map(o=>(o=ho(o,t),n||(n=o.length>1),o)),Ns(t,Bm(t),r),n&&(r=uo(r,!0,!0,!0,o=>se(o)?void 0:o));let i=e.length;for(;i--;)FA(r,e[i]);return r};var fr=(t,e=r=>r)=>{let r=-1,n=Object(t),i=Wr(t)?Om(t,!0):$f(t),o=i.length;for(;o--;){let s=i[++r];if(e(n[s],s,n)===!1)break}},sh=(t="")=>Iy(`${t}`.replace(/['\u2019]/g,"")).reduce((e,r,n)=>(r=r.toLowerCase(),e+(n?yy(r):r)),""),xy=0,ah=(t="")=>{let e=++xy;return`${t}`+e},me=Um((t,e,r,n)=>{th(t,e,r,n)},!0);var Je=function(t){return t&&t.toString().split(" ").map(function(e){return e.substr(0,Xe.classNamePrefix.length)!==Xe.classNamePrefix&&(e=Xe.classNamePrefix+e),e}).join(" ")},qm=function(t){return t&&t.toString().split(" ").map(function(e){return e.substr(0,Xe.classNamePrefix.length)===Xe.classNamePrefix&&(e=e.substr(Xe.classNamePrefix.length)),e}).join(" ")},Ai=function(t,e){let r={},n={},i=tt.namespace.svg,o=e||i,s=document.createDocumentFragment(),l=function(u,h,d){for(let f=0;f<u.length;f++){let C=u[f];if(typeof C=="string"){let $=document.createTextNode(C);h.appendChild($);continue}if(!C.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");let w=C.tagName,b;C.hasOwnProperty("namespaceURI")&&(d=C.namespaceURI),b=document.createElementNS(d,w);let S=d===i,P=S?tt:Rn.default,O=C.attributes;O&&P(b).attr(O);let F=C.style;if(F&&(0,Rn.default)(b).css(F),C.hasOwnProperty("className")){let $=C.className;S?b.className.baseVal=$:b.className=$}if(C.hasOwnProperty("textContent")&&(b.textContent=C.textContent),C.hasOwnProperty("selector")){let $=C.selector;if(r[$])throw new Error("json-dom-parser: selector must be unique");r[$]=b,P(b).attr("joint-selector",$)}if(C.hasOwnProperty("groupSelector")){let $=C.groupSelector;Array.isArray($)||($=[$]);for(let st=0;st<$.length;st++){let p=$[st],v=n[p];v||(v=n[p]=[]),v.push(b)}}h.appendChild(b);let J=C.children;Array.isArray(J)&&l(J,b,d)}};return l(t,s,o),{fragment:s,selectors:r,groupSelectors:n}},Ls=function(t){let e=0;if(t.length===0)return e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);e=(e<<5)-e+n,e=e&e}return e},An=function(t,e,r){for(var n=Array.isArray(e)?e:e.split(r||"/"),i,o=0,s=n.length;o<s;)if(i=n[o++],Object(t)===t&&i in t)t=t[i];else return;return t},$m=function(t,e){return typeof e!="string"&&typeof e!="number"&&(e=String(e)),!(e==="constructor"&&typeof t[e]=="function"||e==="__proto__")},ks=function(t,e,r,n){let i=Array.isArray(e)?e:e.split(n||"/"),o=i.length-1,s=t,l=0;for(;l<o;l++){let u=i[l];if(!$m(s,u))return t;s=s[u]||(s[u]={})}return s[i[o]]=r,t},lh=function(t,e,r){let n=Array.isArray(e)?e:e.split(r||"/"),i=n.length-1,o=t,s=0;for(;s<i;s++){let l=n[s];if(!$m(o,l))return t;let u=o[l];if(!u)return t;o=u}return delete o[n[i]],t};var tv=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,r=t==="x"?e:e&3|8;return r.toString(16)})},Zn=function(t){return Zn.id=Zn.id||1,t===void 0?"j_"+Zn.id++:(t.id=t.id===void 0?"j_"+Zn.id++:t.id,t.id)},ev=function(t){return t.replace(/[A-Z]/g,"-$&").toLowerCase()},je=function(t){if(t.normalized)return t;let{originalEvent:e,target:r}=t,n=e&&e.changedTouches&&e.changedTouches[0];if(n)for(let i in n)t[i]===void 0&&(t[i]=n[i]);if(r){let i=r.correspondingUseElement;i&&(t.target=i)}return t.normalized=!0,t},rv=function(t){let i=0,o=0,s=0,l=0;return"detail"in t&&(o=t.detail),"wheelDelta"in t&&(o=-t.wheelDelta/120),"wheelDeltaY"in t&&(o=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(i=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(i=o,o=0),s="deltaX"in t?t.deltaX:i*10,l="deltaY"in t?t.deltaY:o*10,(s||l)&&t.deltaMode&&(t.deltaMode==1?(s*=40,l*=40):(s*=800,l*=800)),t.deltaX===0&&t.deltaY!==0&&t.shiftKey&&(s=l,l=0,i=o,o=0),s&&!i&&(i=s<1?-1:1),l&&!o&&(o=l<1?-1:1),{spinX:i,spinY:o,deltaX:s,deltaY:l}},nv=function(t,e){return t>e?e:t<-e?-e:t},Os=function(){var t;if(typeof window<"u"&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!t){var e=0;t=function(r){var n=new Date().getTime(),i=Math.max(0,16-(n-e)),o=setTimeout(function(){r(n+i)},i);return e=n+i,o}}return function(r,n,...i){return t(n!==void 0?r.bind(n,...i):r)}}(),Es=function(){var t,e=typeof window<"u";return e&&(t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),t=t||clearTimeout,e?t.bind(window):t}();var Oe=function(t){return Te(t)&&t.slice(-1)==="%"},wy=function(t,e){function r(l){var u=new RegExp("(?:\\d+(?:\\.\\d+)*)("+l+")$").exec(t);return u?u[1]:null}var n=parseFloat(t);if(Number.isNaN(n))return null;var i={};i.value=n;var o;if(e==null)o="[A-Za-z]*";else if(Array.isArray(e)){if(e.length===0)return null;o=e.join("|")}else Te(e)&&(o=e);var s=r(o);return s===null?null:(i.unit=s,i)},Ds=0;function by(t,e){let r=t.split(e),n=1;for(let i=0,o=r.length-1;i<o;i++){let s=[];(i>0||r[0]!=="")&&s.push(Ds),s.push(e),(i<o-1||r[o]!=="")&&s.push(Ds),r.splice(n,0,...s),n+=s.length+1}return r.filter(i=>i!=="")}function Km(t,e){if(t===null)return e.getBBox().height;switch(t.unit){case"em":return e.getBBox().height*t.value;case"px":case"":return t.value}}var Zl=function(t,e,r={},n={}){var i=e.width,o=e.height,s=n.svgDocument||tt("svg").node,l=tt("tspan").node,u=tt("text").attr(r).append(l).node,h=document.createTextNode("");u.style.opacity=0,u.style.display="block",l.style.display="block",l.appendChild(h),s.appendChild(u),n.svgDocument||document.body.appendChild(s);let d=n.preserveSpaces,f=" ",C=n.separator||n.separator===""?n.separator:f,w=typeof C=="string"?C:f;var b=n.eol||`
`,S=n.hyphen?new RegExp(n.hyphen):/[^\w\d\u00C0-\u1FFF\u2800-\uFFFD]/,P=n.maxLineCount;Ge(P)||(P=1/0);var O=t.split(C),F=[],J=[],$,st,p;d&&tt(l).attr("xml:space","preserve");for(var v=0,x=0,M=O.length;v<M;v++){var D=O[v];if(!(!D&&!d)&&typeof D=="string"){var R=!1;if(b&&D.indexOf(b)>=0)if(D.length>1){let Pt=by(O[v],b);O.splice(v,1,...Pt),v--,M=O.length;continue}else{if(d&&typeof O[v-1]=="string"){O.splice(v,Ds,"",Ds),M+=2,v--;continue}J[++x]=!d||typeof O[v+1]=="string"?"":void 0,R=!0}if(!R){let Pt;if(d?Pt=J[x]!==void 0?J[x]+w+D:D:Pt=J[x]?J[x]+w+D:D,h.data=Pt,l.getComputedTextLength()<=i)J[x]=Pt,($||st)&&(F[x++]=!0,$=0,st=0);else{if(!J[x]||$){var Z=!!$;if($=D.length-1,Z||!$){if(!$){if(!J[x]){J=[];break}O.splice(v,2,D+O[v+1]),M--,F[x++]=!0,v--;continue}O[v]=D.substring(0,$);let Nt=O[v+1];O[v+1]=D.substring($)+(Nt===void 0||Nt===Ds?"":Nt)}else{if(st)O.splice(v,2,O[v]+O[v+1]),st=0;else{var _=D.search(S);_>-1&&_!==D.length-1&&_!==0&&(st=_+1,$=0),O.splice(v,1,D.substring(0,st||$),D.substring(st||$)),M++}x&&!F[x-1]&&x--}(!d||J[x]!=="")&&v--;continue}x++,v--}}var ut=null;if(J.length>P)ut=P-1;else if(o!==void 0){if(p===void 0&&h.data!=="")if(r.lineHeight==="auto")p=Km({value:1.5,unit:"em"},u);else{let Pt=wy(r.lineHeight,["em","px",""]);p=Km(Pt,u)}p*J.length>o&&(ut=Math.floor(o/p)-1)}if(ut!==null){J.splice(ut+1);var gt=n.ellipsis;if(!gt||ut<0)break;typeof gt!="string"&&(gt="\u2026");var Y=J[ut];if(!Y&&!R)break;var K=Y.length,X,Q;do{if(Q=Y[K],X=Y.substring(0,K),Q?Q.match(C)&&(X+=Q):X+=w,X+=gt,h.data=X,l.getComputedTextLength()<=i){J[ut]=X;break}K--}while(K>=0);break}}}return n.svgDocument?s.removeChild(u):document.body.removeChild(s),J.join(b)},iv=function(t){var e=(0,Rn.default)(Rn.default.parseHTML("<div>"+t+"</div>",null,!1));return e.find("*").each(function(){var r=this;Rn.default.each(r.attributes,function(){var n=this,i=n.name,o=n.value;(i.startsWith("on")||o.startsWith("javascript:")||o.startsWith("data:")||o.startsWith("vbscript:"))&&(0,Rn.default)(r).removeAttr(i)})}),e.html()};var ov=function(t,e){var r=(0,Rn.default)(t),n=r.map(function(){var i=this,o=i.parentNode,s=o.insertBefore(document.createTextNode(""),i.nextSibling);return function(){if(o===this)throw new Error("You can't sort elements if any one is a descendant of another.");o.insertBefore(this,s),o.removeChild(s)}});return Array.prototype.sort.call(r,e).each(function(i){n[i].call(this)})};var Er=function(t){if(Object(t)!==t){var e=0;return isFinite(t)&&(e=+t),{top:e,right:e,bottom:e,left:e}}var r,n,i,o;return r=n=i=o=0,isFinite(t.vertical)&&(r=i=+t.vertical),isFinite(t.horizontal)&&(n=o=+t.horizontal),isFinite(t.top)&&(r=+t.top),isFinite(t.right)&&(n=+t.right),isFinite(t.bottom)&&(i=+t.bottom),isFinite(t.left)&&(o=+t.left),{top:r,right:n,bottom:i,left:o}},sv={linear:function(t){return t},quad:function(t){return t*t},cubic:function(t){return t*t*t},inout:function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,r=e*t;return 4*(t<.5?r:3*(t-e)+r-.75)},exponential:function(t){return Math.pow(2,10*(t-1))},bounce:function(t){for(var e=0,r=1;;e+=r,r/=2)if(t>=(7-4*e)/11){var n=(11-6*e-11*t)/4;return-n*n+r*r}},reverse:function(t){return function(e){return 1-t(1-e)}},reflect:function(t){return function(e){return .5*(e<.5?t(2*e):2-t(2-2*e))}},clamp:function(t,e,r){return e=e||0,r=r||1,function(n){var i=t(n);return i<e?e:i>r?r:i}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},elastic:function(t){return t||(t=1.5),function(e){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}}},jl={number:function(t,e){var r=e-t;return function(n){return t+r*n}},object:function(t,e){var r=Object.keys(t);return function(n){var i,o,s={};for(i=r.length-1;i!=-1;i--)o=r[i],s[o]=t[o]+(e[o]-t[o])*n;return s}},hexColor:function(t,e){var r=parseInt(t.slice(1),16),n=parseInt(e.slice(1),16),i=r&255,o=(n&255)-i,s=r&65280,l=(n&65280)-s,u=r&16711680,h=(n&16711680)-u;return function(d){var f=i+o*d&255,C=s+l*d&65280,w=u+h*d&16711680;return"#"+(1<<24|f|C|w).toString(16).slice(1)}},unit:function(t,e){var r=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,n=r.exec(t),i=r.exec(e),o=i[1].indexOf("."),s=o>0?i[1].length-o-1:0;t=+n[1];var l=+i[1]-t,u=n[2];return function(h){return(t+l*h).toFixed(s)+u}}},av={outline:function(t){var e='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>',r=Number.isFinite(t.margin)?t.margin:2,n=Number.isFinite(t.width)?t.width:1;return tr(e)({color:t.color||"blue",opacity:Number.isFinite(t.opacity)?t.opacity:1,outerRadius:r+n,innerRadius:r})},highlight:function(t){var e='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>';return tr(e)({color:t.color||"red",width:Number.isFinite(t.width)?t.width:1,blur:Number.isFinite(t.blur)?t.blur:0,opacity:Number.isFinite(t.opacity)?t.opacity:1})},blur:function(t){var e=Number.isFinite(t.x)?t.x:2;return tr('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(t.y)?[e,t.y]:e})},dropShadow:function(t){var e="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return tr(e)({dx:t.dx||0,dy:t.dy||0,opacity:Number.isFinite(t.opacity)?t.opacity:1,color:t.color||"black",blur:Number.isFinite(t.blur)?t.blur:4})},grayscale:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return tr('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},sepia:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return tr('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},saturate:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return tr('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-e})},hueRotate:function(t){return tr('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:t.angle||0})},invert:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return tr('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:1-e})},brightness:function(t){return tr('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(t.amount)?t.amount:1})},contrast:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return tr('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:.5-e/2})}};var tr=function(t){var e=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(r){return r=r||{},t.replace(e,function(n){for(var i=Array.from(arguments),o=i.slice(1,4).find(function(u){return!!u}),s=o.split("."),l=r[s.shift()];l!==void 0&&s.length;)l=l[s.shift()];return l!==void 0?l:""})}};function Wl(t){t=Lr(t);let e=kt(t).reduce(function(r,n){return r[n.id]=n.clone(),r},{});return kt(t).forEach(function(r){let n=e[r.id];if(n.isLink()){let s=n.source(),l=n.target();s.id&&e[s.id]&&n.prop("source/id",e[s.id].id),l.id&&e[l.id]&&n.prop("target/id",e[l.id].id)}let i=r.get("parent");i&&e[i]&&n.set("parent",e[i].id);let o=kt(r.get("embeds")).reduce(function(s,l){return e[l]&&s.push(e[l].id),s},[]);cr(o)||n.set("embeds",o)}),e}var Ny=["checked","selected","disabled","readOnly","contentEditable","value","indeterminate"],My=Ny.reduce((t,e)=>(t[e]=!0,t),{}),Ty={qualify:function(t){return se(t)},set:function(t,e,r){Object.keys(t).forEach(function(n){if(My[n]&&n in r){let i=t[n];r.tagName==="SELECT"&&Array.isArray(i)?Array.from(r.options).forEach(function(o,s){o.selected=i.includes(o.value)}):r[n]=i}})}},lv=Ty;var vo=on(Gn(),1);function jn(t,e){return function(r,n){var i=Oe(r);r=parseFloat(r),i&&(r/=100);var o={};if(isFinite(r)){var s=i||r>=0&&r<=1?r*n[e]:Math.max(r+n[e],0);o[t]=s}return o}}function Yl(t,e,r){return function(n,i){var o=Oe(n);n=parseFloat(n),o&&(n/=100);var s;if(isFinite(n)){var l=i[r]();o||n>0&&n<1?s=l[t]+i[e]*n:s=l[t]+n}var u=z();return u[t]=s||0,u}}function uv(t,e,r){return function(n,i){var o;n==="middle"?o=i[e]/2:n===r?o=i[e]:isFinite(n)?o=n>-1&&n<1?-i[e]*n:-n:Oe(n)?o=i[e]*parseFloat(n)/100:o=0;var s=z();return s[t]=-(i[t]+o),s}}function gv(t,e){var r="joint-shape",n=e&&e.resetOffset;return function(i,o,s){var l=(0,vo.default)(s),u=l.data(r);if(!u||u.value!==i){var h=t(i);u={value:i,shape:h,shapeBBox:h.bbox()},l.data(r,u)}var d=u.shape.clone(),f=u.shapeBBox.clone(),C=f.origin(),w=o.origin();f.x=w.x,f.y=w.y;var b=o.maxRectScaleToFit(f,w),S=f.width===0||o.width===0?1:b.sx,P=f.height===0||o.height===0?1:b.sy;return d.scale(S,P,C),n&&d.translate(-C.x,-C.y),d}}function cv(t){function e(n){return new xt(tt.normalizePathData(n))}var r=gv(e,t);return function(n,i,o){var s=r(n,i,o);return{d:s.serialize()}}}function fv(t){var e=gv(Qt,t);return function(r,n,i){var o=e(r,n,i);return{points:o.serialize()}}}function Ul(t,e){var r=new z(1,0);return function(n){var i,o,s=this[t](n);return s?(o=e.rotate?s.vector().vectorAngle(r):0,i=s.start):(i=this.path.start,o=0),o===0?{transform:"translate("+i.x+","+i.y+")"}:{transform:"translate("+i.x+","+i.y+") rotate("+o+")"}}}function hv(t){return function(r,n,i){let o=tt(i);o.attr(t)!==r&&o.attr(t,r)}}function mo(t,e,r){return r.text!==void 0}function zs(){return this.model.isLink()}function uh(t){var e={},r=t.stroke;typeof r=="string"&&(e.stroke=r,e.fill=r);var n=t.strokeOpacity;return n===void 0&&(n=t["stroke-opacity"]),n===void 0&&(n=t.opacity),n!==void 0&&(e["stroke-opacity"]=n,e["fill-opacity"]=n),e}function dv(t){let{paper:e}=this;return`url(#${t.type==="pattern"?e.definePattern(t):e.defineGradient(t)})`}var Zt={xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},href:{set:hv("href")},xlinkHref:{set:hv("xlink:href")},filter:{qualify:se,set:function(t){return"url(#"+this.paper.defineFilter(t)+")"}},fill:{qualify:se,set:dv},stroke:{qualify:se,set:dv},sourceMarker:{qualify:se,set:function(t,e,r,n){return t=At(uh(n),t),{"marker-start":"url(#"+this.paper.defineMarker(t)+")"}}},targetMarker:{qualify:se,set:function(t,e,r,n){return t=At(uh(n),{transform:"rotate(180)"},t),{"marker-end":"url(#"+this.paper.defineMarker(t)+")"}}},vertexMarker:{qualify:se,set:function(t,e,r,n){return t=At(uh(n),t),{"marker-mid":"url(#"+this.paper.defineMarker(t)+")"}}},text:{qualify:function(t,e,r){return!r.textWrap||!se(r.textWrap)},set:function(t,e,r,n){let i=(0,vo.default)(r),o="joint-text",s=i.data(o),{lineHeight:l,annotations:u,textVerticalAnchor:h,eol:d,displayEmpty:f}=n,C=n.textPath,w=n.x;Br(w)&&(w=Rr(w,e));let b=n["font-size"]||n.fontSize;Br(b)&&(b=Rr(b,e));let S=JSON.stringify([t,l,u,h,d,f,C,w,b]);if(s===void 0||s!==S){if(b&&r.setAttribute("font-size",b),Wt(C)){let P=C.selector;if(typeof P=="string"){let[O]=this.findBySelector(P);O instanceof SVGPathElement&&(C=At({"xlink:href":"#"+O.id},C))}}tt(r).text(""+t,{lineHeight:l,annotations:u,textPath:C,x:w,textVerticalAnchor:h,eol:d,displayEmpty:f}),i.data(o,S)}}},textWrap:{qualify:se,set:function(t,e,r,n){var i={},o=t.width||0;Oe(o)?i.width=e.width*parseFloat(o)/100:Br(o)?i.width=Number(Rr(o,e)):t.width===null?i.width=1/0:o<=0?i.width=e.width+o:i.width=o;var s=t.height||0;Oe(s)?i.height=e.height*parseFloat(s)/100:Br(s)?i.height=Number(Rr(s,e)):t.height===null||(s<=0?i.height=e.height+s:i.height=s);var l,u=t.text;if(u===void 0&&(u=n.text),u!==void 0){let h=t.breakText||Zl,d=n["font-size"]||n.fontSize;l=h(""+u,i,{"font-weight":n["font-weight"]||n.fontWeight,"font-size":Br(d)?Rr(d,e):d,"font-family":n["font-family"]||n.fontFamily,lineHeight:n.lineHeight,"letter-spacing":"letter-spacing"in n?n["letter-spacing"]:n.letterSpacing},{svgDocument:this.paper.svg,ellipsis:t.ellipsis,hyphen:t.hyphen,separator:t.separator,maxLineCount:t.maxLineCount,preserveSpaces:t.preserveSpaces})}else l="";Zt.text.set.call(this,l,e,r,n)}},title:{qualify:function(t,e){return e instanceof SVGElement},set:function(t,e,r){var n=(0,vo.default)(r),i="joint-title",o=n.data(i);if(o===void 0||o!==t){if(n.data(i,t),r.tagName==="title"){r.textContent=t;return}var s=r.firstElementChild;if(s&&s.tagName==="title")s.textContent=t;else{var l=document.createElementNS(r.namespaceURI,"title");l.textContent=t,r.insertBefore(l,s)}}}},lineHeight:{qualify:mo},textVerticalAnchor:{qualify:mo},textPath:{qualify:mo},annotations:{qualify:mo},eol:{qualify:mo},displayEmpty:{qualify:mo},port:{set:function(t){return t===null||t.id===void 0?t:t.id}},style:{qualify:se,set:function(t,e,r){(0,vo.default)(r).css(t)}},html:{set:function(t,e,r){(0,vo.default)(r).html(t+"")}},props:lv,ref:{},refX:{position:Yl("x","width","origin")},refY:{position:Yl("y","height","origin")},refDx:{position:Yl("x","width","corner")},refDy:{position:Yl("y","height","corner")},refWidth:{set:jn("width","width")},refHeight:{set:jn("height","height")},refRx:{set:jn("rx","width")},refRy:{set:jn("ry","height")},refRInscribed:{set:function(t){var e=jn(t,"width"),r=jn(t,"height");return function(n,i){var o=i.height>i.width?e:r;return o(n,i)}}("r")},refRCircumscribed:{set:function(t,e){var r=Oe(t);t=parseFloat(t),r&&(t/=100);var n=Math.sqrt(e.height*e.height+e.width*e.width),i;return isFinite(t)&&(r||t>=0&&t<=1?i=t*n:i=Math.max(t+n,0)),{r:i}}},refCx:{set:jn("cx","width")},refCy:{set:jn("cy","height")},xAlignment:{offset:uv("x","width","right")},yAlignment:{offset:uv("y","height","bottom")},resetOffset:{offset:function(t,e){return t?{x:-e.x,y:-e.y}:{x:0,y:0}}},refDResetOffset:{set:cv({resetOffset:!0})},refDKeepOffset:{set:cv({resetOffset:!1})},refPointsResetOffset:{set:fv({resetOffset:!0})},refPointsKeepOffset:{set:fv({resetOffset:!1})},connection:{qualify:zs,set:function({stubs:t=0}){let e;if(isFinite(t)&&t!==0){let r;t<0?r=(this.getConnectionLength()+t)/2:r=t;let n=this.getConnection(),i=this.getConnectionSubdivisions(),o=n.divideAtLength(r,{segmentSubdivisions:i}),s=n.divideAtLength(-r,{segmentSubdivisions:i});o&&s&&(e=`${o[0].serialize()} ${s[1].serialize()}`)}return{d:e||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:zs,set:Ul("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:zs,set:Ul("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:zs,set:Ul("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:zs,set:Ul("getTangentAtRatio",{rotate:!1})}};Zt["xlink:href"]=Zt.xlinkHref;["transform","d","points","cx","cy","x1","x2","y1","y2","x","y","dx","dy"].forEach(t=>{Zt[t]={qualify:Br,set:function(r,n){return{[t]:Rr(r,n)}}}});["width","height","r","rx","ry","font-size","stroke-width"].forEach(t=>{Zt[t]={qualify:Br,set:function(r,n){return{[t]:Math.max(0,Rr(r,n))}}}});Zt.refR=Zt.refRInscribed;Zt.refD=Zt.refDResetOffset;Zt.refPoints=Zt.refPointsResetOffset;Zt.atConnectionLength=Zt.atConnectionLengthKeepGradient;Zt.atConnectionRatio=Zt.atConnectionRatioKeepGradient;Zt.fontSize=Zt["font-size"];Zt.strokeWidth=Zt["stroke-width"];Zt.refX2=Zt.refX;Zt.refY2=Zt.refY;Zt.refWidth2=Zt.refWidth;Zt.refHeight2=Zt.refHeight;Zt["ref-x"]=Zt.refX;Zt["ref-y"]=Zt.refY;Zt["ref-dy"]=Zt.refDy;Zt["ref-dx"]=Zt.refDx;Zt["ref-width"]=Zt.refWidth;Zt["ref-height"]=Zt.refHeight;Zt["x-alignment"]=Zt.xAlignment;Zt["y-alignment"]=Zt.yAlignment;var Gs=Zt;var er=ch.default.Model.extend({constructor:function(t,e){var r,n=t||{};typeof this.preinitialize=="function"&&this.preinitialize.apply(this,arguments),this.cid=ah("c"),this.attributes={},e&&e.collection&&(this.collection=e.collection),e&&e.parse&&(n=this.parse(n,e)||{}),(r=he(this,"defaults"))&&(n=me({},r,n)),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)},translate:function(t,e,r){throw new Error("Must define a translate() method.")},toJSON:function(){let e=he(this.constructor.prototype,"defaults").attrs||{},r=this.attributes.attrs,n={};fr(r,function(o,s){let l=e[s];fr(o,function(u,h){Wt(u)&&!Array.isArray(u)?fr(u,function(d,f){(!l||!l[h]||!un(l[h][f],d))&&(n[s]=n[s]||{},(n[s][h]||(n[s][h]={}))[f]=d)}):(!l||!un(l[h],u))&&(n[s]=n[s]||{},n[s][h]=u)})});let i=$e(Or(this.attributes,"attrs"));return i.attrs=n,i},initialize:function(t){let e=this.getIdAttribute();(!t||t[e]===void 0)&&this.set(e,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return tv()},processPorts:function(){var t=this.ports,e={};fr(this.get("attrs"),function(o,s){o&&o.port&&(o.port.id!==void 0?e[o.port.id]=o.port:e[o.port]={id:o.port})});var r={};if(fr(t,function(o,s){e[s]||(r[s]=!0)}),this.graph&&!cr(r)){var n=this.graph.getConnectedLinks(this,{inbound:!0});n.forEach(function(o){r[o.get("target").port]&&o.remove()});var i=this.graph.getConnectedLinks(this,{outbound:!0});i.forEach(function(o){r[o.get("source").port]&&o.remove()})}this.ports=e},remove:function(t={}){let{graph:e,collection:r}=this;if(!e)return r&&r.remove(this,t),this;e.startBatch("remove");let n=this.getParentCell();n&&n.unembed(this,t);let i=this.getEmbeddedCells();for(let o=0,s=i.length;o<s;o++){let l=i[o];l&&l.remove(t)}return this.trigger("remove",this,e.attributes.cells,t),e.stopBatch("remove"),this},toFront:function(t){var e=this.graph;if(e){t=He(t||{},{foregroundEmbeds:!0});let r;t.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:t.breadthFirst!==!1,sortSiblings:t.foregroundEmbeds}),r.unshift(this)):r=[this];let n=t.foregroundEmbeds?r:Ss(r,u=>u.z()),o=e.maxZIndex()-r.length+1,s=e.get("cells"),l=s.indexOf(n[0])!==s.length-r.length;l||(l=n.some(function(u,h){return u.z()!==o+h})),l&&(this.startBatch("to-front"),o=o+r.length,n.forEach(function(u,h){u.set("z",o+h,t)}),this.stopBatch("to-front"))}return this},toBack:function(t){var e=this.graph;if(e){t=He(t||{},{foregroundEmbeds:!0});let n;t.deep?(n=this.getEmbeddedCells({deep:!0,breadthFirst:t.breadthFirst!==!1,sortSiblings:t.foregroundEmbeds}),n.unshift(this)):n=[this];let i=t.foregroundEmbeds?n:Ss(n,l=>l.z()),o=e.minZIndex();var r=e.get("cells");let s=r.indexOf(i[0])!==0;s||(s=i.some(function(l,u){return l.z()!==o+u})),s&&(this.startBatch("to-back"),o-=n.length,i.forEach(function(l,u){l.set("z",o+u,t)}),this.stopBatch("to-back"))}return this},parent:function(t,e){return t===void 0?this.get("parent"):this.set("parent",t,e)},embed:function(t,e){let r=Array.isArray(t)?t:[t];if(!this.canEmbed(r))throw new Error("Recursive embedding not allowed.");if(r.some(n=>n.isEmbedded()&&this.id!==n.parent()))throw new Error("Embedding of already embedded cells is not allowed.");return this._embedCells(r,e),this},unembed:function(t,e){let r=Array.isArray(t)?t:[t];return this._unembedCells(r,e),this},canEmbed:function(t){return(Array.isArray(t)?t:[t]).every(r=>this!==r&&!this.isEmbeddedIn(r))},_embedCells:function(t,e){let r="embed";this.startBatch(r);let n=At([],this.get("embeds"));t.forEach(i=>{n[i.isLink()?"unshift":"push"](i.id),i.parent(this.id,e)}),this.set("embeds",Lr(n),e),this.stopBatch(r)},_unembedCells:function(t,e){let r="unembed";this.startBatch(r),t.forEach(n=>n.unset("parent",e)),this.set("embeds",go(this.get("embeds"),...t.map(n=>n.id)),e),this.stopBatch(r)},getParentCell:function(){var t=this.parent(),e=this.graph;return t&&e&&e.getCell(t)||null},getAncestors:function(){var t=[];if(!this.graph)return t;for(var e=this.getParentCell();e;)t.push(e),e=e.getParentCell();return t},getEmbeddedCells:function(t){if(t=t||{},!this.graph)return[];if(t.deep)return t.breadthFirst?this._getEmbeddedCellsBfs(t.sortSiblings):this._getEmbeddedCellsDfs(t.sortSiblings);let e=this.get("embeds");if(cr(e))return[];let r=e.map(this.graph.getCell,this.graph);return t.sortSiblings&&(r=Ss(r,n=>n.z())),r},_getEmbeddedCellsBfs:function(t){let e=[],r=[];for(r.push(this);r.length>0;){let n=r.shift();e.push(n);let i=n.getEmbeddedCells({sortSiblings:t});r.push(...i)}return e.shift(),e},_getEmbeddedCellsDfs:function(t){let e=[],r=[];for(r.push(this);r.length>0;){let n=r.pop();e.push(n);let i=n.getEmbeddedCells({sortSiblings:t});for(let o=i.length-1;o>=0;--o)r.push(i[o])}return e.shift(),e},isEmbeddedIn:function(t,e){var r=Te(t)?t:t.id,n=this.parent();if(e=At({deep:!0},e),this.graph&&e.deep){for(;n;){if(n===r)return!0;n=this.graph.getCell(n).parent()}return!1}else return n===r},isEmbedded:function(){return!!this.parent()},clone:function(t){if(t=t||{},t.deep)return kt(Wl([this].concat(this.getEmbeddedCells({deep:!0}))));var e=ch.default.Model.prototype.clone.apply(this,arguments);return e.set(this.getIdAttribute(),this.generateId()),e.unset("embeds"),e.unset("parent"),e},prop:function(t,e,r){var n="/",i=Te(t);if(i||Array.isArray(t))if(arguments.length>1){var o,s;i?(o=t,s=o.split("/")):(o=t.join(n),s=t.slice());var l=s[0],u=s.length;let J=r||{};J.propertyPath=o,J.propertyValue=e,J.propertyPathArray=s,"rewrite"in J||(J.rewrite=!1);for(var h={},d=h,f=l,C=1;C<u;C++){var w=s[C],b=Number.isFinite(i?Number(w):w);d=d[f]=b?[]:{},f=w}h=ks(h,s,e,"/");var S=me({},this.attributes);J.rewrite&&lh(S,o,"/");var P=me(S,h);return this.set(l,P[l],J)}else return An(this.attributes,t,n);let O=e||{};O.propertyPath=null,O.propertyValue=t,O.propertyPathArray=[],"rewrite"in O||(O.rewrite=!1);let F={};for(let J in t){let{changedValue:$}=me({},{changedValue:this.attributes[J]},{changedValue:t[J]});F[J]=$}return this.set(F,O)},removeProp:function(t,e){e=e||{};var r=Array.isArray(t)?t:t.split("/"),n=r[0];if(n==="attrs"&&(e.dirty=!0),r.length===1)return this.unset(t,e);var i=r.slice(1),o=this.get(n);return o==null?this:(o=$e(o),lh(o,i,"/"),this.set(n,o,e))},attr:function(t,e,r){var n=Array.from(arguments);return n.length===0?this.get("attrs"):(Array.isArray(t)?n[0]=["attrs"].concat(t):Te(t)?n[0]="attrs/"+t:n[0]={attrs:t},this.prop.apply(this,n))},removeAttr:function(t,e){return Array.isArray(t)?this.removeProp(["attrs"].concat(t)):this.removeProp("attrs/"+t,e)},transition:function(t,e,r,n){n=n||"/";var i={duration:100,delay:10,timingFunction:sv.linear,valueFunction:jl.number};r=At(i,r);var o=0,s,l=(function(f){var C,w,b;o=o||f,f-=o,w=f/r.duration,w<1?this._transitionIds[t]=C=Os(l):(w=1,delete this._transitionIds[t]),b=s(r.timingFunction(w)),r.transitionId=C,this.prop(t,b,r),C||this.trigger("transition:end",this,t)}).bind(this);let{_scheduledTransitionIds:u}=this,h;var d=f=>{u[t]&&(u[t]=go(u[t],h),u[t].length===0&&delete u[t]),this.stopPendingTransitions(t,n),s=r.valueFunction(An(this.attributes,t,n),e),this._transitionIds[t]=Os(f),this.trigger("transition:start",this,t)};return h=setTimeout(d,r.delay,l),u[t]||(u[t]=[]),u[t].push(h),h},getTransitions:function(){return po(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(t,e="/"){let{_scheduledTransitionIds:r={}}=this,n=Object.keys(r);if(t){let i=t.split(e);n=n.filter(o=>un(i,o.split(e).slice(0,i.length)))}return n.forEach(i=>{r[i].forEach(s=>clearTimeout(s)),delete r[i]}),this},stopPendingTransitions(t,e="/"){let{_transitionIds:r={}}=this,n=Object.keys(r);if(t){let i=t.split(e);n=n.filter(o=>un(i,o.split(e).slice(0,i.length)))}n.forEach(i=>{let o=r[i];Es(o),delete r[i],this.trigger("transition:end",this,i)})},stopTransitions:function(t,e="/"){return this.stopScheduledTransitions(t,e),this.stopPendingTransitions(t,e),this},addTo:function(t,e){return t.addCell(this,e),this},findView:function(t){return t.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(t,e){return this.graph&&this.graph.startBatch(t,At({},e,{cell:this})),this},stopBatch:function(t,e){return this.graph&&this.graph.stopBatch(t,At({},e,{cell:this})),this},getChangeFlag:function(t){var e=0;if(!t)return e;for(var r in t)!t.hasOwnProperty(r)||!this.hasChanged(r)||(e|=t[r]);return e},angle:function(){return 0},position:function(){return new z(0,0)},z:function(){return this.get("z")||0},getPointFromConnectedLink:function(){return new z},getBBox:function(){return new ft(0,0,0,0)},getPointRotatedAroundCenter(t,e,r){let n=new z(e,r);return t&&n.rotate(this.getBBox().center(),t),n},getAbsolutePointFromRelative(t,e){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(t,e))},getRelativePointFromAbsolute(t,e){return this.getPointRotatedAroundCenter(this.angle(),t,e).difference(this.position())}},{getAttributeDefinition:function(t){var e=this.attributes,r=Gs;return e&&e[t]||r[t]},define:function(t,e,r,n){r=At({defaults:Ii({type:t},e,this.prototype.defaults)},r);var i=this.extend(r,n);return typeof joint<"u"&&br(joint,"shapes")&&ks(joint.shapes,t,i,"."),i}});var pv=function(t,e,r){if(Te(r)){if(!Fl[r])throw new Error('Unknown wrapper: "'+r+'"');r=Fl[r]}if(!qt(r))throw new Error("Wrapper must be a function.");kt(e).forEach(function(n){t[n]=r(t[n])})},Fl={cells:function(t){return function(){var e=Array.from(arguments),r=e.length,n=r>0&&e[0]||[],i=r>1&&e[r-1]||{};return Array.isArray(n)||(i instanceof er?n=e:n instanceof er&&(e.length>1&&e.pop(),n=e)),i instanceof er&&(i={}),t.call(this,n,i)}}};var Pe={TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left",TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",CENTER:"center"};function Bs(t,e){let r=new ft(t);switch(e){case void 0:throw new Error("Position required");case Pe.LEFT:case"leftMiddle":return r.leftMiddle();case Pe.RIGHT:case"rightMiddle":return r.rightMiddle();case Pe.TOP:case"topMiddle":return r.topMiddle();case Pe.BOTTOM:case"bottomMiddle":return r.bottomMiddle();case Pe.TOP_LEFT:case"topLeft":case"origin":return r.topLeft();case Pe.TOP_RIGHT:case"topRight":return r.topRight();case Pe.BOTTOM_LEFT:case"bottomLeft":return r.bottomLeft();case Pe.BOTTOM_RIGHT:case"bottomRight":case"corner":return r.bottomRight();case Pe.CENTER:return r.center();default:throw new Error(`Unknown position: ${e}`)}}function mv(t,e,r){var n=t.toJSON();return n.angle=e||0,He({},r,n)}function Rs(t,e,r,n){return t.map(function(i,o,s){var l=this.pointAt((o+.5)/s.length);return(i.dx||i.dy)&&l.offset(i.dx||0,i.dy||0),mv(l.round(),0,hh(n,i))},dn(e,r))}function vv(t,e,r,n){var i=e.center(),o=e.width/e.height,s=e.topMiddle(),l=ze.fromRect(e);return t.map(function(u,h,d){var f=r+n(h,d.length),C=s.clone().rotate(i,-f).scale(o,1,i),w=u.compensateRotation?-l.tangentTheta(C):0;return(u.dx||u.dy)&&C.offset(u.dx||0,u.dy||0),u.dr&&C.move(i,u.dr),mv(C.round(),w,hh(e,u))})}function hh(t,e){let{x:r,y:n,angle:i}=e;return Oe(r)?r=parseFloat(r)/100*t.width:Br(r)&&(r=Number(Rr(r,t))),Oe(n)?n=parseFloat(n)/100*t.height:Br(n)&&(n=Number(Rr(n,t))),{x:r,y:n,angle:i}}function fh(t,e){let{x:r,y:n}=hh(t,e);return new z(r||0,n||0)}var Sy=function(t,e){return t.map(r=>{let n=fh(e,r).round().toJSON();return n.angle=r.angle||0,n})},Py=function(t,e,r){return r.fn(t,e,r)},Dy=function(t,e,r){var n=fh(e,r.start||e.origin()),i=fh(e,r.end||e.corner());return Rs(t,n,i,e)},Ly=function(t,e,r){return Rs(t,e.origin(),e.bottomLeft(),e)},ky=function(t,e,r){return Rs(t,e.topRight(),e.corner(),e)},Oy=function(t,e,r){return Rs(t,e.origin(),e.topRight(),e)},Ey=function(t,e,r){return Rs(t,e.bottomLeft(),e.corner(),e)},zy=function(t,e,r){var n=r.startAngle||0,i=r.step||360/t.length;return vv(t,e,n,function(o){return o*i})},Gy=function(t,e,r){var n=r.startAngle||0,i=r.step||20;return vv(t,e,n,function(o,s){return(o+.5-s/2)*i})};var gh={};Me(gh,{bottom:()=>Wy,inside:()=>_y,insideOriented:()=>Fy,left:()=>Ry,manual:()=>By,outside:()=>Uy,outsideOriented:()=>Yy,radial:()=>Vy,radialOriented:()=>Xy,right:()=>Zy,top:()=>jy});function Wn(t,e){return Ii({},t,e,{x:0,y:0,angle:0,attrs:{}})}function Iv(t){var e=t.center(),r=e.theta(t.origin()),n=e.theta(t.bottomLeft()),i=e.theta(t.corner()),o=e.theta(t.topRight());return[r,o,i,n]}function Av(t,e,r,n){n=He({},n,{offset:15});var i=e.center().theta(t),o,s,l,u,h=n.offset,d=0;let[f,C,w,b]=Iv(e);i<C||i>w?(l=".3em",o=h,s=0,u="start"):i<f?(o=0,s=-h,r?(d=-90,u="start",l=".3em"):(u="middle",l="0")):i<b?(l=".3em",o=-h,s=0,u="end"):(o=0,s=h,r?(d=90,u="start",l=".3em"):(u="middle",l=".6em"));var S=Math.round;return Wn(n,{x:S(o),y:S(s),angle:d,attrs:{labelText:{y:l,textAnchor:u}}})}function yv(t,e,r,n){n=He({},n,{offset:15});var i=e.center().theta(t),o,s,l,u,h=n.offset,d=0;let[f,C,w,b]=Iv(e);i<C||i>w?(l=".3em",o=-h,s=0,u="end"):i<f?(o=0,s=h,r?(d=90,u="start",l=".3em"):(u="middle",l=".6em")):i<b?(l=".3em",o=h,s=0,u="start"):(o=0,s=-h,r?(d=-90,u="start",l=".3em"):(u="middle",l="0"));var S=Math.round;return Wn(n,{x:S(o),y:S(s),angle:d,attrs:{labelText:{y:l,textAnchor:u}}})}function Cv(t,e,r){r=He({},r,{offset:20});var n=Oi(0,0),i=-t.theta(n),o=i,s=t.clone().move(n,r.offset).difference(t).round(),l=".3em",u;(i+90)%180===0?(u=e?"end":"middle",!e&&i===-270&&(l="0em")):i>-270&&i<-90?(u="start",o=i-180):u="end";var h=Math.round;return Wn(r,{x:h(s.x),y:h(s.y),angle:e?o:0,attrs:{labelText:{y:l,textAnchor:u}}})}var By=function(t,e,r){return Wn(r)},Ry=function(t,e,r){return Wn(r,{x:-15,attrs:{labelText:{y:".3em",textAnchor:"end"}}})},Zy=function(t,e,r){return Wn(r,{x:15,attrs:{labelText:{y:".3em",textAnchor:"start"}}})},jy=function(t,e,r){return Wn(r,{y:-15,attrs:{labelText:{y:"0",textAnchor:"middle"}}})},Wy=function(t,e,r){return Wn(r,{y:15,attrs:{labelText:{y:".6em",textAnchor:"middle"}}})},Yy=function(t,e,r){return Av(t,e,!0,r)},Uy=function(t,e,r){return Av(t,e,!1,r)},Fy=function(t,e,r){return yv(t,e,!0,r)},_y=function(t,e,r){return yv(t,e,!1,r)},Vy=function(t,e,r){return Cv(t.difference(e.center()),!1,r)},Xy=function(t,e,r){return Cv(t.difference(e.center()),!0,r)};var No={};Me(No,{Cell:()=>er,CellView:()=>jt,Element:()=>le,ElementView:()=>we,Graph:()=>_l,HighlighterView:()=>We,LayersNames:()=>hr,Link:()=>ae,LinkView:()=>wi,Paper:()=>Ex,PaperLayer:()=>ph,ToolView:()=>Oh,ToolsView:()=>zx,attributes:()=>Gs});var Yn=on(vs(),1);var ae=er.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(t){return this.set({source:{x:0,y:0},target:{x:0,y:0}},t)},source:function(t,e,r){if(t===void 0)return kr(this.get("source"));var n,i,o=t instanceof er;if(o)return n=kr(e)||{},n.id=t.id,i=r,this.set("source",n,i);var s=!se(t);return s?(n=kr(e)||{},n.x=t.x,n.y=t.y,i=r,this.set("source",n,i)):(n=t,i=e,this.set("source",n,i))},target:function(t,e,r){if(t===void 0)return kr(this.get("target"));var n,i,o=t instanceof er;if(o)return n=kr(e)||{},n.id=t.id,i=r,this.set("target",n,i);var s=!se(t);return s?(n=kr(e)||{},n.x=t.x,n.y=t.y,i=r,this.set("target",n,i)):(n=t,i=e,this.set("target",n,i))},router:function(t,e,r){if(t===void 0){var n=this.get("router");return n?typeof n=="object"?kr(n):n:this.get("manhattan")?{name:"orthogonal"}:null}var i=typeof t=="object"||typeof t=="function",o=i?t:{name:t,args:e},s=i?e:r;return this.set("router",o,s)},connector:function(t,e,r){if(t===void 0){var n=this.get("connector");return n?typeof n=="object"?kr(n):n:this.get("smooth")?{name:"smooth"}:null}var i=typeof t=="object"||typeof t=="function",o=i?t:{name:t,args:e},s=i?e:r;return this.set("connector",o,s)},label:function(t,e,r){var n=this.labels();return t=isFinite(t)&&t!==null?t|0:0,t<0&&(t=n.length+t),arguments.length<=1?this.prop(["labels",t]):this.prop(["labels",t],e,r)},labels:function(t,e){return arguments.length===0?(t=this.get("labels"),Array.isArray(t)?t.slice():[]):(Array.isArray(t)||(t=[]),this.set("labels",t,e))},hasLabels:function(){let{labels:t}=this.attributes;return Array.isArray(t)&&t.length>0},insertLabel:function(t,e,r){if(!e)throw new Error("dia.Link: no label provided");var n=this.labels(),i=n.length;return t=isFinite(t)&&t!==null?t|0:i,t<0&&(t=i+t+1),n.splice(t,0,e),this.labels(n,r)},appendLabel:function(t,e){return this.insertLabel(-1,t,e)},removeLabel:function(t,e){var r=this.labels();return t=isFinite(t)&&t!==null?t|0:-1,r.splice(t,1),this.labels(r,e)},vertex:function(t,e,r){var n=this.vertices();if(t=isFinite(t)&&t!==null?t|0:0,t<0&&(t=n.length+t),arguments.length<=1)return this.prop(["vertices",t]);var i=this._normalizeVertex(e);return this.prop(["vertices",t],i,r)},vertices:function(t,e){if(arguments.length===0)return t=this.get("vertices"),Array.isArray(t)?t.slice():[];Array.isArray(t)||(t=[]);for(var r=[],n=0;n<t.length;n++){var i=t[n],o=this._normalizeVertex(i);r.push(o)}return this.set("vertices",r,e)},insertVertex:function(t,e,r){if(!e)throw new Error("dia.Link: no vertex provided");var n=this.vertices(),i=n.length;t=isFinite(t)&&t!==null?t|0:i,t<0&&(t=i+t+1);var o=this._normalizeVertex(e);return n.splice(t,0,o),this.vertices(n,r)},removeVertex:function(t,e){var r=this.vertices();return t=isFinite(t)&&t!==null?t|0:-1,r.splice(t,1),this.vertices(r,e)},_normalizeVertex:function(t){var e=!se(t);return e?{x:t.x,y:t.y}:t},translate:function(t,e,r){return r=r||{},r.translateBy=r.translateBy||this.id,r.tx=t,r.ty=e,this.applyToPoints(function(n){return{x:(n.x||0)+t,y:(n.y||0)+e}},r)},scale:function(t,e,r,n){return this.applyToPoints(function(i){return z(i).scale(t,e,r).toJSON()},n)},applyToPoints:function(t,e){if(!qt(t))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var r={},{source:n,target:i}=this.attributes;n.id||(r.source=t(n)),i.id||(r.target=t(i));var o=this.vertices();return o.length>0&&(r.vertices=o.map(t)),this.set(r,e)},getSourcePoint:function(){var t=this.getSourceCell();return t?t.getPointFromConnectedLink(this,"source"):new z(this.source())},getTargetPoint:function(){var t=this.getTargetCell();return t?t.getPointFromConnectedLink(this,"target"):new z(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){let t=[this.getSourcePoint(),...this.vertices().map(z),this.getTargetPoint()];return new Qt(t)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(t){var e;if(this.graph){var r=this.getSourceElement(),n=this.getTargetElement(),i=this.getParentCell();r&&n&&(r===n||r.isEmbeddedIn(n)?e=n:n.isEmbeddedIn(r)?e=r:e=this.graph.getCommonAncestor(r,n)),i&&(!e||e.id!==i.id)&&i.unembed(this,t),e&&e.embed(this,t)}return e},hasLoop:function(t){t=t||{};var{source:e,target:r}=this.attributes,n=e.id,i=r.id;if(!n||!i)return!1;var o=n===i;if(!o&&t.deep&&this.graph){var s=this.getSourceCell(),l=this.getTargetCell();o=s.isEmbeddedIn(l)||l.isEmbeddedIn(s)}return o},getSourceCell:function(){let{graph:t,attributes:e}=this;var r=e.source;return r&&r.id&&t&&t.getCell(r.id)||null},getSourceElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getSourceCell()}while(t&&t.isLink());return t},getTargetCell:function(){let{graph:t,attributes:e}=this;var r=e.target;return r&&r.id&&t&&t.getCell(r.id)||null},getTargetElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getTargetCell()}while(t&&t.isLink());return t},getRelationshipAncestor:function(){var t;if(this.graph){var e=[this,this.getSourceElement(),this.getTargetElement()].filter(function(r){return!!r});t=this.graph.getCommonAncestor.apply(this.graph,e)}return t||null},isRelationshipEmbeddedIn:function(t){var e=Te(t)||Ge(t)?t:t.id,r=this.getRelationshipAncestor();return!!r&&(r.id===e||r.isEmbeddedIn(e))},_getDefaultLabel:function(){var t=this.get("defaultLabel")||this.defaultLabel||{},e={};return e.markup=t.markup||this.get("labelMarkup")||this.labelMarkup,e.position=t.position,e.attrs=t.attrs,e.size=t.size,e}},{endsEqual:function(t,e){var r=t.port===e.port||!t.port&&!e.port;return t.id===e.id&&r}});var xv=function(t){var e=$e(t)||{};this.ports=[],this.groups={},this.portLayoutNamespace=dh,this.portLabelLayoutNamespace=gh,this._init(e)};xv.prototype={getPorts:function(){return this.ports},getGroup:function(t){return this.groups[t]||{}},getPortsByGroup:function(t){return this.ports.filter(function(e){return e.group===t})},getGroupPortsMetrics:function(t,e){var r=this.getGroup(t),n=this.getPortsByGroup(t),i=r.position||{},o=i.name,s=this.portLayoutNamespace;s[o]||(o="left");var l=i.args||{},u=n.map(function(f){return f&&f.position&&f.position.args}),h=s[o](u,e,l),d={ports:n,result:[]};return kt(h).reduce((function(f,C,w){var b=f.ports[w];return f.result.push({portId:b.id,portTransformation:C,labelTransformation:this._getPortLabelLayout(b,z(C),e),portAttrs:b.attrs,portSize:b.size,labelSize:b.label.size}),f}).bind(this),d),d.result},_getPortLabelLayout:function(t,e,r){var n=this.portLabelLayoutNamespace,i=t.label.position.name||"left";return n[i]?n[i](e,r,t.label.position.args):null},_init:function(t){if(Wt(t.groups))for(var e=Object.keys(t.groups),r=0,n=e.length;r<n;r++){var i=e[r];this.groups[i]=this._evaluateGroup(t.groups[i])}for(var o=kt(t.items),s=0,l=o.length;s<l;s++)this.ports.push(this._evaluatePort(o[s]))},_evaluateGroup:function(t){return me(t,{position:this._getPosition(t.position,!0),label:this._getLabel(t,!0)})},_evaluatePort:function(t){var e=At({},t),r=this.getGroup(t.group);return e.markup=e.markup||r.markup,e.attrs=me({},r.attrs,e.attrs),e.position=this._createPositionNode(r,e),e.label=me({},r.label,this._getLabel(e)),e.z=this._getZIndex(r,e),e.size=At({},r.size,e.size),e},_getZIndex:function(t,e){return Ge(e.z)?e.z:Ge(t.z)||t.z==="auto"?t.z:"auto"},_createPositionNode:function(t,e){return me({name:"left",args:{}},t.position,{args:e.args})},_getPosition:function(t,e){var r={},n;qt(t)?(n="fn",r.fn=t):Te(t)?n=t:t===void 0?n=e?"left":null:Array.isArray(t)?(n="absolute",r.x=t[0],r.y=t[1]):Wt(t)&&(n=t.name,At(r,t.args));var i={args:r};return n&&(i.name=n),i},_getLabel:function(t,e){var r=t.label||{},n=r;return n.position=this._getPosition(r.position,e),n}};var wv={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var t=this.get("ports")||{},e={};kt(t.items).forEach(function(l){e[l.id]=!0});var r=this.previous("ports")||{},n={};kt(r.items).forEach(function(l){e[l.id]||(n[l.id]=!0)});var i=this.graph;if(i&&!cr(n)){var o=i.getConnectedLinks(this,{inbound:!0});o.forEach(function(l){n[l.get("target").port]&&l.remove()});var s=i.getConnectedLinks(this,{outbound:!0});s.forEach(function(l){n[l.get("source").port]&&l.remove()})}},hasPorts:function(){var t=this.prop("ports/items");return Array.isArray(t)&&t.length>0},hasPort:function(t){return this.getPortIndex(t)!==-1},getPorts:function(){return $e(this.prop("ports/items"))||[]},getGroupPorts:function(t){let e=kt(this.prop(["ports","items"])).filter(r=>r.group===t);return $e(e)},getPort:function(t){return $e(kt(this.prop("ports/items")).find(function(e){return e.id&&e.id===t}))},getPortsPositions:function(t){var e=this._portSettingsData.getGroupPortsMetrics(t,ft(this.size()));return e.reduce(function(r,n){var i=n.portTransformation;return r[n.portId]={x:i.x,y:i.y,angle:i.angle},r},{})},getPortIndex:function(t){var e=Wt(t)?t.id:t;return this._isValidPortId(e)?kt(this.prop("ports/items")).findIndex(function(r){return r.id===e}):-1},addPort:function(t,e){if(!Wt(t)||Array.isArray(t))throw new Error("Element: addPort requires an object.");var r=At([],this.prop("ports/items"));return r.push(t),this.prop("ports/items",r,e),this},insertPort:function(t,e,r){let n=typeof t=="number"?t:this.getPortIndex(t);if(!Wt(e)||Array.isArray(e))throw new Error("dia.Element: insertPort requires an object.");let i=At([],this.prop("ports/items"));return i.splice(n,0,e),this.prop("ports/items",i,r),this},portProp:function(t,e,r,n){var i=this.getPortIndex(t);if(i===-1)throw new Error("Element: unable to find port with id "+t);var o=Array.prototype.slice.call(arguments,1);return Array.isArray(e)?o[0]=["ports","items",i].concat(e):Te(e)?o[0]=["ports/items/",i,"/",e].join(""):(o=["ports/items/"+i],se(e)&&(o.push(e),o.push(r))),this.prop.apply(this,o)},_validatePorts:function(){var t=this.get("ports")||{},e=[];t=t||{};var r=kt(t.items);return r.forEach(function(n){typeof n!="object"&&e.push("Element: invalid port ",n),this._isValidPortId(n.id)||(n.id=this.generatePortId())},this),Lr(r,"id").length!==r.length&&e.push("Element: found id duplicities in ports."),e},generatePortId:function(){return this.generateId()},_isValidPortId:function(t){return t!=null&&!Wt(t)},addPorts:function(t,e){return t.length&&this.prop("ports/items",At([],this.prop("ports/items")).concat(t),e),this},removePort:function(t,e){let r=e||{},n=this.getPortIndex(t);if(n!==-1){let i=At([],this.prop(["ports","items"]));i.splice(n,1),r.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],i,r),this.stopBatch("port-remove")}return this},removePorts:function(t,e){let r,n;if(Array.isArray(t)){if(r=e||{},t.length===0)return this.this;n=At([],this.prop(["ports","items"])).filter(function(o){return!t.some(function(s){let l=Wt(s)?s.id:s;return o.id===l})})}else r=t||{},n=[];return this.startBatch("port-remove"),r.rewrite=!0,this.prop(["ports","items"],n,r),this.stopBatch("port-remove"),this},_createPortData:function(){var t=this._validatePorts();if(t.length>0)throw this.set("ports",this.previous("ports")),new Error(t.join(" "));var e;this._portSettingsData&&(e=this._portSettingsData.getPorts()),this._portSettingsData=new xv(this.get("ports"));var r=this._portSettingsData.getPorts();if(e){var n=r.filter(function(o){if(!e.find(function(s){return s.id===o.id}))return o}),i=e.filter(function(o){if(!r.find(function(s){return s.id===o.id}))return o});i.length>0&&this.trigger("ports:remove",this,i),n.length>0&&this.trigger("ports:add",this,n)}}},bv={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var t=[],e=this._getContainerElement(),r=0,n=e.node.childNodes.length;r<n;r++)t.push(e.node.childNodes[r]);var i=ih(this.model._portSettingsData.getPorts(),"z"),o="auto";kt(i[o]).forEach(function(d){var f=this._getPortElement(d);e.append(f),t.push(f)},this);for(var s=Object.keys(i),l=0;l<s.length;l++){var u=s[l];if(u!==o){var h=parseInt(u,10);this._appendPorts(i[u],h,t)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(t,e,r){var n=this._getContainerElement(),i=kt(t).map(this._getPortElement,this);r[e]||e<0?tt(r[Math.max(e,0)]).before(i):n.append(i)},_getPortElement:function(t){return this._portElementsCache[t.id]?this._portElementsCache[t.id].portElement:this._createPortElement(t)},findPortNode:function(t,e){let r=this._portElementsCache[t];if(!r)return null;if(!e)return r.portContentElement.node;let n=r.portElement.node,i=r.portSelectors,[o=null]=this.findBySelector(e,n,i);return o},_updatePorts:function(){this._updatePortGroup(void 0);var t=Object.keys(this.model._portSettingsData.groups);t.forEach(this._updatePortGroup,this)},_removePorts:function(){ur(this._portElementsCache,"portElement.remove")},_createPortElement:function(t){let e,r,n,i;var o=tt(this.portContainerMarkup).addClass("joint-port"),s=this._getPortMarkup(t);if(Array.isArray(s)){var l=this.parseDOMJSON(s,o.node),u=l.fragment;u.childNodes.length>1?e=tt("g").append(u):e=tt(u.firstChild),i=l.selectors}else e=tt(s),Array.isArray(e)&&(e=tt("g").append(e));if(!e)throw new Error("ElementView: Invalid port markup.");e.attr({port:t.id,"port-group":t.group});let h=this._getPortLabelMarkup(t.label);if(Array.isArray(h)){let{fragment:S,selectors:P}=this.parseDOMJSON(h,o.node),O=S.childNodes.length;O>0&&(n=P,r=O===1?tt(S.firstChild):tt("g").append(S))}else r=tt(h),Array.isArray(r)&&(r=tt("g").append(r));var d;if(i&&n){for(var f in n)if(i[f]&&f!==this.selector)throw new Error("ElementView: selectors within port must be unique.");d=At({},i,n)}else d=i||n||{};let C="portRoot",w="labelRoot",b="labelText";if(C in d||(d[C]=e.node),r){let S=r.node;if(w in d||(d[w]=S),!(b in d)){let P=r.tagName()==="TEXT"?S:Array.from(S.querySelectorAll("text"));d[b]=P,n||(n={}),n[b]=P}}return o.append(e.addClass("joint-port-body")),r&&o.append(r.addClass("joint-port-label")),this._portElementsCache[t.id]={portElement:o,portLabelElement:r,portSelectors:d,portLabelSelectors:n,portContentElement:e,portContentSelectors:i},o},_updatePortGroup:function(t){for(var e=ft(this.model.size()),r=this.model._portSettingsData.getGroupPortsMetrics(t,e),n=0,i=r.length;n<i;n++){var o=r[n],s=o.portId,l=this._portElementsCache[s]||{},u=o.portTransformation,h=o.labelTransformation;h&&l.portLabelElement&&(this.updateDOMSubtreeAttributes(l.portLabelElement.node,h.attrs,{rootBBox:new ft(o.labelSize),selectors:l.portLabelSelectors}),this.applyPortTransform(l.portLabelElement,h,-u.angle||0)),this.updateDOMSubtreeAttributes(l.portElement.node,o.portAttrs,{rootBBox:new ft(o.portSize),selectors:l.portSelectors}),this.applyPortTransform(l.portElement,u)}},applyPortTransform:function(t,e,r){var n=tt.createSVGMatrix().rotate(r||0).translate(e.x||0,e.y||0).rotate(e.angle||0);t.transform(n,{absolute:!0})},_getPortMarkup:function(t){return t.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(t){return t.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}};var le=er.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),er.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(t,e,r){let n=Ge(e);r=(n?r:t)||{};let{parentRelative:i,deep:o,restrictedArea:s}=r,l;if(i){if(!this.graph)throw new Error("Element must be part of a graph.");let u=this.getParentCell();u&&!u.isLink()&&(l=u.get("position"))}if(n){if(l&&(t+=l.x,e+=l.y),o||s){let{x:u,y:h}=this.get("position");this.translate(t-u,e-h,r)}else this.set("position",{x:t,y:e},r);return this}else{let u=z(this.get("position"));return i?u.difference(l):u}},translate:function(t,e,r){if(t=t||0,e=e||0,t===0&&e===0)return this;r=r||{},r.translateBy=r.translateBy||this.id;var n=this.get("position")||{x:0,y:0},i=r.restrictedArea;if(i&&r.translateBy===this.id)if(typeof i=="function"){var o=i.call(this,n.x+t,n.y+e,r);t=o.x-n.x,e=o.y-n.y}else{var s=this.getBBox({deep:!0}),l=n.x-s.x,u=n.y-s.y,h=Math.max(i.x+l,Math.min(i.x+i.width+l-s.width,n.x+t)),d=Math.max(i.y+u,Math.min(i.y+i.height+u-s.height,n.y+e));t=h-n.x,e=d-n.y}var f={x:n.x+t,y:n.y+e};return r.tx=t,r.ty=e,r.transition?(Wt(r.transition)||(r.transition={}),this.transition("position",f,At({},r.transition,{valueFunction:jl.object})),ur(this.getEmbeddedCells(),"translate",t,e,r)):(this.startBatch("translate",r),this.set("position",f,r),ur(this.getEmbeddedCells(),"translate",t,e,r),this.stopBatch("translate",r)),this},size:function(t,e,r){var n=this.get("size");return t===void 0?{width:n.width,height:n.height}:(Wt(t)&&(r=e,e=Ge(t.height)?t.height:n.height,t=Ge(t.width)?t.width:n.width),this.resize(t,e,r))},resize:function(t,e,r){if(r=r||{},this.startBatch("resize",r),r.direction){var n=this.get("size");switch(r.direction){case"left":case"right":e=n.height;break;case"top":case"bottom":t=n.width;break}var i=Be(this.get("angle")||0),o=this.getBBox(),s;if(i){var l={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[r.direction];r.absolute&&(l+=Math.floor((i+45)/90),l%=4);var u=o[["bottomLeft","corner","topRight","origin"][l]](),h=z(u).rotate(o.center(),-i),d=Math.sqrt(t*t+e*e)/2,f=l*Math.PI/2;f+=Math.atan(l%2==0?e/t:t/e),f-=Le(i);var C=z.fromPolar(d,f,h);s=z(C).offset(t/-2,e/-2)}else switch(s=o.topLeft(),r.direction){case"top":case"top-right":s.offset(0,o.height-e);break;case"left":case"bottom-left":s.offset(o.width-t,0);break;case"top-left":s.offset(o.width-t,o.height-e);break}this.set("size",{width:t,height:e},r),this.position(s.x,s.y,r)}else this.set("size",{width:t,height:e},r);return this.stopBatch("resize",r),this},scale:function(t,e,r,n){var i=this.getBBox().scale(t,e,r);return this.startBatch("scale",n),this.position(i.x,i.y,n),this.resize(i.width,i.height,n),this.stopBatch("scale"),this},fitEmbeds:function(t){return this.fitToChildren(t)},fitToChildren:function(t={}){let{graph:e}=this;if(!e)throw new Error("Element must be part of a graph.");let r=this.getEmbeddedCells().filter(n=>n.isElement());return r.length===0?this:(this.startBatch("fit-embeds",t),t.deep&&ur(r,"fitToChildren",t),this._fitToElements(Object.assign({elements:r},t)),this.stopBatch("fit-embeds"),this)},fitParent:function(t={}){let{graph:e}=this;if(!e)throw new Error("Element must be part of a graph.");if(t.deep&&t.terminator&&(t.terminator===this||t.terminator===this.id))return this;let r=this.getParentCell();if(!r||!r.isElement())return this;let n=r.getEmbeddedCells().filter(i=>i.isElement());return n.length===0?this:(this.startBatch("fit-parent",t),r._fitToElements(Object.assign({elements:n},t)),t.deep&&r.fitParent(t),this.stopBatch("fit-parent"),this)},_fitToElements:function(t={}){let e=this.graph.getCellsBBox(t.elements);if(!e)return;let{expandOnly:r,shrinkOnly:n}=t;if(r&&n)return;let{x:i,y:o,width:s,height:l}=e,{left:u,right:h,top:d,bottom:f}=Er(t.padding);i-=u,o-=d,s+=u+h,l+=f+d;let C=new ft(i,o,s,l);if(r)C=this.getBBox().union(C);else if(n){let w=this.getBBox().intersect(C);if(!w)return;C=w}this.set({position:{x:C.x,y:C.y},size:{width:C.width,height:C.height}},t)},rotate:function(t,e,r,n){if(r){var i=this.getBBox().center(),o=this.get("size"),s=this.get("position");i.rotate(r,this.get("angle")-t);var l=i.x-o.width/2-s.x,u=i.y-o.height/2-s.y;this.startBatch("rotate",{angle:t,absolute:e,origin:r}),this.position(s.x+l,s.y+u,n),this.rotate(t,e,null,n),this.stopBatch("rotate")}else this.set("angle",e?t:(this.get("angle")+t)%360,n);return this},angle:function(){return Be(this.get("angle")||0)},getBBox:function(t={}){let{graph:e,attributes:r}=this,{deep:n,rotate:i}=t;if(n&&e){let f=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return f.push(this),e.getCellsBBox(f,t)}let{angle:o=0,position:{x:s,y:l},size:{width:u,height:h}}=r,d=new ft(s,l,u,h);return i&&d.rotateAroundCenter(o),d},getPointFromConnectedLink:function(t,e){var r=this.getBBox(),n=r.center(),i=t.get(e);if(!i)return n;var o=i.port;if(!o||!this.hasPort(o))return n;var s=this.portProp(o,["group"]),l=this.getPortsPositions(s),u=new z(l[o]).offset(r.origin()),h=this.angle();return h&&u.rotate(n,-h),u}});At(le.prototype,wv);var Hy=Yn.default.Collection.extend({initialize:function(t,e){e.cellNamespace?this.cellNamespace=e.cellNamespace:this.cellNamespace=typeof joint<"u"&&br(joint,"shapes")?joint.shapes:null,this.graph=e.graph},model:function(t,e){var r=e.collection,n=r.cellNamespace,i=t.type==="link"?ae:An(n,t.type,".")||le,o=new i(t,e);return e.dry||(o.graph=r.graph),o},comparator:function(t){return t.get("z")||0}}),_l=Yn.default.Model.extend({initialize:function(t,e){e=e||{};var r=new Hy([],{model:e.cellModel,cellNamespace:e.cellNamespace,graph:this});Yn.default.Model.prototype.set.call(this,"cells",r),r.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},r.on("add",this._restructureOnAdd,this),r.on("remove",this._restructureOnRemove,this),r.on("reset",this._restructureOnReset,this),r.on("change:source",this._restructureOnChangeSource,this),r.on("change:target",this._restructureOnChangeTarget,this),r.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(t){if(t.isLink()){this._edges[t.id]=!0;var{source:e,target:r}=t.attributes;e.id&&((this._out[e.id]||(this._out[e.id]={}))[t.id]=!0),r.id&&((this._in[r.id]||(this._in[r.id]={}))[t.id]=!0)}else this._nodes[t.id]=!0},_restructureOnRemove:function(t){if(t.isLink()){delete this._edges[t.id];var{source:e,target:r}=t.attributes;e.id&&this._out[e.id]&&this._out[e.id][t.id]&&delete this._out[e.id][t.id],r.id&&this._in[r.id]&&this._in[r.id][t.id]&&delete this._in[r.id][t.id]}else delete this._nodes[t.id]},_restructureOnReset:function(t){t=t.models,this._out={},this._in={},this._nodes={},this._edges={},t.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(t){var e=t.previous("source");e.id&&this._out[e.id]&&delete this._out[e.id][t.id];var r=t.attributes.source;r.id&&((this._out[r.id]||(this._out[r.id]={}))[t.id]=!0)},_restructureOnChangeTarget:function(t){var e=t.previous("target");e.id&&this._in[e.id]&&delete this._in[e.id][t.id];var r=t.get("target");r.id&&((this._in[r.id]||(this._in[r.id]={}))[t.id]=!0)},getOutboundEdges:function(t){return this._out&&this._out[t]||{}},getInboundEdges:function(t){return this._in&&this._in[t]||{}},toJSON:function(){var t=Yn.default.Model.prototype.toJSON.apply(this,arguments);return t.cells=this.get("cells").toJSON(),t},fromJSON:function(t,e){if(!t.cells)throw new Error("Graph JSON must contain cells array.");return this.set(t,e)},set:function(t,e,r){var n;return typeof t=="object"?(n=t,r=e):(n={})[t]=e,n.hasOwnProperty("cells")&&(this.resetCells(n.cells,r),n=Or(n,"cells")),Yn.default.Model.prototype.set.call(this,n,r)},clear:function(t){t=At({},t,{clear:!0});var e=this.get("cells");if(e.length===0)return this;this.startBatch("clear",t);var r=e.sortBy(function(n){return n.isLink()?1:2});do r.shift().remove(t);while(r.length>0);return this.stopBatch("clear"),this},_prepareCell:function(t,e){var r;if(t instanceof Yn.default.Model?(r=t.attributes,!t.graph&&(!e||!e.dry)&&(t.graph=this)):r=t,!Te(r.type))throw new TypeError("dia.Graph: cell type must be a string.");return t},minZIndex:function(){var t=this.get("cells").first();return t&&t.get("z")||0},maxZIndex:function(){var t=this.get("cells").last();return t&&t.get("z")||0},addCell:function(t,e){return Array.isArray(t)?this.addCells(t,e):(t instanceof Yn.default.Model?t.has("z")||t.set("z",this.maxZIndex()+1):t.z===void 0&&(t.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(t,e),e||{}),this)},addCells:function(t,e){return t.length===0?this:(t=oh(t),e.maxPosition=e.position=t.length-1,this.startBatch("add",e),t.forEach(function(r){this.addCell(r,e),e.position--},this),this.stopBatch("add",e),this)},resetCells:function(t,e){var r=kt(t).map(function(n){return this._prepareCell(n,e)},this);return this.get("cells").reset(r,e),this},removeCells:function(t,e){return t.length&&(this.startBatch("remove"),ur(t,"remove",e),this.stopBatch("remove")),this},_removeCell:function(t,e,r){r=r||{},r.clear||(r.disconnectLinks?this.disconnectLinks(t,r):this.removeLinks(t,r)),this.get("cells").remove(t,{silent:!0}),t.graph===this&&(t.graph=null)},getCell:function(t){return this.get("cells").get(t)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter(t=>t.isElement())},getLinks:function(){return this.get("cells").filter(t=>t.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(t,e){e=e||{};var r=e.indirect,n=e.inbound,i=e.outbound;n===void 0&&i===void 0&&(n=i=!0);var o=[],s={};i&&l(this,t),n&&u(this,t);function l(f,C){if(fr(f.getOutboundEdges(C.id),(function(b,S){if(!s[S]){var P=f.getCell(S);o.push(P),s[S]=!0,r&&(n&&u(f,P),i&&l(f,P))}}).bind(f)),r&&C.isLink()){var w=C.getTargetCell();w&&w.isLink()&&(s[w.id]||(o.push(w),l(f,w)))}}function u(f,C){if(fr(f.getInboundEdges(C.id),(function(b,S){if(!s[S]){var P=f.getCell(S);o.push(P),s[S]=!0,r&&(n&&u(f,P),i&&l(f,P))}}).bind(f)),r&&C.isLink()){var w=C.getSourceCell();w&&w.isLink()&&(s[w.id]||(o.push(w),u(f,w)))}}if(e.deep){var h=t.getEmbeddedCells({deep:!0}),d={};h.forEach(function(f){f.isElement()&&(d[f.id]=!0)}),h.forEach(function(f){f.isLink()||(i&&fr(this.getOutboundEdges(f.id),(function(C,w){if(!s[w]){var b=this.getCell(w),{source:S,target:P}=b.attributes,O=S.id,F=P.id;if(!e.includeEnclosed&&O&&d[O]&&F&&d[F])return;o.push(this.getCell(w)),s[w]=!0}}).bind(this)),n&&fr(this.getInboundEdges(f.id),(function(C,w){if(!s[w]){var b=this.getCell(w),{source:S,target:P}=b.attributes,O=S.id,F=P.id;if(!e.includeEnclosed&&O&&d[O]&&F&&d[F])return;o.push(this.getCell(w)),s[w]=!0}}).bind(this)))},this)}return o},getNeighbors:function(t,e){e||(e={});var r=e.inbound,n=e.outbound;r===void 0&&n===void 0&&(r=n=!0);var i=this.getConnectedLinks(t,e).reduce((function(l,u){var{source:h,target:d}=u.attributes,f=u.hasLoop(e);if(r&&br(h,"id")&&!l[h.id]){var C=this.getCell(h.id);C.isElement()&&(f||C&&C!==t&&(!e.deep||!C.isEmbeddedIn(t)))&&(l[h.id]=C)}if(n&&br(d,"id")&&!l[d.id]){var w=this.getCell(d.id);w.isElement()&&(f||w&&w!==t&&(!e.deep||!w.isEmbeddedIn(t)))&&(l[d.id]=w)}return l}).bind(this),{});if(t.isLink()){if(r){var o=t.getSourceCell();o&&o.isElement()&&!i[o.id]&&(i[o.id]=o)}if(n){var s=t.getTargetCell();s&&s.isElement()&&!i[s.id]&&(i[s.id]=s)}}return kt(i)},getCommonAncestor:function(){var t=Array.from(arguments).map(function(r){for(var n=[],i=r.get("parent");i;)n.push(i),i=this.getCell(i).get("parent");return n},this);t=t.sort(function(r,n){return r.length-n.length});var e=kt(t.shift()).find(function(r){return t.every(function(n){return n.includes(r)})});return this.getCell(e)},getSuccessors:function(t,e){e=e||{};var r=[];return this.search(t,function(n){n!==t&&r.push(n)},At({},e,{outbound:!0})),r},cloneCells:Wl,cloneSubgraph:function(t,e){var r=this.getSubgraph(t,e);return this.cloneCells(r)},getSubgraph:function(t,e){e=e||{};var r=[],n={},i=[],o=[];return kt(t).forEach(function(s){if(n[s.id]||(r.push(s),n[s.id]=s,s.isLink()?o.push(s):i.push(s)),e.deep){var l=s.getEmbeddedCells({deep:!0});l.forEach(function(u){n[u.id]||(r.push(u),n[u.id]=u,u.isLink()?o.push(u):i.push(u))})}}),o.forEach(function(s){var{source:l,target:u}=s.attributes;if(l.id&&!n[l.id]){var h=this.getCell(l.id);r.push(h),n[h.id]=h,i.push(h)}if(u.id&&!n[u.id]){var d=this.getCell(u.id);r.push(this.getCell(u.id)),n[d.id]=d,i.push(d)}},this),i.forEach(function(s){var l=this.getConnectedLinks(s,e);l.forEach(function(u){var{source:h,target:d}=u.attributes;!n[u.id]&&h.id&&n[h.id]&&d.id&&n[d.id]&&(r.push(u),n[u.id]=u)})},this),r},getPredecessors:function(t,e){e=e||{};var r=[];return this.search(t,function(n){n!==t&&r.push(n)},At({},e,{inbound:!0})),r},search:function(t,e,r){r=r||{},r.breadthFirst?this.bfs(t,e,r):this.dfs(t,e,r)},bfs:function(t,e,r={}){let n={},i={},o=[];for(o.push(t),i[t.id]=0;o.length>0;){var s=o.shift();if(n[s.id]||(n[s.id]=!0,e.call(this,s,i[s.id])===!1))continue;let l=this.getNeighbors(s,r);for(let u=0,h=l.length;u<h;u++){let d=l[u];i[d.id]=i[s.id]+1,o.push(d)}}},dfs:function(t,e,r={}){let n={},i={},o=[];for(o.push(t),i[t.id]=0;o.length>0;){let s=o.pop();if(n[s.id]||(n[s.id]=!0,e.call(this,s,i[s.id])===!1))continue;let l=this.getNeighbors(s,r),u=o.length;for(let h=0,d=l.length;h<d;h++){let f=l[h];i[f.id]=i[s.id]+1,o.splice(u,0,f)}}},getSources:function(){var t=[];return fr(this._nodes,(function(e,r){(!this._in[r]||cr(this._in[r]))&&t.push(this.getCell(r))}).bind(this)),t},getSinks:function(){var t=[];return fr(this._nodes,(function(e,r){(!this._out[r]||cr(this._out[r]))&&t.push(this.getCell(r))}).bind(this)),t},isSource:function(t){return!this._in[t.id]||cr(this._in[t.id])},isSink:function(t){return!this._out[t.id]||cr(this._out[t.id])},isSuccessor:function(t,e){var r=!1;return this.search(t,function(n){if(n===e&&n!==t)return r=!0,!1},{outbound:!0}),r},isPredecessor:function(t,e){var r=!1;return this.search(t,function(n){if(n===e&&n!==t)return r=!0,!1},{inbound:!0}),r},isNeighbor:function(t,e,r){r=r||{};var n=r.inbound,i=r.outbound;n===void 0&&i===void 0&&(n=i=!0);var o=!1;return this.getConnectedLinks(t,r).forEach(function(s){var{source:l,target:u}=s.attributes;if(n&&br(l,"id")&&l.id===e.id||i&&br(u,"id")&&u.id===e.id)return o=!0,!1}),o},disconnectLinks:function(t,e){this.getConnectedLinks(t).forEach(function(r){r.set(r.attributes.source.id===t.id?"source":"target",{x:0,y:0},e)})},removeLinks:function(t,e){ur(this.getConnectedLinks(t),"remove",e)},findModelsFromPoint:function(t){return this.getElements().filter(e=>e.getBBox({rotate:!0}).containsPoint(t))},findModelsInArea:function(t,e={}){let r=new ft(t),{strict:n=!1}=e,i=n?"containsRect":"intersect";return this.getElements().filter(o=>r[i](o.getBBox({rotate:!0})))},findModelsUnderElement:function(t,e={}){let{searchBy:r="bbox"}=e,n=t.getBBox().rotateAroundCenter(t.angle());return(r==="bbox"?this.findModelsInArea(n):this.findModelsFromPoint(Bs(n,r))).filter(o=>t.id!==o.id&&!o.isEmbeddedIn(t))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(t,e={}){let{rotate:r=!0}=e;return kt(t).reduce(function(n,i){let o=i.getBBox({rotate:r});return o?n?n.union(o):o:n},null)},translate:function(t,e,r){var n=this.getCells().filter(function(i){return!i.isEmbedded()});return ur(n,"translate",t,e,r),this},resize:function(t,e,r){return this.resizeCells(t,e,this.getCells(),r)},resizeCells:function(t,e,r,n){var i=this.getCellsBBox(r);if(i){var o=Math.max(t/i.width,0),s=Math.max(e/i.height,0);ur(r,"scale",o,s,i.origin(),n)}return this},startBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)+1,this.trigger("batch:start",At({},e,{batchName:t}))},stopBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)-1,this.trigger("batch:stop",At({},e,{batchName:t}))},hasActiveBatch:function(t){let e=this._batches,r;return arguments.length===0?r=Object.keys(e):Array.isArray(t)?r=t:r=[t],r.some(n=>e[n]>0)}},{validations:{multiLinks:function(t,e){var{source:r,target:n}=e.attributes;if(r.id&&n.id){var i=e.getSourceCell();if(i){var o=t.getConnectedLinks(i,{outbound:!0}),s=o.filter(function(l){var{source:u,target:h}=l.attributes;return u&&u.id===r.id&&(!u.port||u.port===r.port)&&h&&h.id===n.id&&(!h.port||h.port===n.port)});if(s.length>1)return!1}}return!0},linkPinning:function(t,e){var{source:r,target:n}=e.attributes;return r.id&&n.id}}});pv(_l.prototype,["resetCells","addCells","removeCells"],Fl.cells);var yi=on(vs(),1),Ci=on(Gn(),1);var Un={},Nr=yi.default.View.extend({options:{},theme:null,themeClassNamePrefix:Je("theme-"),requireSetThemeOverride:!1,defaultTheme:Xe.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,FLAG_INIT:1<<28,constructor:function(t){this.requireSetThemeOverride=t&&!!t.theme,this.options=At({},this.options,t),yi.default.View.call(this,t)},initialize:function(){Un[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},isMounted:function(){return this.el.parentNode!==null},renderChildren:function(t){if(t||(t=he(this,"children")),t){var e=this.svgElement,r=tt.namespace[e?"svg":"xhtml"],n=Ai(t,r);(e?this.vel:this.$el).empty().append(n.fragment),this.childNodes=n.selectors}return this},findAttribute:function(t,e){for(var r=e;r&&r.nodeType===1;){var n=r.getAttribute(t);if(n)return n;if(r===this.el)return null;r=r.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(he(this,"el"));else{var t=he(this,"tagName"),e=At({},he(this,"attributes")),r=At({},he(this,"style"));this.id&&(e.id=he(this,"id")),this.setElement(this._createElement(t)),this._setAttributes(e),this._setStyle(r)}this._ensureElClassName()},_setAttributes:function(t){this.svgElement?this.vel.attr(t):this.$el.attr(t)},_setStyle:function(t){this.$el.css(t)},_createElement:function(t){return this.svgElement?document.createElementNS(tt.namespace.svg,t):document.createElement(t)},_setElement:function(t){this.$el=t instanceof yi.default.$?t:yi.default.$(t),this.el=this.$el[0],this.svgElement&&(this.vel=tt(this.el))},_ensureElClassName:function(){var t=he(this,"className");if(t){var e=Je(t);this.svgElement?this.vel.removeClass(t).addClass(e):this.$el.removeClass(t).addClass(e)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(t,e){return e=e||{},this.theme&&this.requireSetThemeOverride&&!e.override?this:(this.removeThemeClassName(),this.addThemeClassName(t),this.onSetTheme(this.theme,t),this.theme=t,this)},addThemeClassName:function(t){if(t=t||this.theme,!t)return this;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.addClass(e):this.$el.addClass(e),this},removeThemeClassName:function(t){t=t||this.theme;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.removeClass(e):this.$el.removeClass(e),this},onSetTheme:function(t,e){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),Un[this.cid]=null,yi.default.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(t,e,r){if(!e)return this;r||(r={});var n=this.getEventNamespace();for(var i in e){var o=e[i];typeof o!="function"&&(o=this[o]),o&&(0,Ci.default)(t).on(i+n,r,o.bind(this))}return this},undelegateElementEvents:function(t){return(0,Ci.default)(t).off(this.getEventNamespace()),this},delegateDocumentEvents:function(t,e){return t||(t=he(this,"documentEvents")),this.delegateElementEvents(document,t,e)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(t,e){if(!t)throw new Error("eventData(): event object required.");var r=t.data,n="__"+this.cid+"__";return e===void 0?r?r[n]||{}:{}:(r||(r=t.data={}),r[n]||(r[n]={}),At(r[n],e),this)},stopPropagation:function(t){return this.eventData(t,{propagationStopped:!0}),this},isPropagationStopped:function(t){return!!this.eventData(t).propagationStopped}},{extend:function(){var t=Array.from(arguments),e=t[0]&&At({},t[0])||{},r=t[1]&&At({},t[1])||{},n=e.render||this.prototype&&this.prototype.render||null;return e.render=function(){return typeof n=="function"&&n.apply(this,arguments),this.render.__render__===n&&this.onRender(),this},e.render.__render__=n,yi.default.View.extend.call(this,e,r)}}),Nv="dbltap";if(Ci.default.event&&!(Nv in Ci.default.event.special)){let t=Xe.doubleTapInterval,e=30;Ci.default.event.special[Nv]={bindType:"touchend",delegateType:"touchend",handle:function(r,...n){let{handleObj:i,target:o}=r,s=Ci.default.data(o),l=new Date().getTime(),u="lastTouch"in s?l-s.lastTouch:0;u<t&&u>e?(s.lastTouch=null,r.type=i.origType,i.handler.call(this,r,...n)):s.lastTouch=l}}}var hr={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},ph=Nr.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return Je(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(t,e){this.el.insertBefore(t,this.insertPivot(e))},insertNode:function(t){let{el:e}=this;t.parentNode!==e&&e.appendChild(t)},insertPivot:function(t){let{el:e,pivotNodes:r}=this;t=+t,t||(t=0);let n=r[t];if(n)return n;n=r[t]=document.createComment("z-index:"+(t+1));let i=-1/0;for(let o in r)o=+o,o<t&&o>i&&(i=o,t-1);if(i!==-1/0){let o=r[i];e.insertBefore(n,o.nextSibling)}else e.insertBefore(n,e.firstChild);return n},removePivots:function(){let{el:t,pivotNodes:e}=this;for(let r in e)t.removeChild(e[r]);this.pivotNodes={}}});var vh=on(Gn(),1);function Zs(t){return t?Array.isArray(t)?t:[t]:[]}var We=Nr.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,postponedUpdate:!1,transformGroup:null,detachedTransformGroup:null,requestUpdate(t,e){let{paper:r}=t;this.cellView=t,this.nodeSelector=e,r&&(this.updateRequested=!0,r.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;let{cellView:t,nodeSelector:e}=this;return t.isMounted()?(this.update(t,e),this.mount(),this.transform(),0):(this.postponedUpdate=!0,0)},findNode(t,e=null){let r;if(typeof e=="string")[r]=t.findBySelector(e);else if(se(e)){let n=t.model.isLink(),{label:i=null,port:o,selector:s}=e;n&&i!==null?r=t.findLabelNode(i,s):!n&&o?r=t.findPortNode(o,s):[r]=t.findBySelector(s)}else e&&(r=tt.toNode(e),r instanceof SVGElement||(r=null));return r||null},getNodeMatrix(t,e){let{options:r}=this,{layer:n}=r,{rotatableNode:i}=t,o=t.getNodeMatrix(e);return i?n?i.contains(e)?o:t.getRootRotateMatrix().inverse().multiply(o):t.getNodeRotateMatrix(e).multiply(o):o},mount(){let{MOUNTABLE:t,cellView:e,el:r,options:n,transformGroup:i,detachedTransformGroup:o,postponedUpdate:s,nodeSelector:l}=this;if(!t||i)return;if(s){this.update(e,l),this.transform();return}let{vel:u,paper:h}=e,{layer:d}=n;if(d){let f;o?(f=o,this.detachedTransformGroup=null):f=tt("g").addClass("highlight-transform").append(r),this.transformGroup=f,h.getLayerView(d).insertSortedNode(f.node,n.z)}else(!r.parentNode||r.nextSibling)&&u.append(r)},unmount(){let{MOUNTABLE:t,transformGroup:e,vel:r}=this;t&&(e?(this.transformGroup=null,this.detachedTransformGroup=e,e.remove()):r.remove())},transform(){let{transformGroup:t,cellView:e,updateRequested:r}=this;if(!t||e.model.isLink()||r)return;let n=e.getRootTranslateMatrix(),i=e.getRootRotateMatrix(),o=n.multiply(i);t.attr("transform",tt.matrixToTransformString(o))},update(){let{node:t,cellView:e,nodeSelector:r,updateRequested:n,id:i}=this;if(n)return;this.postponedUpdate=!1;let o=this.node=this.findNode(e,r);t&&this.unhighlight(e,t),o?(this.highlight(e,o),this.mount()):(this.unmount(),e.notify("cell:highlight:invalid",i,this))},onRemove(){let{node:t,cellView:e,id:r,constructor:n}=this;t&&this.unhighlight(e,t),this.unmount(),n._removeRef(e,r)},highlight(t,e){},unhighlight(t,e){},listenToUpdateAttributes(t){let e=he(this,"UPDATE_ATTRIBUTES");!Array.isArray(e)||e.length===0||this.listenTo(t.model,"change",this.onCellAttributeChange)},onCellAttributeChange(){let{cellView:t}=this;if(!t)return;let{model:e,paper:r}=t;he(this,"UPDATE_ATTRIBUTES").some(i=>e.hasChanged(i))&&r.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY)}},{_views:{},highlight:function(t,e,r){let n=this.uniqueId(e,r);this.add(t,e,n,r)},unhighlight:function(t,e,r){let n=this.uniqueId(e,r);this.remove(t,n)},get(t,e=null){let{cid:r}=t,{_views:n}=this,i=n[r];if(e===null){let o=[];if(!i)return o;for(let s in i){let l=i[s];l instanceof this&&o.push(l)}return o}else{if(!i)return null;if(e in i){let o=i[e];if(o instanceof this)return o}return null}},add(t,e,r,n={}){if(!r)throw new Error("dia.HighlighterView: An ID required.");let i=We.get(t,r);i&&i.remove();let o=new this(n);return o.id=r,this._addRef(t,r,o),o.requestUpdate(t,e),o.listenToUpdateAttributes(t),o},_addRef(t,e,r){let{cid:n}=t,{_views:i}=this,o=i[n];o||(o=i[n]={}),o[e]=r},_removeRef(t,e){let{cid:r}=t,{_views:n}=this,i=n[r];if(i){e&&delete i[e];for(let o in i)return;delete n[r]}},remove(t,e=null){Zs(this.get(t,e)).forEach(r=>{r.remove()})},removeAll(t,e=null){let{_views:r}=this;for(let n in r)for(let i in r[n]){let o=r[n][i];o.cellView.paper===t&&o instanceof this&&(e===null||i===e)&&o.remove()}},update(t,e=null,r=!1){Zs(this.get(t,e)).forEach(n=>{(r||n.UPDATABLE)&&n.update()})},transform(t,e=null){Zs(this.get(t,e)).forEach(r=>{r.UPDATABLE&&r.transform()})},unmount(t,e=null){Zs(this.get(t,e)).forEach(r=>r.unmount())},mount(t,e=null){Zs(this.get(t,e)).forEach(r=>r.mount())},uniqueId(t,e=""){return tt.ensureId(t)+JSON.stringify(e)}});var Io={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},Jy={TOOLS:"TOOLS"},jt=Nr.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var t=["cell"],e=this.model.get("type");return e&&e.toLowerCase().split(".").forEach(function(r,n,i){t.push("type-"+i.slice(0,n+1).join("-"))}),t.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var t={},e={},r=0,n,i,o,s=he(this,"presentationAttributes");for(var l in s)if(s.hasOwnProperty(l)){var u=s[l];for(Array.isArray(u)||(u=[u]),n=0,i=u.length;n<i;n++){o=u[n];var h=t[o];h||(h=t[o]=1<<r++),e[l]|=h}}var d=he(this,"initFlag");for(Array.isArray(d)||(d=[d]),n=0,i=d.length;n<i;n++)o=d[n],t[o]||(t[o]=1<<r++);if(r>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=t,this._presentationAttributes=e},hasFlag:function(t,e){return t&this.getFlag(e)},removeFlag:function(t,e){return t^t&this.getFlag(e)},getFlag:function(t){var e=this._flags;if(!e)return 0;var r=0;if(Array.isArray(t))for(var n=0,i=t.length;n<i;n++)r|=e[t[n]];else r|=e[t];return r},attributes:function(){var t=this.model;return{"model-id":t.id,"data-type":t.attributes.type}},constructor:function(t){t.id=t.id||Zn(this),Nr.call(this,t)},initialize:function(){this.setFlags(),Nr.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(t,e){var r=t.getChangeFlag(this._presentationAttributes);e.updateHandled||!r||(e.dirty&&this.hasFlag(r,"UPDATE")&&(r|=this.getFlag("RENDER")),e.tool&&(e.async=!1),this.requestUpdate(r,e))},requestUpdate:function(t,e){let{paper:r}=this;r&&t>0&&r.requestViewUpdate(this,t,this.UPDATE_PRIORITY,e)},parseDOMJSON:function(t,e){var r=Ai(t),n=r.selectors,i=r.groupSelectors;for(var o in i){if(n[o])throw new Error("dia.CellView: ambiguous group selector");n[o]=i[o]}if(e){var s=this.selector;if(n[s])throw new Error("dia.CellView: ambiguous root selector.");n[s]=e}return{fragment:r.fragment,selectors:n}},can:function(t){var e=qt(this.options.interactive)?this.options.interactive(this):this.options.interactive;return Wt(e)&&e[t]!==!1||rh(e)&&e!==!1},findBySelector:function(t,e,r){if(e||(e=this.el),r||(r=this.selectors),!t||t===".")return[e];if(r){var n=r[t];if(n)return Array.isArray(n)?n:[n]}return Xe.useCSSSelectors?(0,vh.default)(e).find(t).toArray():[]},notify:function(t){if(this.paper){var e=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[t].concat(e)),this.paper.trigger.apply(this.paper,[t,this].concat(e))}},getBBox:function(t){var e;if(t&&t.useModelGeometry){var r=this.model;e=r.getBBox().bbox(r.angle())}else e=this.getNodeBBox(this.el);return this.paper.localToPaperRect(e)},getNodeBBox:function(t){let e=this.getNodeBoundingRect(t),r=this.getRootTranslateMatrix().multiply(this.getNodeRotateMatrix(t)),n=this.getNodeMatrix(t);return tt.transformRect(e,r.multiply(n))},getNodeRotateMatrix(t){return!this.rotatableNode||this.rotatableNode.contains(t)?this.getRootRotateMatrix():tt.createSVGMatrix()},getNodeUnrotatedBBox:function(t){var e=this.getNodeBoundingRect(t),r=this.getNodeMatrix(t),n=this.getRootTranslateMatrix();return tt.transformRect(e,n.multiply(r))},getRootTranslateMatrix:function(){var t=this.model,e=t.position(),r=tt.createSVGMatrix().translate(e.x,e.y);return r},getRootRotateMatrix:function(){var t=tt.createSVGMatrix(),e=this.model,r=e.angle();if(r){var n=e.getBBox(),i=n.width/2,o=n.height/2;t=t.translate(i,o).rotate(r).translate(-i,-o)}return t},_notifyHighlight:function(t,e,r={}){let{el:n}=this,i;if(typeof e=="string"?[i=n]=this.findBySelector(e):[i=n]=this.$(e),r.partial=i!==n,r.type===void 0){let o;switch(!0){case r.embedding:o=Io.EMBEDDING;break;case r.connecting:o=Io.CONNECTING;break;case r.magnetAvailability:o=Io.MAGNET_AVAILABILITY;break;case r.elementAvailability:o=Io.ELEMENT_AVAILABILITY;break;default:o=Io.DEFAULT;break}r.type=o}return this.notify(t,i,r),this},highlight:function(t,e){return this._notifyHighlight("cell:highlight",t,e)},unhighlight:function(t,e={}){return this._notifyHighlight("cell:unhighlight",t,e)},findMagnet:function(t){let e=this.el,r=this.$(t)[0];r||(r=e);do{let n=r.getAttribute("magnet"),i=r===e;if((n||i)&&n!=="false")return r;if(i)return;r=r.parentNode}while(r)},findProxyNode:function(t,e){t||(t=this.el);let r=t.getAttribute(`${e}-selector`);if(r){let[n]=this.findBySelector(r);if(n)return n}return t},getSelector:function(t,e){var r;if(t===this.el)return typeof e=="string"&&(r="> "+e),r;if(t){var n=tt(t).index()+1;r=t.tagName+":nth-child("+n+")",e&&(r+=" > "+e),r=this.getSelector(t.parentNode,r)}return r},addLinkFromMagnet:function(t,e,r){var n=this.paper,i=n.model,o=n.getDefaultLink(this,t);return o.set({source:this.getLinkEnd(t,e,r,o,"source"),target:{x:e,y:r}}).addTo(i,{async:!1,ui:!0}),o.findView(n)},getLinkEnd:function(t,...e){var r=this.model,n=r.id,i=this.findAttribute("port",t),o=t.getAttribute("joint-selector"),s={id:n};return o!=null&&(s.magnet=o),i!=null?(s.port=i,!r.hasPort(i)&&!o&&(s.selector=this.getSelector(t))):o==null&&this.el!==t&&(s.selector=this.getSelector(t)),this.customizeLinkEnd(s,t,...e)},customizeLinkEnd:function(t,e,r,n,i,o){let{paper:s}=this,{connectionStrategy:l}=s.options;if(typeof l=="function"){var u=l.call(s,t,this,e,new z(r,n),i,o,s);if(u)return u}return t},getMagnetFromLinkEnd:function(t){var e=this.el,r=t.port,n=t.magnet,i=this.model,o;return r!=null&&i.isElement()&&i.hasPort(r)?o=this.findPortNode(r,n)||e:(n||(n=t.selector),!n&&r!=null&&(n='[port="'+r+'"]'),o=this.findBySelector(n,e,this.selectors)[0]),this.findProxyNode(o,"magnet")},dragLinkStart:function(t,e,r,n){this.model.startBatch("add-link");let i=this.addLinkFromMagnet(e,r,n);i.notifyPointerdown(t,r,n),i.eventData(t,i.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(t,{linkView:i})},dragLink:function(t,e,r){var n=this.eventData(t),i=n.linkView;if(i)i.pointermove(t,e,r);else{var o=this.paper,s=o.options.magnetThreshold,l=this.getEventTarget(t),u=n.targetMagnet;if(s==="onleave"){if(u===l||tt(u).contains(l))return}else if(o.eventData(t).mousemoved<=s)return;this.dragLinkStart(t,u,e,r)}},dragLinkEnd:function(t,e,r){var n=this.eventData(t),i=n.linkView;i&&(i.pointerup(t,e,r),this.model.stopBatch("add-link"))},getAttributeDefinition:function(t){return this.model.constructor.getAttributeDefinition(t)},setNodeAttributes:function(t,e){cr(e)||(t instanceof SVGElement?tt(t).attr(e):(0,vh.default)(t).attr(e))},processNodeAttributes:function(t,e){var r,n,i,o,s,l,u,h,d,f=[];for(r in e)e.hasOwnProperty(r)&&(n=e[r],i=this.getAttributeDefinition(r),i&&(!qt(i.qualify)||i.qualify.call(this,n,t,e,this))?(Te(i.set)&&(l||(l={}),l[i.set]=n),n!==null&&f.push(r,i)):(l||(l={}),l[ev(r)]=n));for(o=0,s=f.length;o<s;o+=2)r=f[o],i=f[o+1],n=e[r],qt(i.set)&&(u||(u={}),u[r]=n),qt(i.position)&&(h||(h={}),h[r]=n),qt(i.offset)&&(d||(d={}),d[r]=n);return{raw:e,normal:l,set:u,position:h,offset:d}},updateRelativeAttributes:function(t,e,r,n){n||(n={});var i,o,s,l=e.raw||{},u=e.normal||{},h=e.set,d=e.position,f=e.offset;for(i in h){o=h[i],s=this.getAttributeDefinition(i);var C=s.set.call(this,o,r.clone(),t,l,this);Wt(C)?At(u,C):C!==void 0&&(u[i]=C)}if(t instanceof HTMLElement){this.setNodeAttributes(t,u);return}var w=u.transform,b=tt.transformStringToMatrix(w),S=z(b.e,b.f);w&&(u=Or(u,"transform"),b.e=b.f=0);var P,O,F;if(d||f){var J=this.getNodeScale(t,n.scalableNode);P=J.sx,O=J.sy}var $=!1;for(i in d)o=d[i],s=this.getAttributeDefinition(i),F=s.position.call(this,o,r.clone(),t,l,this),F&&(S.offset(z(F).scale(P,O)),$||($=!0));this.setNodeAttributes(t,u);var st=!1;if(f){var p=this.getNodeBoundingRect(t);if(p.width>0&&p.height>0){var v=tt.transformRect(p,b).scale(1/P,1/O);for(i in f)o=f[i],s=this.getAttributeDefinition(i),F=s.offset.call(this,o,v,t,l,this),F&&(S.offset(z(F).scale(P,O)),st||(st=!0))}}(w!==void 0||$||st)&&(S.round(1),b.e=S.x,b.f=S.y,t.setAttribute("transform",tt.matrixToTransformString(b)))},getNodeScale:function(t,e){var r,n;if(e&&e.contains(t)){var i=e.scale();r=1/i.sx,n=1/i.sy}else r=1,n=1;return{sx:r,sy:n}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(t){var e=this.metrics;if(!e)return{};var r=tt.ensureId(t),n=e[r];return n||(n=e[r]={}),n},getNodeData:function(t){var e=this.nodeCache(t);return e.data||(e.data={}),e.data},getNodeBoundingRect:function(t){var e=this.nodeCache(t);return e.boundingRect===void 0&&(e.boundingRect=tt(t).getBBox()),new ft(e.boundingRect)},getNodeMatrix:function(t){let e=this.nodeCache(t);if(e.magnetMatrix===void 0){let{rotatableNode:r,el:n}=this,i;r&&r.contains(t)?i=r:i=n,e.magnetMatrix=tt(t).getTransformToElement(i)}return tt.createSVGMatrix(e.magnetMatrix)},getNodeShape:function(t){var e=this.nodeCache(t);return e.geometryShape===void 0&&(e.geometryShape=tt(t).toGeometryShape()),e.geometryShape.clone()},isNodeConnection:function(t){return this.model.isLink()&&(!t||t===this.el)},findNodesAttributes:function(t,e,r,n){var i,o,s,l,u={},h=[];for(var d in t)if(t.hasOwnProperty(d)&&(s=t[d],!!se(s))){var f=r[d]=this.findBySelector(d,e,n);for(i=0,o=f.length;i<o;i++){var C=f[i];l=tt.ensureId(C);var w=n&&n[d]===C,b=u[l];if(b){b.array||(h.push(l),b.array=!0,b.attributes=[b.attributes],b.selectedLength=[b.selectedLength]);var S=b.attributes,P=b.selectedLength;if(w)S.unshift(s),P.unshift(-1);else{var O=Ts(P,o);S.splice(O,0,s),P.splice(O,0,o)}}else u[l]={attributes:s,selectedLength:w?-1:o,node:C,array:!1}}}for(i=0,o=h.length;i<o;i++)l=h[i],s=u[l],s.attributes=me({},...s.attributes.reverse());return u},getEventTarget:function(t,e={}){let{target:r,type:n,clientX:i=0,clientY:o=0}=t;return e.fromPoint||n==="touchmove"||n==="touchend"||"pointerId"in t&&r.hasPointerCapture(t.pointerId)?document.elementFromPoint(i,o):r},updateDOMSubtreeAttributes:function(t,e,r){r||(r={}),r.rootBBox||(r.rootBBox=ft()),r.selectors||(r.selectors=this.selectors);var n={},i={},o=[],s=[],l,u,h,d,f,C=r.roAttributes,w=this.findNodesAttributes(C||e,t,n,r.selectors),b=C?this.findNodesAttributes(e,t,n,r.selectors):w;for(var S in w)if(d=w[S],h=d.attributes,u=d.node,f=this.processNodeAttributes(u,h),!f.set&&!f.position&&!f.offset)this.setNodeAttributes(u,f.normal);else{var P=b[S]&&b[S].attributes,O=P&&h.ref===void 0?P.ref:h.ref,F;if(O){if(F=(n[O]||this.findBySelector(O,t,r.selectors))[0],!F)throw new Error('dia.CellView: "'+O+'" reference does not exist.')}else F=null;if(l={node:u,refNode:F,processedAttributes:f,allAttributes:P},F){var J=s.findIndex(function($){return $.refNode===u});J>-1?s.splice(J,0,l):s.push(l)}else o.push(l)}o.push(...s);for(let $=0,st=o.length;$<st;$++){l=o[$],u=l.node,F=l.refNode;let p=F?tt.ensureId(F):"",v=i[p];v||(v=i[p]=F?tt(F).getBBox({target:Qy(u,F)}):r.rootBBox),C?(f=this.processNodeAttributes(u,l.allAttributes),this.mergeProcessedAttributes(f,l.processedAttributes)):f=l.processedAttributes,this.updateRelativeAttributes(u,f,v,r)}},mergeProcessedAttributes:function(t,e){t.set||(t.set={}),t.position||(t.position={}),t.offset||(t.offset={}),At(t.set,e.set),At(t.position,e.position),At(t.offset,e.offset);var r=t.normal&&t.normal.transform;r!==void 0&&e.normal&&(e.normal.transform=r),t.normal=e.normal},onMount(t){t||(this.mountTools(),We.mount(this))},onDetach(){this.unmountTools(),We.unmount(this)},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(t){var e=this._toolsView;return e?t?e.getName()===t:!0:!1},addTools:function(t){return this.removeTools(),t&&(this._toolsView=t,t.configure({relatedView:this}),t.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},unmountTools(){let t=this._toolsView;return t&&t.unmount(),this},mountTools(){let t=this._toolsView;return t&&!t.isMounted()&&t.mount(),this},updateTools:function(t){var e=this._toolsView;return e&&e.update(t),this},removeTools:function(){var t=this._toolsView;return t&&(t.remove(),this._toolsView=null),this},hideTools:function(){var t=this._toolsView;return t&&t.hide(),this},showTools:function(){var t=this._toolsView;return t&&t.show(),this},onToolEvent:function(t){switch(t){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools();break}},removeHighlighters:function(){We.remove(this)},updateHighlighters:function(t=!1){We.update(this,null,t)},transformHighlighters:function(){We.transform(this)},preventDefaultInteraction(t){this.eventData(t,{defaultInteractionPrevented:!0})},isDefaultInteractionPrevented(t){let{defaultInteractionPrevented:e=!1}=this.eventData(t);return e},pointerdblclick:function(t,e,r){this.notify("cell:pointerdblclick",t,e,r)},pointerclick:function(t,e,r){this.notify("cell:pointerclick",t,e,r)},contextmenu:function(t,e,r){this.notify("cell:contextmenu",t,e,r)},pointerdown:function(t,e,r){let{model:n}=this,{graph:i}=n;i&&(n.startBatch("pointer"),this.eventData(t,{graph:i})),this.notify("cell:pointerdown",t,e,r)},pointermove:function(t,e,r){this.notify("cell:pointermove",t,e,r)},pointerup:function(t,e,r){let{graph:n}=this.eventData(t);this.notify("cell:pointerup",t,e,r),n&&n.stopBatch("pointer",{cell:this.model})},mouseover:function(t){this.notify("cell:mouseover",t)},mouseout:function(t){this.notify("cell:mouseout",t)},mouseenter:function(t){this.notify("cell:mouseenter",t)},mouseleave:function(t){this.notify("cell:mouseleave",t)},mousewheel:function(t,e,r,n){this.notify("cell:mousewheel",t,e,r,n)},onevent:function(t,e,r,n){this.notify(e,t,r,n)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(t){let{paper:e,model:r}=this;if(e.isAsync()){if(r.isLink()){let o=r.getSourceElement();if(o){let l=e.findViewByModel(o);l&&(e.dumpView(l),e.checkViewVisibility(l))}let s=r.getTargetElement();if(s){let l=e.findViewByModel(s);l&&(e.dumpView(l),e.checkViewVisibility(l))}}e.dumpView(this),e.checkViewVisibility(this)}let n=this.getEventTarget(t,{fromPoint:!0}),i=e.findView(n);i!==this&&(this.mouseleave(t),i&&i.mouseenter(t))},setInteractivity:function(t){this.options.interactive=t}},{Flags:Jy,Highlighting:Io,addPresentationAttributes:function(t){return me({},he(this.prototype,"presentationAttributes"),t,function(e,r){if(!(!e||!r)&&(typeof e=="string"&&(e=[e]),typeof r=="string"&&(r=[r]),Array.isArray(e)&&Array.isArray(r)))return Lr(e.concat(r))})}});function Qy(t,e){let r=t;do{if(r.contains(e))return r;r=r.parentNode}while(r);return null}var $t={TOOLS:jt.Flags.TOOLS,UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},Ao={MOVE:"move",MAGNET:"magnet"},we=jt.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var t=jt.prototype.className.apply(this).split(" ");return t.push("element"),t.join(" ")},initialize:function(){jt.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[$t.UPDATE],position:[$t.TRANSLATE,$t.TOOLS],size:[$t.RESIZE,$t.PORTS,$t.TOOLS],angle:[$t.ROTATE,$t.TOOLS],markup:[$t.RENDER],ports:[$t.PORTS]},initFlag:[$t.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(t,e){let{useCSSSelectors:r}=Xe;this.hasFlag(t,$t.PORTS)&&(this._removePorts(),this._cleanPortsCache());let n=!1;if(this.hasFlag(t,$t.RENDER))this.render(),this.updateTools(e),this.updateHighlighters(!0),n=!0,t=this.removeFlag(t,[$t.RENDER,$t.UPDATE,$t.RESIZE,$t.TRANSLATE,$t.ROTATE,$t.PORTS,$t.TOOLS]);else{let i=!1;this.hasFlag(t,$t.RESIZE)&&(this.resize(e),i=!0,t=this.removeFlag(t,[$t.RESIZE,$t.UPDATE]),r&&(t=this.removeFlag(t,$t.PORTS))),this.hasFlag(t,$t.UPDATE)&&(this.update(this.model,null,e),t=this.removeFlag(t,$t.UPDATE),i=!0,r&&(t=this.removeFlag(t,$t.PORTS))),this.hasFlag(t,$t.TRANSLATE)&&(this.translate(),t=this.removeFlag(t,$t.TRANSLATE),n=!0),this.hasFlag(t,$t.ROTATE)&&(this.rotate(),t=this.removeFlag(t,$t.ROTATE),n=!0),this.hasFlag(t,$t.PORTS)&&(this._renderPorts(),i=!0,t=this.removeFlag(t,$t.PORTS)),i&&this.updateHighlighters(!1)}return n&&this.transformHighlighters(),this.hasFlag(t,$t.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,$t.TOOLS)),t},_initializePorts:function(){},update:function(t,e){this.cleanNodesCache();let{useCSSSelectors:r}=Xe;r&&this._removePorts();var n=this.model,i=n.attr();this.updateDOMSubtreeAttributes(this.el,i,{rootBBox:new ft(n.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:e===i?null:e}),r&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.ElementView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if(typeof e=="string")return this.renderStringMarkup(e);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el),r=this.selectors=e.selectors;this.rotatableNode=tt(r[this.rotatableSelector])||null,this.scalableNode=tt(r[this.scalableSelector])||null,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=this.vel;e.append(tt(t)),this.rotatableNode=e.findOne(".rotatable"),this.scalableNode=e.findOne(".scalable");var r=this.selectors={};r[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),Xe.useCSSSelectors||this._renderPorts(),this},resize:function(t){if(this.scalableNode)return this.sgResize(t);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode){this.rgRotate(),this.update();return}this.updateTransformation()},updateTransformation:function(){var t=this.getTranslateString(),e=this.getRotateString();e&&(t+=" "+e),this.vel.attr("transform",t)},getTranslateString:function(){var t=this.model.attributes.position;return"translate("+t.x+","+t.y+")"},getRotateString:function(){var t=this.model.attributes,e=t.angle;if(!e)return null;var r=t.size;return"rotate("+e+","+r.width/2+","+r.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(t){var e=this.model,r=e.angle(),n=e.size(),i=this.scalableNode,o=!1;i.node.getElementsByTagName("path").length>0&&(o=!0);var s=i.getBBox({recursive:o}),l=n.width/(s.width||1),u=n.height/(s.height||1);i.attr("transform","scale("+l+","+u+")");var h=this.rotatableNode,d=h&&h.attr("transform");if(d){h.attr("transform",d+" rotate("+-r+","+n.width/2+","+n.height/2+")");var f=i.getBBox({target:this.paper.cells});e.set("position",{x:f.x,y:f.y},At({updateHandled:!0},t)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(t={}){let e=t.model||this.model,n=(t.paper||this.paper).model,i=t.initialZIndices={},o=e.getEmbeddedCells({deep:!0}),s=n.getConnectedLinks(e,{deep:!0,includeEnclosed:!0});[e,...o,...s].forEach(h=>i[h.id]=h.attributes.z),e.startBatch("to-front"),e.toFront({deep:!0,ui:!0});let l=n.getElements().reduce((h,d)=>Math.max(h,d.attributes.z||0),0);s.forEach(h=>{h.attributes.z<=l&&h.set("z",l+1,{ui:!0})}),e.stopBatch("to-front");let u=e.parent();u?(n.getCell(u).unembed(e,{ui:!0}),t.initialParentId=u):t.initialParentId=null},processEmbedding:function(t={},e,r,n){let i=t.model||this.model,o=t.paper||this.paper,s=o.model,{findParentBy:l,frontParentOnly:u,validateEmbedding:h}=o.options,d;qt(l)?d=kt(l.call(s,this,e,r,n)):l==="pointer"?d=kt(s.findModelsFromPoint({x:r,y:n})):d=s.findModelsUnderElement(i,{searchBy:l}),d=d.filter(w=>w instanceof er&&i.id!==w.id&&!w.isEmbeddedIn(i)),u&&(d=d.slice(-1));let f=null,C=t.candidateEmbedView;for(let w=d.length-1;w>=0;w--){let b=d[w];if(C&&C.model.id==b.id){f=C;break}else{let S=b.findView(o);if(!qt(h)||h.call(o,this,S)){f=S;break}}}f&&f!=C&&(this.clearEmbedding(t),t.candidateEmbedView=f.highlight(f.findProxyNode(null,"container"),{embedding:!0})),!f&&C&&this.clearEmbedding(t)},clearEmbedding:function(t){t||(t={});var e=t.candidateEmbedView;e&&(e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null)},finalizeEmbedding:function(t={}){let e=t.candidateEmbedView,r=t.model||this.model,n=t.paper||this.paper;if(e)e.model.embed(r,{ui:!0}),e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null;else{let{validateUnembedding:i}=n.options,{initialParentId:o}=t;if(o&&typeof i=="function"&&!i.call(n,this)){this._disallowUnembed(t);return}}n.model.getConnectedLinks(r,{deep:!0}).forEach(i=>{i.reparent({ui:!0})})},_disallowUnembed:function(t){let{model:e,whenNotAllowed:r="revert"}=t,n=e||this.model,o=(t.paper||this.paper).model;switch(r){case"remove":{n.remove({ui:!0});break}case"revert":{let{initialParentId:s,initialPosition:l,initialZIndices:u}=t;if(l){let{x:d,y:f}=l;n.position(d,f,{deep:!0,ui:!0})}u&&Object.keys(u).forEach(d=>{let f=o.getCell(d);f&&f.set("z",u[d],{ui:!0})});let h=o.getCell(s);h&&h.embed(n,{ui:!0});break}}},getDelegatedView:function(){for(var t=this,e=t.model,r=t.paper;t&&!e.isLink();){if(!e.isEmbedded()||t.can("stopDelegation"))return t;e=e.getParentCell(),t=r.findViewByModel(e)}return null},findProxyNode:function(t,e){t||(t=this.el);let r=t.getAttribute(`${e}-selector`);if(r){let n=this.findAttribute("port",t);if(n){let i=this.findPortNode(n,r);if(i)return i}else{let[i]=this.findBySelector(r);if(i)return i}}return t},notifyPointerdown(t,e,r){jt.prototype.pointerdown.call(this,t,e,r),this.notify("element:pointerdown",t,e,r)},notifyPointermove(t,e,r){jt.prototype.pointermove.call(this,t,e,r),this.notify("element:pointermove",t,e,r)},notifyPointerup(t,e,r){this.notify("element:pointerup",t,e,r),jt.prototype.pointerup.call(this,t,e,r)},pointerdblclick:function(t,e,r){jt.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",t,e,r)},pointerclick:function(t,e,r){jt.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",t,e,r)},contextmenu:function(t,e,r){jt.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",t,e,r)},pointerdown:function(t,e,r){this.notifyPointerdown(t,e,r),this.dragStart(t,e,r)},pointermove:function(t,e,r){let n=this.eventData(t),{targetMagnet:i,action:o,delegatedView:s}=n;switch(i&&this.magnetpointermove(t,i,e,r),o){case Ao.MAGNET:this.dragMagnet(t,e,r);break;case Ao.MOVE:(s||this).drag(t,e,r);default:if(n.preventPointerEvents)break;this.notifyPointermove(t,e,r);break}this.eventData(t,n)},pointerup:function(t,e,r){let n=this.eventData(t),{targetMagnet:i,action:o,delegatedView:s}=n;switch(i&&this.magnetpointerup(t,i,e,r),o){case Ao.MAGNET:this.dragMagnetEnd(t,e,r);break;case Ao.MOVE:(s||this).dragEnd(t,e,r);default:if(n.preventPointerEvents)break;this.notifyPointerup(t,e,r)}i&&this.magnetpointerclick(t,i,e,r),this.checkMouseleave(t)},mouseover:function(t){jt.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",t)},mouseout:function(t){jt.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",t)},mouseenter:function(t){jt.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",t)},mouseleave:function(t){jt.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",t)},mousewheel:function(t,e,r,n){jt.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",t,e,r,n)},onmagnet:function(t,e,r){let{currentTarget:n}=t;this.magnetpointerdown(t,n,e,r),this.eventData(t,{targetMagnet:n}),this.dragMagnetStart(t,e,r)},magnetpointerdown:function(t,e,r,n){this.notify("element:magnet:pointerdown",t,e,r,n)},magnetpointermove:function(t,e,r,n){this.notify("element:magnet:pointermove",t,e,r,n)},magnetpointerup:function(t,e,r,n){this.notify("element:magnet:pointerup",t,e,r,n)},magnetpointerdblclick:function(t,e,r,n){this.notify("element:magnet:pointerdblclick",t,e,r,n)},magnetcontextmenu:function(t,e,r,n){this.notify("element:magnet:contextmenu",t,e,r,n)},dragStart:function(t,e,r){if(this.isDefaultInteractionPrevented(t))return;var n=this.getDelegatedView();if(!n||!n.can("elementMove"))return;this.eventData(t,{action:Ao.MOVE,delegatedView:n});let i=n.model.position();n.eventData(t,{initialPosition:i,pointerOffset:i.difference(e,r),restrictedArea:this.paper.getRestrictedArea(n,e,r)})},dragMagnetStart:function(t,e,r){let{paper:n}=this,i=t.isPropagationStopped();if(i&&this.eventData(t,{preventPointerEvents:!0}),this.isDefaultInteractionPrevented(t)||!this.can("addLinkFromMagnet"))return;let{targetMagnet:o=t.currentTarget}=this.eventData(t);if(t.stopPropagation(),!n.options.validateMagnet.call(n,this,o,t)){i?this.dragStart(t,e,r):this.pointerdown(t,e,r);return}n.options.magnetThreshold<=0&&this.dragLinkStart(t,o,e,r),this.eventData(t,{action:Ao.MAGNET})},drag:function(t,e,r){var n=this.paper,i=n.options.gridSize,o=this.model,s=this.eventData(t),{pointerOffset:l,restrictedArea:u,embedding:h}=s,d=sn(e+l.x,i),f=sn(r+l.y,i);o.position(d,f,{restrictedArea:u,deep:!0,ui:!0}),n.options.embeddingMode&&(h||(this.prepareEmbedding(s),h=!0),this.processEmbedding(s,t,e,r)),this.eventData(t,{embedding:h})},dragMagnet:function(t,e,r){this.dragLink(t,e,r)},dragEnd:function(t,e,r){var n=this.eventData(t);n.embedding&&this.finalizeEmbedding(n)},dragMagnetEnd:function(t,e,r){this.dragLinkEnd(t,e,r)},magnetpointerclick:function(t,e,r,n){var i=this.paper;i.eventData(t).mousemoved>i.options.clickThreshold||this.notify("element:magnet:pointerclick",t,e,r,n)}},{Flags:$t});At(we.prototype,bv);var ru={};Me(ru,{manhattan:()=>ql,metro:()=>pC,normal:()=>Ky,oneSide:()=>qy,orthogonal:()=>Ql,rightAngle:()=>xC});var Ky=function(t,e,r){return t};var qy=function(t,e,r){var n=e.side||"bottom",i=Er(e.padding||40),o=r.sourceBBox,s=r.targetBBox,l=o.center(),u=s.center(),h,d,f;switch(n){case"bottom":f=1,h="y",d="height";break;case"top":f=-1,h="y",d="height";break;case"left":f=-1,h="x",d="width";break;case"right":f=1,h="x",d="width";break;default:throw new Error("Router: invalid side")}return l[h]+=f*(o[d]/2+i[n]),u[h]+=f*(s[d]/2+i[n]),f*(l[h]-u[h])>0?u[h]=l[h]:l[h]=u[h],[l].concat(t,u)};var $y={N:"S",S:"N",E:"W",W:"E"},tC={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function Hl(t,e,r){var n=new z(t.x,e.y);return r.containsPoint(n)&&(n=new z(e.x,t.y)),n}function Ah(t,e){return t[e==="W"||e==="E"?"width":"height"]}function dr(t,e){return t.x===e.x?t.y>e.y?"N":"S":t.y===e.y?t.x>e.x?"W":"E":null}function Vl(t){return new ft(t.x,t.y,0,0)}function Jl(t){var e=Er(t.padding||t.elementPadding||20);return{x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}function Mv(t,e){return t.sourceBBox.clone().moveAndExpand(Jl(e))}function Tv(t,e){return t.targetBBox.clone().moveAndExpand(Jl(e))}function eC(t,e){if(t.sourceAnchor)return t.sourceAnchor;var r=Mv(t,e);return r.center()}function rC(t,e){if(t.targetAnchor)return t.targetAnchor;var r=Tv(t,e);return r.center()}function Sv(t,e,r){var n=new z(t.x,e.y),i=new z(e.x,t.y),o=dr(t,n),s=dr(t,i),l=$y[r],u=o===r||o!==l&&(s===l||s!==r)?n:i;return{points:[u],direction:dr(u,e)}}function Xl(t,e,r){var n=Hl(t,e,r);return{points:[n],direction:dr(n,e)}}function nC(t,e,r,n){var i={},o=[new z(t.x,e.y),new z(e.x,t.y)],s=o.filter(function(f){return!r.containsPoint(f)}),l=s.filter(function(f){return dr(f,t)!==n}),u;if(l.length>0)u=l.filter(function(f){return dr(t,f)===n}).pop(),u=u||l[0],i.points=[u],i.direction=dr(u,e);else{u=Ps(o,s)[0];var h=new z(e).move(u,-Ah(r,n)/2),d=Hl(h,t,r);i.points=[d,h],i.direction=dr(h,e)}return i}function iC(t,e,r,n){var i=Xl(e,t,n),o=i.points[0];if(r.containsPoint(o)){i=Xl(t,e,r);var s=i.points[0];if(n.containsPoint(s)){var l=new z(t).move(s,-Ah(r,dr(t,s))/2),u=new z(e).move(o,-Ah(n,dr(e,o))/2),h=new pt(l,u).midpoint(),d=Xl(t,h,r),f=Sv(h,e,d.direction);i.points=[d.points[0],f.points[0]],i.direction=f.direction}}return i}function Ih(t,e,r,n,i){var o={},s=r.union(n).inflate(1),l=s.center().distance(e)>s.center().distance(t),u=l?e:t,h=l?t:e,d,f,C;return i?(d=z.fromPolar(s.width+s.height,tC[i],u),d=s.pointNearestToPoint(d).move(d,-1)):d=s.pointNearestToPoint(u).move(u,1),f=Hl(d,h,s),d.round().equals(f.round())?(f=z.fromPolar(s.width+s.height,Le(d.theta(u))+Math.PI/2,h),f=s.pointNearestToPoint(f).move(h,1).round(),C=Hl(d,f,s),o.points=l?[f,C,d]:[d,C,f]):o.points=l?[f,d]:[d,f],o.direction=dr(l?d:f,e),o}function Ql(t,e,r){var n=Mv(r,e),i=Tv(r,e),o=eC(r,e),s=rC(r,e);n=n.union(Vl(o)),i=i.union(Vl(s)),t=kt(t).map(z),t.unshift(o),t.push(s);for(var l,u=[],h=0,d=t.length-1;h<d;h++){var f=null,C=t[h],w=t[h+1],b=!!dr(C,w);if(h===0)h+1===d?n.intersect(i.clone().inflate(1))?f=Ih(C,w,n,i):b||(f=iC(C,w,n,i)):n.containsPoint(w)?f=Ih(C,w,n,Vl(w).moveAndExpand(Jl(e))):b||(f=Xl(C,w,n));else if(h+1===d){var S=b&&dr(w,C)===l;i.containsPoint(C)||S?f=Ih(C,w,Vl(C).moveAndExpand(Jl(e)),i,l):b||(f=nC(C,w,i,l))}else b||(f=Sv(C,w,l));f?(Array.prototype.push.apply(u,f.points),l=f.direction):l=dr(C,w),h+1<d&&u.push(w)}return u}var Ov={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var t=this.step,e=this.cost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:-t,offsetY:0,cost:e},{offsetX:0,offsetY:t,cost:e},{offsetX:0,offsetY:-t,cost:e}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var t=this.step;return{x:-t,y:-t,width:2*t,height:2*t}},isPointObstacle:null,fallbackRouter:function(t,e,r){if(!qt(Ql))throw new Error("Manhattan requires the orthogonal router as default fallback.");return Ql(t,At({},Ov,e),r)},fallbackRoute:function(t,e,r){return null},draggingRoute:null};function xh(t){this.map={},this.options=t,this.mapGridSize=100}xh.prototype.build=function(t,e){var r=this.options,n=kt(r.excludeEnds).reduce(function(u,h){var d=e.get(h);if(d){var f=t.getCell(d.id);f&&u.push(f)}return u},[]),i=[],o=t.getCell(e.get("source").id);o&&(i=po(i,o.getAncestors().map(function(u){return u.id})));var s=t.getCell(e.get("target").id);s&&(i=po(i,s.getAncestors().map(function(u){return u.id})));var l=this.mapGridSize;return t.getElements().reduce(function(u,h){var d=kt(r.excludeTypes).includes(h.get("type")),f=n.find(function($){return $.id===h.id}),C=i.includes(h.id),w=d||f||C;if(!w)for(var b=h.getBBox().moveAndExpand(r.paddingBox),S=b.origin().snapToGrid(l),P=b.corner().snapToGrid(l),O=S.x;O<=P.x;O+=l)for(var F=S.y;F<=P.y;F+=l){var J=O+"@"+F;u[J]=u[J]||[],u[J].push(b)}return u},this.map),this};xh.prototype.isPointAccessible=function(t){var e=t.clone().snapToGrid(this.mapGridSize).toString();return kt(this.map[e]).every(function(r){return!r.containsPoint(t)})};function xi(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}xi.prototype.add=function(t,e){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=this.OPEN,this.values[t]=e;var r=Ts(this.items,t,(function(n){return this.values[n]}).bind(this));this.items.splice(r,0,t)};xi.prototype.remove=function(t){this.hash[t]=this.CLOSE};xi.prototype.isOpen=function(t){return this.hash[t]===this.OPEN};xi.prototype.isClose=function(t){return this.hash[t]===this.CLOSE};xi.prototype.isEmpty=function(){return this.items.length===0};xi.prototype.pop=function(){var t=this.items.shift();return this.remove(t),t};function Ev(t,e){return e&&e.paddingBox?t.sourceBBox.clone().moveAndExpand(e.paddingBox):t.sourceBBox.clone()}function zv(t,e){return e&&e.paddingBox?t.targetBBox.clone().moveAndExpand(e.paddingBox):t.targetBBox.clone()}function Gv(t,e){if(t.sourceAnchor)return t.sourceAnchor;var r=Ev(t,e);return r.center()}function oC(t,e){if(t.targetAnchor)return t.targetAnchor;var r=zv(t,e);return r.center()}function yh(t,e,r,n,i){var o=360/r,s=t.theta(sC(t,e,n,i)),l=Be(s+o/2);return o*Math.floor(l/o)}function sC(t,e,r,n){var i=n.step,o=e.x-t.x,s=e.y-t.y,l=o/r.x,u=s/r.y,h=l*i,d=u*i;return new z(t.x+h,t.y+d)}function Pv(t,e){var r=Math.abs(t-e);return r>180?360-r:r}function aC(t,e,r){var n=r.step;kt(r.directions).forEach(function(i){i.gridOffsetX=i.offsetX/n*e.x,i.gridOffsetY=i.offsetY/n*e.y})}function lC(t,e,r){return{source:e.clone(),x:Dv(r.x-e.x,t),y:Dv(r.y-e.y,t)}}function Dv(t,e){if(!t)return e;var r=Math.abs(t),n=Math.round(r/e);if(!n)return r;var i=n*e,o=r-i,s=o/n;return e+s}function uC(t,e){var r=e.source,n=sn(t.x-r.x,e.x)+r.x,i=sn(t.y-r.y,e.y)+r.y;return new z(n,i)}function js(t,e){return t.round(e)}function Kl(t,e,r){return js(uC(t.clone(),e),r)}function Ws(t){return t.clone().toString()}function Ch(t){return new z(t.x===0?0:Math.abs(t.x)/t.x,t.y===0?0:Math.abs(t.y)/t.y)}function cC(t,e,r,n,i,o,s){for(var l=[],u=Ch(i.difference(r)),h=Ws(r),d=t[h],f;d;){f=e[h];var C=Ch(f.difference(d));C.equals(u)||(l.unshift(f),u=C),h=Ws(d),d=t[h]}var w=e[h],b=Ch(w.difference(n));return b.equals(u)||l.unshift(w),l}function Lv(t,e){for(var r=1/0,n=0,i=e.length;n<i;n++){var o=t.manhattanDistance(e[n]);o<r&&(r=o)}return r}function kv(t,e,r,n,i){var o=i.precision,s=i.directionMap,l=t.difference(e.center()),u=Wt(s)?Object.keys(s):[],h=kt(r),d=u.reduce(function(f,C){if(h.includes(C)){for(var w=s[C],b=new z(t.x+w.x*(Math.abs(l.x)+e.width),t.y+w.y*(Math.abs(l.y)+e.height)),S=new pt(t,b),P=S.intersect(e)||[],O=P.length,F,J=null,$=0;$<O;$++){var st=P[$],p=t.squaredDistance(st);(F===void 0||p>F)&&(F=p,J=st)}if(J){var v=Kl(J,n,o);e.containsPoint(v)&&(v=Kl(v.offset(w.x*n.x,w.y*n.y),n,o)),f.push(v)}}return f},[]);return e.containsPoint(t)||d.push(Kl(t,n,o)),d}function fC(t,e,r,n){var i=n.precision,o,s;t instanceof ft?o=js(Gv(this,n).clone(),i):o=js(t.clone(),i),e instanceof ft?s=js(oC(this,n).clone(),i):s=js(e.clone(),i);var l=lC(n.step,o,s),u,h,d,f;if(t instanceof ft?(u=o,d=kv(u,t,n.startDirections,l,n)):(u=o,d=[u]),e instanceof ft?(h=s,f=kv(s,e,n.endDirections,l,n)):(h=s,f=[h]),d=d.filter(Tt=>!r(Tt)),f=f.filter(Tt=>!r(Tt)),d.length>0&&f.length>0){for(var C=new xi,w={},b={},S={},P=0,O=d.length;P<O;P++){var F=d[P],J=Ws(F);C.add(J,Lv(F,f)),w[J]=F,S[J]=0}var $=n.previousDirectionAngle,st=$===void 0,p,v,x=n.directions;aC(x,l,n);for(var M=x.length,D=kt(f).reduce(function(Tt,te){var A=Ws(te);return Tt.push(A),Tt},[]),R=n.maximumLoops;!C.isEmpty()&&R>0;){var Z=C.pop(),_=w[Z],ut=b[Z],gt=S[Z],Y=ut===void 0,K=_.equals(u),X;Y?st?K?X=null:X=yh(u,_,M,l,n):X=$:X=yh(ut,_,M,l,n);var Q=d.length===f.length;if(Q){for(var Pt=0;Pt<d.length;Pt++)if(!d[Pt].equals(f[Pt])){Q=!1;break}}var Nt=Y&&Q;if(!Nt&&D.indexOf(Z)>=0)return n.previousDirectionAngle=X,cC(b,w,_,u,h,l,n);for(P=0;P<M;P++){p=x[P];var oe=p.angle;if(v=Pv(X,oe),!(!(st&&K)&&v>n.maxAllowedDirectionChange)){var de=Kl(_.clone().offset(p.gridOffsetX,p.gridOffsetY),l,i),wt=Ws(de);if(!(C.isClose(wt)||r(de))){if(D.indexOf(wt)>=0){var Mt=de.equals(h);if(!Mt){var it=yh(de,h,M,l,n),nt=Pv(oe,it);if(nt>n.maxAllowedDirectionChange)continue}}var dt=p.cost,Gt=K?0:n.penalties[v],Ht=gt+dt+Gt;(!C.isOpen(wt)||Ht<S[wt])&&(w[wt]=de,b[wt]=_,S[wt]=Ht,C.add(wt,Ht+Lv(de,f)))}}}R--}}return n.fallbackRoute.call(this,u,h,n)}function hC(t){if(t.directions=he(t,"directions"),t.penalties=he(t,"penalties"),t.paddingBox=he(t,"paddingBox"),t.padding=he(t,"padding"),t.padding){var e=Er(t.padding);t.paddingBox={x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}kt(t.directions).forEach(function(r){var n=new z(0,0),i=new z(r.offsetX,r.offsetY);r.angle=Be(n.theta(i))})}function dC(t,e,r){hC(e),r.options.perpendicular=!!e.perpendicular;var n=Ev(r,e),i=zv(r,e),o=Gv(r,e);let s;if(typeof e.isPointObstacle=="function")s=e.isPointObstacle;else{let J=new xh(e);J.build(r.paper.model,r.model),s=$=>!J.isPointAccessible($)}for(var l=kt(t).map(z),u=[],h=o,d,f,C=0,w=l.length;C<=w;C++){var b=null;if(f=d||n,d=l[C],!d){d=i;var S=!r.model.get("source").id||!r.model.get("target").id;if(S&&qt(e.draggingRoute)){var P=f===n?o:f,O=d.origin();b=e.draggingRoute.call(r,P,O,e)}}if(b=b||fC.call(r,f,d,s,e),b===null)return e.fallbackRouter(t,e,r);var F=b[0];F&&F.equals(h)&&b.shift(),h=b[b.length-1]||h,Array.prototype.push.apply(u,b)}return u}var ql=function(t,e,r){return dC(t,At({},Ov,e),r)};var gC={maxAllowedDirectionChange:45,diagonalCost:function(){var t=this.step;return Math.ceil(Math.sqrt(t*t<<1))},directions:function(){var t=this.step,e=this.cost(),r=this.diagonalCost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:t,offsetY:t,cost:r},{offsetX:0,offsetY:t,cost:e},{offsetX:-t,offsetY:t,cost:r},{offsetX:-t,offsetY:0,cost:e},{offsetX:-t,offsetY:-t,cost:r},{offsetX:0,offsetY:-t,cost:e},{offsetX:t,offsetY:-t,cost:r}]},fallbackRoute:function(t,e,r){var n=t.theta(e),i=[],o={x:e.x,y:t.y},s={x:t.x,y:e.y};if(n%180>90){var l=o;o=s,s=l}var u=n%90<45?o:s,h=new pt(t,u),d=90*Math.ceil(n/90),f=z.fromPolar(h.squaredLength(),Le(d+135),u),C=new pt(e,f),w=h.intersection(C),b=w||e,S=w?b:t,P=360/r.directions.length,O=S.theta(e),F=Be(O+P/2),J=P*Math.floor(F/P);return r.previousDirectionAngle=J,b&&i.push(b.round()),i.push(e),i}},pC=function(t,e,r){if(!qt(ql))throw new Error("Metro requires the manhattan router.");return ql(t,At({},gC,e),r)};var ct={AUTO:"auto",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",ANCHOR_SIDE:"anchor-side",MAGNET_SIDE:"magnet-side"},Bv=[ct.LEFT,ct.RIGHT,ct.TOP,ct.BOTTOM],yo={[ct.LEFT]:ct.RIGHT,[ct.RIGHT]:ct.LEFT,[ct.TOP]:ct.BOTTOM,[ct.BOTTOM]:ct.TOP},mC=[ct.TOP,ct.BOTTOM],$l={0:ct.RIGHT,180:ct.LEFT,270:ct.TOP,90:ct.BOTTOM};function Ys(t){return t.angle()}function tu(t){return new Qt(t).simplify({threshold:1}).points}function eu(t,e){let{point:r,x0:n,y0:i,view:o,bbox:s,direction:l}=t,{point:u,x0:h,y0:d,view:f,bbox:C,direction:w}=e,b;if(o)o.model.isLink()?b=Rv(u,r,o):l===ct.ANCHOR_SIDE?b=s.sideNearestToPoint(r):l===ct.MAGNET_SIDE?b=o.model.getBBox().sideNearestToPoint(r):b=l;else{let P=new ft(n,i,0,0);b=Bv.includes(l)?l:P.sideNearestToPoint(u)}let S;if(f)f.model.isLink()?S=Rv(r,u,f):w===ct.ANCHOR_SIDE?S=C.sideNearestToPoint(u):w===ct.MAGNET_SIDE?S=f.model.getBBox().sideNearestToPoint(u):S=w;else{let P=new ft(h,d,0,0);S=Bv.includes(w)?w:P.sideNearestToPoint(r)}return[b,S]}function vC(t,e,r){let{x0:n,y0:i,width:o,height:s,point:l,margin:u}=t,h=n+o,d=i+s,f=n-u,C=h+u,w=i-u,{x:b}=l,{x0:S,y0:P}=e;return S===b&&P<i?ct.BOTTOM:S<b&&P<w?ct.RIGHT:S>b&&P<w?ct.LEFT:S<f&&P>=i||S>C&&P>=i?ct.TOP:S>=f&&S<=b&&P>d||S<=C&&S>=b&&P>d?r.point.x<S?ct.RIGHT:ct.LEFT:ct.TOP}function IC(t,e,r){let{x0:n,y0:i,width:o,height:s,point:l,margin:u}=t,h=n+o,d=i+s,f=n-u,C=h+u,w=d+u,{x:b}=l,{x0:S,y0:P}=e;return S===b&&P>d?ct.TOP:S<b&&P>w?ct.RIGHT:S>b&&P>w?ct.LEFT:S<f&&P<=d||S>C&&P<=d?ct.BOTTOM:S>=f&&S<=b&&P<i||S<=C&&S>=b&&P<i?r.point.x<S?ct.RIGHT:ct.LEFT:ct.BOTTOM}function AC(t,e,r){let{y0:n,x0:i,width:o,height:s,point:l,margin:u}=t,h=i+o,d=n+s,f=i-u,C=n-u,w=d+u,{x:b,y:S}=l,{x0:P,y0:O}=e;return P<b&&O===S?ct.RIGHT:P<=f&&O<S?ct.BOTTOM:P<=f&&O>S?ct.TOP:P>=i&&O<=C||P>=i&&O>=w?ct.LEFT:P>h&&O>=C&&O<=S||P>h&&O<=w&&O>=S?r.point.y<O?ct.BOTTOM:ct.TOP:ct.LEFT}function yC(t,e,r){let{y0:n,x0:i,width:o,height:s,point:l,margin:u}=t,h=i+o,d=n+s,f=h+u,C=n-u,w=d+u,{x:b,y:S}=l,{x0:P,y0:O}=e;return P>b&&O===S?ct.LEFT:P>=f&&O<S?ct.BOTTOM:P>=f&&O>S?ct.TOP:P<=h&&O<=C||P<=h&&O>=w?ct.RIGHT:P<i&&O>=C&&O<=S||P<i&&O<=w&&O>=S?r.point.y<O?ct.BOTTOM:ct.TOP:ct.RIGHT}function CC(t,e,r){let[n]=eu(t,e);switch(n){case ct.TOP:return vC(t,e,r);case ct.RIGHT:return yC(t,e,r);case ct.BOTTOM:return IC(t,e,r);case ct.LEFT:return AC(t,e,r)}}function Rv(t,e,r){let n=r.getTangentAtLength(r.getClosestPointLength(e)),i=Math.round(Ys(n)/90)*90;if(i%180===0&&t.y===e.y)return t.x<e.x?ct.LEFT:ct.RIGHT;if(t.x===e.x)return t.y<e.y?ct.TOP:ct.BOTTOM;switch(i){case 0:case 180:case 360:return t.y<e.y?ct.TOP:ct.BOTTOM;case 90:case 270:return t.x<e.x?ct.LEFT:ct.RIGHT}}function Zv(t,e,r,n,i,o,s){n===ct.AUTO&&(n=i?ct.MAGNET_SIDE:ct.ANCHOR_SIDE);let l=t&&t.model.isElement(),{x:u,y:h,width:d=0,height:f=0}=l?ft.fromRectUnion(r,t.model.getBBox()):o;return{point:e,x0:u,y0:h,view:t,bbox:r,width:d,height:f,direction:n,margin:l?s:0}}function wh({x:t,y:e}){let r=new z(t,e);return{point:r,x0:r.x,y0:r.y,view:null,bbox:new ft(t,e,0,0),width:0,height:0,direction:null,margin:0}}function jv(t,e,r){let n=e.point.clone(),{x0:i,y0:o,width:s,height:l}=e;switch(t){case"left":n.x=i-r;break;case"right":n.x=i+s+r;break;case"top":n.y=o-r;break;case"bottom":n.y=o+l+r;break}return n}function Fn(t,e){let{point:r,x0:n,y0:i,view:o,width:s,height:l,margin:u}=t,{point:h,x0:d,y0:f,width:C,height:w,margin:b}=e,S=d+C,P=f+w,O=n+s,F=i+l,J=o&&o.model.isElement(),$=n-u,st=O+u,p=i-u,v=F+u,x=d-b,M=S+b,D=f-b,R=P+b,[Z,_]=eu(t,e),ut=jv(Z,{point:r,x0:n,y0:i,width:s,height:l},u),gt=jv(_,{point:h,x0:d,y0:f,width:C,height:w},b),{x:Y,y:K}=ut,{x:X,y:Q}=gt,Pt=(d+S)/2,Nt=(f+P)/2,oe=(n+O)/2,de=(i+F)/2,wt=(oe<Pt?O+d:S+n)/2,Mt=(de<Nt?F+f:P+i)/2;if(Z==="left"&&_==="right"){if($<=M){let nt=Mt;return O<=d&&(P>=p&&Q<K?nt=Math.min(D,p):f<=v&&Q>=K&&(nt=Math.max(R,v))),[{x:Y,y:K},{x:Y,y:nt},{x:X,y:nt},{x:X,y:Q}]}let it=(Y+X)/2;return[{x:it,y:K},{x:it,y:Q}]}else if(Z==="right"&&_==="left"){if(st>=x){let nt=Mt;return Y>S&&(P>=p&&Q<K?nt=Math.min(D,p):f<=v&&Q>=K&&(nt=Math.max(R,v))),[{x:Y,y:K},{x:Y,y:nt},{x:X,y:nt},{x:X,y:Q}]}let it=(Y+X)/2;return[{x:it,y:K},{x:it,y:Q}]}else if(Z==="top"&&_==="bottom"){if(K<Q){let nt=wt,dt=K;return K<f&&(S>=$&&X<Y?nt=Math.min(x,$):d<=st&&X>=Y&&(nt=Math.max(M,st))),[{x:Y,y:dt},{x:nt,y:dt},{x:nt,y:Q},{x:X,y:Q}]}let it=(K+Q)/2;return[{x:Y,y:it},{x:X,y:it}]}else if(Z==="bottom"&&_==="top"){if(K-u>Q){let nt=wt,dt=K;return K>P&&(S>=$&&X<Y?nt=Math.min(x,$):d<=st&&X>=Y&&(nt=Math.max(M,st))),[{x:Y,y:dt},{x:nt,y:dt},{x:nt,y:Q},{x:X,y:Q}]}let it=(K+Q)/2;return[{x:Y,y:it},{x:X,y:it}]}else if(Z==="top"&&_==="top"){let it,nt=Math.min((F+f)/2,Q),dt=Math.min((i+P)/2,K);if(Q<K){if(Y>=M||Y<=x)return[{x:Y,y:Math.min(K,Q)},{x:X,y:Math.min(K,Q)}];X>Y?it=Math.min(Y,x):it=Math.max(Y,M)}else{if(X>=st||X<=$)return[{x:Y,y:Math.min(K,Q)},{x:X,y:Math.min(K,Q)}];X>=Y?it=Math.max(X,st):it=Math.min(X,$)}return[{x:Y,y:dt},{x:it,y:dt},{x:it,y:nt},{x:X,y:nt}]}else if(Z==="bottom"&&_==="bottom"){let it,nt=Math.max((i+P)/2,Q),dt=Math.max((F+f)/2,K);if(Q>K){if(Y>=M||Y<=x)return[{x:Y,y:Math.max(K,Q)},{x:X,y:Math.max(K,Q)}];X>Y?it=Math.min(Y,x):it=Math.max(Y,M)}else{if(X>=st||X<=$)return[{x:Y,y:Math.max(K,Q)},{x:X,y:Math.max(K,Q)}];X>=Y?it=Math.max(X,st):it=Math.min(X,$)}return[{x:Y,y:dt},{x:it,y:dt},{x:it,y:nt},{x:X,y:nt}]}else if(Z==="left"&&_==="left"){let it,nt=Math.min((O+d)/2,X),dt=Math.min((n+S)/2,Y);return X>Y?Q<=K?it=Math.min(p,Q):it=Math.max(v,Q):Q>=K?it=Math.min(D,K):it=Math.max(R,K),[{x:dt,y:K},{x:dt,y:it},{x:nt,y:it},{x:nt,y:Q}]}else if(Z==="right"&&_==="right"){let it,nt=Math.max((n+S)/2,X),dt=Math.max((O+d)/2,Y);return X<Y?Q<=K?it=Math.min(p,Q):it=Math.max(v,Q):Q>=K?it=Math.min(D,K):it=Math.max(R,K),[{x:dt,y:K},{x:dt,y:it},{x:nt,y:it},{x:nt,y:Q}]}else if(Z==="top"&&_==="right"){if(K>Q){if(Y<X){let nt=Mt;return(nt>Nt||!J)&&nt<R&&Y<d&&(nt=D),[{x:Y,y:nt},{x:X,y:nt},{x:X,y:Q}]}return[{x:Y,y:Q}]}let it=Math.max(wt,M);if(X<Y&&Q>i&&Q<F)return[{x:Y,y:K},{x:it,y:K},{x:it,y:Q}];if(it>$&&Q>i||d>O){let nt=Math.min(i-u,f-b),dt=Math.max(O+u,S+b);return[{x:Y,y:nt},{x:dt,y:nt},{x:dt,y:Q}]}return[{x:Y,y:K},{x:Math.max(it,X),y:K},{x:Math.max(it,X),y:Q}]}else if(Z==="top"&&_==="left"){if(K>Q){if(Y>X){let nt=Mt;return(nt>Nt||!J)&&nt<R&&Y>S&&(nt=D),[{x:Y,y:nt},{x:X,y:nt},{x:X,y:Q}]}return[{x:Y,y:Q}]}let it=Math.min(x,wt);if(Y<X&&F>=Q)return[{x:Y,y:K},{x:it,y:K},{x:it,y:Q}];if(it<st&&K<P){let nt=Math.min(p,D),dt=Math.min($,x);return[{x:Y,y:nt},{x:dt,y:nt},{x:dt,y:Q}]}return[{x:Y,y:K},{x:it,y:K},{x:it,y:Q}]}else if(Z==="bottom"&&_==="right"){if(K<Q){if(Y<X){let nt=Mt;return(nt<Nt||!J)&&nt>D&&Y<d&&(nt=R),[{x:Y,y:nt},{x:X,y:nt},{x:X,y:Q}]}return[{x:Y,y:Q}]}else if(n<X){let nt=Math.max(v,R),dt=Math.max(st,M);return[{x:Y,y:nt},{x:dt,y:nt},{x:dt,y:Q}]}let it=wt;return[{x:Y,y:K},{x:it,y:K},{x:it,y:Q}]}else if(Z==="bottom"&&_==="left"){if(K<Q){if(Y>X){let nt=Mt;return(nt<Nt||!J)&&nt>D&&Y>S&&(nt=R),[{x:Y,y:nt},{x:X,y:nt},{x:X,y:Q}]}return[{x:Y,y:Q}]}else if(O>X){let nt=Math.max(v,R),dt=Math.min($,x);return[{x:Y,y:nt},{x:dt,y:nt},{x:dt,y:Q}]}let it=wt;return[{x:Y,y:K},{x:it,y:K},{x:it,y:Q}]}else if(Z==="left"&&_==="bottom"){if(Y>=X&&K>=R)return[{x:X,y:K}];if(Y>=S&&K<Q){let dt=wt;return[{x:dt,y:K},{x:dt,y:Q},{x:X,y:Q}]}if(X<O&&P<=i){let dt=Mt;return[{x:Y,y:K},{x:Y,y:dt},{x:X,y:dt}]}let it=Math.min(x,Y),nt=Math.max(v,R);return[{x:it,y:K},{x:it,y:nt},{x:X,y:nt}]}else if(Z==="left"&&_==="top"){if(Y>X&&K<D)return[{x:X,y:K}];if(Y>=S&&K>Q){let dt=wt;return[{x:dt,y:K},{x:dt,y:Q},{x:X,y:Q}]}if(X<=O&&Q>K){let dt=Mt;return[{x:Y,y:K},{x:Y,y:dt},{x:X,y:dt}]}let it=Q<K?Math.min($,x):$,nt=Math.min(p,D);return[{x:it,y:K},{x:it,y:nt},{x:X,y:nt}]}else if(Z==="right"&&_==="top"){if(Y<=X&&K<D)return[{x:X,y:K}];if(O<d&&K>Q){let dt=wt;return[{x:dt,y:K},{x:dt,y:Q},{x:X,y:Q}]}if(X<Y&&f>F){let dt=Mt;return[{x:Y,y:K},{x:Y,y:dt},{x:X,y:dt}]}let it=Math.max(st,M),nt=Math.min(p,D);return[{x:it,y:K},{x:it,y:nt},{x:X,y:nt}]}else if(Z==="right"&&_==="bottom"){if(Y<=X&&K>=R)return[{x:X,y:K}];if(Y<=x&&K<Q){let dt=wt;return[{x:dt,y:K},{x:dt,y:Q},{x:X,y:Q}]}if(X>n&&P<i){let dt=Mt;return[{x:Y,y:K},{x:Y,y:dt},{x:X,y:dt}]}let it=Math.max(M,Y),nt=Math.max(v,R);return[{x:it,y:K},{x:it,y:nt},{x:X,y:nt}]}}function Wv(t,e,r){let{sourceDirection:n=ct.AUTO,targetDirection:i=ct.AUTO}=e,o=e.margin||20,s=e.useVertices||!1,l=!!r.model.source().port,u=Zv(r.sourceView,r.sourceAnchor,r.sourceBBox,n,l,r.sourceAnchor,o),h=!!r.model.target().port,d=Zv(r.targetView,r.targetAnchor,r.targetBBox,i,h,r.targetAnchor,o),f=[];if(!s||t.length===0)return tu(Fn(u,d));let C=t.map(S=>wh(S)),[w]=C;if(u.view&&u.view.model.isElement()&&u.view.model.getBBox().inflate(o).containsPoint(w.point)){let[S]=eu(u,w),P=S,O=wh(u.point);O.margin=o,O.direction=S,w.direction=P,f.push(...Fn(O,w),w.point)}else{let S=C[1]||d,P=CC(u,w,S);w.direction=P,f.push(...Fn(u,w),w.point)}for(let S=0;S<C.length-1;S++){let P=C[S],O=C[S+1],F=new pt(P.point,O.point),J=Ys(F);if(J%90===0){let p=$l[J],v=yo[p];if(p!==P.direction)f.push(P.point,O.point),O.direction=v;else{let x=Be(J-90),M=0,D=0;x===90?D=-o:x===180?M=-o:x===270?D=o:x===0&&(M=o);let R={x:P.point.x+M,y:P.point.y+D},Z={x:O.point.x+M,y:O.point.y+D},_=new pt(O.point,Z);O.direction=$l[Ys(_)],f.push(P.point,R,Z,O.point)}continue}let[$,st]=bh(P,O);P.direction=$,O.direction=st,f.push(...Fn(P,O),O.point)}let b=C[C.length-1];if(d.view&&d.view.model.isElement())if(d.view.model.getBBox().inflate(o).containsPoint(b.point)){let[S]=bh(b,d),P=wh(d.point),[,O]=eu(b,d);P.margin=o,P.direction=O,b.direction=S,f.push(...Fn(b,P))}else{let S=tu(f),P=new pt(S[S.length-2],b.point),O=$l[Math.round(Ys(P))];b.direction=O;let F=Fn(b,d),[J,$]=tu([...F,d.point]),st=new pt(J,$),p=Math.round(Ys(st)),v=$l[p];v!==O&&O===yo[v]&&(b.margin=o,F=Fn(b,d)),f.push(...F)}else{let[S]=bh(b,d);b.direction=S,f.push(...Fn(b,d))}return tu(f)}function bh(t,e){let r=t.direction,n=mC.includes(r),i=t.direction,o=e.direction;if(n){let s=t.point.y>e.point.y,l=e.point.x-t.point.x;r===ct.BOTTOM?(i=s?yo[r]:l>=0?ct.RIGHT:ct.LEFT,l>0?o=s?ct.LEFT:ct.TOP:l<0&&(o=s?ct.RIGHT:ct.TOP)):(i=s?l>=0?ct.RIGHT:ct.LEFT:yo[r],l>0?o=s?ct.BOTTOM:ct.LEFT:l<0&&(o=s?ct.BOTTOM:ct.RIGHT))}else{let s=t.point.x>e.point.x,l=e.point.y-t.point.y;r===ct.RIGHT?(i=s?yo[r]:l>=0?ct.BOTTOM:ct.TOP,l>0?o=s?ct.TOP:ct.LEFT:l<0&&(o=s?ct.BOTTOM:ct.LEFT)):(i=s?l>=0?ct.BOTTOM:ct.TOP:yo[r],l>0?o=s?ct.RIGHT:ct.TOP:l<0&&(o=s?ct.RIGHT:ct.BOTTOM))}return[i,o]}Wv.Directions=ct;var xC=Wv;var ou={};Me(ou,{curve:()=>Th,jumpover:()=>zC,normal:()=>GC,rounded:()=>ZC,smooth:()=>jC,straight:()=>Us});var Co={POINT:"point",CUBIC:"cubic",LINE:"line",GAP:"gap"},wC=Object.values(Co),bC=10,NC=1,Us=function(t,e,r=[],n={}){let{cornerType:i=Co.POINT,cornerRadius:o=bC,cornerPreserveAspectRatio:s=!1,precision:l=NC,raw:u=!1}=n;if(wC.indexOf(i)===-1)throw new Error("Invalid `cornerType` provided to `straight` connector.");let h;if(i===Co.POINT||!o){let d=[t].concat(r).concat([e]),f=new Qt(d);h=new xt(f)}else{h=new xt,h.appendSegment(xt.createSegment("M",t));let d,f=r.length;for(let C=0;C<f;C++){let w=new z(r[C]),b=r[C-1]||t,S=r[C+1]||e,P=d||w.distance(b)/2;d=w.distance(S)/2;let O,F;s?O=F=-Math.min(o,P,d):(O=-Math.min(o,P),F=-Math.min(o,d));let J=w.clone().move(b,O).round(l),$=w.clone().move(S,F).round(l);switch(h.appendSegment(xt.createSegment("L",J)),i){case Co.CUBIC:{let st=.3333333333333333,p=2/3,v=new z(st*J.x+p*w.x,p*w.y+st*J.y),x=new z(st*$.x+p*w.x,p*w.y+st*$.y);h.appendSegment(xt.createSegment("C",v,x,$));break}case Co.LINE:{h.appendSegment(xt.createSegment("L",$));break}case Co.GAP:{h.appendSegment(xt.createSegment("M",$));break}}}h.appendSegment(xt.createSegment("L",e))}return u?h:h.serialize()};var MC=5,Yv=["arc","gap","cubic"],TC=0,Uv=1,SC=["smooth"],nu=1/3,iu=2/3;function Fv(t,e){let{x:r,y:n}=t,{x:i,y:o}=e;if(r>i){let s=r;r=i,i=s,s=n,n=o,o=s}if(n>o){let s=r;r=i,i=s,s=n,n=o,o=s}return[new z(r,n),new z(i,o)]}function PC(t,e){let[{x:r,y:n},{x:i,y:o}]=Fv(t.start,t.end),[{x:s,y:l},{x:u,y:h}]=Fv(e.start,e.end),d=r<=u&&s<=i,f=n<=h&&l<=o;return d&&f}function Nh(t,e,r){var n=[].concat(t,r,e);return n.reduce(function(i,o,s){var l=n[s+1];return l!=null&&(i[s]=dn(o,l)),i},[])}function DC(t){var e=t.paper,r=e._jumpOverUpdateList;if(r==null){r=e._jumpOverUpdateList=[];var n=e.model;n.on("batch:stop",function(){this.hasActiveBatch()||LC(e)}),n.on("reset",function(){r=e._jumpOverUpdateList=[]})}r.indexOf(t)<0&&(r.push(t),t.listenToOnce(t.model,"change:connector remove",function(){r.splice(r.indexOf(t),1)}))}function LC(t){for(var e=t._jumpOverUpdateList,r=0;r<e.length;r++){let n=e[r],i=n.getFlag(n.constructor.Flags.CONNECTOR);n.requestUpdate(i)}}function kC(t,e){return kt(e).reduce(function(r,n){var i=t.intersection(n);return i&&r.push(i),r},[])}function _v(t,e){return dn(t,e).squaredLength()}function OC(t,e,r){return e.reduce(function(n,i,o){if(i.skip===!0)return n;var s=n.pop()||t,l=Oi(i).move(s.start,-r),u=Oi(i).move(s.start,+r),h=e[o+1];if(h!=null){var d=u.distance(h);d<=r&&(u=h.move(s.start,d),h.skip=!0)}else{var f=l.distance(s.end);if(f<r*2+Uv)return n.push(s),n}var C=u.distance(s.start);if(C<r*2+Uv)return n.push(s),n;var w=dn(l,u);return w.isJump=!0,n.push(dn(s.start,l),w,dn(u,s.end)),n},[])}function Vv(t,e,r,n){var i=new xt,o;return o=xt.createSegment("M",t[0].start),i.appendSegment(o),kt(t).forEach(function(s,l){if(s.isJump){var u,h,d,f;if(r==="arc"){u=-90,h=s.start.difference(s.end);var C=+(h.x<0||h.x===0&&h.y<0);C&&(u+=180);var w=s.midpoint(),b=new pt(w,s.end).rotate(w,u),S;S=new pt(s.start,w),d=S.pointAt(2/3).rotate(s.start,u),f=b.pointAt(1/3).rotate(b.end,-u),o=xt.createSegment("C",d,f,b.end),i.appendSegment(o),S=new pt(w,s.end),d=b.pointAt(1/3).rotate(b.end,u),f=S.pointAt(1/3).rotate(s.end,-u),o=xt.createSegment("C",d,f,s.end),i.appendSegment(o)}else if(r==="gap")o=xt.createSegment("M",s.end),i.appendSegment(o);else if(r==="cubic"){u=s.start.theta(s.end);var P=e*.6,O=e*1.35;h=s.start.difference(s.end),C=+(h.x<0||h.x===0&&h.y<0),C&&(O*=-1),d=z(s.start.x+P,s.start.y+O).rotate(s.start,u),f=z(s.end.x-P,s.end.y+O).rotate(s.end,u),o=xt.createSegment("C",d,f,s.end),i.appendSegment(o)}}else{var F=t[l+1];n==0||!F||F.isJump?(o=xt.createSegment("L",s.end),i.appendSegment(o)):EC(n,i,s.end,s.start,F.end)}}),i}function EC(t,e,r,n,i){var o=r.distance(n)/2,s=r.distance(i)/2,l=-Math.min(t,o),u=-Math.min(t,s),h=r.clone().move(n,l).round(),d=r.clone().move(i,u).round(),f=new z(nu*h.x+iu*r.x,iu*r.y+nu*h.y),C=new z(nu*d.x+iu*r.x,iu*r.y+nu*d.y),w;w=xt.createSegment("L",h),e.appendSegment(w),w=xt.createSegment("C",f,C,d),e.appendSegment(w)}var zC=function(t,e,r,n){DC(this);var i=n.raw,o=n.size||MC,s=n.jump&&(""+n.jump).toLowerCase(),l=n.radius||TC,u=n.ignoreConnectors||SC;Yv.indexOf(s)===-1&&(s=Yv[0]);var h=this.paper,d=h.model,f=d.getLinks();if(f.length===1)return Vv(Nh(t,e,r),o,s,l);var C=this.model,w=f.indexOf(C),b=h.options.defaultConnector||{},S=f.filter(function(st,p){var v=st.get("connector")||b;return kt(u).includes(v.name)?!1:p>w?v.name!=="jumpover":!0}),P=S.map(function(st){return h.findViewByModel(st)}),O=Nh(t,e,r),F=P.map(function(st){return st==null?[]:st===this?O:Nh(st.sourcePoint,st.targetPoint,st.route)},this),J=O.reduce(function(st,p){var v=S.reduce(function(x,M,D){if(M!==C){let R=F[D].slice(),Z=R.findIndex(ut=>PC(p,ut));Z>-1&&p.containsPoint(R[Z].end)&&R.splice(Z+1,1);let _=kC(p,R);x.push.apply(x,_)}return x},[]).sort(function(x,M){return _v(p.start,x)-_v(p.start,M)});return v.length>0?st.push.apply(st,OC(p,v,o)):st.push(p),st},[]),$=Vv(J,o,s,l);return i?$:$.serialize()};var GC=function(t,e,r=[],n={}){let{raw:i}=n;return Us(t,e,r,{cornerType:"point",raw:i})};var BC=10,RC=0,ZC=function(t,e,r=[],n={}){let{radius:i=BC,raw:o}=n;return Us(t,e,r,{cornerType:"cubic",cornerRadius:i,precision:RC,raw:o})};var jC=function(t,e,r,n){var i=n&&n.raw,o;if(r&&r.length!==0){var s=[t].concat(r).concat([e]),l=Kt.throughPoints(s);o=new xt(l)}else{o=new xt;var u;if(u=xt.createSegment("M",t),o.appendSegment(u),Math.abs(t.x-e.x)>=Math.abs(t.y-e.y)){var h=(t.x+e.x)/2;u=xt.createSegment("C",h,t.y,h,e.y,e.x,e.y),o.appendSegment(u)}else{var d=(t.y+e.y)/2;u=xt.createSegment("C",t.x,d,e.x,d,e.x,e.y),o.appendSegment(u)}}return i?o:o.serialize()};var Yr={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},gr={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Th=function(t,e,r=[],n={},i){let o=!!n.raw,{direction:s=Yr.AUTO,precision:l=3}=n,u={coeff:n.distanceCoefficient||.6,angleTangentCoefficient:n.angleTangentCoefficient||80,tau:n.tension||.5,sourceTangent:n.sourceTangent?new z(n.sourceTangent):null,targetTangent:n.targetTangent?new z(n.targetTangent):null,rotate:!!n.rotate};typeof n.sourceDirection=="string"?u.sourceDirection=n.sourceDirection:typeof n.sourceDirection=="number"?u.sourceDirection=new z(1,0).rotate(null,n.sourceDirection):u.sourceDirection=n.sourceDirection?new z(n.sourceDirection).normalize():null,typeof n.targetDirection=="string"?u.targetDirection=n.targetDirection:typeof n.targetDirection=="number"?u.targetDirection=new z(1,0).rotate(null,n.targetDirection):u.targetDirection=n.targetDirection?new z(n.targetDirection).normalize():null;let h=[t,...r,e].map(S=>new z(S)),d;if(u.sourceTangent)d=u.sourceTangent;else{let S=_C(i,h,s,u),P=h[0].distance(h[1])*u.coeff,O=h[1].difference(h[0]).normalize(),F=Mh(S,O);if(F>Math.PI/4){let J=P+(F-Math.PI/4)*u.angleTangentCoefficient;d=S.clone().scale(J,J)}else d=S.clone().scale(P,P)}let f;if(u.targetTangent)f=u.targetTangent;else{let S=VC(i,h,s,u),P=h.length-1,O=h[P-1].distance(h[P])*u.coeff,F=h[P-1].difference(h[P]).normalize(),J=Mh(S,F);if(J>Math.PI/4){let $=O+(J-Math.PI/4)*u.angleTangentCoefficient;f=S.clone().scale($,$)}else f=S.clone().scale(O,O)}let w=HC(h,d,f,u).map(S=>JC(S,u)),b=new xt(w).round(l);return o?b:b.serialize()};Th.Directions=Yr;Th.TangentDirections=gr;function WC(t,e,r){let{sourceBBox:n}=t,i,o;if(!t.sourceView)n.x>e[1].x?i="right":i="left";else if(o=t.sourceView.model.angle(),r.rotate&&o){let l=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),u=e[0].clone();u.rotate(n.center(),o),i=l.sideNearestToPoint(u)}else i=n.sideNearestToPoint(e[0]);let s;switch(i){case"left":s=new z(-1,0);break;case"right":default:s=new z(1,0);break}return r.rotate&&o&&s.rotate(null,-o),s}function YC(t,e,r){let{targetBBox:n}=t,i,o;if(!t.targetView)n.x>e[e.length-2].x?i="left":i="right";else if(o=t.targetView.model.angle(),r.rotate&&o){let l=t.targetView.getNodeUnrotatedBBox(t.targetView.el),u=e[e.length-1].clone();u.rotate(n.center(),o),i=l.sideNearestToPoint(u)}else i=n.sideNearestToPoint(e[e.length-1]);let s;switch(i){case"left":s=new z(-1,0);break;case"right":default:s=new z(1,0);break}return r.rotate&&o&&s.rotate(null,-o),s}function UC(t,e,r){let{sourceBBox:n}=t,i,o;if(!t.sourceView)n.y>e[1].y?i="bottom":i="top";else if(o=t.sourceView.model.angle(),r.rotate&&o){let l=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),u=e[0].clone();u.rotate(n.center(),o),i=l.sideNearestToPoint(u)}else i=n.sideNearestToPoint(e[0]);let s;switch(i){case"top":s=new z(0,-1);break;case"bottom":default:s=new z(0,1);break}return r.rotate&&o&&s.rotate(null,-o),s}function FC(t,e,r){let{targetBBox:n}=t,i,o;if(!t.targetView)n.y>e[e.length-2].y?i="top":i="bottom";else if(o=t.targetView.model.angle(),r.rotate&&o){let l=t.targetView.getNodeUnrotatedBBox(t.targetView.el),u=e[e.length-1].clone();u.rotate(n.center(),o),i=l.sideNearestToPoint(u)}else i=n.sideNearestToPoint(e[e.length-1]);let s;switch(i){case"top":s=new z(0,-1);break;case"bottom":default:s=new z(0,1);break}return r.rotate&&o&&s.rotate(null,-o),s}function Xv(t,e,r){let{sourceBBox:n}=t,i,o;if(!t.sourceView)i=n.sideNearestToPoint(e[1]);else if(o=t.sourceView.model.angle(),r.rotate&&o){let l=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),u=e[0].clone();u.rotate(n.center(),o),i=l.sideNearestToPoint(u)}else i=n.sideNearestToPoint(e[0]);let s;switch(i){case"top":s=new z(0,-1);break;case"bottom":s=new z(0,1);break;case"right":s=new z(1,0);break;case"left":s=new z(-1,0);break}return r.rotate&&o&&s.rotate(null,-o),s}function Hv(t,e,r){let{targetBBox:n}=t,i,o;if(!t.targetView)i=n.sideNearestToPoint(e[e.length-2]);else if(o=t.targetView.model.angle(),r.rotate&&o){let l=t.targetView.getNodeUnrotatedBBox(t.targetView.el),u=e[e.length-1].clone();u.rotate(n.center(),o),i=l.sideNearestToPoint(u)}else i=n.sideNearestToPoint(e[e.length-1]);let s;switch(i){case"top":s=new z(0,-1);break;case"bottom":s=new z(0,1);break;case"right":s=new z(1,0);break;case"left":s=new z(-1,0);break}return r.rotate&&o&&s.rotate(null,-o),s}function Jv(t,e,r){return e[1].difference(e[0]).normalize()}function Qv(t,e,r){let n=e.length-1;return e[n-1].difference(e[n]).normalize()}function Kv(t,e,r){let{sourceBBox:n}=t,i=n.center();return e[0].difference(i).normalize()}function qv(t,e,r){let{targetBBox:n}=t,i=n.center();return e[e.length-1].difference(i).normalize()}function _C(t,e,r,n){if(n.sourceDirection)switch(n.sourceDirection){case gr.UP:return new z(0,-1);case gr.DOWN:return new z(0,1);case gr.LEFT:return new z(-1,0);case gr.RIGHT:return new z(1,0);case gr.AUTO:return Xv(t,e,n);case gr.CLOSEST_POINT:return Jv(t,e,n);case gr.OUTWARDS:return Kv(t,e,n);default:return n.sourceDirection}switch(r){case Yr.HORIZONTAL:return WC(t,e,n);case Yr.VERTICAL:return UC(t,e,n);case Yr.CLOSEST_POINT:return Jv(t,e,n);case Yr.OUTWARDS:return Kv(t,e,n);case Yr.AUTO:default:return Xv(t,e,n)}}function VC(t,e,r,n){if(n.targetDirection)switch(n.targetDirection){case gr.UP:return new z(0,-1);case gr.DOWN:return new z(0,1);case gr.LEFT:return new z(-1,0);case gr.RIGHT:return new z(1,0);case gr.AUTO:return Hv(t,e,n);case gr.CLOSEST_POINT:return Qv(t,e,n);case gr.OUTWARDS:return qv(t,e,n);default:return n.targetDirection}switch(r){case Yr.HORIZONTAL:return YC(t,e,n);case Yr.VERTICAL:return FC(t,e,n);case Yr.CLOSEST_POINT:return Qv(t,e,n);case Yr.OUTWARDS:return qv(t,e,n);case Yr.AUTO:default:return Hv(t,e,n)}}function XC(t,e){let r=Math.cos(e),n=Math.sin(e),i=r*t.x-n*t.y,o=n*t.x+r*t.y;t.x=i,t.y=o}function Mh(t,e){let r=t.dot(e)/(t.magnitude()*e.magnitude());return r<-1&&(r=-1),r>1&&(r=1),Math.acos(r)}function $v(t,e){return t.x*e.y-t.y*e.x}function HC(t,e,r,n){let{tau:i,coeff:o}=n,s=[],l=[],u=[],h=t.length-1;for(let d=0;d<h;d++)s[d]=t[d].distance(t[d+1]);l[0]=e,l[h]=r;for(let d=1;d<h;d++){let f,C;d===1?f=t[d-1].clone().offset(l[d-1].x,l[d-1].y):f=t[d-1].clone(),d===h-1?C=t[d+1].clone().offset(l[d+1].x,l[d+1].y):C=t[d+1].clone();let w=f.difference(t[d]).normalize(),b=C.difference(t[d]).normalize(),S=Mh(w,b),P=(Math.PI-S)/2,O,F=$v(w,b),J;J=$v(t[d].difference(t[d+1]),t[d].difference(t[d-1])),F<0&&(P=-P),S<Math.PI/2&&(P<0&&J<0||P>0&&J>0)&&(P=P-Math.PI),O=b.clone(),XC(O,P);let $=O.clone(),st=O.clone(),p=s[d-1]*o,v=s[d]*o;$.scale(p,p),st.scale(v,v),l[d]=[$,st]}for(let d=0;d<h;d++){let f,C;d===0?f=t[d+1].difference(l[d].x/i,l[d].y/i):f=t[d+1].difference(l[d][1].x/i,l[d][1].y/i),d===h-1?C=t[d].clone().offset(l[d+1].x/i,l[d+1].y/i):C=t[d].difference(l[d+1][0].x/i,l[d+1][0].y/i),u[d]=[f,t[d],t[d+1],C]}return u}function JC(t,e){let{tau:r}=e,n=new z;n.x=t[1].x+(t[2].x-t[0].x)/(6*r),n.y=t[1].y+(t[2].y-t[0].y)/(6*r);let i=new z;return i.x=t[2].x+(t[3].x-t[1].x)/(6*r),i.y=t[2].y+(t[3].y-t[1].y)/(6*r),new Kt(t[1],n,i,t[2])}var xo=on(Gn(),1),Et={TOOLS:jt.Flags.TOOLS,RENDER:"RENDER",UPDATE:"UPDATE",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},wi=jt.extend({className:function(){var t=jt.prototype.className.apply(this).split(" ");return t.push("link"),t.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){jt.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[Et.RENDER],attrs:[Et.UPDATE],router:[Et.UPDATE],connector:[Et.CONNECTOR],smooth:[Et.UPDATE],manhattan:[Et.UPDATE],toolMarkup:[Et.LEGACY_TOOLS],labels:[Et.LABELS],labelMarkup:[Et.LABELS],vertices:[Et.VERTICES,Et.UPDATE],vertexMarkup:[Et.VERTICES],source:[Et.SOURCE,Et.UPDATE],target:[Et.TARGET,Et.UPDATE]},initFlag:[Et.RENDER,Et.SOURCE,Et.TARGET,Et.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(t,e){if(e||(e={}),this.hasFlag(t,Et.SOURCE)){if(!this.updateEndProperties("source"))return t;t=this.removeFlag(t,Et.SOURCE)}if(this.hasFlag(t,Et.TARGET)){if(!this.updateEndProperties("target"))return t;t=this.removeFlag(t,Et.TARGET)}let{paper:r,sourceView:n,targetView:i}=this;if(r&&(n&&!r.isViewMounted(n)||i&&!r.isViewMounted(i)))return t;if(this.hasFlag(t,Et.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(e),t=this.removeFlag(t,[Et.RENDER,Et.UPDATE,Et.VERTICES,Et.LABELS,Et.TOOLS,Et.LEGACY_TOOLS,Et.CONNECTOR]),t;let o=!1;this.hasFlag(t,Et.VERTICES)&&(this.renderVertexMarkers(),t=this.removeFlag(t,Et.VERTICES));let{model:s}=this,{attributes:l}=s,u=this.hasFlag(t,Et.LABELS),h=this.hasFlag(t,Et.LEGACY_TOOLS);u&&(this.onLabelsChange(s,l.labels,e),t=this.removeFlag(t,Et.LABELS),o=!0),h&&(this.renderTools(),t=this.removeFlag(t,Et.LEGACY_TOOLS));let d=this.hasFlag(t,Et.UPDATE),f=this.hasFlag(t,Et.CONNECTOR);return(d||f)&&(d?e.translateBy&&s.isRelationshipEmbeddedIn(e.translateBy)?this.translate(e.tx,e.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(e),t=this.removeFlag(t,[Et.UPDATE,Et.TOOLS,Et.CONNECTOR]),u=!1,h=!1,o=!0),u&&this.updateLabelPositions(),h&&this.updateToolsPosition(),o&&this.updateHighlighters(),this.hasFlag(t,Et.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,Et.TOOLS)),t},requestConnectionUpdate:function(t){this.requestUpdate(this.getFlag(Et.UPDATE),t)},isLabelsRenderRequired:function(t={}){let e=this.model.previous("labels");if(!e)return!0;if("propertyPathArray"in t&&"propertyValue"in t){var r=t.propertyPathArray||[],n=r.length;if(n>1){var i=!!e[r[1]];if(i){if(n===2)return"markup"in Object(t.propertyValue);if(r[2]!=="markup")return!1}}}return!0},onLabelsChange:function(t,e,r){this.isLabelsRenderRequired(r)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.LinkView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if(typeof e=="string")return this.renderStringMarkup(e);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el);this.selectors=e.selectors,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=tt(t);Array.isArray(e)||(e=[e]);for(var r=this._V,n=0,i=e.length;n<i;n++){var o=e[n],s=o.attr("class");s&&(s=qm(s),r[xo.default.camelCase(s)]=o)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(e)},_getLabelMarkup:function(t){if(t){if(Array.isArray(t))return this.parseDOMJSON(t,null);if(typeof t=="string")return this._getLabelStringMarkup(t);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(t){var e=tt(t),r=document.createDocumentFragment();if(!Array.isArray(e))r.appendChild(e.node);else for(var n=0,i=e.length;n<i;n++){var o=e[n].node;r.appendChild(o)}return{fragment:r,selectors:{}}},_normalizeLabelMarkup:function(t){if(t){var e=t.fragment;if(!(t.fragment instanceof DocumentFragment)||!t.fragment.hasChildNodes())throw new Error("dia.LinkView: invalid label markup.");var r,n=e.childNodes;return n.length>1||n[0].nodeName.toUpperCase()!=="G"?r=tt("g").append(e):r=tt(n[0]),r.addClass("label"),{node:r.node,selectors:t.selectors}}},renderLabels:function(){var t=this._V,e=t.labels,r=this._labelCache={},n=this._labelSelectors={},i=this.model,o=i.attributes.labels||[],s=o.length;if(s===0)return e&&e.remove(),this;e?e.empty():(e=t.labels=tt("g").addClass("labels"),this.options.labelsLayer&&(e.addClass(Je(he(this,"className"))),e.attr("model-id",i.id)));for(var l=0;l<s;l++){var u=o[l],h=this._normalizeLabelMarkup(this._getLabelMarkup(u.markup)),d,f;if(h)d=h.node,f=h.selectors;else{var C=i._builtins.defaultLabel,w=this._normalizeLabelMarkup(this._getLabelMarkup(C.markup)),b=i._getDefaultLabel(),S=this._normalizeLabelMarkup(this._getLabelMarkup(b.markup)),P=S||w;d=P.node,f=P.selectors}d.setAttribute("label-idx",l),e.append(d),r[l]=d;var O=this.selector;if(f[O])throw new Error("dia.LinkView: ambiguous label root selector.");f[O]=d,n[l]=f}return e.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){let{el:t,paper:e,model:r,_V:n,options:i}=this,{labels:o}=n;if(!o||!r.hasLabels())return;let{node:s}=o;i.labelsLayer?e.getLayerView(i.labelsLayer).insertSortedNode(s,r.get("z")):s.parentNode!==t&&t.appendChild(s)},unmountLabels:function(){let{options:t,_V:e}=this;if(!e)return;let{labels:r}=e;r&&t.labelsLayer&&r.remove()},findLabelNode:function(t,e){let r=this._labelCache[t];if(!r)return null;let n=this._labelSelectors[t],[i=null]=this.findBySelector(e,r,n);return i},_mergeLabelAttrs:function(t,e,r,n){return e===null?null:e===void 0?r===null?null:r===void 0?t?void 0:n:t?r:me({},n,r):t?me({},r,e):me({},n,r,e)},_mergeLabelSize:function(t,e){return t===null?null:t===void 0?e===null?null:e===void 0?void 0:e:me({},e,t)},updateLabels:function(){if(!this._V.labels)return this;for(var t=this.model,e=t.get("labels")||[],r=this.can("labelMove"),n=t._builtins.defaultLabel,i=n.attrs,o=t._getDefaultLabel(),s=o.markup,l=o.attrs,u=o.size,h=0,d=e.length;h<d;h++){var f=this._labelCache[h];f.setAttribute("cursor",r?"move":"default");var C=this._labelSelectors[h],w=e[h],b=w.markup,S=w.attrs,P=w.size,O=this._mergeLabelAttrs(b||s,S,l,i),F=this._mergeLabelSize(P,u);this.updateDOMSubtreeAttributes(f,O,{rootBBox:new ft(F),selectors:C})}return this},renderTools:function(){if(!this._V.linkTools)return this;var t=(0,xo.default)(this._V.linkTools.node).empty(),e=tr(this.model.get("toolMarkup")||this.model.toolMarkup),r=tt(e());if(t.append(r.node),this._toolCache=r,this.options.doubleLinkTools){var n;this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(e=tr(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),n=tt(e())):n=r.clone(),t.append(n.node),this._tool2Cache=n}return this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var t=(0,xo.default)(this._V.markerVertices.node).empty(),e=tr(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(r,n){t.append(tt(e(At({idx:n},r))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var t=(0,xo.default)(this._V.markerArrowheads.node);t.empty();var e=tr(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=tt(e({end:"source"})),this._V.targetArrowhead=tt(e({end:"target"})),t.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(t){let r=this.model,n=r.vertices(),i=[this.sourceAnchor,...n,this.targetAnchor],o=i.length,s=new Qt(i);s.simplify({threshold:.001});let l=s.points.map(h=>h.toJSON()),u=l.length;return o===u?0:(r.vertices(l.slice(1,u-1),t),o-u)},updateDefaultConnectionPath:function(){var t=this._V;t.connection&&t.connection.attr("d",this.getSerializedConnection()),t.connectionWrap&&t.connectionWrap.attr("d",this.getSerializedConnection()),t.markerSource&&t.markerTarget&&this._translateAndAutoOrientArrows(t.markerSource,t.markerTarget)},getEndView:function(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(t){switch(t){case"source":return new z(this.sourceAnchor);case"target":return new z(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(t){switch(t){case"source":return new z(this.sourcePoint);case"target":return new z(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(t){switch(t){case"source":var e=this.sourceView;if(!e)break;return this.sourceMagnet||e.el;case"target":var r=this.targetView;if(!r)break;return this.targetMagnet||r.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(t=0,e=0){let{route:r,path:n}=this;if(!r||!n)return;let i=new Qt(r);i.translate(t,e),this.route=i.points,this._translateConnectionPoints(t,e),n.translate(t,e),this.updateDOM()},updateDOM(){let{el:t,model:e,selectors:r}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(t,e.attr(),{selectors:r}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){let{model:t}=this,e=t.vertices(),r=this.findAnchors(e),n=this.sourceAnchor=r.source,i=this.targetAnchor=r.target,o=this.findRoute(e);this.route=o;var s=this.findConnectionPoints(o,n,i);this.sourcePoint=s.source,this.targetPoint=s.target},updatePath:function(){let{route:t,sourcePoint:e,targetPoint:r}=this,n=this.findMarkerPoints(t,e,r),i=this.findPath(t,n.source||e,n.target||r);this.path=i},findMarkerPoints:function(t,e,r){var n=t[0],i=t[t.length-1],o=this._markerCache,s,l;return this._V.markerSource&&(o.sourceBBox=o.sourceBBox||this._V.markerSource.getBBox(),s=z(e).move(n||r,o.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(o.targetBBox=o.targetBBox||this._V.markerTarget.getBBox(),l=z(r).move(i||e,o.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),o.sourcePoint=s||e.clone(),o.targetPoint=l||r.clone(),{source:s,target:l}},findAnchorsOrdered:function(t,e,r,n){var i,o,s,l,u=this.model,h=u.get(t),d=u.get(r),f=this.getEndView(t),C=this.getEndView(r),w=this.getEndMagnet(t),b=this.getEndMagnet(r);f?(e?s=new z(e):C?s=b:s=new z(d),i=this.getAnchor(h.anchor,f,w,s,t)):i=new z(h),C?(l=new z(n||i),o=this.getAnchor(d.anchor,C,b,l,r)):o=new z(d);var S={};return S[t]=i,S[r]=o,S},findAnchors:function(t){var e=this.model,r=t[0],n=t[t.length-1];return e.target().priority&&!e.source().priority?this.findAnchorsOrdered("target",n,"source",r):this.findAnchorsOrdered("source",r,"target",n)},findConnectionPoints:function(t,e,r){var n=t[0],i=t[t.length-1],o=this.model,s=o.get("source"),l=o.get("target"),u=this.sourceView,h=this.targetView,d=this.paper.options,f,C,w;if(u&&!u.isNodeConnection(this.sourceMagnet)){f=this.sourceMagnet||u.el;var b=s.connectionPoint||d.defaultConnectionPoint,S=n||r,P=new pt(S,e);w=this.getConnectionPoint(b,u,f,P,"source")}else w=e;var O;if(h&&!h.isNodeConnection(this.targetMagnet)){C=this.targetMagnet||h.el;var F=l.connectionPoint||d.defaultConnectionPoint,J=i||e,$=new pt(J,r);O=this.getConnectionPoint(F,h,C,$,"target")}else O=r;return{source:w,target:O}},getAnchor:function(t,e,r,n,i){var o=e.isNodeConnection(r),s=this.paper.options;if(t||(o?t=s.defaultLinkAnchor:s.perpendicularLinks||this.options.perpendicular?t={name:"perpendicular"}:t=s.defaultAnchor),!t)throw new Error("Anchor required.");var l;if(typeof t=="function")l=t;else{var u=t.name,h=o?"linkAnchorNamespace":"anchorNamespace";if(l=s[h][u],typeof l!="function")throw new Error("Unknown anchor: "+u)}var d=l.call(this,e,r,n,t.args||{},i,this);return d?d.round(this.decimalsRounding):new z},getConnectionPoint:function(t,e,r,n,i){var o,s=n.end,l=this.paper.options;if(typeof l.linkConnectionPoint=="function"){var u=r===e.el?void 0:r;if(o=l.linkConnectionPoint(this,e,u,n.start,i),o)return o}if(!t)return s;var h;if(typeof t=="function")h=t;else{var d=t.name;if(h=l.connectionPointNamespace[d],typeof h!="function")throw new Error("Unknown connection point: "+d)}return o=h.call(this,n,e,r,t.args||{},i,this),o?o.round(this.decimalsRounding):s},_translateConnectionPoints:function(t,e){var r=this._markerCache;r.sourcePoint.offset(t,e),r.targetPoint.offset(t,e),this.sourcePoint.offset(t,e),this.targetPoint.offset(t,e),this.sourceAnchor.offset(t,e),this.targetAnchor.offset(t,e)},_getDefaultLabelPositionProperty:function(){var t=this.model,e=t._builtins.defaultLabel,r=e.position,n=t._getDefaultLabel(),i=this._normalizeLabelPosition(n.position);return me({},r,i)},_normalizeLabelPosition:function(t){return typeof t=="number"?{distance:t,offset:null,angle:0,args:null}:t},_mergeLabelPositionProperty:function(t,e){return t===null?null:t===void 0?e===null?null:e:me({},e,t)},updateLabelPositions:function(){if(!this._V.labels)return this;var t=this.path;if(!t)return this;var e=this.model,r=e.get("labels")||[];if(!r.length)return this;for(var n=this._getDefaultLabelPositionProperty(),i=0,o=r.length;i<o;i++){var s=this._labelCache[i];if(s){var l=r[i],u=this._normalizeLabelPosition(l.position),h=this._mergeLabelPositionProperty(u,n),d=this._getLabelTransformationMatrix(h);s.setAttribute("transform",tt.matrixToTransformString(d)),this._cleanLabelMatrices(i)}}return this},_cleanLabelMatrices:function(t){let{metrics:e,_labelSelectors:r}=this,n=r[t];if(n)for(let i in n){let{id:o}=n[i];o&&o in e&&delete e[o].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var t="",e=this.options.linkToolsOffset,r=this.getConnectionLength();if(!Number.isNaN(r)){r<this.options.shortLinkLength&&(t="scale(.5)",e/=2);var n=this.getPointAtLength(e);if(this._toolCache.attr("transform","translate("+n.x+", "+n.y+") "+t),this.options.doubleLinkTools&&r>=this.options.longLinkLength){var i=this.options.doubleLinkToolsOffset||e;n=this.getPointAtLength(r-i),this._tool2Cache.attr("transform","translate("+n.x+", "+n.y+") "+t),this._tool2Cache.attr("display","inline")}else this.options.doubleLinkTools&&this._tool2Cache.attr("display","none")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if(xo.default.css(this._V.markerArrowheads.node,"display")==="none")return this;var t=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(t),this._V.targetArrowhead.scale(t),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(t){let{model:e,paper:r}=this,n=`${t}View`,i=e.get(t),o=i&&i.id;if(!o)return this[n]=null,this.updateEndMagnet(t),!0;let s=r.getModelById(o);if(!s)throw new Error("LinkView: invalid "+t+" cell.");let l=s.findView(r);return l?(this[n]=l,this.updateEndMagnet(t),!0):!1},updateEndMagnet:function(t){let e=`${t}Magnet`,r=this.getEndView(t);if(r){let n=r.getMagnetFromLinkEnd(this.model.get(t));n===r.el&&(n=null),this[e]=n}else this[e]=null},_translateAndAutoOrientArrows:function(t,e){var r=kt(this.route);t&&t.translateAndAutoOrient(this.sourcePoint,r[0]||this.targetPoint,this.paper.cells),e&&e.translateAndAutoOrient(this.targetPoint,r[r.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionProperty:function(t){return this.model.label(t).position||{}},_getLabelPositionAngle:function(t){var e=this._getLabelPositionProperty(t);return e.angle||0},_getLabelPositionArgs:function(t){var e=this._getLabelPositionProperty(t);return e.args},_getDefaultLabelPositionArgs:function(){var t=this.model._getDefaultLabel(),e=t.position||{};return e.args},_mergeLabelPositionArgs:function(t,e){return t===null?null:t===void 0?e===null?null:e:me({},e,t)},addLabel:function(t,e,r,n){var i,o,s=0,l;typeof t!="number"?(i=t.x,o=t.y,typeof e=="number"?(s=e,l=r):l=e):(i=t,o=e,typeof r=="number"?(s=r,l=n):l=r);var u=this._getDefaultLabelPositionArgs(),h=l,d=this._mergeLabelPositionArgs(h,u),f={position:this.getLabelPosition(i,o,s,d)},C=-1;return this.model.insertLabel(C,f,l),C},addVertex:function(t,e,r){var n=typeof t!="number",i=n?t.x:t,o=n?t.y:e,s=n?e:r,l={x:i,y:o},u=this.getVertexIndex(i,o);return this.model.insertVertex(u,l,s),u},sendToken:function(t,e,r){function n(f,C){return function(){f.remove(),typeof C=="function"&&C()}}var i,o,s;Wt(e)?(i=e.duration,o=e.direction==="reverse",s=e.connection):(i=e,o=!1,s=null),i=i||1e3;var l={dur:i+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};o&&(l.keyPoints="1;0",l.keyTimes="0;1");var u=tt(t),h;if(typeof s=="string")h=this.findBySelector(s,this.el,this.selectors)[0];else{var d=this._V;h=d.connection?d.connection.node:this.el.querySelector("path")}if(!(h instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");u.appendTo(this.paper.cells).animateAlongPath(l,h),setTimeout(n(u,r),i)},findRoute:function(t){t||(t=[]);var e=this.paper.options.routerNamespace||ru,r=this.model.router(),n=this.paper.options.defaultRouter;if(!r)if(n)r=n;else return t.map(z);var i=qt(r)?r:e[r.name];if(!qt(i))throw new Error('dia.LinkView: unknown router: "'+r.name+'".');var o=r.args||{},s=i.call(this,t,o,this);return s||t.map(z)},findPath:function(t,e,r){var n=this.paper.options.connectorNamespace||ou,i=this.model.connector(),o=this.paper.options.defaultConnector;i||(i=o||{});var s=qt(i)?i:n[i.name];if(!qt(s))throw new Error('dia.LinkView: unknown connector: "'+i.name+'".');var l=kr(i.args||{});l.raw=!0;var u=s.call(this,e,r,t,l,this);return typeof u=="string"&&(u=new xt(tt.normalizePathData(u))),u},getConnection:function(){var t=this.path;return t?t.clone():null},getSerializedConnection:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("data"))return e.data;var r=t.serialize();return e.data=r,r},getConnectionSubdivisions:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("segmentSubdivisions"))return e.segmentSubdivisions;var r=t.getSegmentSubdivisions();return e.segmentSubdivisions=r,r},getConnectionLength:function(){var t=this.path;if(!t)return 0;var e=this.metrics;if(e.hasOwnProperty("length"))return e.length;var r=t.length({segmentSubdivisions:this.getConnectionSubdivisions()});return e.length=r,r},getPointAtLength:function(t){var e=this.path;return e?e.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(t){var e=this.path;return e?(Oe(t)&&(t=parseFloat(t)/100),e.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(t){var e=this.path;return e?e.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(t){var e=this.path;return e?e.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(t){var e=this.path;return e?e.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(t){var e=this.path;return e?e.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(t){var e=this.path;return e?e.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(t,e,r,n){var i={},o=0,s;typeof r=="number"?(o=r,s=n):s=r,s&&(i.args=s);var l=!(s&&s.absoluteDistance),u=s&&s.absoluteDistance&&s.reverseDistance,h=s&&s.absoluteOffset,d=this.path,f={segmentSubdivisions:this.getConnectionSubdivisions()},C=new z(t,e),w=d.closestPointT(C,f),b=d.lengthAtT(w,f);l&&(b=b/this.getConnectionLength()||0),u&&(b=-1*(this.getConnectionLength()-b)||1),i.distance=b;var S;h||(S=d.tangentAtT(w));var P;if(S)P=S.pointOffset(C);else{var O=d.pointAtT(w),F=C.difference(O);P={x:F.x,y:F.y}}return i.offset=P,i.angle=o,i},_getLabelTransformationMatrix:function(t){var e,r=0,n={};if(typeof t=="number")e=t;else if(typeof t.distance=="number")n=t.args||{},e=t.distance,r=t.angle||0;else throw new Error("dia.LinkView: invalid label position distance.");var i=e>0&&e<=1,o=0,s={x:0,y:0};if(t.offset){var l=t.offset;typeof l=="number"&&(o=l),l.x&&(s.x=l.x),l.y&&(s.y=l.y)}var u=s.x!==0||s.y!==0||o===0,h=n.keepGradient,d=n.ensureLegibility,f=this.path,C={segmentSubdivisions:this.getConnectionSubdivisions()},w=i?e*this.getConnectionLength():e,b=f.tangentAtLength(w,C),S,P=r;if(b){if(u)S=b.start.clone(),S.offset(s);else{var O=b.clone();O.rotate(b.start,-90),O.setLength(o),S=O.end}h&&(P=b.angle()+r,d&&(P=Be((P+90)%180-90)))}else S=f.start.clone(),u&&S.offset(s);return tt.createSVGMatrix().translate(S.x,S.y).rotate(P)},getLabelCoordinates:function(t){var e=this._getLabelTransformationMatrix(t);return new z(e.e,e.f)},getVertexIndex:function(t,e){for(var r=this.model,n=r.vertices(),i=this.getClosestPointLength(new z(t,e)),o=0,s=n.length;o<s;o++){var l=n[o],u=this.getClosestPointLength(l);if(i<u)break}return o},notifyPointerdown(t,e,r){jt.prototype.pointerdown.call(this,t,e,r),this.notify("link:pointerdown",t,e,r)},notifyPointermove(t,e,r){jt.prototype.pointermove.call(this,t,e,r),this.notify("link:pointermove",t,e,r)},notifyPointerup(t,e,r){this.notify("link:pointerup",t,e,r),jt.prototype.pointerup.call(this,t,e,r)},pointerdblclick:function(t,e,r){jt.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",t,e,r)},pointerclick:function(t,e,r){jt.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",t,e,r)},contextmenu:function(t,e,r){jt.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",t,e,r)},pointerdown:function(t,e,r){this.notifyPointerdown(t,e,r);var n=t.target.getAttribute("class");switch(n){case"marker-vertex":this.dragVertexStart(t,e,r);return;case"marker-vertex-remove":case"marker-vertex-remove-area":this.dragVertexRemoveStart(t,e,r);return;case"marker-arrowhead":this.dragArrowheadStart(t,e,r);return;case"connection":case"connection-wrap":this.dragConnectionStart(t,e,r);return;case"marker-source":case"marker-target":return}this.dragStart(t,e,r)},pointermove:function(t,e,r){var n=this._dragData;n&&this.eventData(t,n);var i=this.eventData(t);switch(i.action){case"vertex-move":this.dragVertex(t,e,r);break;case"label-move":this.dragLabel(t,e,r);break;case"arrowhead-move":this.dragArrowhead(t,e,r);break;case"move":this.drag(t,e,r);break}n&&At(n,this.eventData(t)),this.notifyPointermove(t,e,r)},pointerup:function(t,e,r){var n=this._dragData;n&&(this.eventData(t,n),this._dragData=null);var i=this.eventData(t);switch(i.action){case"vertex-move":this.dragVertexEnd(t,e,r);break;case"label-move":this.dragLabelEnd(t,e,r);break;case"arrowhead-move":this.dragArrowheadEnd(t,e,r);break;case"move":this.dragEnd(t,e,r)}this.notifyPointerup(t,e,r),this.checkMouseleave(t)},mouseover:function(t){jt.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",t)},mouseout:function(t){jt.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",t)},mouseenter:function(t){jt.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",t)},mouseleave:function(t){jt.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",t)},mousewheel:function(t,e,r,n){jt.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",t,e,r,n)},onevent:function(t,e,r,n){var i=tt(t.target).findParentByClass("link-tool",this.el);if(i){if(t.stopPropagation(),this.can("useLinkTools"))if(e==="remove"){this.model.remove({ui:!0});return}else this.notify(e,t,r,n);this.notifyPointerdown(t,r,n),this.paper.delegateDragEvents(this,t.data)}else jt.prototype.onevent.apply(this,arguments)},onlabel:function(t,e,r){this.notifyPointerdown(t,e,r),this.dragLabelStart(t,e,r);var n=this.eventData(t).stopPropagation;n&&t.stopPropagation()},dragConnectionStart:function(t,e,r){if(this.can("vertexAdd")){var n=this.addVertex({x:e,y:r},{ui:!0});this.eventData(t,{action:"vertex-move",vertexIdx:n})}},dragLabelStart:function(t,e,r){if(this.can("labelMove")){if(this.isDefaultInteractionPrevented(t))return;var n=t.currentTarget,i=parseInt(n.getAttribute("label-idx"),10),o=this._getDefaultLabelPositionProperty(),s=this._normalizeLabelPosition(this._getLabelPositionProperty(i)),l=this._mergeLabelPositionProperty(s,o),u=this.getLabelCoordinates(l),h=u.x-e,d=u.y-r,f=this._getLabelPositionAngle(i),C=this._getLabelPositionArgs(i),w=this._getDefaultLabelPositionArgs(),b=this._mergeLabelPositionArgs(C,w);this.eventData(t,{action:"label-move",labelIdx:i,dx:h,dy:d,positionAngle:f,positionArgs:b,stopPropagation:!0})}else this.eventData(t,{stopPropagation:!0});this.paper.delegateDragEvents(this,t.data)},dragVertexStart:function(t,e,r){if(this.can("vertexMove")){var n=t.target,i=parseInt(n.getAttribute("idx"),10);this.eventData(t,{action:"vertex-move",vertexIdx:i})}},dragVertexRemoveStart:function(t,e,r){if(this.can("vertexRemove")){var n=t.target,i=parseInt(n.getAttribute("idx"),10);this.model.removeVertex(i)}},dragArrowheadStart:function(t,e,r){if(this.can("arrowheadMove")){var n=t.target,i=n.getAttribute("end"),o=this.startArrowheadMove(i,{ignoreBackwardsCompatibility:!0});this.eventData(t,o)}},dragStart:function(t,e,r){this.isDefaultInteractionPrevented(t)||this.can("linkMove")&&this.eventData(t,{action:"move",dx:e,dy:r})},dragLabel:function(t,e,r){var n=this.eventData(t),i={position:this.getLabelPosition(e+n.dx,r+n.dy,n.positionAngle,n.positionArgs)};this.paper.options.snapLabels&&delete i.position.offset;let o={ui:!0};this.paper.isAsync()&&t.type==="touchmove"&&(o.async=!1),this.model.label(n.labelIdx,i,o)},dragVertex:function(t,e,r){var n=this.eventData(t);this.model.vertex(n.vertexIdx,{x:e,y:r},{ui:!0})},dragArrowhead:function(t,e,r){this.paper.options.snapLinks?!this._snapArrowhead(t,e,r)&&this.paper.options.snapLinksSelf&&this._snapArrowheadSelf(t,e,r):this.paper.options.snapLinksSelf?this._snapArrowheadSelf(t,e,r):this._connectArrowhead(this.getEventTarget(t),e,r,this.eventData(t))},drag:function(t,e,r){var n=this.eventData(t);this.model.translate(e-n.dx,r-n.dy,{ui:!0}),this.eventData(t,{dx:e,dy:r})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(t,e,r){var n=this.eventData(t),i=this.paper;i.options.snapLinks?this._snapArrowheadEnd(n):this._connectArrowheadEnd(n,e,r),i.linkAllowed(this)?(this._finishEmbedding(n),this._notifyConnectEvent(n,t)):this._disallow(n),this._afterArrowheadMove(n)},dragEnd:function(){},_disallow:function(t){switch(t.whenNotAllowed){case"remove":this.model.remove({ui:!0});break;case"revert":default:this.model.set(t.arrowhead,t.initialEnd,{ui:!0});break}},_finishEmbedding:function(t){this.paper.options.embeddingMode&&this.model.reparent()&&(t.z=null)},_notifyConnectEvent:function(t,e){var r=t.arrowhead,n=t.initialEnd,i=this.model.prop(r),o=i&&!ae.endsEqual(n,i);if(o){var s=this.paper;n.id&&this.notify("link:disconnect",e,s.findViewByModel(n.id),t.initialMagnet,r),i.id&&this.notify("link:connect",e,s.findViewByModel(i.id),t.magnetUnderPointer,r)}},_snapToPoints:function(t,e,r){let n=null,i=1/0,o=null,s=1/0,l=t.x,u=t.y;for(let h=0;h<e.length;h++){let d=Math.abs(e[h].x-t.x);d<i&&(i=d,n=e[h]);let f=Math.abs(e[h].y-t.y);f<s&&(s=f,o=e[h])}return i<r&&(l=n.x),s<r&&(u=o.y),{x:l,y:u}},_snapArrowheadSelf:function(t,e,r){let{paper:n,model:i}=this,{snapLinksSelf:o}=n.options,s=this.eventData(t),l=o.radius||20,u=this.getEndAnchor(s.arrowhead==="source"?"target":"source"),h=i.vertices(),d=[u,...h],f=this._snapToPoints({x:e,y:r},d,l),C=n.localToClientPoint(f);this._connectArrowhead(document.elementFromPoint(C.x,C.y),f.x,f.y,this.eventData(t))},_snapArrowhead:function(t,e,r){let{paper:n}=this,{snapLinks:i,connectionStrategy:o}=n.options,s=this.eventData(t),l=!1;var u=i.radius||50,h=n.findViewsInArea({x:e-u,y:r-u,width:2*u,height:2*u}),d=s.closestView||null,f=s.closestMagnet||null,C=s.magnetProxy||null;s.closestView=s.closestMagnet=s.magnetProxy=null;var w=Number.MAX_VALUE,b=new z(e,r);h.forEach(function(st){let p=[];st.el.getAttribute("magnet")!=="false"&&p.push({bbox:st.model.getBBox(),magnet:st.el}),st.$("[magnet]").toArray().forEach(v=>{p.push({bbox:st.getNodeBBox(v),magnet:v})}),p.forEach(v=>{let{magnet:x,bbox:M}=v,D=M.center().squaredDistance(b);D<w&&(f===x||n.options.validateConnection.apply(n,s.validateConnectionArgs(st,st.el===x?null:x)))&&(w=D,s.closestView=st,s.closestMagnet=x)})},this);var S,P=null,O=s.closestView,F=s.closestMagnet;F&&(P=s.magnetProxy=O.findProxyNode(F,"highlighter"));var J=s.arrowhead,$=f!==F;if(d&&$&&d.unhighlight(C,{connecting:!0,snapping:!0}),O){let{prevEnd:st,prevX:p,prevY:v}=s;if(s.prevX=e,s.prevY=r,l=!0,!$&&(typeof o!="function"||p===e&&v===r)||(S=O.getLinkEnd(F,e,r,this.model,J),!$&&un(st,S)))return l;s.prevEnd=S,$&&O.highlight(P,{connecting:!0,snapping:!0})}else S={x:e,y:r};return this.model.set(J,S||{x:e,y:r},{ui:!0}),d&&this.notify("link:snap:disconnect",t,d,f,J),O&&this.notify("link:snap:connect",t,O,F,J),l},_snapArrowheadEnd:function(t){var e=t.closestView,r=t.closestMagnet;e&&r&&(e.unhighlight(t.magnetProxy,{connecting:!0,snapping:!0}),t.magnetUnderPointer=e.findMagnet(r)),t.closestView=t.closestMagnet=null},_connectArrowhead:function(t,e,r,n){let{paper:i,model:o}=this;if(n.eventTarget!==t){n.magnetProxy&&n.viewUnderPointer.unhighlight(n.magnetProxy,{connecting:!0});let s=n.viewUnderPointer=i.findView(t);if(s){let l=n.magnetUnderPointer=s.findMagnet(t),u=n.magnetProxy=s.findProxyNode(l,"highlighter");l&&this.paper.options.validateConnection.apply(i,n.validateConnectionArgs(s,l))?u&&s.highlight(u,{connecting:!0}):(n.magnetUnderPointer=null,n.magnetProxy=null)}else n.magnetUnderPointer=null,n.magnetProxy=null}n.eventTarget=t,o.set(n.arrowhead,{x:e,y:r},{ui:!0})},_connectArrowheadEnd:function(t={},e,r){let{model:n}=this,{viewUnderPointer:i,magnetUnderPointer:o,magnetProxy:s,arrowhead:l}=t;if(!o||!s||!i)return;i.unhighlight(s,{connecting:!0});let u=i.getLinkEnd(o,e,r,n,l);n.set(l,u,{ui:!0})},_beforeArrowheadMove:function(t){t.z=this.model.get("z"),this.model.toFront();var e=this.el.style;t.pointerEvents=e.pointerEvents,e.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(t)},_afterArrowheadMove:function(t){t.z!==null&&(this.model.set("z",t.z,{ui:!0}),t.z=null),this.el.style.pointerEvents=t.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(t)},_createValidateConnectionArgs:function(t){var e=[];e[4]=t,e[5]=this;var r,n=0,i=0;t==="source"?(n=2,r="target"):(i=2,r="source");var o=this.model.get(r);if(o.id){var s=e[n]=this.paper.findViewByModel(o.id),l=s.getMagnetFromLinkEnd(o);l===s.el&&(l=void 0),e[n+1]=l}function u(h,d){return e[i]=h,e[i+1]=h.el===d?void 0:d,e}return u},_markAvailableMagnets:function(t){function e(f,C){var w=f.paper,b=w.options.validateConnection;return b.apply(w,this.validateConnectionArgs(f,C))}var r=this.paper,n=r.model.getCells();t.marked={};for(var i=0,o=n.length;i<o;i++){var s=n[i].findView(r);if(s){var l=Array.prototype.slice.call(s.el.querySelectorAll("[magnet]"));s.el.getAttribute("magnet")!=="false"&&l.push(s.el);var u=l.filter(e.bind(t,s));if(u.length>0){for(var h=0,d=u.length;h<d;h++)s.highlight(u[h],{magnetAvailability:!0});s.highlight(null,{elementAvailability:!0}),t.marked[s.model.id]=u}}}},_unmarkAvailableMagnets:function(t){for(var e=Object.keys(t.marked),r,n,i=0,o=e.length;i<o;i++){r=e[i],n=t.marked[r];var s=this.paper.findViewByModel(r);if(s){for(var l=0,u=n.length;l<u;l++)s.unhighlight(n[l],{magnetAvailability:!0});s.unhighlight(null,{elementAvailability:!0})}}t.marked=null},startArrowheadMove:function(t,e){e||(e={});var r={action:"arrowhead-move",arrowhead:t,whenNotAllowed:e.whenNotAllowed||"revert",initialMagnet:this[t+"Magnet"]||(this[t+"View"]?this[t+"View"].el:null),initialEnd:kr(this.model.get(t)),validateConnectionArgs:this._createValidateConnectionArgs(t)};return this._beforeArrowheadMove(r),e.ignoreBackwardsCompatibility!==!0&&(this._dragData=r),r},onMount:function(){jt.prototype.onMount.apply(this,arguments),this.mountLabels()},onDetach:function(){jt.prototype.onDetach.apply(this,arguments),this.unmountLabels()},onRemove:function(){jt.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:Et});Object.defineProperty(wi.prototype,"sourceBBox",{enumerable:!0,get:function(){var t=this.sourceView;if(!t){var e=this.model.source();return new ft(e.x,e.y)}var r=this.sourceMagnet;return t.isNodeConnection(r)?new ft(this.sourceAnchor):t.getNodeBBox(r||t.el)}});Object.defineProperty(wi.prototype,"targetBBox",{enumerable:!0,get:function(){var t=this.targetView;if(!t){var e=this.model.target();return new ft(e.x,e.y)}var r=this.targetMagnet;return t.isNodeConnection(r)?new ft(this.targetAnchor):t.getNodeBBox(r||t.el)}});var su={};Me(su,{addClass:()=>tx,list:()=>ex,mask:()=>qC,opacity:()=>$C,stroke:()=>QC});var QC=We.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(t,e){let{options:r}=this,{useFirstSubpath:n}=r,i;try{let o=tt(e);if(i=o.convertToPathData().trim(),o.tagName()==="PATH"&&n){let s=i.search(/.M/i)+1;s>0&&(i=i.substr(0,s))}}catch{let s=t.getNodeBoundingRect(e);i=tt.rectToPath(At({},r,s.toJSON()))}return i},highlightConnection(t){this.vel.attr("d",t.getSerializedConnection())},highlightNode(t,e){let{vel:r,options:n}=this,{padding:i,layer:o}=n,s=this.getNodeMatrix(t,e);if(i){!o&&e===t.el&&r.remove();let l=t.getNodeBoundingRect(e),u=l.x+l.width/2,h=l.y+l.height/2;l=tt.transformRect(l,s);let d=Math.max(l.width,1),f=Math.max(l.height,1),C=(d+i)/d,w=(f+i)/f,b=tt.createSVGMatrix({a:C,b:0,c:0,d:w,e:u-C*u,f:h-w*h});s=s.multiply(b)}r.attr({d:this.getPathData(t,e),transform:tt.matrixToTransformString(s)})},highlight(t,e){let{vel:r,options:n}=this;r.attr(n.attrs),t.isNodeConnection(e)?this.highlightConnection(t):this.highlightNode(t,e)}});var tI=20;function KC(t,e){let r=t.children();for(;r.length>0;){let n=r.shift();e(n)&&r.push(...n.children())}}var qC=We.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:tI,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray","class"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid","class"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(t,e){let{MASK_CHILD_ATTRIBUTE_BLACKLIST:r,MASK_REPLACE_TAGS:n,MASK_REMOVE_TAGS:i}=this,o=e.tagName();if(!tt.isSVGGraphicsElement(e)||i.includes(o))return e.remove(),!1;if(n.includes(o)){let s=t.vel.findOne(`#${e.id}`);if(s){let{node:l}=s,u=t.getNodeBoundingRect(l);t.model.isElement()&&(u=tt.transformRect(u,t.getNodeMatrix(l)));let h=tt("rect",u.toJSON()),{x:d,y:f}=u.center(),{angle:C,cx:w=d,cy:b=f}=s.rotate();C&&h.rotate(C,w,b),e.parent().append(h)}return e.remove(),!1}return r.forEach(s=>{s==="fill"&&e.attr("fill")==="none"||e.removeAttr(s)}),!0},transformMaskRoot(t,e){let{MASK_ROOT_ATTRIBUTE_BLACKLIST:r}=this;r.forEach(n=>{e.removeAttr(n)})},getMaskShape(t,e){let{options:r,MASK_REPLACE_TAGS:n}=this,{deep:i}=r,o=e.tagName(),s;if(o==="G"){if(!i)return null;s=e.clone(),KC(s,l=>this.transformMaskChild(t,l))}else{if(n.includes(o))return null;s=e.clone()}return this.transformMaskRoot(t,s),s},getMaskId(){return`highlight-mask-${this.cid}`},getMask(t,e){let{VISIBLE:r,INVISIBLE:n,options:i}=this,{padding:o,attrs:s}=i,l="stroke-width"in s?s["stroke-width"]:1,u=e.attr("fill")!=="none",h=parseFloat(e.attr("stroke-width"));isNaN(h)&&(h=1);let d=h+o*2,f=d+l*2,C=this.getMaskShape(t,e);if(!C){let w=t.getNodeBoundingRect(e.node);w.inflate(w.width?0:.5,w.height?0:.5),C=tt("rect",w.toJSON())}return C.attr(s),tt("mask",{id:this.getMaskId()}).append([C.clone().attr({fill:u?r:"none",stroke:r,"stroke-width":f}),C.clone().attr({fill:u?n:"none",stroke:n,"stroke-width":d})])},removeMask(t){let e=t.svg.getElementById(this.getMaskId());e&&t.defs.removeChild(e)},addMask(t,e){t.defs.appendChild(e.node)},highlight(t,e){let{options:r,vel:n}=this,{padding:i,attrs:o,maskClip:s=tI,layer:l}=r,u="stroke"in o?o.stroke:"#000000";!l&&e===t.el&&n.remove();let h=t.getNodeBoundingRect(e).inflate(i+s),d=this.getNodeMatrix(t,e),f=this.getMask(t,tt(e));this.addMask(t.paper,f),n.attr(h.toJSON()),n.attr({transform:tt.matrixToTransformString(d),mask:`url(#${f.id})`,fill:u})},unhighlight(t){this.removeMask(t.paper)}});var $C=We.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:Je("highlight-opacity"),highlight:function(t,e){tt(e).addClass(this.opacityClassName)},unhighlight:function(t,e){tt(e).removeClass(this.opacityClassName)}});var eI=Je("highlighted"),tx=We.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:eI},highlight:function(t,e){tt(e).addClass(this.options.className)},unhighlight:function(t,e){tt(e).removeClass(this.options.className)}},{className:eI});var Sh={ROW:"row",COLUMN:"column"},ex=We.extend({tagName:"g",MOUNTABLE:!0,UPDATE_ATTRIBUTES:function(){return[this.options.attribute]},_prevItems:null,highlight(t,e){let r=t.model,{attribute:n,size:i=20,gap:o=5,direction:s=Sh.ROW}=this.options;if(!n)throw new Error("List: attribute is required");let l=typeof i=="number"?{width:i,height:i}:i,u=s===Sh.ROW,h=u?l.width:l.height,d=r.get(n);Array.isArray(d)||(d=[]);let f=this._prevItems||[],C=d.map((P,O)=>un(f[O],d[O]));if(f.length!==d.length||C.some(P=>!P)){let P=this.vel.children(),O=d.map((F,J)=>{let $=J in P?P[J].node:null;if(C[J])return $;let st=this.createListItem(F,l,$);if(!st)return null;if(!(st instanceof SVGElement))throw new Error("List: item must be an SVGElement");st.dataset.index=J,st.dataset.attribute=n;let p=J*(h+o);return st.setAttribute("transform",u?`translate(${p}, 0)`:`translate(0, ${p})`),st});this.vel.empty().append(O),this._prevItems=d}let w=d.length,b=w===0?0:w*h+(w-1)*o,S=u?{width:b,height:l.height}:{width:l.width,height:b};this.position(r,S)},position(t,e){let{vel:r,options:n}=this,{margin:i=5,position:o="top-left"}=n,{width:s,height:l}=t.size(),{left:u,right:h,top:d,bottom:f}=Er(i),C=new ft(u,d,s-(u+h),l-(d+f)),{x:w,y:b}=Bs(C,o);switch(o){case Pe.CENTER:case Pe.TOP:case Pe.BOTTOM:{w-=e.width/2;break}case Pe.RIGHT:case Pe.BOTTOM_RIGHT:case Pe.TOP_RIGHT:{w-=e.width;break}}switch(o){case Pe.CENTER:case Pe.RIGHT:case Pe.LEFT:{b-=e.height/2;break}case Pe.BOTTOM:case Pe.BOTTOM_RIGHT:case Pe.BOTTOM_LEFT:{b-=e.height;break}}r.attr("transform",`translate(${w}, ${b})`)}},{Directions:Sh,Positions:Pe});var au={};Me(au,{connectionClosest:()=>nI,connectionLength:()=>nx,connectionPerpendicular:()=>sx,connectionRatio:()=>rx,resolveRef:()=>wo});function rx(t,e,r,n){var i="ratio"in n?n.ratio:.5;return t.getPointAtRatio(i)}function nx(t,e,r,n){var i="length"in n?n.length:20;return t.getPointAtLength(i)}function ix(t,e,r,n){var i=1e6,o=t.getConnection(),s=t.getConnectionSubdivisions(),l=new pt(r.clone().offset(0,i),r.clone().offset(0,-i)),u=new pt(r.clone().offset(i,0),r.clone().offset(-i,0)),h=l.intersect(o,{segmentSubdivisions:s}),d=u.intersect(o,{segmentSubdivisions:s}),f=[];return h&&Array.prototype.push.apply(f,h),d&&Array.prototype.push.apply(f,d),f.length>0?r.chooseClosest(f):"fallbackAt"in n?rI(t,n.fallbackAt):nI(t,e,r,n)}function ox(t,e,r,n){var i=t.getClosestPoint(r);return i||new z}function wo(t){return function(e,r,n,i){if(n instanceof Element){var o=this.paper.findView(n),s;if(o)if(o.isNodeConnection(n)){var l="fixedAt"in i?i.fixedAt:"50%";s=rI(o,l)}else s=o.getNodeBBox(n).center();else s=new z;return t.call(this,e,r,s,i)}return t.apply(this,arguments)}}function rI(t,e){var r=parseFloat(e);return Oe(e)?t.getPointAtRatio(r/100):t.getPointAtLength(r)}var sx=wo(ix),nI=wo(ox);var uu={};Me(uu,{anchor:()=>hx,bbox:()=>dx,boundary:()=>px,rectangle:()=>gx});function lu(t,e,r){if(se(r)){let{x:i,y:o}=r;if(isFinite(o)){let s=new pt(e,t),{start:l,end:u}=s.parallel(o);e=l,t=u}r=i}if(!isFinite(r))return t;var n=t.distance(e);return r===0&&n>0?t:t.move(e,-Math.min(r,n-1))}function Lh(t){var e=t.getAttribute("stroke-width");return e===null?0:parseFloat(e)||0}function ax(t,e,r=0){let n,i,o,s,{start:l,end:u}=t;switch(e){case"left":n="x",i=u,o=l,s=-1;break;case"right":n="x",i=l,o=u,s=1;break;case"top":n="y",i=u,o=l,s=-1;break;case"bottom":n="y",i=l,o=u,s=1;break;default:return}l[n]<u[n]?i[n]=o[n]:o[n]=i[n],isFinite(r)&&(i[n]+=s*r,o[n]+=s*r)}function lx(t,e,r,n){let{offset:i,alignOffset:o,align:s}=n;return s&&ax(t,s,o),lu(t.end,t.start,i)}function iI(t,e,r,n){var i=e.getNodeBBox(r);n.stroke&&i.inflate(Lh(r)/2);var o=t.intersect(i),s=o?t.start.chooseClosest(o):t.end;return lu(s,t.start,n.offset)}function ux(t,e,r,n){var i=e.model.angle();if(i===0)return iI(t,e,r,n);var o=e.getNodeUnrotatedBBox(r);n.stroke&&o.inflate(Lh(r)/2);var s=o.center(),l=t.clone().rotate(s,i),u=l.setLength(1e6).intersect(o),h=u?l.start.chooseClosest(u).rotate(s,-i):t.end;return lu(h,t.start,n.offset)}function cx(t){if(!t)return null;var e=t;do{var r=e.tagName;if(typeof r!="string")return null;if(r=r.toUpperCase(),r==="G")e=e.firstElementChild;else if(r==="TITLE")e=e.nextElementSibling;else break}while(e);return e}var Ph="segmentSubdivisons",Dh="shapeBBox";function fx(t,e,r,n){var i,o,s=n.selector,l=t.end;if(typeof s=="string"?i=e.findBySelector(s)[0]:s===!1?i=r:Array.isArray(s)?i=An(r,s):i=cx(r),!tt.isSVGGraphicsElement(i)){if(i===r||!tt.isSVGGraphicsElement(r))return l;i=r}var u=e.getNodeShape(i),h=e.getNodeMatrix(i),d=e.getRootTranslateMatrix(),f=e.getRootRotateMatrix(),C=d.multiply(f).multiply(h),w=C.inverse(),b=tt.transformLine(t,w),S=b.start.clone(),P=e.getNodeData(i);if(n.insideout===!1){P[Dh]||(P[Dh]=u.bbox());var O=P[Dh];if(O.containsPoint(S))return l}var F;if(u instanceof xt){var J=n.precision||2;P[Ph]||(P[Ph]=u.getSegmentSubdivisions({precision:J})),F={precision:J,segmentSubdivisions:P[Ph]}}n.extrapolate===!0&&b.setLength(1e6),o=b.intersect(u,F),o?tt.isArray(o)&&(o=S.chooseClosest(o)):n.sticky===!0&&(u instanceof ft?o=u.pointNearestToPoint(S):u instanceof ze?o=u.intersectionWithLineFromCenterToPoint(S):o=u.closestPoint(S,F));var $=o?tt.transformPoint(o,C):l,st=n.offset||0;return n.stroke&&(st+=Lh(i)/2),lu($,t.start,st)}var hx=lx,dx=iI,gx=ux,px=fx;var cu={};Me(cu,{bottom:()=>Cx,bottomLeft:()=>Mx,bottomRight:()=>Tx,center:()=>Ax,left:()=>xx,midSide:()=>Px,modelCenter:()=>Dx,perpendicular:()=>Sx,right:()=>wx,top:()=>yx,topLeft:()=>bx,topRight:()=>Nx});function yn(t){return function(e,r,n,i){var o=!!i.rotate,s=o?e.getNodeUnrotatedBBox(r):e.getNodeBBox(r),l=s[t](),u=i.dx;if(u){var h=Oe(u);u=parseFloat(u),isFinite(u)&&(h&&(u/=100,u*=s.width),l.x+=u)}var d=i.dy;if(d){var f=Oe(d);d=parseFloat(d),isFinite(d)&&(f&&(d/=100,d*=s.height),l.y+=d)}return o?l.rotate(e.model.getBBox().center(),-e.model.angle()):l}}function mx(t,e,r,n){var i=t.model.angle(),o=t.getNodeBBox(e),s=o.center(),l=o.origin(),u=o.corner(),h=n.padding;if(isFinite(h)||(h=0),l.y+h<=r.y&&r.y<=u.y-h){var d=r.y-s.y;s.x+=i===0||i===180?0:d*1/Math.tan(Le(i)),s.y+=d}else if(l.x+h<=r.x&&r.x<=u.x-h){var f=r.x-s.x;s.y+=i===90||i===270?0:f*Math.tan(Le(i)),s.x+=f}return s}function vx(t,e,r,n){var i=!!n.rotate,o,s,l;i?(o=t.getNodeUnrotatedBBox(e),l=t.model.getBBox().center(),s=t.model.angle()):o=t.getNodeBBox(e);var u=n.padding;isFinite(u)&&o.inflate(u),i&&r.rotate(l,s);var h=o.sideNearestToPoint(r),d;switch(h){case"left":d=o.leftMiddle();break;case"right":d=o.rightMiddle();break;case"top":d=o.topMiddle();break;case"bottom":d=o.bottomMiddle();break}return i?d.rotate(l,-s):d}function Ix(t,e,r,n,i){return t.model.getPointFromConnectedLink(this.model,i).offset(n.dx,n.dy)}var Ax=yn("center"),yx=yn("topMiddle"),Cx=yn("bottomMiddle"),xx=yn("leftMiddle"),wx=yn("rightMiddle"),bx=yn("origin"),Nx=yn("topRight"),Mx=yn("bottomLeft"),Tx=yn("corner"),Sx=wo(mx),Px=wo(vx),Dx=Ix;var Ur=on(Gn(),1),lI=on(vs(),1),bo={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},Lx=50,oI=20,sI=1e3,kx=1/0,fu=9007199254740991,kh=jt.Highlighting,aI={[kh.DEFAULT]:{name:"stroke",options:{padding:3}},[kh.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[kh.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},Ox=[{name:hr.BACK},{name:hr.CELLS},{name:hr.LABELS},{name:hr.FRONT},{name:hr.TOOLS}],Ex=Nr.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,drawGridSize:null,background:!1,perpendicularLinks:!1,elementView:we,linkView:wi,snapLabels:!1,snapLinks:!1,snapLinksSelf:!1,labelsLayer:!1,multiLinks:!0,guard:function(t,e){return!1},highlighting:aI,preventContextMenu:!0,preventDefaultBlankAction:!0,preventDefaultViewAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new ae,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(t,e,r){return e.getAttribute("magnet")!=="passive"},validateConnection:function(t,e,r,n,i,o){return(i==="target"?r:t)instanceof we},embeddingMode:!1,validateEmbedding:function(t,e){return!0},validateUnembedding:function(t){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:bo.EXACT,frozen:!1,autoFreeze:!1,onViewUpdate:function(t,e,r,n,i){e&(t.FLAG_INSERT|t.FLAG_REMOVE)||n.mounting||n.isolate||i.requestConnectedLinksUpdate(t,r,n)},onViewPostponed:function(t,e,r){return r.forcePostponedViewUpdate(t,e)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:su,anchorNamespace:cu,linkAnchorNamespace:au,connectionPointNamespace:uu,overflow:!1},events:{dblclick:"pointerdblclick",dbltap:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],FORM_CONTROL_TAG_NAMES:["TEXTAREA","INPUT","BUTTON","SELECT","OPTION"],GUARDED_TAG_NAMES:["SELECT"],MIN_SCALE:1e-6,init:function(){let{options:t,el:e}=this;t.cellViewNamespace||(t.cellViewNamespace=typeof joint<"u"&&br(joint,"shapes")?joint.shapes:null);let r=this.model=t.model||new _l;this._layers={},this.setGrid(t.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this._mw_evt_buffer={event:null,deltas:[]},this.$document=(0,Ur.default)(e.ownerDocument),this.resetViews(r.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1,disabled:!1,idle:!1}},startListening:function(){var t=this.model;this.listenTo(t,"add",this.onCellAdded).listenTo(t,"remove",this.onCellRemoved).listenTo(t,"change",this.onCellChange).listenTo(t,"reset",this.onGraphReset).listenTo(t,"sort",this.onGraphSort).listenTo(t,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(t,e,r){var n=r.position;this.isAsync()||!Ge(n)?this.renderView(t,r):(r.maxPosition===n&&this.freeze({key:"addCells"}),this.renderView(t,r),n===0&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(t,e,r){let n=this.findViewByModel(t);n&&this.requestViewUpdate(n,n.FLAG_REMOVE,n.UPDATE_PRIORITY,r)},onCellChange:function(t,e){if(t!==this.model.attributes.cells&&t.hasChanged("z")&&this.options.sorting===bo.APPROX){let r=this.findViewByModel(t);r&&this.requestViewUpdate(r,r.FLAG_INSERT,r.UPDATE_PRIORITY,e)}},onGraphReset:function(t,e){this.resetLayers(),this.resetViews(t.models,e)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(t){if(!this.isFrozen()){var e=t&&t.batchName,r=this.model;if(!this.isAsync()){var n=this.UPDATE_DELAYING_BATCHES;n.includes(e)&&!r.hasActiveBatch(n)&&this.updateViews(t)}var i=this.SORT_DELAYING_BATCHES;i.includes(e)&&!r.hasActiveBatch(i)&&this.sortViews()}},cloneOptions:function(){let{options:t}=this,{defaultConnector:e,defaultRouter:r,defaultConnectionPoint:n,defaultAnchor:i,defaultLinkAnchor:o,origin:s,highlighting:l,cellViewNamespace:u,interactive:h}=t;!u&&typeof joint<"u"&&br(joint,"shapes")&&(t.cellViewNamespace=joint.shapes),qt(e)||(t.defaultConnector=$e(e)),qt(r)||(t.defaultRouter=$e(r)),qt(n)||(t.defaultConnectionPoint=$e(n)),qt(i)||(t.defaultAnchor=$e(i)),qt(o)||(t.defaultLinkAnchor=$e(o)),se(h)&&(t.interactive=At({},h)),se(l)&&(t.highlighting=Ii({},l,aI)),t.origin=At({},s)},children:function(){var t=tt.namespace;return[{namespaceURI:t.xhtml,tagName:"div",className:Je("paper-background"),selector:"background"},{namespaceURI:t.xhtml,tagName:"div",className:Je("paper-grid"),selector:"grid"},{namespaceURI:t.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":t.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:Je("layers"),selector:"layers"}]}]},hasLayerView(t){return t in this._layers},getLayerView(t){let{_layers:e}=this;if(t in e)return e[t];throw new Error(`dia.Paper: Unknown layer "${t}"`)},getLayerNode(t){return this.getLayerView(t).el},render:function(){this.renderChildren();let{childNodes:t,options:e}=this,{svg:r,defs:n,layers:i,background:o,grid:s}=t;return r.style.overflow=e.overflow?"visible":"hidden",this.svg=r,this.defs=n,this.layers=i,this.$background=(0,Ur.default)(o),this.$grid=(0,Ur.default)(s),this.renderLayers(),tt.ensureId(r),e.background&&this.drawBackground(e.background),e.drawGrid&&this.drawGrid(),this},renderLayers:function(t=Ox){this.removeLayers(),t.forEach(({name:i,sorted:o})=>{let s=new ph({name:i});this.layers.appendChild(s.el),this._layers[i]=s});let e=this.getLayerView(hr.CELLS),r=this.getLayerView(hr.TOOLS),n=this.getLayerView(hr.LABELS);this.tools=r.el,this.cells=this.viewport=e.el,e.vel.addClass(Je("viewport")),n.vel.addClass(Je("viewport"))},removeLayers:function(){let{_layers:t}=this;Object.keys(t).forEach(e=>{t[e].remove(),delete t[e]})},resetLayers:function(){let{_layers:t}=this;Object.keys(t).forEach(e=>{t[e].removePivots()})},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(t){var e=this.layers;if(t===void 0){var r=e.getAttribute("transform");return(this._viewportTransformString||null)===r?t=this._viewportMatrix:(t=e.getCTM(),this._viewportMatrix=t,this._viewportTransformString=r),tt.createSVGMatrix(t)}t=tt.createSVGMatrix(t);var n=tt.matrixToTransformString(t);return e.setAttribute("transform",n),this._viewportMatrix=t,this._viewportTransformString=e.getAttribute("transform"),this},clientMatrix:function(){return tt.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(t,e,r){if(t instanceof jt)for(var n=t.model,i=this.model.getConnectedLinks(n),o=0,s=i.length;o<s;o++){var l=i[o],u=this.findViewByModel(l);if(u){var h=["UPDATE"];l.getTargetCell()===n&&h.push("TARGET"),l.getSourceCell()===n&&h.push("SOURCE");var d=Math.max(e+1,u.UPDATE_PRIORITY);this.scheduleViewUpdate(u,u.getFlag(h),d,r)}}},forcePostponedViewUpdate:function(t,e){if(!t||!(t instanceof jt))return!1;var r=t.model;if(r.isElement())return!1;if(!(e&t.getFlag(["SOURCE","TARGET"]))){var n={silent:!0},i=0,o=this.findViewByModel(r.getSourceCell());o&&!this.isViewMounted(o)&&(i=this.dumpView(o,n),t.updateEndMagnet("source"));var s=0,l=this.findViewByModel(r.getTargetCell());if(l&&!this.isViewMounted(l)&&(s=this.dumpView(l,n),t.updateEndMagnet("target")),i===0&&s===0)return!this.dumpView(t,n)}return!1},requestViewUpdate:function(t,e,r,n){n||(n={}),this.scheduleViewUpdate(t,e,r,n);var i=this.isAsync();if(!(this.isFrozen()||i&&n.async!==!1)&&!this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES)){var o=this.updateViews(n);i&&this.notifyAfterRender(o,n)}},scheduleViewUpdate:function(t,e,r,n){let{_updates:i,options:o}=this;i.idle&&o.autoFreeze&&(i.idle=!1,this.unfreeze());let{FLAG_REMOVE:s,FLAG_INSERT:l,UPDATE_PRIORITY:u,cid:h}=t,d=i.priorities[r];if(d||(d=i.priorities[r]={}),r>u)for(let w=r-1;w>=u;w--){let b=i.priorities[w];!b||!(h in b)||(d[h]|=b[h],delete b[h])}let f=d[h]||0;if((f&e)===e)return;f||i.count++,e&s&&f&l?d[h]^=l:e&l&&f&s&&(d[h]^=s),d[h]|=e;let C=o.onViewUpdate;typeof C=="function"&&C.call(this,t,e,r,n||{},this)},dumpViewUpdate:function(t){if(!t)return 0;var e=this._updates,r=t.cid,n=e.priorities[t.UPDATE_PRIORITY],i=this.registerMountedView(t)|n[r];return delete n[r],i},dumpView:function(t,e={}){let r=this.dumpViewUpdate(t);if(!r)return 0;let n=!e.silent;n&&this.notifyBeforeRender(e);let i=this.updateView(t,r,e);if(n){let o={updated:1,priority:t.UPDATE_PRIORITY};this.notifyAfterRender(o,e)}return i},updateView:function(t,e,r){if(!t)return 0;let{FLAG_REMOVE:n,FLAG_INSERT:i,FLAG_INIT:o,model:s}=t;if(t instanceof jt){if(e&n)return this.removeView(s),0;if(e&i){let l=!!(e&o);l&&(e^=o),this.insertView(t,l),e^=i}}return e?t.confirmUpdate(e,r||{}):0},requireView:function(t,e){var r=this.findViewByModel(t);return r?(this.dumpView(r,e),r):null},registerUnmountedView:function(t){var e=t.cid,r=this._updates;if(e in r.unmounted)return 0;var n=r.unmounted[e]|=t.FLAG_INSERT;return r.unmountedCids.push(e),delete r.mounted[e],n},registerMountedView:function(t){var e=t.cid,r=this._updates;if(e in r.mounted)return 0;r.mounted[e]=!0,r.mountedCids.push(e);var n=r.unmounted[e]||0;return delete r.unmounted[e],n},isViewMounted:function(t){if(!t)return!1;var e=t.cid,r=this._updates;return e in r.mounted},dumpViews:function(t){var e=He({},t,{viewport:null});this.checkViewport(e),this.updateViews(e)},updateViews:function(t){this.notifyBeforeRender(t);let e,r=0,n=0,i=fu;do n++,e=this.updateViewsBatch(t),r+=e.updated,i=Math.min(e.priority,i);while(!e.empty);let o={updated:r,batches:n,priority:i};return this.notifyAfterRender(o,t),o},hasScheduledUpdates:function(){let t=this._updates.priorities,e=Object.keys(t),r=e.length;for(;r>0&&r--;)for(let n in t[e[r]])return!0;return!1},updateViewsAsync:function(t,e){t||(t={}),e||(e={processed:0,priority:fu});let{_updates:r,options:n}=this,i=r.id;if(i){Es(i),e.processed===0&&this.hasScheduledUpdates()&&this.notifyBeforeRender(t);let o=this.updateViewsBatch(t),s=He({},t,{mountBatchSize:sI-o.mounted,unmountBatchSize:sI-o.unmounted}),l=this.checkViewport(s),u=l.unmounted,h=l.mounted,d=e.processed,f=r.count;o.updated>0?(d+=o.updated+o.unmounted,o.processed=d,e.priority=Math.min(o.priority,e.priority),o.empty&&h===0?(o.unmounted+=u,o.mounted+=h,o.priority=e.priority,this.notifyAfterRender(o,t),e.processed=0,e.priority=fu,r.count=0):e.processed=d):r.idle||n.autoFreeze&&(this.freeze(),r.idle=!0,this.trigger("render:idle",t));let C=t.progress;if(f&&typeof C=="function"&&C.call(this,o.empty,d,f,o,this),r.id!==i)return}if(r.disabled)throw new Error("dia.Paper: can not unfreeze the paper after it was removed");r.id=Os(this.updateViewsAsync,this,t,e)},notifyBeforeRender:function(t={}){let e=t.beforeRender;typeof e!="function"&&(e=this.options.beforeRender,typeof e!="function")||e.call(this,t,this)},notifyAfterRender:function(t,e={}){let r=e.afterRender;typeof r!="function"&&(r=this.options.afterRender),typeof r=="function"&&r.call(this,t,e,this),this.trigger("render:done",t,e)},updateViewsBatch:function(t){t||(t={});var e=t.batchSize||kx,r=this._updates,n=0,i=0,o=0,s=0,l=fu,u=!0,h=this.options,d=r.priorities,f="viewport"in t?t.viewport:h.viewport;typeof f!="function"&&(f=null);var C=h.onViewPostponed;typeof C!="function"&&(C=null);var w=Object.keys(d);t:for(var b=0,S=w.length;b<S;b++){var P=+w[b],O=d[P];for(var F in O){if(n>=e){u=!1;break t}var J=Un[F];if(!J){delete O[F];continue}var $=O[F];if(!($&J.FLAG_REMOVE)){var st=F in r.unmounted;if(J.DETACHABLE&&f&&!f.call(this,J,!st,this)){st||(this.registerUnmountedView(J),this.detachView(J)),r.unmounted[F]|=$,delete O[F],o++;continue}st&&($|=J.FLAG_INSERT,s++),$|=this.registerMountedView(J)}var p=this.updateView(J,$,t);if(p>0&&(O[F]=p,!C||!C.call(this,J,p,this)||O[F])){i++,u=!1;continue}l>P&&(l=P),n++,delete O[F]}}return{priority:l,updated:n,postponed:i,unmounted:o,mounted:s,empty:u}},getUnmountedViews:function(){let t=this._updates,e=Object.keys(t.unmounted),r=e.length,n=new Array(r);for(var i=0;i<r;i++)n[i]=Un[e[i]];return n},getMountedViews:function(){let t=this._updates,e=Object.keys(t.mounted),r=e.length,n=new Array(r);for(var i=0;i<r;i++)n[i]=Un[e[i]];return n},checkUnmountedViews:function(t,e){e||(e={});var r=0;typeof t!="function"&&(t=null);for(var n=("mountBatchSize"in e)?e.mountBatchSize:1/0,i=this._updates,o=i.unmountedCids,s=i.unmounted,l=0,u=Math.min(o.length,n);l<u;l++){var h=o[l];if(h in s){var d=Un[h];if(d){if(d.DETACHABLE&&t&&!t.call(this,d,!1,this)){o.push(h);continue}r++;var f=this.registerMountedView(d);f&&this.scheduleViewUpdate(d,f,d.UPDATE_PRIORITY,{mounting:!0})}}}return o.splice(0,l),r},checkMountedViews:function(t,e){e||(e={});var r=0;if(typeof t!="function")return r;for(var n=("unmountBatchSize"in e)?e.unmountBatchSize:1/0,i=this._updates,o=i.mountedCids,s=i.mounted,l=0,u=Math.min(o.length,n);l<u;l++){var h=o[l];if(h in s){var d=Un[h];if(d){if(!d.DETACHABLE||t.call(this,d,!0,this)){o.push(h);continue}r++;var f=this.registerUnmountedView(d);f&&this.detachView(d)}}}return o.splice(0,l),r},checkViewVisibility:function(t,e={}){let r="viewport"in e?e.viewport:this.options.viewport;typeof r!="function"&&(r=null);let n=this._updates,{mounted:i,unmounted:o}=n,s=!t.DETACHABLE||!r||r.call(this,t,!1,this),l=!1,u=!1;if(t.cid in i&&!s){this.registerUnmountedView(t)&&this.detachView(t);let f=n.mountedCids.indexOf(t.cid);n.mountedCids.splice(f,1),l=!0}if(!l&&t.cid in o&&s){let d=n.unmountedCids.indexOf(t.cid);n.unmountedCids.splice(d,1);var h=this.registerMountedView(t);h&&this.scheduleViewUpdate(t,h,t.UPDATE_PRIORITY,{mounting:!0}),u=!0}return{mounted:u?1:0,unmounted:l?1:0}},checkViewport:function(t){var e=He({},t,{mountBatchSize:1/0,unmountBatchSize:1/0}),r="viewport"in e?e.viewport:this.options.viewport,n=this.checkMountedViews(r,e);if(n>0){var i=this._updates.unmountedCids;e.mountBatchSize=Math.min(i.length-n,e.mountBatchSize)}var o=this.checkUnmountedViews(r,e);return{mounted:o,unmounted:n}},freeze:function(t){t||(t={});var e=this._updates,r=t.key,n=this.options.frozen,i=e.freezeKey;if(r&&r!==i){if(n&&i)return;e.freezeKey=r,e.keyFrozen=n}this.options.frozen=!0;var o=e.id;e.id=null,this.isAsync()&&o&&Es(o)},unfreeze:function(t){t||(t={});var e=this._updates,r=t.key,n=e.freezeKey;r&&n&&r!==n||(e.freezeKey=null,!(r&&r===n&&e.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(t)):this.updateViews(t),this.options.frozen=e.keyFrozen=!1,e.sort&&(this.sortViews(),e.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===bo.EXACT},onRemove:function(){this.freeze(),this._updates.disabled=!0,this.removeLayers(),this.removeViews()},getComputedSize:function(){var t=this.options,e=t.width,r=t.height;return Ge(e)||(e=this.el.clientWidth),Ge(r)||(r=this.el.clientHeight),{width:e,height:r}},setDimensions:function(t,e){let{options:r}=this,{width:n,height:i}=r,o=t===void 0?n:t,s=e===void 0?i:e;if(n===o&&i===s)return;r.width=o,r.height=s,this._setDimensions();let l=this.getComputedSize();this.trigger("resize",l.width,l.height)},_setDimensions:function(){let{options:t}=this,e=t.width,r=t.height;Ge(e)&&(e=Math.round(e)),Ge(r)&&(r=Math.round(r)),this.$el.css({width:e===null?"":e,height:r===null?"":r})},setOrigin:function(t,e){return this.translate(t||0,e||0)},fitToContent:function(t,e,r,n){Wt(t)?n=t:n=At({gridWidth:t,gridHeight:e,padding:r},n);let{x:i,y:o,width:s,height:l}=this.getFitToContentArea(n),{sx:u,sy:h}=this.scale();return this.setOrigin(-i*u,-o*h),this.setDimensions(s*u,l*h),new ft(i,o,s,l)},getFitToContentArea:function(t={}){let e=t.gridWidth||1,r=t.gridHeight||1,n=Er(t.padding||0),i=Math.max(t.minWidth||0,e),o=Math.max(t.minHeight||0,r),s=t.maxWidth||Number.MAX_VALUE,l=t.maxHeight||Number.MAX_VALUE,u=t.allowNewOrigin,h="contentArea"in t?new ft(t.contentArea):this.getContentArea(t),{sx:d,sy:f}=this.scale();h.x*=d,h.y*=f,h.width*=d,h.height*=f;let C=Math.ceil((h.width+h.x)/e),w=Math.ceil((h.height+h.y)/r);t.allowNegativeBottomRight||(C=Math.max(C,1),w=Math.max(w,1)),C*=e,w*=r;let b=0;(u==="negative"&&h.x<0||u==="positive"&&h.x>=0||u==="any")&&(b=Math.ceil(-h.x/e)*e,b+=n.left,C+=b);let S=0;return(u==="negative"&&h.y<0||u==="positive"&&h.y>=0||u==="any")&&(S=Math.ceil(-h.y/r)*r,S+=n.top,w+=S),C+=n.right,w+=n.bottom,C=Math.max(C,i),w=Math.max(w,o),C=Math.min(C,s),w=Math.min(w,l),new ft(-b/d,-S/f,C/d,w/f)},transformToFitContent:function(t){t||(t={});let e,r;if("contentArea"in t){let P=t.contentArea;e=this.localToPaperRect(P),r=new z(P)}else e=this.getContentBBox(t),r=this.paperToLocalPoint(e);if(!e.width||!e.height)return;He(t,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE,verticalAlign:"top",horizontalAlign:"left"});let n=Er(t.padding),i=t.minScaleX||t.minScale,o=t.maxScaleX||t.maxScale,s=t.minScaleY||t.minScale,l=t.maxScaleY||t.maxScale,u;if(t.fittingBBox)u=t.fittingBBox;else{let P=this.translate(),O=this.getComputedSize();u={x:P.tx,y:P.ty,width:O.width,height:O.height}}u=new ft(u).moveAndExpand({x:n.left,y:n.top,width:-n.left-n.right,height:-n.top-n.bottom});let h=this.scale(),d=u.width/e.width*h.sx,f=u.height/e.height*h.sy;if(t.preserveAspectRatio&&(d=f=Math.min(d,f)),t.scaleGrid){let P=t.scaleGrid;d=P*Math.floor(d/P),f=P*Math.floor(f/P)}d=Math.min(o,Math.max(i,d)),f=Math.min(l,Math.max(s,f));let C={x:d/h.sx,y:f/h.sy},w=this.options.origin,b=u.x-r.x*d-w.x,S=u.y-r.y*f-w.y;switch(t.verticalAlign){case"middle":S=S+(u.height-e.height*C.y)/2;break;case"bottom":S=S+(u.height-e.height*C.y);break;case"top":default:break}switch(t.horizontalAlign){case"middle":b=b+(u.width-e.width*C.x)/2;break;case"right":b=b+(u.width-e.width*C.x);break;case"left":default:break}this.scale(d,f),this.translate(b,S)},scaleContentToFit:function(t){this.transformToFitContent(t)},getContentArea:function(t){return t&&t.useModelGeometry?this.model.getBBox()||new ft:tt(this.cells).getBBox()},getContentBBox:function(t){return this.localToPaperRect(this.getContentArea(t))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...t){let{restrictTranslate:e}=this.options,r;return qt(e)?r=e.apply(this,t):e===!0?r=this.getArea():e?r=new ft(e):r=null,r},createViewForModel:function(t){let{options:e}=this;var r,n,i=e.cellViewNamespace,o=t.get("type")+"View",s=An(i,o,".");t.isLink()?(r=e.linkView,n=wi):(r=e.elementView,n=we);var l=r.prototype instanceof lI.default.View?s||r:r.call(this,t)||s||n;return new l({model:t,interactive:e.interactive,labelsLayer:e.labelsLayer===!0?hr.LABELS:e.labelsLayer})},removeView:function(t){let{id:e}=t,{_views:r,_updates:n}=this,i=r[e];if(i){var{cid:o}=i;let{mounted:s,unmounted:l}=n;i.remove(),delete r[e],delete s[o],delete l[o]}return i},renderView:function(t,e){let{id:r}=t,n=this._views,i,o,s=!0;return r in n&&(i=n[r],i.model===t?(o=i.FLAG_INSERT,s=!1):this.removeView(t)),s&&(i=n[r]=this.createViewForModel(t),i.paper=this,o=this.registerUnmountedView(i)|this.FLAG_INIT|i.getFlag(he(i,"initFlag"))),this.requestViewUpdate(i,o,i.UPDATE_PRIORITY,e),i},onImageDragStart:function(){return!1},resetViews:function(t,e){e||(e={}),t||(t=[]),this._resetUpdates(),this.removeViews();let r=this.options.autoFreeze?null:"reset";this.freeze({key:r});for(var n=0,i=t.length;n<i;n++)this.renderView(t[n],e);this.unfreeze({key:r}),this.sortViews()},removeViews:function(){ur(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen()){this._updates.sort=!0;return}this.sortViewsExact()}},sortViewsExact:function(){var t=(0,Ur.default)(this.cells).children("[model-id]"),e=this.model.get("cells");ov(t,function(r,n){var i=e.get(r.getAttribute("model-id")),o=e.get(n.getAttribute("model-id")),s=i.attributes.z||0,l=o.attributes.z||0;return s===l?0:s<l?-1:1})},insertView:function(t,e){let r=this.getLayerView(hr.CELLS),{el:n,model:i}=t;switch(this.options.sorting){case bo.APPROX:r.insertSortedNode(n,i.get("z"));break;case bo.EXACT:default:r.insertNode(n);break}t.onMount(e)},detachView(t){t.unmount(),t.onDetach()},scale:function(t,e,r,n){if(t===void 0)return tt.matrixToScale(this.matrix());e===void 0&&(e=t),r===void 0&&(r=0,n=0);var i=this.translate();if(r||n||i.tx||i.ty){var o=i.tx-r*(t-1),s=i.ty-n*(e-1);this.translate(o,s)}t=Math.max(t||0,this.MIN_SCALE),e=Math.max(e||0,this.MIN_SCALE);var l=this.matrix();return l.a=t,l.d=e,this.matrix(l),this.trigger("scale",t,e,r,n),this},rotate:function(t,e,r){if(t===void 0)return tt.matrixToRotate(this.matrix());if(e===void 0){var n=this.cells.getBBox();e=n.width/2,r=n.height/2}var i=this.matrix().translate(e,r).rotate(t).translate(-e,-r);return this.matrix(i),this},translate:function(t,e){if(t===void 0)return tt.matrixToTranslate(this.matrix());let{options:r}=this,{origin:n,drawGrid:i}=r;t||(t=0),e||(e=0);let o=this.matrix();if(o.e===t&&o.f===e)return this;o.e=t,o.f=e,this.matrix(o);let{tx:s,ty:l}=this.translate();return n.x=s,n.y=l,this.trigger("translate",s,l),i&&this.drawGrid(),this},findView:function(t){var e=Te(t)?this.cells.querySelector(t):t instanceof Ur.default?t[0]:t,r=this.findAttribute("model-id",e);if(r)return this._views[r]},findViewByModel:function(t){var e=Te(t)||Ge(t)?t:t&&t.id;return this._views[e]},findViewsFromPoint:function(t){t=new z(t);var e=this.model.getElements().map(this.findViewByModel,this);return e.filter(function(r){return r&&r.vel.getBBox({target:this.cells}).containsPoint(t)},this)},findViewsInArea:function(t,e){e=He(e||{},{strict:!1}),t=new ft(t);var r=this.model.getElements().map(this.findViewByModel,this),n=e.strict?"containsRect":"intersect";return r.filter(function(i){return i&&t[n](i.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(t,...e){typeof t=="string"&&this.trigger("tools:event",t,...e)},getModelById:function(t){return this.model.getCell(t)},snapToGrid:function(t,e){return this.clientToLocalPoint(t,e).snapToGrid(this.options.gridSize)},localToPaperPoint:function(t,e){var r=new z(t,e),n=tt.transformPoint(r,this.matrix());return n},localToPaperRect:function(t,e,r,n){var i=new ft(t,e,r,n),o=tt.transformRect(i,this.matrix());return o},paperToLocalPoint:function(t,e){var r=new z(t,e),n=tt.transformPoint(r,this.matrix().inverse());return n},paperToLocalRect:function(t,e,r,n){var i=new ft(t,e,r,n),o=tt.transformRect(i,this.matrix().inverse());return o},localToClientPoint:function(t,e){var r=new z(t,e),n=tt.transformPoint(r,this.clientMatrix());return n},localToClientRect:function(t,e,r,n){var i=new ft(t,e,r,n),o=tt.transformRect(i,this.clientMatrix());return o},clientToLocalPoint:function(t,e){var r=new z(t,e),n=tt.transformPoint(r,this.clientMatrix().inverse());return n},clientToLocalRect:function(t,e,r,n){var i=new ft(t,e,r,n),o=tt.transformRect(i,this.clientMatrix().inverse());return o},localToPagePoint:function(t,e){return this.localToPaperPoint(t,e).offset(this.pageOffset())},localToPageRect:function(t,e,r,n){return this.localToPaperRect(t,e,r,n).offset(this.pageOffset())},pageToLocalPoint:function(t,e){var r=new z(t,e),n=r.difference(this.pageOffset());return this.paperToLocalPoint(n)},pageToLocalRect:function(t,e,r,n){var i=this.pageOffset(),o=new ft(t,e,r,n);return o.x-=i.x,o.y-=i.y,this.paperToLocalRect(o)},clientOffset:function(){var t=this.svg.getBoundingClientRect();return new z(t.left,t.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(t){if(!(t instanceof wi))throw new Error("Must provide a linkView.");var e=t.model,r=this.options,n=this.model,i=n.constructor.validations;return!(!r.multiLinks&&!i.multiLinks.call(this,n,e)||!r.linkPinning&&!i.linkPinning.call(this,n,e)||typeof r.allowLink=="function"&&!r.allowLink.call(this,t,this))},getDefaultLink:function(t,e){return qt(this.options.defaultLink)?this.options.defaultLink.call(this,t,e):this.options.defaultLink.clone()},resolveHighlighter:function(t={}){let{highlighter:e,type:r}=t,{highlighting:n,highlighterNamespace:i}=this.options;if(e===void 0){if(!n||r&&(e=n[r],e===!1))return!1;e||(e=n.default)}if(!e)return!1;Te(e)&&(e={name:e});let o=e.name,s=i[o];if(!s)throw new Error('Unknown highlighter ("'+o+'")');if(typeof s.highlight!="function")throw new Error('Highlighter ("'+o+'") is missing required highlight() method');if(typeof s.unhighlight!="function")throw new Error('Highlighter ("'+o+'") is missing required unhighlight() method');return{highlighter:s,options:e.options||{},name:o}},onCellHighlight:function(t,e,r){let n=this.resolveHighlighter(r);if(!n)return;let{highlighter:i,options:o}=n;i.highlight(t,e,o)},onCellUnhighlight:function(t,e,r){let n=this.resolveHighlighter(r);if(!n)return;let{highlighter:i,options:o}=n;i.unhighlight(t,e,o)},pointerdblclick:function(t){t.preventDefault(),t=je(t);var e=this.findView(t.target);if(!this.guard(t,e)){var r=this.snapToGrid(t.clientX,t.clientY);e?e.pointerdblclick(t,r.x,r.y):this.trigger("blank:pointerdblclick",t,r.x,r.y)}},pointerclick:function(t){var e=this.eventData(t);if(e.mousemoved<=this.options.clickThreshold){t=je(t);var r=this.findView(t.target);if(this.guard(t,r))return;var n=this.snapToGrid(t.clientX,t.clientY);r?r.pointerclick(t,n.x,n.y):this.trigger("blank:pointerclick",t,n.x,n.y)}},contextmenu:function(t){if(this.options.preventContextMenu&&t.preventDefault(),this.contextMenuFired){this.contextMenuFired=!1;return}t=je(t),this.contextMenuTrigger(t)},contextMenuTrigger:function(t){var e=this.findView(t.target);if(!this.guard(t,e)){var r=this.snapToGrid(t.clientX,t.clientY);e?e.contextmenu(t,r.x,r.y):this.trigger("blank:contextmenu",t,r.x,r.y)}},pointerdown:function(t){t=je(t);let{target:e,button:r}=t,n=this.findView(e),i=r===2;if(n){if(!i&&this.guard(t,n))return;let o=this.FORM_CONTROL_TAG_NAMES.includes(e.tagName);this.options.preventDefaultViewAction&&!o&&t.preventDefault(),o&&n.preventDefaultInteraction(t);let s=this.customEventTrigger(t,n);if(s){if(s.isPropagationStopped())return;t.data=s.data}let l=e.closest("[magnet]");if(l&&n.el!==l&&n.el.contains(l)){let u=je(Ur.default.Event(t.originalEvent,{data:t.data,currentTarget:l}));if(this.onmagnet(u),u.isDefaultPrevented()&&t.preventDefault(),u.isPropagationStopped()){if(i)return;this.delegateDragEvents(n,u.data);return}t.data=u.data}}if(i){this.contextMenuFired=!0;let o=Ur.default.Event(t.originalEvent,{type:"contextmenu",data:t.data});this.contextMenuTrigger(o)}else{let o=this.snapToGrid(t.clientX,t.clientY);n?n.pointerdown(t,o.x,o.y):(this.options.preventDefaultBlankAction&&t.preventDefault(),this.trigger("blank:pointerdown",t,o.x,o.y)),this.delegateDragEvents(n,t.data)}},pointermove:function(t){var e=this.eventData(t);e.mousemoved||(e.mousemoved=0,this.undelegateEvents());var r=++e.mousemoved;if(!(r<=this.options.moveThreshold)){t=je(t);var n=this.snapToGrid(t.clientX,t.clientY),i=e.sourceView;i?i.pointermove(t,n.x,n.y):this.trigger("blank:pointermove",t,n.x,n.y),this.eventData(t,e)}},pointerup:function(t){this.undelegateDocumentEvents();var e=je(t),r=this.snapToGrid(e.clientX,e.clientY),n=this.eventData(t).sourceView;n?n.pointerup(e,r.x,r.y):this.trigger("blank:pointerup",e,r.x,r.y),e.isPropagationStopped()||this.pointerclick(Ur.default.Event(t.originalEvent,{type:"click",data:t.data})),this.delegateEvents()},mouseover:function(t){t=je(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseover(t);else{if(this.el===t.target)return;this.trigger("blank:mouseover",t)}},mouseout:function(t){t=je(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseout(t);else{if(this.el===t.target)return;this.trigger("blank:mouseout",t)}},mouseenter:function(t){t=je(t);let{target:e,relatedTarget:r,currentTarget:n}=t,i=this.findView(e);if(this.guard(t,i))return;let o=this.findView(r);i&&(o===i||(i.mouseenter(t),this.el.contains(r)))||o||n===this.el&&this.trigger("paper:mouseenter",t)},mouseleave:function(t){t=je(t);let{target:e,relatedTarget:r,currentTarget:n}=t,i=this.findView(e);if(this.guard(t,i))return;let o=this.findView(r);i&&(o===i||(i.mouseleave(t),this.el.contains(r)))||o||n===this.el&&this.trigger("paper:mouseleave",t)},_processMouseWheelEvtBuf:nh(function(){let{event:t,deltas:e}=this._mw_evt_buffer,r=e.reduce((s,l)=>s+nv(l,Lx),0),n=Math.pow(.995,r),{x:i,y:o}=this.clientToLocalPoint(t.clientX,t.clientY);this.trigger("paper:pinch",t,i,o,n),this._mw_evt_buffer={event:null,deltas:[]}},oI,{maxWait:oI}),mousewheel:function(t){t=je(t);let e=this.findView(t.target);if(this.guard(t,e))return;let r=t.originalEvent,n=this.snapToGrid(r.clientX,r.clientY),{deltaX:i,deltaY:o}=rv(r),s=this._events["paper:pinch"];if(t.ctrlKey&&s&&s.length>0)r.preventDefault(),this._mw_evt_buffer.event=r,this._mw_evt_buffer.deltas.push(o),this._processMouseWheelEvtBuf();else{let l=Math.max(-1,Math.min(1,r.wheelDelta));e?e.mousewheel(t,n.x,n.y,l):this.trigger("blank:mousewheel",t,n.x,n.y,l),this.trigger("paper:pan",t,i,o)}},onevent:function(t){var e=t.currentTarget,r=e.getAttribute("event");if(r){var n=this.findView(e);if(n){if(t=je(t),this.guard(t,n))return;var i=this.snapToGrid(t.clientX,t.clientY);n.onevent(t,r,i.x,i.y)}}},magnetEvent:function(t,e){var r=t.currentTarget,n=r.getAttribute("magnet");if(n){var i=this.findView(r);if(i){if(t=je(t),this.guard(t,i))return;var o=this.snapToGrid(t.clientX,t.clientY);e.call(this,i,t,r,o.x,o.y)}}},onmagnet:function(t){if(t.button===2){this.contextMenuFired=!0,this.magnetContextMenuFired=!0;let e=Ur.default.Event(t.originalEvent,{type:"contextmenu",data:t.data,currentTarget:t.currentTarget});this.magnetContextMenuTrigger(e),e.isPropagationStopped()&&t.stopPropagation()}else this.magnetEvent(t,function(e,r,n,i,o){e.onmagnet(r,i,o)})},magnetpointerdblclick:function(t){this.magnetEvent(t,function(e,r,n,i,o){e.magnetpointerdblclick(r,n,i,o)})},magnetcontextmenu:function(t){if(this.options.preventContextMenu&&t.preventDefault(),this.magnetContextMenuFired){this.magnetContextMenuFired=!1;return}this.magnetContextMenuTrigger(t)},magnetContextMenuTrigger:function(t){this.magnetEvent(t,function(e,r,n,i,o){e.magnetcontextmenu(r,n,i,o)})},onlabel:function(t){var e=t.currentTarget,r=this.findView(e);if(!r||(t=je(t),this.guard(t,r)))return;let n=this.customEventTrigger(t,r,e);if(n){if(n.isPropagationStopped())return;t.data=n.data}var i=this.snapToGrid(t.clientX,t.clientY);r.onlabel(t,i.x,i.y)},getPointerArgs(t){let e=je(t),{x:r,y:n}=this.snapToGrid(e.clientX,e.clientY);return[e,r,n]},delegateDragEvents:function(t,e){e||(e={}),this.eventData({data:e},{sourceView:t||null,mousemoved:0}),this.delegateDocumentEvents(null,e)},guard:function(t,e){if(t.type==="mousedown"&&t.button===2||this.options.guard&&this.options.guard(t,e))return!0;if(t.data&&t.data.guarded!==void 0)return t.data.guarded;let{target:r}=t;return this.GUARDED_TAG_NAMES.includes(r.tagName)?!0:!(e&&e.model&&e.model instanceof er||this.svg===r||this.el===r||Ur.default.contains(this.svg,r))},setGridSize:function(t){let{options:e}=this;return e.gridSize=t,e.drawGrid&&!e.drawGridSize&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:tt("svg",{width:"100%",height:"100%"},tt("defs")),patterns:{},add:function(t,e){tt(this.root.node.childNodes[0]).append(e),this.patterns[t]=e,this.root.append(tt("rect",{width:"100%",height:"100%",fill:"url(#"+t+")"}))},get:function(t){return this.patterns[t]},exist:function(t){return this.patterns[t]!==void 0}}),this._gridCache},setGrid:function(t){this.clearGrid(),this._gridCache=null,this._gridSettings=[];var e=Array.isArray(t)?t:[t||{}];return e.forEach(function(r){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(r))},this),this},_resolveDrawGridOption:function(t){var e=this.constructor.gridPatterns;if(Te(t)&&Array.isArray(e[t]))return e[t].map(function(u){return At({},u)});var r=t||{args:[{}]},n=Array.isArray(r),i=r.name;if(!n&&!i&&!r.markup&&(i="dot"),i&&Array.isArray(e[i])){var o=e[i].map(function(u){return At({},u)}),s=Array.isArray(r.args)?r.args:[r.args||{}];He(s[0],Or(t,"args"));for(var l=0;l<s.length;l++)o[l]&&At(o[l],s[l]);return o}return n?r:[r]},drawGrid:function(t){let e=this.options.drawGridSize||this.options.gridSize;if(e<=1)return this.clearGrid();var r=Array.isArray(t)?t:[t],n=this.matrix(),i=this._getGridRefs();this._gridSettings.forEach(function(s,l){var u="pattern_"+l,h=me(s,r[l],{sx:n.a||1,sy:n.d||1,ox:n.e||0,oy:n.f||0});h.width=e*(n.a||1)*(h.scaleFactor||1),h.height=e*(n.d||1)*(h.scaleFactor||1),i.exist(u)||i.add(u,tt("pattern",{id:u,patternUnits:"userSpaceOnUse"},tt(h.markup)));var d=i.get(u);qt(h.update)&&h.update(d.node.childNodes[0],h);var f=h.ox%h.width;f<0&&(f+=h.width);var C=h.oy%h.height;C<0&&(C+=h.height),d.attr({x:f,y:C,width:h.width,height:h.height})});var o=new XMLSerializer().serializeToString(i.root.node);return o="url(data:image/svg+xml;base64,"+btoa(o)+")",this.$grid.css("backgroundImage",o),this},updateBackgroundImage:function(t){t=t||{};var e=t.position||"center",r=t.size||"auto auto",n=this.scale(),i=this.translate();if(Wt(e)){var o=i.tx+n.sx*(e.x||0),s=i.ty+n.sy*(e.y||0);e=o+"px "+s+"px"}Wt(r)&&(r=new ft(r).scale(n.sx,n.sy),r=r.width+"px "+r.height+"px"),this.$background.css({backgroundSize:r,backgroundPosition:e})},drawBackgroundImage:function(t,e){if(!(t instanceof HTMLImageElement)){this.$background.css("backgroundImage","");return}if(!(!this._background||this._background.id!==e.id)){e=e||{};var r,n=e.size,i=e.repeat||"no-repeat",o=e.opacity||1,s=Math.abs(e.quality)||1,l=this.constructor.backgroundPatterns[sh(i)];if(qt(l)){t.width*=s,t.height*=s;var u=l(t,e);if(!(u instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");r=u.toDataURL("image/png"),i="repeat",Wt(n)?(n.width*=u.width/t.width,n.height*=u.height/t.height):n===void 0&&(e.size={width:u.width/s,height:u.height/s})}else r=t.src,n===void 0&&(e.size={width:t.width,height:t.height});this.$background.css({opacity:o,backgroundRepeat:i,backgroundImage:"url("+r+")"}),this.updateBackgroundImage(e)}},updateBackgroundColor:function(t){this.$el.css("backgroundColor",t||"")},drawBackground:function(t){if(t=t||{},this.updateBackgroundColor(t.color),t.image){t=this._background=$e(t),Zn(t);var e=document.createElement("img");e.onload=this.drawBackgroundImage.bind(this,e,t),e.src=t.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(t){this.options.interactive=t,ur(this._views,"setInteractivity",t)},isDefined:function(t){return!!this.svg.getElementById(t)},defineFilter:function(t){if(!Wt(t))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var e=t.id,r=t.name;if(e||(e=r+this.svg.id+Ls(JSON.stringify(t))),!this.isDefined(e)){var n=av,i=n[r]&&n[r](t.args||{});if(!i)throw new Error("Non-existing filter "+r);var o=At({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},t.attrs,{id:e});tt(i,o).appendTo(this.defs)}return e},defineGradient:function(t){if(!Wt(t))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");let{svg:e,defs:r}=this,{type:n,id:i=n+e.id+Ls(JSON.stringify(t)),stops:o,attrs:s={}}=t;if(this.isDefined(i))return i;let l=kt(o).map(({offset:h,color:d,opacity:f})=>tt("stop").attr({offset:h,"stop-color":d,"stop-opacity":Number.isFinite(f)?f:1})),u=tt(n,s,l);return u.id=i,u.appendTo(r),i},definePattern:function(t){if(!Wt(t))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");let{svg:e,defs:r}=this,{id:n=e.id+Ls(JSON.stringify(t)),markup:i,attrs:o={}}=t;if(!i)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(n))return n;let s=tt("pattern",{patternUnits:"userSpaceOnUse"});if(s.id=n,s.attr(o),typeof i=="string")s.append(tt(i));else{let{fragment:l}=Ai(i);s.append(l)}return s.appendTo(r),n},defineMarker:function(t){if(!Wt(t))throw new TypeError("dia.Paper: defineMarker() requires the first argument to be an object.");let{svg:e,defs:r}=this,{id:n=e.id+Ls(JSON.stringify(t)),markup:i,attrs:o={},markerUnits:s="userSpaceOnUse"}=t;if(this.isDefined(n))return n;let l=tt("marker",{orient:"auto",overflow:"visible",markerUnits:s});l.id=n,l.attr(o);let u;if(i){let f;if(typeof i=="string")f=tt(i),f=Array.isArray(f)?f:[f];else{let{fragment:C}=Ai(i);f=tt(C).children()}f.length>1?u=tt("g").append(f):u=f[0]}else{let{type:f="path"}=t;u=tt(f)}let h=Or(t,"type","id","markup","attrs","markerUnits");return Object.keys(h).forEach(f=>{let C=h[f],w=u.attr(f);if(w==null)u.attr(f,C);else switch(f){case"transform":u.attr(f,C+" "+w);break}}),u.appendTo(l),l.appendTo(r),n},customEventTrigger:function(t,e,r=e.el){let n=t.target.closest("[event]");if(n&&r!==n&&e.el.contains(n)){let i=je(Ur.default.Event(t.originalEvent,{data:t.data,currentTarget:n}));return this.onevent(i),i.isDefaultPrevented()&&t.preventDefault(),i}return null}},{sorting:bo,Layers:hr,backgroundPatterns:{flipXy:function(t){var e=document.createElement("canvas"),r=t.width,n=t.height;e.width=2*r,e.height=2*n;var i=e.getContext("2d");return i.drawImage(t,0,0,r,n),i.setTransform(-1,0,0,-1,e.width,e.height),i.drawImage(t,0,0,r,n),i.setTransform(-1,0,0,1,e.width,0),i.drawImage(t,0,0,r,n),i.setTransform(1,0,0,-1,0,e.height),i.drawImage(t,0,0,r,n),e},flipX:function(t){var e=document.createElement("canvas"),r=t.width,n=t.height;e.width=r*2,e.height=n;var i=e.getContext("2d");return i.drawImage(t,0,0,r,n),i.translate(2*r,0),i.scale(-1,1),i.drawImage(t,0,0,r,n),e},flipY:function(t){var e=document.createElement("canvas"),r=t.width,n=t.height;e.width=r,e.height=n*2;var i=e.getContext("2d");return i.drawImage(t,0,0,r,n),i.translate(0,2*n),i.scale(1,-1),i.drawImage(t,0,0,r,n),e},watermark:function(t,e){e=e||{};var r=t.width,n=t.height,i=document.createElement("canvas");i.width=r*3,i.height=n*3;for(var o=i.getContext("2d"),s=Ge(e.watermarkAngle)?-e.watermarkAngle:-20,l=Le(s),u=i.width/4,h=i.height/4,d=0;d<4;d++)for(var f=0;f<4;f++)(d+f)%2>0&&(o.setTransform(1,0,0,1,(2*d-1)*u,(2*f-1)*h),o.rotate(l),o.drawImage(t,-r/2,-n/2,r,n));return i}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){tt(t).attr({width:e.thickness*e.sx,height:e.thickness*e.sy,fill:e.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){var r=e.sx<=1?e.thickness*e.sx:e.thickness;tt(t).attr({width:r,height:r,fill:e.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var r,n=e.width,i=e.height,o=e.thickness;n-o>=0&&i-o>=0?r=["M",n,0,"H0 M0 0 V0",i].join(" "):r="M 0 0 0 0",tt(t).attr({d:r,stroke:e.color,"stroke-width":e.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var r,n=e.width,i=e.height,o=e.thickness;n-o>=0&&i-o>=0?r=["M",n,0,"H0 M0 0 V0",i].join(" "):r="M 0 0 0 0",tt(t).attr({d:r,stroke:e.color,"stroke-width":e.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(t,e){var r,n=e.width,i=e.height,o=e.thickness;n-o>=0&&i-o>=0?r=["M",n,0,"H0 M0 0 V0",i].join(" "):r="M 0 0 0 0",tt(t).attr({d:r,stroke:e.color,"stroke-width":e.thickness})}}]}});var Oh=Nr.extend({name:null,tagName:"g",className:"tool",svgElement:!0,_visible:!0,init:function(){var t=this.name;t&&this.vel.attr("data-tool-name",t)},configure:function(t,e){return this.relatedView=t,this.paper=t.paper,this.parentView=e,this.simulateRelatedView(this.el),this.delegateEvents(),this},simulateRelatedView:function(t){t&&t.setAttribute("model-id",this.relatedView.model.id)},getName:function(){return this.name},show:function(){this.el.style.display="",this._visible=!0},hide:function(){this.el.style.display="none",this._visible=!1},isVisible:function(){return!!this._visible},focus:function(){var t=this.options.focusOpacity;isFinite(t)&&(this.el.style.opacity=t),this.parentView.focusTool(this)},blur:function(){this.el.style.opacity="",this.parentView.blurTool(this)},update:function(){},guard:function(t){let{paper:e,relatedView:r}=this;return!e||!r?!0:e.guard(t,r)}});var zx=Nr.extend({tagName:"g",className:"tools",svgElement:!0,tools:null,isRendered:!1,options:{tools:null,relatedView:null,name:null},configure:function(t){t=At(this.options,t);var e=t.tools;if(!Array.isArray(e))return this;var r=t.relatedView;if(!(r instanceof jt))return this;for(var n=this.tools=[],i=0,o=e.length;i<o;i++){var s=e[i];s instanceof Oh&&(s.configure(r,this),this.vel.append(s.el),n.push(s))}return this.isRendered=!1,r.requestUpdate(r.getFlag("TOOLS")),this},getName:function(){return this.options.name},update:function(t){t||(t={});var e=this.tools;if(!e)return this;for(var r=this.isRendered,n=0,i=e.length;n<i;n++){var o=e[n];r?t.tool!==o.cid&&o.isVisible()&&o.update():o.render()}return this.isMounted()||this.mount(),r||(this.blurTool(),this.isRendered=!0),this},focusTool:function(t){var e=this.tools;if(!e)return this;for(var r=0,n=e.length;r<n;r++){var i=e[r];t===i?i.show():i.hide()}return this},blurTool:function(t){var e=this.tools;if(!e)return this;for(var r=0,n=e.length;r<n;r++){var i=e[r];i!==t&&!i.isVisible()&&(i.show(),i.update())}return this},hide:function(){return this.focusTool(null)},show:function(){return this.blurTool(null)},onRemove:function(){var t=this.tools;if(!t)return this;for(var e=0,r=t.length;e<r;e++)t[e].remove();this.tools=null},mount:function(){let{options:t,el:e}=this,{relatedView:r,layer:n=hr.TOOLS,z:i}=t;return r&&(n?r.paper.getLayerView(n).insertSortedNode(e,i):r.el.appendChild(e)),this}});var Ni={};Me(Ni,{basic:()=>Eh,chess:()=>Yh,devs:()=>Rh,erd:()=>Uh,fsa:()=>Fh,logic:()=>Wh,org:()=>_h,pn:()=>Vh,standard:()=>Gh,uml:()=>Jh});var Eh={};Me(Eh,{Circle:()=>_s,Ellipse:()=>Zx,Generic:()=>Ft,Image:()=>Yx,Path:()=>uI,Polygon:()=>jx,Polyline:()=>Wx,Rect:()=>Gx,Rhombus:()=>Ux,Text:()=>Rx,TextBlock:()=>Fx,TextBlockView:()=>_x,TextView:()=>Bx});var Fs={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(t,e){return this._tests[t]=e},test:function(t){var e=this._tests[t];if(!e)throw new Error('Test not defined ("'+t+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var r=this._results[t];if(typeof r<"u")return r;try{r=e()}catch{r=!1}return this._results[t]=r,r}};var Ft=le.define("basic.Generic",{attrs:{".":{fill:"#ffffff",stroke:"none"}}}),Gx=Ft.define("basic.Rect",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:100,height:60},text:{fill:"#000000",text:"","font-size":14,"ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><rect/></g><text/></g>'}),Bx=we.extend({presentationAttributes:we.addPresentationAttributes({attrs:["SCALE"]}),confirmUpdate:function(){var t=we.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"SCALE")&&(this.resize(),t=this.removeFlag(t,"SCALE")),t}}),Rx=Ft.define("basic.Text",{attrs:{text:{"font-size":18,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><text/></g></g>'}),_s=Ft.define("basic.Circle",{size:{width:60,height:60},attrs:{circle:{fill:"#ffffff",stroke:"#000000",r:30,cx:30,cy:30},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g><text/></g>'}),Zx=Ft.define("basic.Ellipse",{size:{width:60,height:40},attrs:{ellipse:{fill:"#ffffff",stroke:"#000000",rx:30,ry:20,cx:30,cy:20},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse/></g><text/></g>'}),jx=Ft.define("basic.Polygon",{size:{width:60,height:40},attrs:{polygon:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'}),Wx=Ft.define("basic.Polyline",{size:{width:60,height:40},attrs:{polyline:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polyline/></g><text/></g>'}),Yx=Ft.define("basic.Image",{attrs:{text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><image/></g><text/></g>'}),uI=Ft.define("basic.Path",{size:{width:60,height:60},attrs:{path:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle",ref:"path","ref-x":.5,"ref-dy":10,fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><path/></g><text/></g>'}),Ux=uI.define("basic.Rhombus",{attrs:{path:{d:"M 30 0 L 60 30 30 60 0 30 z"},text:{"ref-y":.5,"ref-dy":null,"y-alignment":"middle"}}}),hu=Fs.test("svgforeignobject"),Fx=Ft.define("basic.TextBlock",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000","font-size":14,"font-family":"Arial, helvetica, sans-serif"},".content":{text:"","ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle"}},content:""},{markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',hu?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>',"</g>"].join(""),initialize:function(){this.listenTo(this,"change:size",this.updateSize),this.listenTo(this,"change:content",this.updateContent),this.updateSize(this,this.get("size")),this.updateContent(this,this.get("content")),Ft.prototype.initialize.apply(this,arguments)},updateSize:function(t,e){this.attr({".fobj":At({},e),div:{style:At({},e)}})},updateContent:function(t,e){hu?this.attr({".content":{html:iv(e)}}):this.attr({".content":{text:e}})},setForeignObjectSize:function(){this.updateSize.apply(this,arguments)},setDivContent:function(){this.updateContent.apply(this,arguments)}}),_x=we.extend({presentationAttributes:hu?we.prototype.presentationAttributes:we.addPresentationAttributes({content:["CONTENT"],size:["CONTENT"]}),initFlag:["RENDER","CONTENT"],confirmUpdate:function(){var t=we.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"CONTENT")&&(this.updateContent(this.model),t=this.removeFlag(t,"CONTENT")),t},update:function(t,e){var r=this.model;if(hu)we.prototype.update.call(this,r,e);else{var n=Or(e||r.get("attrs"),".content");we.prototype.update.call(this,r,n),(!e||br(e,".content"))&&this.updateContent(r,e)}},updateContent:function(t,e){var r=me({},(e||t.get("attrs"))[".content"]);r=Or(r,"text");var n=Zl(t.get("content"),t.get("size"),r,{svgDocument:this.paper.svg}),i=ks({},".content",r,"/");i[".content"].text=n,we.prototype.update.call(this,t,i)}});var Gh={};Me(Gh,{BorderedImage:()=>$x,Circle:()=>Xx,Cylinder:()=>nw,DoubleLink:()=>uw,Ellipse:()=>Hx,EmbeddedImage:()=>tw,HeaderedRectangle:()=>rw,Image:()=>qx,InscribedImage:()=>ew,Link:()=>lw,Path:()=>Jx,Polygon:()=>Qx,Polyline:()=>Kx,Rectangle:()=>Vx,ShadowLink:()=>cw,TextBlock:()=>aw});var Vx=le.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),Xx=le.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),Hx=le.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}),Jx=le.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),Qx=le.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),Kx=le.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),qx=le.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),$x=le.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),tw=le.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),ew=le.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),rw=le.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]}),zh=10,nw=le.define("standard.Cylinder",{attrs:{body:{lateralArea:zh,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:zh,refRx:"50%",ry:zh,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(t,e){if(t===void 0)return this.attr("body/lateralArea");var r=Oe(t),n={lateralArea:t},i=r?{refCy:t,refRy:t,cy:null,ry:null}:{refCy:null,refRy:null,cy:t,ry:t};return this.attr({body:n,top:i},e)}},{attributes:{lateralArea:{set:function(t,e){var r=Oe(t);r&&(t=parseFloat(t)/100);var n=e.x,i=e.y,o=e.width,s=e.height,l=o/2,u=r?s*t:t,h=tt.KAPPA,d=h*l,f=h*(r?s*t:t),C=n,w=n+o/2,b=n+o,S=i+u,P=S-u,O=i+s-u,F=i+s,J=["M",C,S,"L",C,O,"C",n,O+f,w-d,F,w,F,"C",w+d,F,b,O+f,b,O,"L",b,S,"C",b,S-f,w+d,P,w,P,"C",w-d,P,C,S-f,C,S,"Z"];return{d:J.join(" ")}}}}}),iw={tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]},ow={tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}},sw=Fs.test("svgforeignobject")?iw:ow,aw=le.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},sw]},{attributes:{text:{set:function(t,e,r,n){if(r instanceof HTMLElement)r.textContent=t;else{var i=n.style||{},o={text:t,width:-5,height:"100%"},s=At({textVerticalAnchor:"middle"},i);return Gs.textWrap.set.call(this,o,e,r,s),{fill:i.color||null}}},position:function(t,e,r){if(r instanceof SVGElement)return e.center()}}}}),lw=ae.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),uw=ae.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none",cursor:"pointer"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),cw=ae.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none","pointer-events":"none"}},{tagName:"path",selector:"line",attributes:{fill:"none",cursor:"pointer"}}]});var Rh={};Me(Rh,{Atomic:()=>fw,Coupled:()=>hw,Link:()=>dw,Model:()=>Bh});var Bh=Ft.define("devs.Model",{inPorts:[],outPorts:[],size:{width:80,height:80},attrs:{".":{magnet:!1},".label":{text:"Model","ref-x":.5,"ref-y":10,"font-size":18,"text-anchor":"middle",fill:"#000"},".body":{"ref-width":"100%","ref-height":"100%",stroke:"#000"}},ports:{groups:{in:{position:{name:"left"},attrs:{".port-label":{fill:"#000"},".port-body":{fill:"#fff",stroke:"#000",r:10,magnet:!0}},label:{position:{name:"left",args:{y:10}}}},out:{position:{name:"right"},attrs:{".port-label":{fill:"#000"},".port-body":{fill:"#fff",stroke:"#000",r:10,magnet:!0}},label:{position:{name:"right",args:{y:10}}}}}}},{markup:'<g class="rotatable"><rect class="body"/><text class="label"/></g>',portMarkup:'<circle class="port-body"/>',portLabelMarkup:'<text class="port-label"/>',initialize:function(){Ft.prototype.initialize.apply(this,arguments),this.on("change:inPorts change:outPorts",this.updatePortItems,this),this.updatePortItems()},updatePortItems:function(t,e,r){var n=Lr(this.get("inPorts")),i=Ps(Lr(this.get("outPorts")),n),o=this.createPortItems("in",n),s=this.createPortItems("out",i);this.prop("ports/items",o.concat(s),At({rewrite:!0},r))},createPortItem:function(t,e){return{id:e,group:t,attrs:{".port-label":{text:e}}}},createPortItems:function(t,e){return kt(e).map(this.createPortItem.bind(this,t))},_addGroupPort:function(t,e,r){var n=this.get(e);return this.set(e,Array.isArray(n)?n.concat(t):[t],r)},addOutPort:function(t,e){return this._addGroupPort(t,"outPorts",e)},addInPort:function(t,e){return this._addGroupPort(t,"inPorts",e)},_removeGroupPort:function(t,e,r){return this.set(e,go(this.get(e),t),r)},removeOutPort:function(t,e){return this._removeGroupPort(t,"outPorts",e)},removeInPort:function(t,e){return this._removeGroupPort(t,"inPorts",e)},_changeGroup:function(t,e,r){return this.prop("ports/groups/"+t,Wt(e)?e:{},r)},changeInGroup:function(t,e){return this._changeGroup("in",t,e)},changeOutGroup:function(t,e){return this._changeGroup("out",t,e)}}),fw=Bh.define("devs.Atomic",{size:{width:80,height:80},attrs:{".label":{text:"Atomic"}}}),hw=Bh.define("devs.Coupled",{size:{width:200,height:300},attrs:{".label":{text:"Coupled"}}}),dw=ae.define("devs.Link",{attrs:{".connection":{"stroke-width":2}}});var Wh={};Me(Wh,{And:()=>Aw,Gate:()=>du,Gate11:()=>jh,Gate21:()=>bi,IO:()=>Zh,Input:()=>gw,Nand:()=>Cw,Nor:()=>yw,Not:()=>vw,Or:()=>Iw,Output:()=>pw,Repeater:()=>mw,Wire:()=>bw,Xnor:()=>ww,Xor:()=>xw});var du=Ft.define("logic.Gate",{size:{width:80,height:40},attrs:{".":{magnet:!1},".body":{width:100,height:50},circle:{r:7,stroke:"black",fill:"transparent","stroke-width":2}}},{operation:function(){return!0}}),Zh=du.define("logic.IO",{size:{width:60,height:30},attrs:{".body":{fill:"white",stroke:"black","stroke-width":2},".wire":{ref:".body","ref-y":.5,stroke:"black"},text:{fill:"black",ref:".body","ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle","font-weight":"bold","font-variant":"small-caps","text-transform":"capitalize","font-size":"14px"}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="body"/></g><path class="wire"/><circle/><text/></g>'}),gw=Zh.define("logic.Input",{attrs:{".wire":{"ref-dx":0,d:"M 0 0 L 23 0"},circle:{ref:".body","ref-dx":30,"ref-y":.5,magnet:!0,class:"output",port:"out"},text:{text:"input"}}}),pw=Zh.define("logic.Output",{attrs:{".wire":{"ref-x":0,d:"M 0 0 L -23 0"},circle:{ref:".body","ref-x":-30,"ref-y":.5,magnet:"passive",class:"input",port:"in"},text:{text:"output"}}}),jh=du.define("logic.Gate11",{attrs:{".input":{ref:".body","ref-x":-2,"ref-y":.5,magnet:"passive",port:"in"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},{markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input"/><circle class="output"/></g>'}),bi=du.define("logic.Gate21",{attrs:{".input1":{ref:".body","ref-x":-2,"ref-y":.3,magnet:"passive",port:"in1"},".input2":{ref:".body","ref-x":-2,"ref-y":.7,magnet:"passive",port:"in2"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},{markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input input1"/><circle  class="input input2"/><circle class="output"/></g>'}),mw=jh.define("logic.Repeater",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzIuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICA8L2c+Cjwvc3ZnPgo="}}},{operation:function(t){return t}}),vw=jh.define("logic.Not",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzkuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDI2NzEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzYiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA4MCwyNSBBIDQsNCAwIDEgMSA3MiwyNSBBIDQsNCAwIDEgMSA4MCwyNSB6IgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEsMCkiIC8+CiAgPC9nPgo8L3N2Zz4K"}}},{operation:function(t){return!t}}),Iw=bi.define("logic.Or",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik9SIEFOU0kuc3ZnIgogICBpbmtzY2FwZTpvdXRwdXRfZXh0ZW5zaW9uPSJvcmcuaW5rc2NhcGUub3V0cHV0LnN2Zy5pbmtzY2FwZSI+CiAgPGRlZnMKICAgICBpZD0iZGVmczQiPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTAgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjcxNCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iMSA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMC41IDogMC4zMzMzMzMzMyA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODA2IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODE5IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjM3Mi4wNDcyNCA6IDM1MC43ODczOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI3NDQuMDk0NDggOiA1MjYuMTgxMDkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzc3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49Ijc1IDogNDAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTUwIDogNjAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDYwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTMyNzUiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNTAgOiAzMy4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTAwIDogNTAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTU1MzMiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzIgOiAyMS4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNjQgOiAzMiA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMzIgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjU1NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDE2LjY2NjY2NyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDI1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAyNSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iNCIKICAgICBpbmtzY2FwZTpjeD0iMTEzLjAwMDM5IgogICAgIGlua3NjYXBlOmN5PSIxMi44OTM3MzEiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9InB4IgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImcyNTYwIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTpncmlkLWJib3g9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1wb2ludHM9InRydWUiCiAgICAgZ3JpZHRvbGVyYW5jZT0iMTAwMDAiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxMzk5IgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9Ijg3NCIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMzciCiAgICAgaW5rc2NhcGU6d2luZG93LXk9Ii00IgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Im0gNzAsMjUgYyAyMCwwIDI1LDAgMjUsMCIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMSwxNSA1LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzIsMzUgNSwzNSIKICAgICAgIGlkPSJwYXRoMzk0NCIgLz4KICAgIDxnCiAgICAgICBpZD0iZzI1NjAiCiAgICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2LjUsLTM5LjUpIj4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo="}}},{operation:function(t,e){return t||e}}),Aw=bi.define("logic.And",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IkFORCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI4IgogICAgIGlua3NjYXBlOmN4PSI1Ni42OTgzNDgiCiAgICAgaW5rc2NhcGU6Y3k9IjI1LjMyNjg5OSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZvbnQtc2l6ZTptZWRpdW07Zm9udC1zdHlsZTpub3JtYWw7Zm9udC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDt0ZXh0LWluZGVudDowO3RleHQtYWxpZ246c3RhcnQ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bGluZS1oZWlnaHQ6bm9ybWFsO2xldHRlci1zcGFjaW5nOm5vcm1hbDt3b3JkLXNwYWNpbmc6bm9ybWFsO3RleHQtdHJhbnNmb3JtOm5vbmU7ZGlyZWN0aW9uOmx0cjtibG9jay1wcm9ncmVzc2lvbjp0Yjt3cml0aW5nLW1vZGU6bHItdGI7dGV4dC1hbmNob3I6c3RhcnQ7ZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDozO21hcmtlcjpub25lO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGU7Zm9udC1mYW1pbHk6Qml0c3RyZWFtIFZlcmEgU2FuczstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOkJpdHN0cmVhbSBWZXJhIFNhbnMiCiAgICAgICBkPSJNIDMwLDUgTCAzMCw2LjQyODU3MTQgTCAzMCw0My41NzE0MjkgTCAzMCw0NSBMIDMxLjQyODU3MSw0NSBMIDUwLjQ3NjE5LDQ1IEMgNjEuNzQ0MDk4LDQ1IDcwLjQ3NjE5LDM1Ljk5OTk1NSA3MC40NzYxOSwyNSBDIDcwLjQ3NjE5LDE0LjAwMDA0NSA2MS43NDQwOTksNS4wMDAwMDAyIDUwLjQ3NjE5LDUgQyA1MC40NzYxOSw1IDUwLjQ3NjE5LDUgMzEuNDI4NTcxLDUgTCAzMCw1IHogTSAzMi44NTcxNDMsNy44NTcxNDI5IEMgNDAuODM0MjY0LDcuODU3MTQyOSA0NS45MTgzNjgsNy44NTcxNDI5IDQ4LjA5NTIzOCw3Ljg1NzE0MjkgQyA0OS4yODU3MTQsNy44NTcxNDI5IDQ5Ljg4MDk1Miw3Ljg1NzE0MjkgNTAuMTc4NTcxLDcuODU3MTQyOSBDIDUwLjMyNzM4MSw3Ljg1NzE0MjkgNTAuNDA5MjI3LDcuODU3MTQyOSA1MC40NDY0MjksNy44NTcxNDI5IEMgNTAuNDY1MDI5LDcuODU3MTQyOSA1MC40NzE1NDMsNy44NTcxNDI5IDUwLjQ3NjE5LDcuODU3MTQyOSBDIDYwLjIzNjg1Myw3Ljg1NzE0MyA2Ny4xNDI4NTcsMTUuNDk3MDk4IDY3LjE0Mjg1NywyNSBDIDY3LjE0Mjg1NywzNC41MDI5MDIgNTkuNzYwNjYyLDQyLjE0Mjg1NyA1MCw0Mi4xNDI4NTcgTCAzMi44NTcxNDMsNDIuMTQyODU3IEwgMzIuODU3MTQzLDcuODU3MTQyOSB6IgogICAgICAgaWQ9InBhdGgyODg0IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2NjY2NzY2NjY3Nzc3NzY2NjIiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},{operation:function(t,e){return t&&e}}),yw=bi.define("logic.Nor",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjEiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjY3NzY0NCIKICAgICBpbmtzY2FwZTpjeT0iMjIuMTAyMzQ0IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjM3IgogICAgIGlua3NjYXBlOndpbmRvdy15PSItNCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc5LDI1IEMgOTksMjUgOTUsMjUgOTUsMjUiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHNvZGlwb2RpOnR5cGU9ImFyYyIKICAgICAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgICBpZD0icGF0aDI2MDQiCiAgICAgICAgIHNvZGlwb2RpOmN4PSI3NSIKICAgICAgICAgc29kaXBvZGk6Y3k9IjI1IgogICAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgICAgc29kaXBvZGk6cnk9IjQiCiAgICAgICAgIGQ9Ik0gNzksMjUgQSA0LDQgMCAxIDEgNzEsMjUgQSA0LDQgMCAxIDEgNzksMjUgeiIKICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2LjUsMzkuNSkiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"}}},{operation:function(t,e){return!(t||e)}}),Cw=bi.define("logic.Nand",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5BTkQgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iMTYiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjI4MzMwNyIKICAgICBpbmtzY2FwZTpjeT0iMTYuNDQyODQzIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzksMjUgQyA5MS44LDI1IDk1LDI1IDk1LDI1IgogICAgICAgaWQ9InBhdGgzMDU5IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMxLDE1IDUsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMiwzNSA1LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmb250LXNpemU6bWVkaXVtO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtdmFyaWFudDpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtc3RyZXRjaDpub3JtYWw7dGV4dC1pbmRlbnQ6MDt0ZXh0LWFsaWduOnN0YXJ0O3RleHQtZGVjb3JhdGlvbjpub25lO2xpbmUtaGVpZ2h0Om5vcm1hbDtsZXR0ZXItc3BhY2luZzpub3JtYWw7d29yZC1zcGFjaW5nOm5vcm1hbDt0ZXh0LXRyYW5zZm9ybTpub25lO2RpcmVjdGlvbjpsdHI7YmxvY2stcHJvZ3Jlc3Npb246dGI7d3JpdGluZy1tb2RlOmxyLXRiO3RleHQtYW5jaG9yOnN0YXJ0O2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MzttYXJrZXI6bm9uZTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlO2ZvbnQtZmFtaWx5OkJpdHN0cmVhbSBWZXJhIFNhbnM7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjpCaXRzdHJlYW0gVmVyYSBTYW5zIgogICAgICAgZD0iTSAzMCw1IEwgMzAsNi40Mjg1NzE0IEwgMzAsNDMuNTcxNDI5IEwgMzAsNDUgTCAzMS40Mjg1NzEsNDUgTCA1MC40NzYxOSw0NSBDIDYxLjc0NDA5OCw0NSA3MC40NzYxOSwzNS45OTk5NTUgNzAuNDc2MTksMjUgQyA3MC40NzYxOSwxNC4wMDAwNDUgNjEuNzQ0MDk5LDUuMDAwMDAwMiA1MC40NzYxOSw1IEMgNTAuNDc2MTksNSA1MC40NzYxOSw1IDMxLjQyODU3MSw1IEwgMzAsNSB6IE0gMzIuODU3MTQzLDcuODU3MTQyOSBDIDQwLjgzNDI2NCw3Ljg1NzE0MjkgNDUuOTE4MzY4LDcuODU3MTQyOSA0OC4wOTUyMzgsNy44NTcxNDI5IEMgNDkuMjg1NzE0LDcuODU3MTQyOSA0OS44ODA5NTIsNy44NTcxNDI5IDUwLjE3ODU3MSw3Ljg1NzE0MjkgQyA1MC4zMjczODEsNy44NTcxNDI5IDUwLjQwOTIyNyw3Ljg1NzE0MjkgNTAuNDQ2NDI5LDcuODU3MTQyOSBDIDUwLjQ2NTAyOSw3Ljg1NzE0MjkgNTAuNDcxNTQzLDcuODU3MTQyOSA1MC40NzYxOSw3Ljg1NzE0MjkgQyA2MC4yMzY4NTMsNy44NTcxNDMgNjcuMTQyODU3LDE1LjQ5NzA5OCA2Ny4xNDI4NTcsMjUgQyA2Ny4xNDI4NTcsMzQuNTAyOTAyIDU5Ljc2MDY2Miw0Mi4xNDI4NTcgNTAsNDIuMTQyODU3IEwgMzIuODU3MTQzLDQyLjE0Mjg1NyBMIDMyLjg1NzE0Myw3Ljg1NzE0MjkgeiIKICAgICAgIGlkPSJwYXRoMjg4NCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2Njc2NjY2Nzc3Nzc2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDQwMDgiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},{operation:function(t,e){return!(t&&e)}}),xw=bi.define("logic.Xor",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhPUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjUuNjU2ODU0MiIKICAgICBpbmtzY2FwZTpjeD0iMjUuOTM4MTE2IgogICAgIGlua3NjYXBlOmN5PSIxNy4yMzAwNSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzAuMzg1NzE3LDE1IEwgNC45OTk5OTk4LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5NzY7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEuMzYyMDkxLDM1IEwgNC45OTk5OTk4LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPGcKICAgICAgIGlkPSJnMjU2MCIKICAgICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjYuNSwtMzkuNSkiPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDM1MTYiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi4yNSw4MS41MDAwMDUgQyAtMy44NDczNzQsODQuMTQ0NDA1IC00LjUsODQuNTAwMDA1IC00LjUsODQuNTAwMDA1IEwgLTguMTU2MjUsODQuNTAwMDA1IEwgLTYuMTU2MjUsODIuMDYyNTA1IEMgLTYuMTU2MjUsODIuMDYyNTA1IC0wLjUsNzUuMDYyNDUxIC0wLjUsNjQuNSBDIC0wLjUsNTMuOTM3NTQ5IC02LjE1NjI1LDQ2LjkzNzUgLTYuMTU2MjUsNDYuOTM3NSBMIC04LjE1NjI1LDQ0LjUgTCAtNC41LDQ0LjUgQyAtMy43MTg3NSw0NS40Mzc1IC0zLjA3ODEyNSw0Ni4xNTYyNSAtMi4yODEyNSw0Ny41IEMgLTAuNDA4NTMxLDUwLjU5OTgxNSAyLjUsNTYuNTI2NjQ2IDIuNSw2NC41IEMgMi41LDcyLjQ1MDY1IC0wLjM5NjY5Nyw3OC4zNzk0MjUgLTIuMjUsODEuNTAwMDA1IHoiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY3NjY2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"}}},{operation:function(t,e){return(!t||e)&&(t||!e)}}),ww=bi.define("logic.Xnor",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhOT1IgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNTU3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTYuNjY2NjY3IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDI1IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI0IgogICAgIGlua3NjYXBlOmN4PSI5NS43MjM2NiIKICAgICBpbmtzY2FwZTpjeT0iLTI2Ljc3NTAyMyIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyLjAwMDAwMDI0O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc4LjMzMzMzMiwyNSBDIDkxLjY2NjY2NiwyNSA5NSwyNSA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMC4zODU3MTcsMTUgTCA0Ljk5OTk5OTgsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk3NjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMS4zNjIwOTEsMzUgTCA0Ljk5OTk5OTgsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMzUxNiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjI1LDgxLjUwMDAwNSBDIC0zLjg0NzM3NCw4NC4xNDQ0MDUgLTQuNSw4NC41MDAwMDUgLTQuNSw4NC41MDAwMDUgTCAtOC4xNTYyNSw4NC41MDAwMDUgTCAtNi4xNTYyNSw4Mi4wNjI1MDUgQyAtNi4xNTYyNSw4Mi4wNjI1MDUgLTAuNSw3NS4wNjI0NTEgLTAuNSw2NC41IEMgLTAuNSw1My45Mzc1NDkgLTYuMTU2MjUsNDYuOTM3NSAtNi4xNTYyNSw0Ni45Mzc1IEwgLTguMTU2MjUsNDQuNSBMIC00LjUsNDQuNSBDIC0zLjcxODc1LDQ1LjQzNzUgLTMuMDc4MTI1LDQ2LjE1NjI1IC0yLjI4MTI1LDQ3LjUgQyAtMC40MDg1MzEsNTAuNTk5ODE1IDIuNSw1Ni41MjY2NDYgMi41LDY0LjUgQyAyLjUsNzIuNDUwNjUgLTAuMzk2Njk3LDc4LjM3OTQyNSAtMi4yNSw4MS41MDAwMDUgeiIKICAgICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2Njc2NjY2NzYyIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDM1NTEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},{operation:function(t,e){return(!t||!e)&&(t||e)}}),bw=ae.define("logic.Wire",{attrs:{".connection":{"stroke-width":2},".marker-vertex":{r:7}},router:{name:"orthogonal"},connector:{name:"rounded",args:{radius:10}}},{arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<circle class="marker-arrowhead" end="<%= end %>" r="7"/>',"</g>"].join(""),vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<g class="marker-vertex-remove-group">','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>","</g>"].join("")});var Yh={};Me(Yh,{BishopBlack:()=>kw,BishopWhite:()=>Lw,KingBlack:()=>Mw,KingWhite:()=>Nw,KnightBlack:()=>Ew,KnightWhite:()=>Ow,PawnBlack:()=>Gw,PawnWhite:()=>zw,QueenBlack:()=>Sw,QueenWhite:()=>Tw,RookBlack:()=>Dw,RookWhite:()=>Pw});var Nw=Ft.define("chess.KingWhite",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;"><path      d="M 22.5,11.63 L 22.5,6"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 20,8 L 25,8"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"      style="fill:#ffffff; stroke:#000000; stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 11.5,30 C 17,27 27,27 32.5,30"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,37 C 17,34 27,34 32.5,37"      style="fill:none; stroke:#000000;" />  </g></g></g>'}),Mw=Ft.define("chess.KingBlack",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path       d="M 22.5,11.63 L 22.5,6"       style="fill:none; stroke:#000000; stroke-linejoin:miter;"       id="path6570" />    <path       d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"       style="fill:#000000;fill-opacity:1; stroke-linecap:butt; stroke-linejoin:miter;" />    <path       d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "       style="fill:#000000; stroke:#000000;" />    <path       d="M 20,8 L 25,8"       style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path       d="M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37"       style="fill:none; stroke:#ffffff;" />  </g></g></g>'}),Tw=Ft.define("chess.QueenWhite",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(-1,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(15.5,-5.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(32,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(7,-4.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(24,-4)" />    <path      d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 11.5,30 C 15,29 30,29 33.5,30"      style="fill:none;" />    <path      d="M 12,33.5 C 18,32.5 27,32.5 33,33.5"      style="fill:none;" />  </g></g></g>'}),Sw=Ft.define("chess.QueenBlack",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:none;">      <circle cx="6"    cy="12" r="2.75" />      <circle cx="14"   cy="9"  r="2.75" />      <circle cx="22.5" cy="8"  r="2.75" />      <circle cx="31"   cy="9"  r="2.75" />      <circle cx="39"   cy="12" r="2.75" />    </g>    <path       d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"       style="stroke-linecap:butt; stroke:#000000;" />    <path       d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"       style="stroke-linecap:butt;" />    <path       d="M 11,38.5 A 35,35 1 0 0 34,38.5"       style="fill:none; stroke:#000000; stroke-linecap:butt;" />    <path       d="M 11,29 A 35,35 1 0 1 34,29"       style="fill:none; stroke:#ffffff;" />    <path       d="M 12.5,31.5 L 32.5,31.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"       style="fill:none; stroke:#ffffff;" />  </g></g></g>'}),Pw=Ft.define("chess.RookWhite",{size:{width:32,height:34}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14"      style="stroke-linecap:butt;" />    <path      d="M 34,14 L 31,17 L 14,17 L 11,14" />    <path      d="M 31,17 L 31,29.5 L 14,29.5 L 14,17"      style="stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>'}),Dw=Ft.define("chess.RookBlack",{size:{width:32,height:34}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z "      style="stroke-linecap:butt;stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z "      style="stroke-linecap:butt;" />    <path      d="M 12,35.5 L 33,35.5 L 33,35.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 13,31.5 L 32,31.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,29.5 L 31,29.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 31,16.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />  </g></g></g>'}),Lw=Ft.define("chess.BishopWhite",{size:{width:38,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#ffffff; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path      d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>'}),kw=Ft.define("chess.BishopBlack",{size:{width:38,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path       d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"       style="fill:none; stroke:#ffffff; stroke-linejoin:miter;" />  </g></g></g>'}),Ow=Ft.define("chess.KnightWhite",{size:{width:38,height:37}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#000000; stroke:#000000;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#000000; stroke:#000000;" />  </g></g></g>'}),Ew=Ft.define("chess.KnightBlack",{size:{width:38,height:37}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#000000; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#000000; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z "      style="fill:#ffffff; stroke:none;" />  </g></g></g>'}),zw=Ft.define("chess.PawnWhite",{size:{width:28,height:33}},{markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>'}),Gw=Ft.define("chess.PawnBlack",{size:{width:28,height:33}},{markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>'});var Uh={};Me(Uh,{Attribute:()=>Vs,Derived:()=>jw,Entity:()=>cI,ISA:()=>Uw,IdentifyingRelationship:()=>Rw,Key:()=>Ww,Line:()=>Fw,Multivalued:()=>Zw,Normal:()=>Yw,Relationship:()=>fI,WeakEntity:()=>Bw});var cI=le.define("erd.Entity",{size:{width:150,height:60},attrs:{".outer":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"100,0 100,60 0,60 0,0"},".inner":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"95,5 95,55 5,55 5,5",display:"none"},text:{text:"Entity","font-family":"Arial","font-size":14,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>'}),Bw=cI.define("erd.WeakEntity",{attrs:{".inner":{display:"auto"},text:{text:"Weak Entity"}}}),fI=le.define("erd.Relationship",{size:{width:80,height:80},attrs:{".outer":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,0 80,40 40,80 0,40"},".inner":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,5 75,40 40,75 5,40",display:"none"},text:{text:"Relationship","font-family":"Arial","font-size":12,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>'}),Rw=fI.define("erd.IdentifyingRelationship",{attrs:{".inner":{display:"auto"},text:{text:"Identifying"}}}),Vs=le.define("erd.Attribute",{size:{width:100,height:50},attrs:{ellipse:{transform:"translate(50, 25)"},".outer":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:50,ry:25,fill:"#E67E22"},".inner":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:45,ry:20,fill:"#E67E22",display:"none"},text:{"font-family":"Arial","font-size":14,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse class="outer"/><ellipse class="inner"/></g><text/></g>'}),Zw=Vs.define("erd.Multivalued",{attrs:{".inner":{display:"block"},text:{text:"multivalued"}}}),jw=Vs.define("erd.Derived",{attrs:{".outer":{"stroke-dasharray":"3,5"},text:{text:"derived"}}}),Ww=Vs.define("erd.Key",{attrs:{ellipse:{"stroke-width":4},text:{text:"key","font-weight":"800","text-decoration":"underline"}}}),Yw=Vs.define("erd.Normal",{attrs:{text:{text:"Normal"}}}),Uw=le.define("erd.ISA",{type:"erd.ISA",size:{width:100,height:50},attrs:{polygon:{points:"0,0 50,50 100,0",fill:"#F1C40F",stroke:"#F39C12","stroke-width":2},text:{text:"ISA","font-size":18,"ref-x":.5,"ref-y":.3,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'}),Fw=ae.define("erd.Line",{},{cardinality:function(t){this.set("labels",[{position:-20,attrs:{text:{dy:-8,text:t}}}])}});var Fh={};Me(Fh,{Arrow:()=>Hw,EndState:()=>Xw,StartState:()=>Vw,State:()=>_w});var _w=_s.define("fsa.State",{attrs:{circle:{"stroke-width":3},text:{"font-weight":"800"}}}),Vw=le.define("fsa.StartState",{size:{width:20,height:20},attrs:{circle:{transform:"translate(10, 10)",r:10,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g></g>'}),Xw=le.define("fsa.EndState",{size:{width:20,height:20},attrs:{".outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#000000"},".inner":{transform:"translate(10, 10)",r:6,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>'}),Hw=ae.define("fsa.Arrow",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}},smooth:!0});var _h={};Me(_h,{Arrow:()=>Qw,Member:()=>Jw});var Jw=le.define("org.Member",{size:{width:180,height:70},attrs:{rect:{width:170,height:60},".card":{fill:"#FFFFFF",stroke:"#000000","stroke-width":2,"pointer-events":"visiblePainted",rx:10,ry:10},image:{width:48,height:48,ref:".card","ref-x":10,"ref-y":5},".rank":{"text-decoration":"underline",ref:".card","ref-x":.9,"ref-y":.2,"font-family":"Courier New","font-size":14,"text-anchor":"end"},".name":{"font-weight":"800",ref:".card","ref-x":.9,"ref-y":.6,"font-family":"Courier New","font-size":14,"text-anchor":"end"}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="card"/><image/></g><text class="rank"/><text class="name"/></g>'}),Qw=ae.define("org.Arrow",{source:{selector:".card"},target:{selector:".card"},attrs:{".connection":{stroke:"#585858","stroke-width":3}},z:-1});var Vh={};Me(Vh,{Link:()=>tb,Place:()=>Kw,PlaceView:()=>qw,Transition:()=>$w});var Kw=Ft.define("pn.Place",{size:{width:50,height:50},attrs:{".root":{r:25,fill:"#ffffff",stroke:"#000000",transform:"translate(25, 25)"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:".root",fill:"#000000","font-size":12},".tokens > circle":{fill:"#000000",r:5},".tokens.one > circle":{transform:"translate(25, 25)"},".tokens.two > circle:nth-child(1)":{transform:"translate(19, 25)"},".tokens.two > circle:nth-child(2)":{transform:"translate(31, 25)"},".tokens.three > circle:nth-child(1)":{transform:"translate(18, 29)"},".tokens.three > circle:nth-child(2)":{transform:"translate(25, 19)"},".tokens.three > circle:nth-child(3)":{transform:"translate(32, 29)"},".tokens.alot > text":{transform:"translate(25, 18)","text-anchor":"middle",fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="root"/><g class="tokens" /></g><text class="label"/></g>'}),qw=we.extend({presentationAttributes:we.addPresentationAttributes({tokens:["TOKENS"]}),initFlag:we.prototype.initFlag.concat(["TOKENS"]),confirmUpdate:function(...t){let e=we.prototype.confirmUpdate.call(this,...t);return this.hasFlag(e,"TOKENS")&&(this.renderTokens(),this.update(),e=this.removeFlag(e,"TOKENS")),e},renderTokens:function(){let t=this.vel.findOne(".tokens").empty();["one","two","three","alot"].forEach(function(r){t.removeClass(r)});var e=this.model.get("tokens");if(e)switch(e){case 1:t.addClass("one"),t.append(tt("circle"));break;case 2:t.addClass("two"),t.append([tt("circle"),tt("circle")]);break;case 3:t.addClass("three"),t.append([tt("circle"),tt("circle"),tt("circle")]);break;default:t.addClass("alot"),t.append(tt("text").text(e+""));break}}}),$w=Ft.define("pn.Transition",{size:{width:12,height:50},attrs:{rect:{width:12,height:50,fill:"#000000",stroke:"#000000"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:"rect",fill:"#000000","font-size":12}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="root"/></g></g><text class="label"/>'}),tb=ae.define("pn.Link",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}}});var Jh={};Me(Jh,{Abstract:()=>eb,AbstractView:()=>rb,Aggregation:()=>ab,Association:()=>ub,Class:()=>Xh,ClassView:()=>Hh,Composition:()=>lb,EndState:()=>hb,Generalization:()=>ob,Implementation:()=>sb,Interface:()=>nb,InterfaceView:()=>ib,StartState:()=>fb,State:()=>cb,Transition:()=>db});var Xh=Ft.define("uml.Class",{attrs:{rect:{width:200},".uml-class-name-rect":{stroke:"black","stroke-width":2,fill:"#3498db"},".uml-class-attrs-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-methods-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-name-text":{ref:".uml-class-name-rect","ref-y":.5,"ref-x":.5,"text-anchor":"middle","y-alignment":"middle","font-weight":"bold",fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-attrs-text":{ref:".uml-class-attrs-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-methods-text":{ref:".uml-class-methods-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"}},name:[],attributes:[],methods:[]},{markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-class-name-rect"/><rect class="uml-class-attrs-rect"/><rect class="uml-class-methods-rect"/>',"</g>",'<text class="uml-class-name-text"/><text class="uml-class-attrs-text"/><text class="uml-class-methods-text"/>',"</g>"].join(""),initialize:function(){this.on("change:name change:attributes change:methods",function(){this.updateRectangles(),this.trigger("uml-update")},this),this.updateRectangles(),Ft.prototype.initialize.apply(this,arguments)},getClassName:function(){return this.get("name")},updateRectangles:function(){var t=this.get("attrs"),e=[{type:"name",text:this.getClassName()},{type:"attrs",text:this.get("attributes")},{type:"methods",text:this.get("methods")}],r=0;e.forEach(function(n){var i=Array.isArray(n.text)?n.text:[n.text],o=i.length*20+20;t[".uml-class-"+n.type+"-text"].text=i.join(`
`),t[".uml-class-"+n.type+"-rect"].height=o,t[".uml-class-"+n.type+"-rect"].transform="translate(0,"+r+")",r+=o})}}),Hh=we.extend({initialize:function(){we.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"uml-update",function(){this.update(),this.resize()})}}),eb=Xh.define("uml.Abstract",{attrs:{".uml-class-name-rect":{fill:"#e74c3c"},".uml-class-attrs-rect":{fill:"#c0392b"},".uml-class-methods-rect":{fill:"#c0392b"}}},{getClassName:function(){return["<<Abstract>>",this.get("name")]}}),rb=Hh,nb=Xh.define("uml.Interface",{attrs:{".uml-class-name-rect":{fill:"#f1c40f"},".uml-class-attrs-rect":{fill:"#f39c12"},".uml-class-methods-rect":{fill:"#f39c12"}}},{getClassName:function(){return["<<Interface>>",this.get("name")]}}),ib=Hh,ob=ae.define("uml.Generalization",{attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"}}}),sb=ae.define("uml.Implementation",{attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"},".connection":{"stroke-dasharray":"3,3"}}}),ab=ae.define("uml.Aggregation",{attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"white"}}}),lb=ae.define("uml.Composition",{attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"black"}}}),ub=ae.define("uml.Association"),cb=Ft.define("uml.State",{attrs:{".uml-state-body":{width:200,height:200,rx:10,ry:10,fill:"#ecf0f1",stroke:"#bdc3c7","stroke-width":3},".uml-state-separator":{stroke:"#bdc3c7","stroke-width":2},".uml-state-name":{ref:".uml-state-body","ref-x":.5,"ref-y":5,"text-anchor":"middle",fill:"#000000","font-family":"Courier New","font-size":14},".uml-state-events":{ref:".uml-state-separator","ref-x":5,"ref-y":5,fill:"#000000","font-family":"Courier New","font-size":14}},name:"State",events:[]},{markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-state-body"/>',"</g>",'<path class="uml-state-separator"/>','<text class="uml-state-name"/>','<text class="uml-state-events"/>',"</g>"].join(""),initialize:function(){this.on({"change:name":this.updateName,"change:events":this.updateEvents,"change:size":this.updatePath},this),this.updateName(),this.updateEvents(),this.updatePath(),Ft.prototype.initialize.apply(this,arguments)},updateName:function(){this.attr(".uml-state-name/text",this.get("name"))},updateEvents:function(){this.attr(".uml-state-events/text",this.get("events").join(`
`))},updatePath:function(){var t="M 0 20 L "+this.get("size").width+" 20";this.attr(".uml-state-separator/d",t,{silent:!0})}}),fb=_s.define("uml.StartState",{type:"uml.StartState",attrs:{circle:{fill:"#34495e",stroke:"#2c3e50","stroke-width":2,rx:1}}}),hb=Ft.define("uml.EndState",{size:{width:20,height:20},attrs:{"circle.outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#2c3e50"},"circle.inner":{transform:"translate(10, 10)",r:6,fill:"#34495e"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>'}),db=ae.define("uml.Transition",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z",fill:"#34495e",stroke:"#2c3e50"},".connection":{stroke:"#2c3e50"}}});var hI=(()=>{let e=class e{constructor(n,i){this.renderer=n,this.platformId=i}ngAfterViewInit(){Ld(this.platformId)&&this.initializeGraph()}initializeGraph(){let n=Ni,i=new No.Graph({},{cellNamespace:n}),o=this.renderer.selectRootElement("#myPaper"),s=new No.Paper({el:o,model:i,width:600,height:400,drawGrid:!0,background:{color:"rgba(200, 200, 200, 1.0)"},gridSize:1,cellViewNamespace:n}),l=new Ni.standard.Rectangle;l.position(100,100),l.resize(100,40),l.attr({body:{fill:"white"},label:{text:"Hola",fill:"black"}});let u=new Ni.standard.Rectangle;u.position(300,100),u.resize(100,40),u.attr({body:{fill:"white"},label:{text:"Mundo",fill:"black"}});let h=new Ni.standard.Link;h.source(l),h.target(u),i.addCells([l,u,h])}};e.\u0275fac=function(i){return new(i||e)(zu(Md),zu(Nd))},e.\u0275cmp=ra({type:e,selectors:[["app-graph"]],standalone:!0,features:[na],decls:1,vars:0,consts:[["id","myPaper"]],template:function(i,o){i&1&&Ro(0,"div",0)}});let t=e;return t})();var dI=(()=>{let e=class e{constructor(){this.title="jointjs-ang-nuevo",this.colorScheme="light"}toggleColorScheme(){}applyColorScheme(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ra({type:e,selectors:[["app-root"]],standalone:!0,features:[na],decls:4,vars:0,consts:[[1,"main"]],template:function(i,o){i&1&&(Td(0,"main",0),Pd(1," Angular JointJS "),Ro(2,"app-graph"),Sd(),Ro(3,"router-outlet"))},dependencies:[zd,hI]});let t=e;return t})();var gI=[];var pI={providers:[Gd(gI),Od()]};var mb={providers:[Ed()]},mI=Dd(pI,mb);var vb=()=>kd(dI,mI),nB=vb;export{nB as a};
